EMLMaker.intelligence.module("email").register("email-no-links-found",["EMLWorkspace",function(e){var i=e.hasOwnProperty("linkData")&&0==e.linkData.length;return{id:"did-not-find-links",title:"Did not find any links",description:"Although you can export your EML without links, if you intended to     include links, you'll want to go back and make sure you've included some.     Adding links to your email campaign or newsletter helps to engage     your audience and drive traffic to your site.",type:ErrorType.Warn,severity:ErrorSeverity.High,canContinue:!0,when:function(){return i}}}]),EMLMaker.intelligence.module("email").register("email-qa-email-addresses",["EMLWorkspace","IntelligenceMonitor",function(e,i){var t=e.generateOutputCode("email",!0),n=[];if(GlobalVars.EmailRegex.test(t)){var r;do r=GlobalVars.EmailRegexGlobal.exec(t),r&&n.push(r[0]);while(r)}return{id:"confrim-contact-email-addresses",title:"Confirm correct contact information - Email address"+(n.length>1?"es":""),description:"<em>Review:</em> "+n.join(", "),type:ErrorType.QA,severity:ErrorSeverity.Medium,canContinue:!1,cta:{label:"",handler:function(){i.overridden.push("confrim-contact-email-addresses"),e.intelligence.evaluateRules()}},when:function(){return n.length>0}}}]),EMLMaker.intelligence.module("email").register("email-qa-telelphone-numbers",["EMLWorkspace","IntelligenceMonitor",function(e,i){var t=e.generateOutputCode("email",!0),n=[];if(GlobalVars.TelephoneRegex.test(t)){var r;do r=GlobalVars.TelephoneRegexGlobal.exec(t),r&&n.push(r[0]);while(r)}return{id:"confrim-telephone-numbers",title:"Confirm correct contact information - Telephone Number"+(n.length>1?"s":""),description:"<em>Review:</em> "+n.join(", "),type:ErrorType.QA,severity:ErrorSeverity.Medium,canContinue:!0,cta:{label:"",handler:function(){i.overridden.push("confrim-telephone-numbers"),e.intelligence.evaluateRules()}},when:function(){return n.length>0}}}]),EMLMaker.intelligence.module("email").register("email-zoom-fix-code",["EMLWorkspace",function(e){return{id:"zoom-fix-code-not-detected",title:"Zoom fix code not detected",description:"Your email might not display correctly in MS Outlook on Windows 10 or displays with resolutions set higher than 96 pixels per inch",type:ErrorType.BestPractice,severity:ErrorSeverity.High,canContinue:!0,cta:{label:"",handler:function(){}},when:function(){var i=!1,t=e.generateOutputCode("email",!0);return["<o:OfficeDocumentSettings","<o:AllowPNG","<o:PixelsPerInch"].forEach(function(e){var n=new RegExp(e,"gi");n.test(t)||(i=!0)}),i}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-alt-tag-required",["LinkObject",function(e){return{title:"ALT tag on image required",description:"Linked image should have an ALT tag.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return e.LinkedImage&&(void 0===e.LinkedImage.alt||""==e.LinkedImage.alt)}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-duplicate-query-strings",["LinkObject",function(e){var i,t=e.hasDuplicateQueryStrings();return t.length>0&&(i=t.join()),{title:"Duplicate query strings",description:"It looks like you have duplicate query strings.     When you have duplicate parameters, only one will be valid,     so make sure to remove the incorrect or duplicate parameters.     Pay attention to these parameters: "+i,type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:"Open editor",handler:function(){e.showQueryStringEditor=!0}},when:function(){return e["new"].searchParams.entries.length>0&&t}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-image-relative-path",["LinkObject",function(e){return{title:"Linked image URL is relative",description:"The image is probably stored on your computer or the image is broken.     Images in emails should only be referenced by absolute URLs.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return e.LinkedImage&&!/^http/.test(e.LinkedImage.src)}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-image-size-props",["LinkObject",function(e){var i=[],t="",n=!0;if(e.LinkedImage){var r=e.context.match(/\<img([^>].*?)\>/);r.length>0&&(/height\=\"[0-9]{1,5}\"/g.test(r[0])||i.push("height"),/width\=\"[0-9]{1,5}\"/g.test(r[0])||i.push("width")),i.length>0&&(n=!1,t=void 0==e.LinkedImage.height||void 0==e.LinkedImage.width?"<em>Will be calculated based on linked image's actual size when you push the button.</em>":"height="+e.LinkedImage.height+" width="+e.LinkedImage.width)}return{title:"Images require explicitly defined size properities",description:"This image does not have an explicitly defined "+i.join(" or ")+" property.     Make sure the code is updated or there may be display or layout issues. ",suggestion:t,type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:"Update to calculated size",handler:function(){for(var t=0;t<i.length;t++)e.context=e.context.replace(/\<img/g,"<img "+i[t]+'="'+e.LinkedImage[i[t]]+'"');e.isLinkComplete()}},when:function(){return!n}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-image-size",["LinkObject",function(e){var i,t,n=!1;return e.LinkedImage&&e.LinkedImage.width&&e.LinkedImage.height&&(i=e.LinkedImage.width,t=e.LinkedImage.height,(parseInt(e.LinkedImage.width)<44||parseInt(e.LinkedImage.height)<44)&&(n=!0)),{title:"Linked image might be too small",description:(n?"The linked image is <strong>"+i+"x"+t+"px</strong>. ":"")+"Generally, youâ€™ll want to keep calls-to-action big enough for even large thumbs to easily tap.     Apple suggests making touch targets at least 44 pixels square.     Smaller images may be a problem for touch screen devices, particularly those with high screen resolutions.",type:ErrorType.BestPractice,severity:ErrorSeverity.High,resource:"https://www.lukew.com/ff/entry.asp?1085",canContinue:!0,when:function(){return n}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-is-valid-mailto",["LinkObject",function(e){return{title:"Invalid email address",description:"Fix invalid email address.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return e.isLinkType("mailto")&&e.mailto.has("email")&&!e.mailto.isValidEmailAddress()}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-is-valid-url",["LinkObject",function(e){return{title:"Invalid URL",description:"This is not a valid URL",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return!e.isLinkType("mailto")&&!e["new"].isValid()}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-jump-links",["LinkObject",function(e){return{title:"Jumplinks in Emails",description:"It looks like you're trying to send traffic to a\n    <em>Jump link</em> AKA <em>Anchor link</em>. The only\n    time that is acceptible is when the destination is on\n    the same page. You see, the assumption is that all the content is\n    loaded, but when you click from an email into another page with a\n    jump link, you're sending someone to a loading page. The page may or\n    may not send them to the location you're intending, or there\n    may be an awkward user experience.",type:ErrorType.Suggestion,severity:ErrorSeverity.Low,canContinue:!0,cta:{label:'<i class="wizard icon"></i> Fix it',handler:function(){e["new"].hash="",e.isLinkComplete(),window.ga("send","event","Suggestion","Remove Anchor Link","Remove Anchor Link")}},when:function(){return""!==e["new"].hash&&"#"!==e["new"].hash}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-mailto-link-matches-context",["LinkObject",function(e){return{title:"Looks like your label doesn't match the email address.",description:"It looks like you have a link to an email address that does not match the link label. This is misleading and could be confusing, so you need to make sure that they match.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:'<i class="wizard icon"></i>Update label',handler:function(){e.context=e.context.replace(/\>(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\<\//g,">"+e.mailto.email+"</"),e._super.overriddenIds.indexOf("custom-confrim-contact-email-addresses")>-1&&e._super.overriddenIds.splice(e._super.overriddenIds.indexOf("custom-confrim-contact-email-addresses"),1),e.isLinkComplete(),window.ga("send","event","Fix","Update label",e._super._defaultSCode)}},when:function(){return e.isLinkType("mailto")&&function(){var i=window.jQuery(e.context).text().trim();return i.indexOf("@")>-1&&e.mailto.email!==i.substr(0,e.mailto.email.length)}()}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-mailto-subject-line",["LinkObject",function(e){return{title:"Always include a subject line.",description:"You can add a subject line using the Editor button.",type:ErrorType.BestPractice,severity:ErrorSeverity.Medium,canContinue:!0,cta:{label:'<i class="wizard icon"></i> Open Editor',handler:function(){e.mailto.openEditor(),window.ga("send","event","Best Practice","Add subject line","Add subject line")}},when:function(){return e.isLinkType("mailto")&&!e.mailto.has("subject")}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-missing-content",["LinkObject",function(e){var i=window.jQuery(e.context).text(),t=!(0!=window.jQuery(e.context).find("[elqtype]").length||0!=window.jQuery(e.context).find("img").length||""!=i.trim()||e.hasOwnProperty("deleteOnRender")&&e.deleteOnRender);return{title:"Missing content",description:"This link doesn't contain any text or image.\n    This might be a mistake; you can remove it\n    from the code, or by clicking the button to the\n    right, and this link will be removed when you export the code.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:'<i class="trash icon"></i> Remove link',handler:function(){e["new"].url="",e.deleteOnRender=!0,e.isLinkComplete()}},when:function(){return t}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-remove-title-tag",["LinkObject",function(e){return{title:"Remove title tag",description:"Links in emails shouldn't use title tags. This causes issues with accessibility for screen readers, but also can misrepresent links.",type:ErrorType.BestPractice,severity:ErrorSeverity.Medium,canContinue:!0,when:function(){return GlobalVars.LinkHasTitleTagRegexGlobal.test(e.context)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVtYWlsLW5vLWxpbmtzLWZvdW5kLnRzIiwiZW1haWwtcWEtZW1haWwtYWRkcmVzc2VzLnRzIiwiZW1haWwtcWEtdGVsZWxwaG9uZS1udW1iZXJzLnRzIiwiZW1haWwtem9vbS1maXgtY29kZS50cyIsImh5cGVybGluay1hbHQtdGFnLXJlcXVpcmVkLnRzIiwiaHlwZXJsaW5rLWR1cGxpY2F0ZS1xdWVyeS1zdHJpbmdzLnRzIiwiaHlwZXJsaW5rLWltYWdlLXJlbGF0aXZlLXBhdGgudHMiLCJoeXBlcmxpbmstaW1hZ2Utc2l6ZS1wcm9wcy50cyIsImh5cGVybGluay1pbWFnZS1zaXplLnRzIiwiaHlwZXJsaW5rLWlzLXZhbGlkLW1haWx0by50cyIsImh5cGVybGluay1pcy12YWxpZC11cmwudHMiLCJoeXBlcmxpbmstanVtcC1saW5rcy50cyIsImh5cGVybGluay1tYWlsdG8tbGluay1tYXRjaGVzLWNvbnRleHQudHMiLCJoeXBlcmxpbmstbWFpbHRvLXN1YmplY3QtbGluZS50cyIsImh5cGVybGluay1taXNzaW5nLWNvbnRlbnQudHMiLCJoeXBlcmxpbmstcmVtb3ZlLXRpdGxlLXRhZy50cyJdLCJuYW1lcyI6WyJFTUxNYWtlciIsImludGVsbGlnZW5jZSIsIm1vZHVsZSIsInJlZ2lzdGVyIiwiRU1MV29ya3NwYWNlIiwicHJvY2VlZCIsImhhc093blByb3BlcnR5IiwibGlua0RhdGEiLCJsZW5ndGgiLCJpZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiRXJyb3JUeXBlIiwiV2FybiIsInNldmVyaXR5IiwiRXJyb3JTZXZlcml0eSIsIkhpZ2giLCJjYW5Db250aW51ZSIsIndoZW4iLCJJbnRlbGxpZ2VuY2VNb25pdG9yIiwib3V0cHV0Q29kZSIsImdlbmVyYXRlT3V0cHV0Q29kZSIsInJlc3VsdHMiLCJHbG9iYWxWYXJzIiwiRW1haWxSZWdleCIsInRlc3QiLCJtIiwiRW1haWxSZWdleEdsb2JhbCIsImV4ZWMiLCJwdXNoIiwiam9pbiIsIlFBIiwiTWVkaXVtIiwiY3RhIiwibGFiZWwiLCJoYW5kbGVyIiwib3ZlcnJpZGRlbiIsImV2YWx1YXRlUnVsZXMiLCJUZWxlcGhvbmVSZWdleCIsIlRlbGVwaG9uZVJlZ2V4R2xvYmFsIiwiQmVzdFByYWN0aWNlIiwib3V0cHV0IiwiZm9yRWFjaCIsIml0ZW0iLCJyZSIsIlJlZ0V4cCIsIkxpbmtPYmplY3QiLCJGaXgiLCJMaW5rZWRJbWFnZSIsInVuZGVmaW5lZCIsImFsdCIsInBhcmFtIiwiaGFzRHVwbGljYXRlUXVlcnlTdHJpbmdzIiwic2hvd1F1ZXJ5U3RyaW5nRWRpdG9yIiwic2VhcmNoUGFyYW1zIiwiZW50cmllcyIsInNyYyIsImNyaXRpY2FsSXRlbXMiLCJzdWdnZXN0aW9uIiwiZm91bmQiLCJjb250ZXh0IiwibWF0Y2giLCJoZWlnaHQiLCJ3aWR0aCIsImkiLCJyZXBsYWNlIiwiaXNMaW5rQ29tcGxldGUiLCJwYXJzZUludCIsInJlc291cmNlIiwiaXNMaW5rVHlwZSIsIm1haWx0byIsImhhcyIsImlzVmFsaWRFbWFpbEFkZHJlc3MiLCJpc1ZhbGlkIiwiU3VnZ2VzdGlvbiIsIkxvdyIsImhhc2giLCJ3aW5kb3ciLCJnYSIsImVtYWlsIiwiX3N1cGVyIiwib3ZlcnJpZGRlbklkcyIsImluZGV4T2YiLCJzcGxpY2UiLCJfZGVmYXVsdFNDb2RlIiwialF1ZXJ5IiwidGV4dCIsInRyaW0iLCJzdWJzdHIiLCJvcGVuRWRpdG9yIiwialF1ZXJ5Q29udGV4dCIsImZpbmQiLCJkZWxldGVPblJlbmRlciIsInVybCIsIkxpbmtIYXNUaXRsZVRhZ1JlZ2V4R2xvYmFsIl0sIm1hcHBpbmdzIjoiQUFBQUEsU0FBU0MsYUFBYUMsT0FBTyxTQUFTQyxTQUNwQyx3QkFDQSxlQUFnQixTQUFTQyxHQUd6QixHQUFJQyxHQUFXRCxFQUFhRSxlQUFlLGFBQThDLEdBQS9CRixFQUFhRyxTQUFTQyxNQUNoRixRQUNFQyxHQUFJLHFCQUNKQyxNQUFPLHlCQUNQQyxZQUFhLDJRQUliQyxLQUFNQyxVQUFVQyxLQUNoQkMs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RCxhQUFhLFNBQVM0QyxHQUd0QixPQUVFckMsTUFBTyxtQkFDUEMsWUFBWSx1SUFDWkMsS0FBTUMsVUFBVTRCLGFBQ2hCMUIsU0FBVUMsY0FBY2lCLE9BRXhCZixhQUFhLEVBUWJDLEtBQU0sV0FDSixNQUFPSyxZQUFXdUUsMkJBQTJCckUsS0FBS3FCLEVBQVdjIiwiZmlsZSI6ImVtbC1pbnRlbGxpZ2VuY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiZW1haWxcIikucmVnaXN0ZXIoXG4gIFwiZW1haWwtbm8tbGlua3MtZm91bmRcIixbXG4gIFwiRU1MV29ya3NwYWNlXCIsIGZ1bmN0aW9uKEVNTFdvcmtzcGFjZSl7XG5cblxuICBsZXQgcHJvY2VlZCA9ICBFTUxXb3Jrc3BhY2UuaGFzT3duUHJvcGVydHkoXCJsaW5rRGF0YVwiKSAmJiBFTUxXb3Jrc3BhY2UubGlua0RhdGEubGVuZ3RoID09MDtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJkaWQtbm90LWZpbmQtbGlua3NcIixcbiAgICB0aXRsZTogXCJEaWQgbm90IGZpbmQgYW55IGxpbmtzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQWx0aG91Z2ggeW91IGNhbiBleHBvcnQgeW91ciBFTUwgd2l0aG91dCBsaW5rcywgaWYgeW91IGludGVuZGVkIHRvIFxcXG4gICAgaW5jbHVkZSBsaW5rcywgeW91J2xsIHdhbnQgdG8gZ28gYmFjayBhbmQgbWFrZSBzdXJlIHlvdSd2ZSBpbmNsdWRlZCBzb21lLiBcXFxuICAgIEFkZGluZyBsaW5rcyB0byB5b3VyIGVtYWlsIGNhbXBhaWduIG9yIG5ld3NsZXR0ZXIgaGVscHMgdG8gZW5nYWdlIFxcXG4gICAgeW91ciBhdWRpZW5jZSBhbmQgZHJpdmUgdHJhZmZpYyB0byB5b3VyIHNpdGUuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLldhcm4sXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICAvLyBjdGE6IHtcbiAgICAvLyAgIGxhYmVsOiBcIlwiLFxuICAgIC8vICAgaGFuZGxlcjogZnVuY3Rpb24oKXt9XG4gICAgLy8gfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHByb2NlZWQ7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJlbWFpbFwiKS5yZWdpc3RlcihcbiAgXCJlbWFpbC1xYS1lbWFpbC1hZGRyZXNzZXNcIixcbiAgW1wiRU1MV29ya3NwYWNlXCIsXCJJbnRlbGxpZ2VuY2VNb25pdG9yXCIsIGZ1bmN0aW9uKEVNTFdvcmtzcGFjZSwgSW50ZWxsaWdlbmNlTW9uaXRvcil7XG5cbiAgICAvL2RvIHRoZSBjb2RlIGhlcmU7XG4gICAgbGV0IG91dHB1dENvZGUgPSBFTUxXb3Jrc3BhY2UuZ2VuZXJhdGVPdXRwdXRDb2RlKFwiZW1haWxcIiwgdHJ1ZSk7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBpZihHbG9iYWxWYXJzLkVtYWlsUmVnZXgudGVzdChvdXRwdXRDb2RlKSl7XG4gICAgICB2YXIgbTtcbiAgICAgIGRvIHtcbiAgICAgICAgbSA9IEdsb2JhbFZhcnMuRW1haWxSZWdleEdsb2JhbC5leGVjKG91dHB1dENvZGUpO1xuICAgICAgICBpZiAobSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobVswXSk7XG4gICAgICAgIC8vY29uc29sZS5sb2cobVsxXSwgbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKG0pO1xuICAgIH1cblxuXG4gIHJldHVybiB7XG4gICAgaWQ6IFwiY29uZnJpbS1jb250YWN0LWVtYWlsLWFkZHJlc3Nlc1wiLFxuICAgIHRpdGxlOiBcIkNvbmZpcm0gY29ycmVjdCBjb250YWN0IGluZm9ybWF0aW9uIC0gRW1haWwgYWRkcmVzc1wiKyAoIHJlc3VsdHMubGVuZ3RoPjEgPyBcImVzXCIgOiBcIlwiKSxcbiAgICBkZXNjcmlwdGlvbjogXCI8ZW0+UmV2aWV3OjwvZW0+IFwiICsgcmVzdWx0cy5qb2luKFwiLCBcIiksXG4gICAgdHlwZTogRXJyb3JUeXBlLlFBLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5Lk1lZGl1bSxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCJcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIEludGVsbGlnZW5jZU1vbml0b3Iub3ZlcnJpZGRlbi5wdXNoKFwiY29uZnJpbS1jb250YWN0LWVtYWlsLWFkZHJlc3Nlc1wiKTtcbiAgICAgICAgRU1MV29ya3NwYWNlLmludGVsbGlnZW5jZS5ldmFsdWF0ZVJ1bGVzKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoPjA7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJlbWFpbFwiKS5yZWdpc3RlcihcImVtYWlsLXFhLXRlbGVscGhvbmUtbnVtYmVyc1wiLFtcbiAgXCJFTUxXb3Jrc3BhY2VcIixcIkludGVsbGlnZW5jZU1vbml0b3JcIiwgZnVuY3Rpb24oRU1MV29ya3NwYWNlLEludGVsbGlnZW5jZU1vbml0b3Ipe1xuXG4gICAgLy9kbyB0aGUgY29kZSBoZXJlO1xuICAgIGxldCBvdXRwdXRDb2RlID0gRU1MV29ya3NwYWNlLmdlbmVyYXRlT3V0cHV0Q29kZShcImVtYWlsXCIsIHRydWUpO1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgaWYoR2xvYmFsVmFycy5UZWxlcGhvbmVSZWdleC50ZXN0KG91dHB1dENvZGUpKXtcbiAgICAgIHZhciBtO1xuICAgICAgZG8ge1xuICAgICAgICBtID0gR2xvYmFsVmFycy5UZWxlcGhvbmVSZWdleEdsb2JhbC5leGVjKG91dHB1dENvZGUpO1xuICAgICAgICBpZiAobSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobVswXSk7XG4gICAgICAgIC8vY29uc29sZS5sb2cobVsxXSwgbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKG0pO1xuICAgIH1cblxuXG4gIHJldHVybiB7XG4gICAgaWQ6IFwiY29uZnJpbS10ZWxlcGhvbmUtbnVtYmVyc1wiLFxuICAgIHRpdGxlOiBcIkNvbmZpcm0gY29ycmVjdCBjb250YWN0IGluZm9ybWF0aW9uIC0gVGVsZXBob25lIE51bWJlclwiICsgKHJlc3VsdHMubGVuZ3RoPjE/XCJzXCI6XCJcIiksXG4gICAgZGVzY3JpcHRpb246IFwiPGVtPlJldmlldzo8L2VtPiBcIiArIHJlc3VsdHMuam9pbihcIiwgXCIpLFxuICAgIHR5cGU6IEVycm9yVHlwZS5RQSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5NZWRpdW0sXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCJcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIEludGVsbGlnZW5jZU1vbml0b3Iub3ZlcnJpZGRlbi5wdXNoKFwiY29uZnJpbS10ZWxlcGhvbmUtbnVtYmVyc1wiKTtcbiAgICAgICAgRU1MV29ya3NwYWNlLmludGVsbGlnZW5jZS5ldmFsdWF0ZVJ1bGVzKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoPjA7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJlbWFpbFwiKS5yZWdpc3RlcihcImVtYWlsLXpvb20tZml4LWNvZGVcIixbXG4gIFwiRU1MV29ya3NwYWNlXCIsZnVuY3Rpb24oRU1MV29ya3NwYWNlKXtcblxuICByZXR1cm4ge1xuICAgIGlkOiBcInpvb20tZml4LWNvZGUtbm90LWRldGVjdGVkXCIsXG4gICAgdGl0bGU6IFwiWm9vbSBmaXggY29kZSBub3QgZGV0ZWN0ZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJZb3VyIGVtYWlsIG1pZ2h0IG5vdCBkaXNwbGF5IGNvcnJlY3RseSBpbiBNUyBPdXRsb29rIG9uIFdpbmRvd3MgMTAgb3IgZGlzcGxheXMgd2l0aCByZXNvbHV0aW9ucyBzZXQgaGlnaGVyIHRoYW4gOTYgcGl4ZWxzIHBlciBpbmNoXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiB0cnVlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiXCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICAvLyBFbWFpbEFJLm92ZXJyaWRkZW4ucHVzaChcImN1c3RvbS16b29tLWZpeC1jb2RlLW5vdC1kZXRlY3RlZFwiKTtcblxuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBvdXRwdXQgPSBmYWxzZTtcbiAgICAgIGxldCBvdXRwdXRDb2RlID0gRU1MV29ya3NwYWNlLmdlbmVyYXRlT3V0cHV0Q29kZShcImVtYWlsXCIsIHRydWUpO1xuICAgICAgW1wiPG86T2ZmaWNlRG9jdW1lbnRTZXR0aW5nc1wiLFwiPG86QWxsb3dQTkdcIixcIjxvOlBpeGVsc1BlckluY2hcIl0uZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgbGV0IHJlID0gbmV3IFJlZ0V4cChpdGVtLCBcImdpXCIpO1xuICAgICAgICBpZighcmUudGVzdChvdXRwdXRDb2RlKSl7XG4gICAgICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWFsdC10YWctcmVxdWlyZWRcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogIFwiQUxUIHRhZyBvbiBpbWFnZSByZXF1aXJlZFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkxpbmtlZCBpbWFnZSBzaG91bGQgaGF2ZSBhbiBBTFQgdGFnLlwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5GaXgsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBMaW5rT2JqZWN0LkxpbmtlZEltYWdlICYmIChMaW5rT2JqZWN0LkxpbmtlZEltYWdlLmFsdD09PXVuZGVmaW5lZHx8TGlua09iamVjdC5MaW5rZWRJbWFnZS5hbHQ9PVwiXCIpO1xuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWR1cGxpY2F0ZS1xdWVyeS1zdHJpbmdzXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcbnZhciBwYXJhbTtcbnZhciBwcm9jZWVkID0gTGlua09iamVjdC5oYXNEdXBsaWNhdGVRdWVyeVN0cmluZ3MoKTtcbmlmKHByb2NlZWQubGVuZ3RoPjApIHtcbiAgcGFyYW0gPSBwcm9jZWVkLmpvaW4oKTtcbn1cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJEdXBsaWNhdGUgcXVlcnkgc3RyaW5nc1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkl0IGxvb2tzIGxpa2UgeW91IGhhdmUgZHVwbGljYXRlIHF1ZXJ5IHN0cmluZ3MuIFxcXG4gICAgV2hlbiB5b3UgaGF2ZSBkdXBsaWNhdGUgcGFyYW1ldGVycywgb25seSBvbmUgd2lsbCBiZSB2YWxpZCwgXFxcbiAgICBzbyBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBpbmNvcnJlY3Qgb3IgZHVwbGljYXRlIHBhcmFtZXRlcnMuXFxcbiAgICAgUGF5IGF0dGVudGlvbiB0byB0aGVzZSBwYXJhbWV0ZXJzOiBcIiArIHBhcmFtLFxuICAgIHR5cGU6IEVycm9yVHlwZS5GaXgsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCJPcGVuIGVkaXRvclwiLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgTGlua09iamVjdC5zaG93UXVlcnlTdHJpbmdFZGl0b3IgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZW50cmllcy5sZW5ndGg+MCAmJiBwcm9jZWVkXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstaW1hZ2UtcmVsYXRpdmUtcGF0aFwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkxpbmtlZCBpbWFnZSBVUkwgaXMgcmVsYXRpdmVcIixcbiAgICBkZXNjcmlwdGlvbjpcIlRoZSBpbWFnZSBpcyBwcm9iYWJseSBzdG9yZWQgb24geW91ciBjb21wdXRlciBvciB0aGUgaW1hZ2UgaXMgYnJva2VuLiBcXFxuICAgIEltYWdlcyBpbiBlbWFpbHMgc2hvdWxkIG9ubHkgYmUgcmVmZXJlbmNlZCBieSBhYnNvbHV0ZSBVUkxzLlwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5GaXgsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBMaW5rT2JqZWN0LkxpbmtlZEltYWdlICYmICEvXmh0dHAvLnRlc3QoTGlua09iamVjdC5MaW5rZWRJbWFnZS5zcmMpXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstaW1hZ2Utc2l6ZS1wcm9wc1wiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG4gICAgdmFyIGNyaXRpY2FsSXRlbXMgPSBbXSwgc3VnZ2VzdGlvbj1cIlwiO1xuICAgIHZhciBwcm9jZWVkID0gdHJ1ZTtcbiAgICBpZihMaW5rT2JqZWN0LkxpbmtlZEltYWdlKXtcbiAgICAgIC8vIHZhciBjcml0aWNhbEl0ZW1zID0gW107XG4gICAgICB2YXIgZm91bmQgPSBMaW5rT2JqZWN0LmNvbnRleHQubWF0Y2goL1xcPGltZyhbXj5dLio/KVxcPi8pO1xuICAgICAgaWYoZm91bmQubGVuZ3RoPjApe1xuICAgICAgICBpZighL2hlaWdodFxcPVxcXCJbMC05XXsxLDV9XFxcIi9nLnRlc3QoZm91bmRbMF0pKSBjcml0aWNhbEl0ZW1zLnB1c2goXCJoZWlnaHRcIik7XG4gICAgICAgIGlmKCEvd2lkdGhcXD1cXFwiWzAtOV17MSw1fVxcXCIvZy50ZXN0KGZvdW5kWzBdKSkgY3JpdGljYWxJdGVtcy5wdXNoKFwid2lkdGhcIik7XG4gICAgICB9XG4gICAgICBpZihjcml0aWNhbEl0ZW1zLmxlbmd0aD4wKXtcbiAgICAgICAgcHJvY2VlZCA9IGZhbHNlO1xuICAgICAgICBpZihMaW5rT2JqZWN0LkxpbmtlZEltYWdlLmhlaWdodD09IHVuZGVmaW5lZCB8fCBMaW5rT2JqZWN0LkxpbmtlZEltYWdlLndpZHRoID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1Z2dlc3Rpb24gPSBcIjxlbT5XaWxsIGJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gbGlua2VkIGltYWdlJ3MgYWN0dWFsIHNpemUgd2hlbiB5b3UgcHVzaCB0aGUgYnV0dG9uLjwvZW0+XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VnZ2VzdGlvbiA9IFwiaGVpZ2h0PVwiK0xpbmtPYmplY3QuTGlua2VkSW1hZ2UuaGVpZ2h0ICsgXCIgd2lkdGg9XCIgKyBMaW5rT2JqZWN0LkxpbmtlZEltYWdlLndpZHRoO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogIFwiSW1hZ2VzIHJlcXVpcmUgZXhwbGljaXRseSBkZWZpbmVkIHNpemUgcHJvcGVyaXRpZXNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJUaGlzIGltYWdlIGRvZXMgbm90IGhhdmUgYW4gZXhwbGljaXRseSBkZWZpbmVkIFwiICsgY3JpdGljYWxJdGVtcy5qb2luKFwiIG9yIFwiKSArIFwiIHByb3BlcnR5LiBcXFxuICAgIE1ha2Ugc3VyZSB0aGUgY29kZSBpcyB1cGRhdGVkIG9yIHRoZXJlIG1heSBiZSBkaXNwbGF5IG9yIGxheW91dCBpc3N1ZXMuIFwiICxcbiAgICBzdWdnZXN0aW9uOiBzdWdnZXN0aW9uLFxuICAgIHR5cGU6IEVycm9yVHlwZS5GaXgsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCJVcGRhdGUgdG8gY2FsY3VsYXRlZCBzaXplXCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICAvL3VwZGF0ZSBjb250ZXh0LlxuICAgICAgICBmb3IodmFyIGkgPTA7aTxjcml0aWNhbEl0ZW1zLmxlbmd0aDtpKyspe1xuICAgICAgICAgIExpbmtPYmplY3QuY29udGV4dCA9IExpbmtPYmplY3QuY29udGV4dC5yZXBsYWNlKC9cXDxpbWcvZywgXCI8aW1nIFwiK2NyaXRpY2FsSXRlbXNbaV0rXCI9XFxcIlwiK0xpbmtPYmplY3QuTGlua2VkSW1hZ2VbY3JpdGljYWxJdGVtc1tpXV0rXCJcXFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gIXByb2NlZWQ7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstaW1hZ2Utc2l6ZVwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cbiAgICB2YXIgd2lkdGgsIGhlaWdodDtcbiAgICB2YXIgcHJvY2VlZCA9IGZhbHNlO1xuICAgIGlmKExpbmtPYmplY3QuTGlua2VkSW1hZ2Upe1xuICAgICAgaWYoTGlua09iamVjdC5MaW5rZWRJbWFnZS53aWR0aCAmJiBMaW5rT2JqZWN0LkxpbmtlZEltYWdlLmhlaWdodCl7XG4gICAgICAgIHdpZHRoID0gTGlua09iamVjdC5MaW5rZWRJbWFnZS53aWR0aDtcbiAgICAgICAgaGVpZ2h0ID0gTGlua09iamVjdC5MaW5rZWRJbWFnZS5oZWlnaHQ7XG4gICAgICAgIGlmKHBhcnNlSW50KExpbmtPYmplY3QuTGlua2VkSW1hZ2Uud2lkdGgpPDQ0fHxwYXJzZUludChMaW5rT2JqZWN0LkxpbmtlZEltYWdlLmhlaWdodCk8NDQpe1xuICAgICAgICAgIHByb2NlZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiTGlua2VkIGltYWdlIG1pZ2h0IGJlIHRvbyBzbWFsbFwiLFxuICAgIGRlc2NyaXB0aW9uOiAocHJvY2VlZCA/IFwiVGhlIGxpbmtlZCBpbWFnZSBpcyA8c3Ryb25nPlwiICsgd2lkdGggKyBcInhcIisgaGVpZ2h0ICsgXCJweDwvc3Ryb25nPi4gXCI6IFwiXCIpICsgXCJHZW5lcmFsbHksIHlvdeKAmWxsIHdhbnQgdG8ga2VlcCBjYWxscy10by1hY3Rpb24gYmlnIGVub3VnaCBmb3IgZXZlbiBsYXJnZSB0aHVtYnMgdG8gZWFzaWx5IHRhcC4gXFxcbiAgICBBcHBsZSBzdWdnZXN0cyBtYWtpbmcgdG91Y2ggdGFyZ2V0cyBhdCBsZWFzdCA0NCBwaXhlbHMgc3F1YXJlLiBcXFxuICAgIFNtYWxsZXIgaW1hZ2VzIG1heSBiZSBhIHByb2JsZW0gZm9yIHRvdWNoIHNjcmVlbiBkZXZpY2VzLCBwYXJ0aWN1bGFybHkgdGhvc2Ugd2l0aCBoaWdoIHNjcmVlbiByZXNvbHV0aW9ucy5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuQmVzdFByYWN0aWNlLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgcmVzb3VyY2U6IFwiaHR0cHM6Ly93d3cubHVrZXcuY29tL2ZmL2VudHJ5LmFzcD8xMDg1XCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcblxuXG5cbiAgICAgIHJldHVybiBwcm9jZWVkXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstaXMtdmFsaWQtbWFpbHRvXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkludmFsaWQgZW1haWwgYWRkcmVzc1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiRml4IGludmFsaWQgZW1haWwgYWRkcmVzcy5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIC8vIGN0YToge1xuICAgIC8vICAgbGFiZWw6IFwiUmVtb3ZlIHBhcmFtZXRlclwiLFxuICAgIC8vICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInZcIik7XG4gICAgLy8gICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gTGlua09iamVjdC5pc0xpbmtUeXBlKCdtYWlsdG8nKVxuICAgICAgJiZMaW5rT2JqZWN0Lm1haWx0by5oYXMoJ2VtYWlsJylcbiAgICAgICYmIUxpbmtPYmplY3QubWFpbHRvLmlzVmFsaWRFbWFpbEFkZHJlc3MoKVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWlzLXZhbGlkLXVybFwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkludmFsaWQgVVJMXCIsXG4gICAgZGVzY3JpcHRpb246XCJUaGlzIGlzIG5vdCBhIHZhbGlkIFVSTFwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5GaXgsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiAhTGlua09iamVjdC5pc0xpbmtUeXBlKCdtYWlsdG8nKSAmJiAhTGlua09iamVjdC5uZXcuaXNWYWxpZCgpXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstanVtcC1saW5rc1wiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkp1bXBsaW5rcyBpbiBFbWFpbHNcIixcbiAgICBkZXNjcmlwdGlvbjpgSXQgbG9va3MgbGlrZSB5b3UncmUgdHJ5aW5nIHRvIHNlbmQgdHJhZmZpYyB0byBhXG4gICAgPGVtPkp1bXAgbGluazwvZW0+IEFLQSA8ZW0+QW5jaG9yIGxpbms8L2VtPi4gVGhlIG9ubHlcbiAgICB0aW1lIHRoYXQgaXMgYWNjZXB0aWJsZSBpcyB3aGVuIHRoZSBkZXN0aW5hdGlvbiBpcyBvblxuICAgIHRoZSBzYW1lIHBhZ2UuIFlvdSBzZWUsIHRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgYWxsIHRoZSBjb250ZW50IGlzXG4gICAgbG9hZGVkLCBidXQgd2hlbiB5b3UgY2xpY2sgZnJvbSBhbiBlbWFpbCBpbnRvIGFub3RoZXIgcGFnZSB3aXRoIGFcbiAgICBqdW1wIGxpbmssIHlvdSdyZSBzZW5kaW5nIHNvbWVvbmUgdG8gYSBsb2FkaW5nIHBhZ2UuIFRoZSBwYWdlIG1heSBvclxuICAgIG1heSBub3Qgc2VuZCB0aGVtIHRvIHRoZSBsb2NhdGlvbiB5b3UncmUgaW50ZW5kaW5nLCBvciB0aGVyZVxuICAgIG1heSBiZSBhbiBhd2t3YXJkIHVzZXIgZXhwZXJpZW5jZS5gLFxuICAgIHR5cGU6IEVycm9yVHlwZS5TdWdnZXN0aW9uLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkxvdyxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIjxpIGNsYXNzPVxcXCJ3aXphcmQgaWNvblxcXCI+PC9pPiBGaXggaXRcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QubmV3Lmhhc2g9XCJcIjtcbiAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIlN1Z2dlc3Rpb25cIiwgXCJSZW1vdmUgQW5jaG9yIExpbmtcIiwgXCJSZW1vdmUgQW5jaG9yIExpbmtcIik7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIExpbmtPYmplY3QubmV3Lmhhc2ggIT09IFwiXCIgJiYgTGlua09iamVjdC5uZXcuaGFzaCAhPT1cIiNcIlxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLW1haWx0by1saW5rLW1hdGNoZXMtY29udGV4dFwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkxvb2tzIGxpa2UgeW91ciBsYWJlbCBkb2Vzbid0IG1hdGNoIHRoZSBlbWFpbCBhZGRyZXNzLlwiLFxuICAgIGRlc2NyaXB0aW9uOlwiSXQgbG9va3MgbGlrZSB5b3UgaGF2ZSBhIGxpbmsgdG8gYW4gZW1haWwgYWRkcmVzcyB0aGF0IGRvZXMgbm90IG1hdGNoIHRoZSBsaW5rIGxhYmVsLiBUaGlzIGlzIG1pc2xlYWRpbmcgYW5kIGNvdWxkIGJlIGNvbmZ1c2luZywgc28geW91IG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgdGhleSBtYXRjaC5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiPGkgY2xhc3M9XFxcIndpemFyZCBpY29uXFxcIj48L2k+VXBkYXRlIGxhYmVsXCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICBMaW5rT2JqZWN0LmNvbnRleHQgPSBMaW5rT2JqZWN0LmNvbnRleHQucmVwbGFjZSgvXFw+KChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpXFw8XFwvL2csIFwiPlwiICsgTGlua09iamVjdC5tYWlsdG8uZW1haWwgKyBcIjwvXCIpO1xuICAgICAgICBpZihMaW5rT2JqZWN0Ll9zdXBlci5vdmVycmlkZGVuSWRzLmluZGV4T2YoXCJjdXN0b20tY29uZnJpbS1jb250YWN0LWVtYWlsLWFkZHJlc3Nlc1wiKT4tMSl7XG4gICAgICAgICAgTGlua09iamVjdC5fc3VwZXIub3ZlcnJpZGRlbklkcy5zcGxpY2UoTGlua09iamVjdC5fc3VwZXIub3ZlcnJpZGRlbklkcy5pbmRleE9mKFwiY3VzdG9tLWNvbmZyaW0tY29udGFjdC1lbWFpbC1hZGRyZXNzZXNcIiksMSk7XG4gICAgICAgIH1cbiAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIkZpeFwiLCBcIlVwZGF0ZSBsYWJlbFwiLCBMaW5rT2JqZWN0Ll9zdXBlci5fZGVmYXVsdFNDb2RlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gTGlua09iamVjdC5pc0xpbmtUeXBlKFwibWFpbHRvXCIpICYmIChmdW5jdGlvbigpe1xuICAgICAgICAvLyBMaW5rT2JqZWN0LnVwZGF0ZU1haWx0b09iaigpO1xuICAgICAgICB2YXIgY29udGV4dDogc3RyaW5nID0gd2luZG93LmpRdWVyeShMaW5rT2JqZWN0LmNvbnRleHQpLnRleHQoKS50cmltKCk7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmluZGV4T2YoXCJAXCIpPi0xICYmIExpbmtPYmplY3QubWFpbHRvLmVtYWlsICE9PSBjb250ZXh0LnN1YnN0cigwLExpbmtPYmplY3QubWFpbHRvLmVtYWlsLmxlbmd0aCk7XG5cbiAgICAgIH0pKClcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1tYWlsdG8tc3ViamVjdC1saW5lXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiQWx3YXlzIGluY2x1ZGUgYSBzdWJqZWN0IGxpbmUuXCIsXG4gICAgZGVzY3JpcHRpb246XCJZb3UgY2FuIGFkZCBhIHN1YmplY3QgbGluZSB1c2luZyB0aGUgRWRpdG9yIGJ1dHRvbi5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuQmVzdFByYWN0aWNlLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5Lk1lZGl1bSxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIjxpIGNsYXNzPVxcXCJ3aXphcmQgaWNvblxcXCI+PC9pPiBPcGVuIEVkaXRvclwiLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgTGlua09iamVjdC5tYWlsdG8ub3BlbkVkaXRvcigpO1xuICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIkJlc3QgUHJhY3RpY2VcIiwgXCJBZGQgc3ViamVjdCBsaW5lXCIsIFwiQWRkIHN1YmplY3QgbGluZVwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gTGlua09iamVjdC5pc0xpbmtUeXBlKCdtYWlsdG8nKSAmJiAhTGlua09iamVjdC5tYWlsdG8uaGFzKCdzdWJqZWN0JylcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1taXNzaW5nLWNvbnRlbnRcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xudmFyIGpRdWVyeUNvbnRleHQgPSB3aW5kb3cualF1ZXJ5KExpbmtPYmplY3QuY29udGV4dCkudGV4dCgpO1xudmFyIHByb2NlZWQgPSAod2luZG93LmpRdWVyeShMaW5rT2JqZWN0LmNvbnRleHQpLmZpbmQoXCJbZWxxdHlwZV1cIikubGVuZ3RoID09MCAmJiB3aW5kb3cualF1ZXJ5KExpbmtPYmplY3QuY29udGV4dCkuZmluZChcImltZ1wiKS5sZW5ndGggPT0wXG4mJiBqUXVlcnlDb250ZXh0LnRyaW0oKSA9PVwiXCIgKVxuJiYgKCFMaW5rT2JqZWN0Lmhhc093blByb3BlcnR5KFwiZGVsZXRlT25SZW5kZXJcIikgfHwhTGlua09iamVjdC5kZWxldGVPblJlbmRlcik7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJNaXNzaW5nIGNvbnRlbnRcIixcbiAgICBkZXNjcmlwdGlvbjpgVGhpcyBsaW5rIGRvZXNuJ3QgY29udGFpbiBhbnkgdGV4dCBvciBpbWFnZS5cbiAgICBUaGlzIG1pZ2h0IGJlIGEgbWlzdGFrZTsgeW91IGNhbiByZW1vdmUgaXRcbiAgICBmcm9tIHRoZSBjb2RlLCBvciBieSBjbGlja2luZyB0aGUgYnV0dG9uIHRvIHRoZVxuICAgIHJpZ2h0LCBhbmQgdGhpcyBsaW5rIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIHlvdSBleHBvcnQgdGhlIGNvZGUuYCxcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6ICc8aSBjbGFzcz1cInRyYXNoIGljb25cIj48L2k+IFJlbW92ZSBsaW5rJyxcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QubmV3LnVybCA9IFwiXCI7XG4gICAgICAgIExpbmtPYmplY3QuZGVsZXRlT25SZW5kZXIgPSB0cnVlO1xuICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHByb2NlZWQ7XG5cbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1yZW1vdmUtdGl0bGUtdGFnXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiUmVtb3ZlIHRpdGxlIHRhZ1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiTGlua3MgaW4gZW1haWxzIHNob3VsZG4ndCB1c2UgdGl0bGUgdGFncy4gVGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggYWNjZXNzaWJpbGl0eSBmb3Igc2NyZWVuIHJlYWRlcnMsIGJ1dCBhbHNvIGNhbiBtaXNyZXByZXNlbnQgbGlua3MuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5NZWRpdW0sXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBHbG9iYWxWYXJzLkxpbmtIYXNUaXRsZVRhZ1JlZ2V4R2xvYmFsLnRlc3QoTGlua09iamVjdC5jb250ZXh0KVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
