EMLMaker.intelligence.module("email").register("email-no-links-found",["EMLWorkspace",function(e){var i=e.hasOwnProperty("linkData")&&0==e.linkData.length;return{id:"did-not-find-links",title:"Did not find any links",description:"Although you can export your EML without links, if you intended to     include links, you'll want to go back and make sure you've included some.     Adding links to your email campaign or newsletter helps to engage     your audience and drive traffic to your site.",type:ErrorType.Warn,severity:ErrorSeverity.High,canContinue:!0,when:function(){return i}}}]),EMLMaker.intelligence.module("email").register("email-qa-email-addresses",["EMLWorkspace","IntelligenceMonitor",function(e,i){var t=e.generateOutputCode("email",!0),n=[];if(GlobalVars.EmailRegex.test(t)){var r;do r=GlobalVars.EmailRegexGlobal.exec(t),r&&n.push(r[0]);while(r)}return{id:"confrim-contact-email-addresses",title:"Confirm correct contact information - Email address"+(n.length>1?"es":""),description:"<em>Review:</em> "+n.join(", "),type:ErrorType.QA,severity:ErrorSeverity.Medium,canContinue:!1,cta:{label:"",handler:function(){i.overridden.push("confrim-contact-email-addresses"),e.intelligence.evaluateRules()}},when:function(){return n.length>0}}}]),EMLMaker.intelligence.module("email").register("email-qa-telelphone-numbers",["EMLWorkspace","IntelligenceMonitor",function(e,i){var t=e.generateOutputCode("email",!0),n=[];if(GlobalVars.TelephoneRegex.test(t)){var r;do r=GlobalVars.TelephoneRegexGlobal.exec(t),r&&n.push(r[0]);while(r)}return{id:"confrim-telephone-numbers",title:"Confirm correct contact information - Telephone Number"+(n.length>1?"s":""),description:"<em>Review:</em> "+n.join(", "),type:ErrorType.QA,severity:ErrorSeverity.Medium,canContinue:!0,cta:{label:"",handler:function(){i.overridden.push("confrim-telephone-numbers"),e.intelligence.evaluateRules()}},when:function(){return n.length>0}}}]),EMLMaker.intelligence.module("email").register("email-zoom-fix-code",["EMLWorkspace",function(e){return{id:"zoom-fix-code-not-detected",title:"Zoom fix code not detected",description:"Your email might not display correctly in MS Outlook on Windows 10 or displays with resolutions set higher than 96 pixels per inch",type:ErrorType.BestPractice,severity:ErrorSeverity.High,canContinue:!0,cta:{label:"",handler:function(){}},when:function(){var i=!1,t=e.generateOutputCode("email",!0);return["<o:OfficeDocumentSettings","<o:AllowPNG","<o:PixelsPerInch"].forEach(function(e){var n=new RegExp(e,"gi");n.test(t)||(i=!0)}),i}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-alt-tag-required",["LinkObject",function(e){return{title:"ALT tag on image required",description:"Linked image should have an ALT tag.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return e.LinkedImage&&(void 0===e.LinkedImage.alt||""==e.LinkedImage.alt)}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-duplicate-query-strings",["LinkObject",function(e){var i,t=e.hasDuplicateQueryStrings();return t.length>0&&(i=t.join()),{title:"Duplicate query strings",description:"It looks like you have duplicate query strings.     When you have duplicate parameters, only one will be valid,     so make sure to remove the incorrect or duplicate parameters.     Pay attention to these parameters: "+i,type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:"Open editor",handler:function(){e.showQueryStringEditor=!0}},when:function(){return e["new"].searchParams.entries.length>0&&t}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-image-relative-path",["LinkObject",function(e){return{title:"Linked image URL is relative",description:"The image is probably stored on your computer or the image is broken.     Images in emails should only be referenced by absolute URLs.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return e.LinkedImage&&!/^http/.test(e.LinkedImage.src)}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-image-size-props",["LinkObject",function(e){var i=[],t="",n=!0;if(e.LinkedImage){var r=e.context.match(/\<img([^>].*?)\>/);r.length>0&&(/height\=\"[0-9]{1,5}\"/g.test(r[0])||i.push("height"),/width\=\"[0-9]{1,5}\"/g.test(r[0])||i.push("width")),i.length>0&&(n=!1,t=void 0==e.LinkedImage.height||void 0==e.LinkedImage.width?"<em>Will be calculated based on linked image's actual size when you push the button.</em>":"height="+e.LinkedImage.height+" width="+e.LinkedImage.width)}return{title:"Images require explicitly defined size properities",description:"This image does not have an explicitly defined "+i.join(" or ")+" property.     Make sure the code is updated or there may be display or layout issues. ",suggestion:t,type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:"Update to calculated size",handler:function(){for(var t=0;t<i.length;t++)e.context=e.context.replace(/\<img/g,"<img "+i[t]+'="'+e.LinkedImage[i[t]]+'"');e.isLinkComplete()}},when:function(){return!n}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-image-size",["LinkObject",function(e){var i,t,n=!1;return e.LinkedImage&&e.LinkedImage.width&&e.LinkedImage.height&&(i=e.LinkedImage.width,t=e.LinkedImage.height,(parseInt(e.LinkedImage.width)<44||parseInt(e.LinkedImage.height)<44)&&(n=!0)),{title:"Linked image might be too small",description:(n?"The linked image is <strong>"+i+"x"+t+"px</strong>. ":"")+"Generally, youâ€™ll want to keep calls-to-action big enough for even large thumbs to easily tap.     Apple suggests making touch targets at least 44 pixels square.     Smaller images may be a problem for touch screen devices, particularly those with high screen resolutions.",type:ErrorType.BestPractice,severity:ErrorSeverity.High,resource:"https://www.lukew.com/ff/entry.asp?1085",canContinue:!0,when:function(){return n}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-is-valid-mailto",["LinkObject",function(e){return{title:"Invalid email address",description:"Fix invalid email address.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return e.isLinkType("mailto")&&e.mailto.has("email")&&!e.mailto.isValidEmailAddress()}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-is-valid-url",["LinkObject",function(e){return{title:"Invalid URL",description:"This is not a valid URL",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return!e.isLinkType("mailto")&&!e["new"].isValid()}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-jump-links",["LinkObject",function(e){return{title:"Jumplinks in Emails",description:"It looks like you're trying to send traffic to a\n    <em>Jump link</em> AKA <em>Anchor link</em>. The only\n    time that is acceptible is when the destination is on\n    the same page. You see, the assumption is that all the content is\n    loaded, but when you click from an email into another page with a\n    jump link, you're sending someone to a loading page. The page may or\n    may not send them to the location you're intending, or there\n    may be an awkward user experience.",type:ErrorType.Suggestion,severity:ErrorSeverity.Low,canContinue:!0,cta:{label:'<i class="wizard icon"></i> Fix it',handler:function(){e["new"].hash="",e.isLinkComplete(),window.ga("send","event","Suggestion","Remove Anchor Link","Remove Anchor Link")}},when:function(){return""!==e["new"].hash&&"#"!==e["new"].hash}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-mailto-link-matches-context",["LinkObject",function(e){return{title:"Looks like your label doesn't match the email address.",description:"It looks like you have a link to an email address that does not match the link label. This is misleading and could be confusing, so you need to make sure that they match.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:'<i class="wizard icon"></i>Update label',handler:function(){e.context=e.context.replace(/\>(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\<\//g,">"+e.mailto.email+"</"),e._super.overriddenIds.indexOf("custom-confrim-contact-email-addresses")>-1&&e._super.overriddenIds.splice(e._super.overriddenIds.indexOf("custom-confrim-contact-email-addresses"),1),e.isLinkComplete(),window.ga("send","event","Fix","Update label",e._super._defaultSCode)}},when:function(){return e.isLinkType("mailto")&&function(){var i=window.jQuery(e.context).text().trim();return i.indexOf("@")>-1&&e.mailto.email!==i.substr(0,e.mailto.email.length)}()}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-mailto-subject-line",["LinkObject",function(e){return{title:"Always include a subject line.",description:"You can add a subject line using the Editor button.",type:ErrorType.BestPractice,severity:ErrorSeverity.Medium,canContinue:!0,cta:{label:'<i class="wizard icon"></i> Open Editor',handler:function(){e.mailto.openEditor(),window.ga("send","event","Best Practice","Add subject line","Add subject line")}},when:function(){return e.isLinkType("mailto")&&!e.mailto.has("subject")}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-missing-content",["LinkObject",function(e){var i=!(0!=window.jQuery(e.context).find("img").length||""!=window.jQuery(e.context).text().trim()||e.hasOwnProperty("deleteOnRender")&&e.deleteOnRender);return{title:"Missing content",description:"This link doesn't contain any text or image.\n    This might be a mistake; you can remove it\n    from the code, or by clicking the button to the\n    right, and this link will be removed when you export the code.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:'<i class="trash icon"></i> Remove link',handler:function(){e["new"].url="",e.deleteOnRender=!0,e.isLinkComplete()}},when:function(){return i}}}]),EMLMaker.intelligence.module("hyperlink").register("hyperlink-remove-title-tag",["LinkObject",function(e){return{title:"Remove title tag",description:"Links in emails shouldn't use title tags. This causes issues with accessibility for screen readers, but also can misrepresent links.",type:ErrorType.BestPractice,severity:ErrorSeverity.Medium,canContinue:!0,when:function(){return GlobalVars.LinkHasTitleTagRegexGlobal.test(e.context)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVtYWlsLW5vLWxpbmtzLWZvdW5kLnRzIiwiZW1haWwtcWEtZW1haWwtYWRkcmVzc2VzLnRzIiwiZW1haWwtcWEtdGVsZWxwaG9uZS1udW1iZXJzLnRzIiwiZW1haWwtem9vbS1maXgtY29kZS50cyIsImh5cGVybGluay1hbHQtdGFnLXJlcXVpcmVkLnRzIiwiaHlwZXJsaW5rLWR1cGxpY2F0ZS1xdWVyeS1zdHJpbmdzLnRzIiwiaHlwZXJsaW5rLWltYWdlLXJlbGF0aXZlLXBhdGgudHMiLCJoeXBlcmxpbmstaW1hZ2Utc2l6ZS1wcm9wcy50cyIsImh5cGVybGluay1pbWFnZS1zaXplLnRzIiwiaHlwZXJsaW5rLWlzLXZhbGlkLW1haWx0by50cyIsImh5cGVybGluay1pcy12YWxpZC11cmwudHMiLCJoeXBlcmxpbmstanVtcC1saW5rcy50cyIsImh5cGVybGluay1tYWlsdG8tbGluay1tYXRjaGVzLWNvbnRleHQudHMiLCJoeXBlcmxpbmstbWFpbHRvLXN1YmplY3QtbGluZS50cyIsImh5cGVybGluay1taXNzaW5nLWNvbnRlbnQudHMiLCJoeXBlcmxpbmstcmVtb3ZlLXRpdGxlLXRhZy50cyJdLCJuYW1lcyI6WyJFTUxNYWtlciIsImludGVsbGlnZW5jZSIsIm1vZHVsZSIsInJlZ2lzdGVyIiwiRU1MV29ya3NwYWNlIiwicHJvY2VlZCIsImhhc093blByb3BlcnR5IiwibGlua0RhdGEiLCJsZW5ndGgiLCJpZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiRXJyb3JUeXBlIiwiV2FybiIsInNldmVyaXR5IiwiRXJyb3JTZXZlcml0eSIsIkhpZ2giLCJjYW5Db250aW51ZSIsIndoZW4iLCJJbnRlbGxpZ2VuY2VNb25pdG9yIiwib3V0cHV0Q29kZSIsImdlbmVyYXRlT3V0cHV0Q29kZSIsInJlc3VsdHMiLCJHbG9iYWxWYXJzIiwiRW1haWxSZWdleCIsInRlc3QiLCJtIiwiRW1haWxSZWdleEdsb2JhbCIsImV4ZWMiLCJwdXNoIiwiam9pbiIsIlFBIiwiTWVkaXVtIiwiY3RhIiwibGFiZWwiLCJoYW5kbGVyIiwib3ZlcnJpZGRlbiIsImV2YWx1YXRlUnVsZXMiLCJUZWxlcGhvbmVSZWdleCIsIlRlbGVwaG9uZVJlZ2V4R2xvYmFsIiwiQmVzdFByYWN0aWNlIiwib3V0cHV0IiwiZm9yRWFjaCIsIml0ZW0iLCJyZSIsIlJlZ0V4cCIsIkxpbmtPYmplY3QiLCJGaXgiLCJMaW5rZWRJbWFnZSIsInVuZGVmaW5lZCIsImFsdCIsInBhcmFtIiwiaGFzRHVwbGljYXRlUXVlcnlTdHJpbmdzIiwic2hvd1F1ZXJ5U3RyaW5nRWRpdG9yIiwic2VhcmNoUGFyYW1zIiwiZW50cmllcyIsInNyYyIsImNyaXRpY2FsSXRlbXMiLCJzdWdnZXN0aW9uIiwiZm91bmQiLCJjb250ZXh0IiwibWF0Y2giLCJoZWlnaHQiLCJ3aWR0aCIsImkiLCJyZXBsYWNlIiwiaXNMaW5rQ29tcGxldGUiLCJwYXJzZUludCIsInJlc291cmNlIiwiaXNMaW5rVHlwZSIsIm1haWx0byIsImhhcyIsImlzVmFsaWRFbWFpbEFkZHJlc3MiLCJpc1ZhbGlkIiwiU3VnZ2VzdGlvbiIsIkxvdyIsImhhc2giLCJ3aW5kb3ciLCJnYSIsImVtYWlsIiwiX3N1cGVyIiwib3ZlcnJpZGRlbklkcyIsImluZGV4T2YiLCJzcGxpY2UiLCJfZGVmYXVsdFNDb2RlIiwialF1ZXJ5IiwidGV4dCIsInRyaW0iLCJzdWJzdHIiLCJvcGVuRWRpdG9yIiwiZmluZCIsImRlbGV0ZU9uUmVuZGVyIiwidXJsIiwiTGlua0hhc1RpdGxlVGFnUmVnZXhHbG9iYWwiXSwibWFwcGluZ3MiOiJBQUFBQSxTQUFTQyxhQUFhQyxPQUFPLFNBQVNDLFNBQ3BDLHdCQUNBLGVBQWdCLFNBQVNDLEdBR3pCLEdBQUlDLEdBQVdELEVBQWFFLGVBQWUsYUFBOEMsR0FBL0JGLEVBQWFHLFNBQVNDLE1BQ2hGLFFBQ0VDLEdBQUkscUJBQ0pDLE1BQU8seUJBQ1BDLFlBQWEsMlFBSWJDLEtBQU1DLFVBQVVDLEtBQ2hCQyxTQUFVQyxjQUFjQyxLQUV4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QixPQUV4QmYsYUFBYSxFQVFiQyxLQUFNLFdBQ0osTUFBT0ssWUFBV3NFLDJCQUEyQnBFLEtBQUtxQixFQUFXYyIsImZpbGUiOiJlbWwtaW50ZWxsaWdlbmNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImVtYWlsXCIpLnJlZ2lzdGVyKFxuICBcImVtYWlsLW5vLWxpbmtzLWZvdW5kXCIsW1xuICBcIkVNTFdvcmtzcGFjZVwiLCBmdW5jdGlvbihFTUxXb3Jrc3BhY2Upe1xuXG5cbiAgbGV0IHByb2NlZWQgPSAgRU1MV29ya3NwYWNlLmhhc093blByb3BlcnR5KFwibGlua0RhdGFcIikgJiYgRU1MV29ya3NwYWNlLmxpbmtEYXRhLmxlbmd0aCA9PTA7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiZGlkLW5vdC1maW5kLWxpbmtzXCIsXG4gICAgdGl0bGU6IFwiRGlkIG5vdCBmaW5kIGFueSBsaW5rc1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkFsdGhvdWdoIHlvdSBjYW4gZXhwb3J0IHlvdXIgRU1MIHdpdGhvdXQgbGlua3MsIGlmIHlvdSBpbnRlbmRlZCB0byBcXFxuICAgIGluY2x1ZGUgbGlua3MsIHlvdSdsbCB3YW50IHRvIGdvIGJhY2sgYW5kIG1ha2Ugc3VyZSB5b3UndmUgaW5jbHVkZWQgc29tZS4gXFxcbiAgICBBZGRpbmcgbGlua3MgdG8geW91ciBlbWFpbCBjYW1wYWlnbiBvciBuZXdzbGV0dGVyIGhlbHBzIHRvIGVuZ2FnZSBcXFxuICAgIHlvdXIgYXVkaWVuY2UgYW5kIGRyaXZlIHRyYWZmaWMgdG8geW91ciBzaXRlLlwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5XYXJuLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJcIixcbiAgICAvLyAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7fVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBwcm9jZWVkO1xuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiZW1haWxcIikucmVnaXN0ZXIoXG4gIFwiZW1haWwtcWEtZW1haWwtYWRkcmVzc2VzXCIsXG4gIFtcIkVNTFdvcmtzcGFjZVwiLFwiSW50ZWxsaWdlbmNlTW9uaXRvclwiLCBmdW5jdGlvbihFTUxXb3Jrc3BhY2UsIEludGVsbGlnZW5jZU1vbml0b3Ipe1xuXG4gICAgLy9kbyB0aGUgY29kZSBoZXJlO1xuICAgIGxldCBvdXRwdXRDb2RlID0gRU1MV29ya3NwYWNlLmdlbmVyYXRlT3V0cHV0Q29kZShcImVtYWlsXCIsIHRydWUpO1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgaWYoR2xvYmFsVmFycy5FbWFpbFJlZ2V4LnRlc3Qob3V0cHV0Q29kZSkpe1xuICAgICAgdmFyIG07XG4gICAgICBkbyB7XG4gICAgICAgIG0gPSBHbG9iYWxWYXJzLkVtYWlsUmVnZXhHbG9iYWwuZXhlYyhvdXRwdXRDb2RlKTtcbiAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG1bMF0pO1xuICAgICAgICAvL2NvbnNvbGUubG9nKG1bMV0sIG1bMl0pO1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlIChtKTtcbiAgICB9XG5cblxuICByZXR1cm4ge1xuICAgIGlkOiBcImNvbmZyaW0tY29udGFjdC1lbWFpbC1hZGRyZXNzZXNcIixcbiAgICB0aXRsZTogXCJDb25maXJtIGNvcnJlY3QgY29udGFjdCBpbmZvcm1hdGlvbiAtIEVtYWlsIGFkZHJlc3NcIisgKCByZXN1bHRzLmxlbmd0aD4xID8gXCJlc1wiIDogXCJcIiksXG4gICAgZGVzY3JpcHRpb246IFwiPGVtPlJldmlldzo8L2VtPiBcIiArIHJlc3VsdHMuam9pbihcIiwgXCIpLFxuICAgIHR5cGU6IEVycm9yVHlwZS5RQSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5NZWRpdW0sXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiXCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICBJbnRlbGxpZ2VuY2VNb25pdG9yLm92ZXJyaWRkZW4ucHVzaChcImNvbmZyaW0tY29udGFjdC1lbWFpbC1hZGRyZXNzZXNcIik7XG4gICAgICAgIEVNTFdvcmtzcGFjZS5pbnRlbGxpZ2VuY2UuZXZhbHVhdGVSdWxlcygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiByZXN1bHRzLmxlbmd0aD4wO1xuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiZW1haWxcIikucmVnaXN0ZXIoXCJlbWFpbC1xYS10ZWxlbHBob25lLW51bWJlcnNcIixbXG4gIFwiRU1MV29ya3NwYWNlXCIsXCJJbnRlbGxpZ2VuY2VNb25pdG9yXCIsIGZ1bmN0aW9uKEVNTFdvcmtzcGFjZSxJbnRlbGxpZ2VuY2VNb25pdG9yKXtcblxuICAgIC8vZG8gdGhlIGNvZGUgaGVyZTtcbiAgICBsZXQgb3V0cHV0Q29kZSA9IEVNTFdvcmtzcGFjZS5nZW5lcmF0ZU91dHB1dENvZGUoXCJlbWFpbFwiLCB0cnVlKTtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIGlmKEdsb2JhbFZhcnMuVGVsZXBob25lUmVnZXgudGVzdChvdXRwdXRDb2RlKSl7XG4gICAgICB2YXIgbTtcbiAgICAgIGRvIHtcbiAgICAgICAgbSA9IEdsb2JhbFZhcnMuVGVsZXBob25lUmVnZXhHbG9iYWwuZXhlYyhvdXRwdXRDb2RlKTtcbiAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG1bMF0pO1xuICAgICAgICAvL2NvbnNvbGUubG9nKG1bMV0sIG1bMl0pO1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlIChtKTtcbiAgICB9XG5cblxuICByZXR1cm4ge1xuICAgIGlkOiBcImNvbmZyaW0tdGVsZXBob25lLW51bWJlcnNcIixcbiAgICB0aXRsZTogXCJDb25maXJtIGNvcnJlY3QgY29udGFjdCBpbmZvcm1hdGlvbiAtIFRlbGVwaG9uZSBOdW1iZXJcIiArIChyZXN1bHRzLmxlbmd0aD4xP1wic1wiOlwiXCIpLFxuICAgIGRlc2NyaXB0aW9uOiBcIjxlbT5SZXZpZXc6PC9lbT4gXCIgKyByZXN1bHRzLmpvaW4oXCIsIFwiKSxcbiAgICB0eXBlOiBFcnJvclR5cGUuUUEsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuTWVkaXVtLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiB0cnVlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiXCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICBJbnRlbGxpZ2VuY2VNb25pdG9yLm92ZXJyaWRkZW4ucHVzaChcImNvbmZyaW0tdGVsZXBob25lLW51bWJlcnNcIik7XG4gICAgICAgIEVNTFdvcmtzcGFjZS5pbnRlbGxpZ2VuY2UuZXZhbHVhdGVSdWxlcygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiByZXN1bHRzLmxlbmd0aD4wO1xuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiZW1haWxcIikucmVnaXN0ZXIoXCJlbWFpbC16b29tLWZpeC1jb2RlXCIsW1xuICBcIkVNTFdvcmtzcGFjZVwiLGZ1bmN0aW9uKEVNTFdvcmtzcGFjZSl7XG5cbiAgcmV0dXJuIHtcbiAgICBpZDogXCJ6b29tLWZpeC1jb2RlLW5vdC1kZXRlY3RlZFwiLFxuICAgIHRpdGxlOiBcIlpvb20gZml4IGNvZGUgbm90IGRldGVjdGVkXCIsXG4gICAgZGVzY3JpcHRpb246IFwiWW91ciBlbWFpbCBtaWdodCBub3QgZGlzcGxheSBjb3JyZWN0bHkgaW4gTVMgT3V0bG9vayBvbiBXaW5kb3dzIDEwIG9yIGRpc3BsYXlzIHdpdGggcmVzb2x1dGlvbnMgc2V0IGhpZ2hlciB0aGFuIDk2IHBpeGVscyBwZXIgaW5jaFwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5CZXN0UHJhY3RpY2UsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIlwiLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gRW1haWxBSS5vdmVycmlkZGVuLnB1c2goXCJjdXN0b20tem9vbS1maXgtY29kZS1ub3QtZGV0ZWN0ZWRcIik7XG5cbiAgICAgIH1cbiAgICB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgb3V0cHV0ID0gZmFsc2U7XG4gICAgICBsZXQgb3V0cHV0Q29kZSA9IEVNTFdvcmtzcGFjZS5nZW5lcmF0ZU91dHB1dENvZGUoXCJlbWFpbFwiLCB0cnVlKTtcbiAgICAgIFtcIjxvOk9mZmljZURvY3VtZW50U2V0dGluZ3NcIixcIjxvOkFsbG93UE5HXCIsXCI8bzpQaXhlbHNQZXJJbmNoXCJdLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgIGxldCByZSA9IG5ldyBSZWdFeHAoaXRlbSwgXCJnaVwiKTtcbiAgICAgICAgaWYoIXJlLnRlc3Qob3V0cHV0Q29kZSkpe1xuICAgICAgICAgIG91dHB1dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1hbHQtdGFnLXJlcXVpcmVkXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6ICBcIkFMVCB0YWcgb24gaW1hZ2UgcmVxdWlyZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJMaW5rZWQgaW1hZ2Ugc2hvdWxkIGhhdmUgYW4gQUxUIHRhZy5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIC8vIGN0YToge1xuICAgIC8vICAgbGFiZWw6IFwiUmVtb3ZlIHBhcmFtZXRlclwiLFxuICAgIC8vICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInZcIik7XG4gICAgLy8gICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gTGlua09iamVjdC5MaW5rZWRJbWFnZSAmJiAoTGlua09iamVjdC5MaW5rZWRJbWFnZS5hbHQ9PT11bmRlZmluZWR8fExpbmtPYmplY3QuTGlua2VkSW1hZ2UuYWx0PT1cIlwiKTtcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1kdXBsaWNhdGUtcXVlcnktc3RyaW5nc1wiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG52YXIgcGFyYW07XG52YXIgcHJvY2VlZCA9IExpbmtPYmplY3QuaGFzRHVwbGljYXRlUXVlcnlTdHJpbmdzKCk7XG5pZihwcm9jZWVkLmxlbmd0aD4wKSB7XG4gIHBhcmFtID0gcHJvY2VlZC5qb2luKCk7XG59XG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiRHVwbGljYXRlIHF1ZXJ5IHN0cmluZ3NcIixcbiAgICBkZXNjcmlwdGlvbjogXCJJdCBsb29rcyBsaWtlIHlvdSBoYXZlIGR1cGxpY2F0ZSBxdWVyeSBzdHJpbmdzLiBcXFxuICAgIFdoZW4geW91IGhhdmUgZHVwbGljYXRlIHBhcmFtZXRlcnMsIG9ubHkgb25lIHdpbGwgYmUgdmFsaWQsIFxcXG4gICAgc28gbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgaW5jb3JyZWN0IG9yIGR1cGxpY2F0ZSBwYXJhbWV0ZXJzLlxcXG4gICAgIFBheSBhdHRlbnRpb24gdG8gdGhlc2UgcGFyYW1ldGVyczogXCIgKyBwYXJhbSxcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiT3BlbiBlZGl0b3JcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3Quc2hvd1F1ZXJ5U3RyaW5nRWRpdG9yID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXMubGVuZ3RoPjAgJiYgcHJvY2VlZFxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWltYWdlLXJlbGF0aXZlLXBhdGhcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJMaW5rZWQgaW1hZ2UgVVJMIGlzIHJlbGF0aXZlXCIsXG4gICAgZGVzY3JpcHRpb246XCJUaGUgaW1hZ2UgaXMgcHJvYmFibHkgc3RvcmVkIG9uIHlvdXIgY29tcHV0ZXIgb3IgdGhlIGltYWdlIGlzIGJyb2tlbi4gXFxcbiAgICBJbWFnZXMgaW4gZW1haWxzIHNob3VsZCBvbmx5IGJlIHJlZmVyZW5jZWQgYnkgYWJzb2x1dGUgVVJMcy5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIC8vIGN0YToge1xuICAgIC8vICAgbGFiZWw6IFwiUmVtb3ZlIHBhcmFtZXRlclwiLFxuICAgIC8vICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInZcIik7XG4gICAgLy8gICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gTGlua09iamVjdC5MaW5rZWRJbWFnZSAmJiAhL15odHRwLy50ZXN0KExpbmtPYmplY3QuTGlua2VkSW1hZ2Uuc3JjKVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWltYWdlLXNpemUtcHJvcHNcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgIHZhciBjcml0aWNhbEl0ZW1zID0gW10sIHN1Z2dlc3Rpb249XCJcIjtcbiAgICB2YXIgcHJvY2VlZCA9IHRydWU7XG4gICAgaWYoTGlua09iamVjdC5MaW5rZWRJbWFnZSl7XG4gICAgICAvLyB2YXIgY3JpdGljYWxJdGVtcyA9IFtdO1xuICAgICAgdmFyIGZvdW5kID0gTGlua09iamVjdC5jb250ZXh0Lm1hdGNoKC9cXDxpbWcoW14+XS4qPylcXD4vKTtcbiAgICAgIGlmKGZvdW5kLmxlbmd0aD4wKXtcbiAgICAgICAgaWYoIS9oZWlnaHRcXD1cXFwiWzAtOV17MSw1fVxcXCIvZy50ZXN0KGZvdW5kWzBdKSkgY3JpdGljYWxJdGVtcy5wdXNoKFwiaGVpZ2h0XCIpO1xuICAgICAgICBpZighL3dpZHRoXFw9XFxcIlswLTldezEsNX1cXFwiL2cudGVzdChmb3VuZFswXSkpIGNyaXRpY2FsSXRlbXMucHVzaChcIndpZHRoXCIpO1xuICAgICAgfVxuICAgICAgaWYoY3JpdGljYWxJdGVtcy5sZW5ndGg+MCl7XG4gICAgICAgIHByb2NlZWQgPSBmYWxzZTtcbiAgICAgICAgaWYoTGlua09iamVjdC5MaW5rZWRJbWFnZS5oZWlnaHQ9PSB1bmRlZmluZWQgfHwgTGlua09iamVjdC5MaW5rZWRJbWFnZS53aWR0aCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWdnZXN0aW9uID0gXCI8ZW0+V2lsbCBiZSBjYWxjdWxhdGVkIGJhc2VkIG9uIGxpbmtlZCBpbWFnZSdzIGFjdHVhbCBzaXplIHdoZW4geW91IHB1c2ggdGhlIGJ1dHRvbi48L2VtPlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1Z2dlc3Rpb24gPSBcImhlaWdodD1cIitMaW5rT2JqZWN0LkxpbmtlZEltYWdlLmhlaWdodCArIFwiIHdpZHRoPVwiICsgTGlua09iamVjdC5MaW5rZWRJbWFnZS53aWR0aDtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6ICBcIkltYWdlcyByZXF1aXJlIGV4cGxpY2l0bHkgZGVmaW5lZCBzaXplIHByb3Blcml0aWVzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiVGhpcyBpbWFnZSBkb2VzIG5vdCBoYXZlIGFuIGV4cGxpY2l0bHkgZGVmaW5lZCBcIiArIGNyaXRpY2FsSXRlbXMuam9pbihcIiBvciBcIikgKyBcIiBwcm9wZXJ0eS4gXFxcbiAgICBNYWtlIHN1cmUgdGhlIGNvZGUgaXMgdXBkYXRlZCBvciB0aGVyZSBtYXkgYmUgZGlzcGxheSBvciBsYXlvdXQgaXNzdWVzLiBcIiAsXG4gICAgc3VnZ2VzdGlvbjogc3VnZ2VzdGlvbixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiVXBkYXRlIHRvIGNhbGN1bGF0ZWQgc2l6ZVwiLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgLy91cGRhdGUgY29udGV4dC5cbiAgICAgICAgZm9yKHZhciBpID0wO2k8Y3JpdGljYWxJdGVtcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICBMaW5rT2JqZWN0LmNvbnRleHQgPSBMaW5rT2JqZWN0LmNvbnRleHQucmVwbGFjZSgvXFw8aW1nL2csIFwiPGltZyBcIitjcml0aWNhbEl0ZW1zW2ldK1wiPVxcXCJcIitMaW5rT2JqZWN0LkxpbmtlZEltYWdlW2NyaXRpY2FsSXRlbXNbaV1dK1wiXFxcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuICFwcm9jZWVkO1xuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWltYWdlLXNpemVcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG4gICAgdmFyIHdpZHRoLCBoZWlnaHQ7XG4gICAgdmFyIHByb2NlZWQgPSBmYWxzZTtcbiAgICBpZihMaW5rT2JqZWN0LkxpbmtlZEltYWdlKXtcbiAgICAgIGlmKExpbmtPYmplY3QuTGlua2VkSW1hZ2Uud2lkdGggJiYgTGlua09iamVjdC5MaW5rZWRJbWFnZS5oZWlnaHQpe1xuICAgICAgICB3aWR0aCA9IExpbmtPYmplY3QuTGlua2VkSW1hZ2Uud2lkdGg7XG4gICAgICAgIGhlaWdodCA9IExpbmtPYmplY3QuTGlua2VkSW1hZ2UuaGVpZ2h0O1xuICAgICAgICBpZihwYXJzZUludChMaW5rT2JqZWN0LkxpbmtlZEltYWdlLndpZHRoKTw0NHx8cGFyc2VJbnQoTGlua09iamVjdC5MaW5rZWRJbWFnZS5oZWlnaHQpPDQ0KXtcbiAgICAgICAgICBwcm9jZWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkxpbmtlZCBpbWFnZSBtaWdodCBiZSB0b28gc21hbGxcIixcbiAgICBkZXNjcmlwdGlvbjogKHByb2NlZWQgPyBcIlRoZSBsaW5rZWQgaW1hZ2UgaXMgPHN0cm9uZz5cIiArIHdpZHRoICsgXCJ4XCIrIGhlaWdodCArIFwicHg8L3N0cm9uZz4uIFwiOiBcIlwiKSArIFwiR2VuZXJhbGx5LCB5b3XigJlsbCB3YW50IHRvIGtlZXAgY2FsbHMtdG8tYWN0aW9uIGJpZyBlbm91Z2ggZm9yIGV2ZW4gbGFyZ2UgdGh1bWJzIHRvIGVhc2lseSB0YXAuIFxcXG4gICAgQXBwbGUgc3VnZ2VzdHMgbWFraW5nIHRvdWNoIHRhcmdldHMgYXQgbGVhc3QgNDQgcGl4ZWxzIHNxdWFyZS4gXFxcbiAgICBTbWFsbGVyIGltYWdlcyBtYXkgYmUgYSBwcm9ibGVtIGZvciB0b3VjaCBzY3JlZW4gZGV2aWNlcywgcGFydGljdWxhcmx5IHRob3NlIHdpdGggaGlnaCBzY3JlZW4gcmVzb2x1dGlvbnMuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIHJlc291cmNlOiBcImh0dHBzOi8vd3d3Lmx1a2V3LmNvbS9mZi9lbnRyeS5hc3A/MTA4NVwiLFxuICAgIGNhbkNvbnRpbnVlOiB0cnVlLFxuICAgIC8vIGN0YToge1xuICAgIC8vICAgbGFiZWw6IFwiUmVtb3ZlIHBhcmFtZXRlclwiLFxuICAgIC8vICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInZcIik7XG4gICAgLy8gICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG5cblxuXG4gICAgICByZXR1cm4gcHJvY2VlZFxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWlzLXZhbGlkLW1haWx0b1wiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJJbnZhbGlkIGVtYWlsIGFkZHJlc3NcIixcbiAgICBkZXNjcmlwdGlvbjpcIkZpeCBpbnZhbGlkIGVtYWlsIGFkZHJlc3MuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkZpeCxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiBmYWxzZSxcbiAgICAvLyBjdGE6IHtcbiAgICAvLyAgIGxhYmVsOiBcIlJlbW92ZSBwYXJhbWV0ZXJcIixcbiAgICAvLyAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgLy8gICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJ2XCIpO1xuICAgIC8vICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgLy8gICB9XG4gICAgLy8gfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIExpbmtPYmplY3QuaXNMaW5rVHlwZSgnbWFpbHRvJylcbiAgICAgICYmTGlua09iamVjdC5tYWlsdG8uaGFzKCdlbWFpbCcpXG4gICAgICAmJiFMaW5rT2JqZWN0Lm1haWx0by5pc1ZhbGlkRW1haWxBZGRyZXNzKClcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1pcy12YWxpZC11cmxcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJJbnZhbGlkIFVSTFwiLFxuICAgIGRlc2NyaXB0aW9uOlwiVGhpcyBpcyBub3QgYSB2YWxpZCBVUkxcIixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIC8vIGN0YToge1xuICAgIC8vICAgbGFiZWw6IFwiUmVtb3ZlIHBhcmFtZXRlclwiLFxuICAgIC8vICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInZcIik7XG4gICAgLy8gICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gIUxpbmtPYmplY3QuaXNMaW5rVHlwZSgnbWFpbHRvJykgJiYgIUxpbmtPYmplY3QubmV3LmlzVmFsaWQoKVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWp1bXAtbGlua3NcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJKdW1wbGlua3MgaW4gRW1haWxzXCIsXG4gICAgZGVzY3JpcHRpb246YEl0IGxvb2tzIGxpa2UgeW91J3JlIHRyeWluZyB0byBzZW5kIHRyYWZmaWMgdG8gYVxuICAgIDxlbT5KdW1wIGxpbms8L2VtPiBBS0EgPGVtPkFuY2hvciBsaW5rPC9lbT4uIFRoZSBvbmx5XG4gICAgdGltZSB0aGF0IGlzIGFjY2VwdGlibGUgaXMgd2hlbiB0aGUgZGVzdGluYXRpb24gaXMgb25cbiAgICB0aGUgc2FtZSBwYWdlLiBZb3Ugc2VlLCB0aGUgYXNzdW1wdGlvbiBpcyB0aGF0IGFsbCB0aGUgY29udGVudCBpc1xuICAgIGxvYWRlZCwgYnV0IHdoZW4geW91IGNsaWNrIGZyb20gYW4gZW1haWwgaW50byBhbm90aGVyIHBhZ2Ugd2l0aCBhXG4gICAganVtcCBsaW5rLCB5b3UncmUgc2VuZGluZyBzb21lb25lIHRvIGEgbG9hZGluZyBwYWdlLiBUaGUgcGFnZSBtYXkgb3JcbiAgICBtYXkgbm90IHNlbmQgdGhlbSB0byB0aGUgbG9jYXRpb24geW91J3JlIGludGVuZGluZywgb3IgdGhlcmVcbiAgICBtYXkgYmUgYW4gYXdrd2FyZCB1c2VyIGV4cGVyaWVuY2UuYCxcbiAgICB0eXBlOiBFcnJvclR5cGUuU3VnZ2VzdGlvbixcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5Mb3csXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCI8aSBjbGFzcz1cXFwid2l6YXJkIGljb25cXFwiPjwvaT4gRml4IGl0XCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICBMaW5rT2JqZWN0Lm5ldy5oYXNoPVwiXCI7XG4gICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJTdWdnZXN0aW9uXCIsIFwiUmVtb3ZlIEFuY2hvciBMaW5rXCIsIFwiUmVtb3ZlIEFuY2hvciBMaW5rXCIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBMaW5rT2JqZWN0Lm5ldy5oYXNoICE9PSBcIlwiICYmIExpbmtPYmplY3QubmV3Lmhhc2ggIT09XCIjXCJcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1tYWlsdG8tbGluay1tYXRjaGVzLWNvbnRleHRcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJMb29rcyBsaWtlIHlvdXIgbGFiZWwgZG9lc24ndCBtYXRjaCB0aGUgZW1haWwgYWRkcmVzcy5cIixcbiAgICBkZXNjcmlwdGlvbjpcIkl0IGxvb2tzIGxpa2UgeW91IGhhdmUgYSBsaW5rIHRvIGFuIGVtYWlsIGFkZHJlc3MgdGhhdCBkb2VzIG5vdCBtYXRjaCB0aGUgbGluayBsYWJlbC4gVGhpcyBpcyBtaXNsZWFkaW5nIGFuZCBjb3VsZCBiZSBjb25mdXNpbmcsIHNvIHlvdSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZXkgbWF0Y2guXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkZpeCxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiBmYWxzZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIjxpIGNsYXNzPVxcXCJ3aXphcmQgaWNvblxcXCI+PC9pPlVwZGF0ZSBsYWJlbFwiLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgTGlua09iamVjdC5jb250ZXh0ID0gTGlua09iamVjdC5jb250ZXh0LnJlcGxhY2UoL1xcPigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKVxcPFxcLy9nLCBcIj5cIiArIExpbmtPYmplY3QubWFpbHRvLmVtYWlsICsgXCI8L1wiKTtcbiAgICAgICAgaWYoTGlua09iamVjdC5fc3VwZXIub3ZlcnJpZGRlbklkcy5pbmRleE9mKFwiY3VzdG9tLWNvbmZyaW0tY29udGFjdC1lbWFpbC1hZGRyZXNzZXNcIik+LTEpe1xuICAgICAgICAgIExpbmtPYmplY3QuX3N1cGVyLm92ZXJyaWRkZW5JZHMuc3BsaWNlKExpbmtPYmplY3QuX3N1cGVyLm92ZXJyaWRkZW5JZHMuaW5kZXhPZihcImN1c3RvbS1jb25mcmltLWNvbnRhY3QtZW1haWwtYWRkcmVzc2VzXCIpLDEpO1xuICAgICAgICB9XG4gICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJGaXhcIiwgXCJVcGRhdGUgbGFiZWxcIiwgTGlua09iamVjdC5fc3VwZXIuX2RlZmF1bHRTQ29kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIExpbmtPYmplY3QuaXNMaW5rVHlwZShcIm1haWx0b1wiKSAmJiAoZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gTGlua09iamVjdC51cGRhdGVNYWlsdG9PYmooKTtcbiAgICAgICAgdmFyIGNvbnRleHQ6IHN0cmluZyA9IHdpbmRvdy5qUXVlcnkoTGlua09iamVjdC5jb250ZXh0KS50ZXh0KCkudHJpbSgpO1xuICAgICAgICByZXR1cm4gY29udGV4dC5pbmRleE9mKFwiQFwiKT4tMSAmJiBMaW5rT2JqZWN0Lm1haWx0by5lbWFpbCAhPT0gY29udGV4dC5zdWJzdHIoMCxMaW5rT2JqZWN0Lm1haWx0by5lbWFpbC5sZW5ndGgpO1xuXG4gICAgICB9KSgpXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstbWFpbHRvLXN1YmplY3QtbGluZVwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkFsd2F5cyBpbmNsdWRlIGEgc3ViamVjdCBsaW5lLlwiLFxuICAgIGRlc2NyaXB0aW9uOlwiWW91IGNhbiBhZGQgYSBzdWJqZWN0IGxpbmUgdXNpbmcgdGhlIEVkaXRvciBidXR0b24uXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5NZWRpdW0sXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCI8aSBjbGFzcz1cXFwid2l6YXJkIGljb25cXFwiPjwvaT4gT3BlbiBFZGl0b3JcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QubWFpbHRvLm9wZW5FZGl0b3IoKTtcbiAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJCZXN0IFByYWN0aWNlXCIsIFwiQWRkIHN1YmplY3QgbGluZVwiLCBcIkFkZCBzdWJqZWN0IGxpbmVcIik7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIExpbmtPYmplY3QuaXNMaW5rVHlwZSgnbWFpbHRvJykgJiYgIUxpbmtPYmplY3QubWFpbHRvLmhhcygnc3ViamVjdCcpXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTE1ha2VyLmludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXCJoeXBlcmxpbmstbWlzc2luZy1jb250ZW50XCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxudmFyIHByb2NlZWQgPSAod2luZG93LmpRdWVyeShMaW5rT2JqZWN0LmNvbnRleHQpLmZpbmQoXCJpbWdcIikubGVuZ3RoID09MFxuJiYgd2luZG93LmpRdWVyeShMaW5rT2JqZWN0LmNvbnRleHQpLnRleHQoKS50cmltKCkgPT1cIlwiKVxuJiYgKCFMaW5rT2JqZWN0Lmhhc093blByb3BlcnR5KFwiZGVsZXRlT25SZW5kZXJcIikgfHwhTGlua09iamVjdC5kZWxldGVPblJlbmRlcik7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJNaXNzaW5nIGNvbnRlbnRcIixcbiAgICBkZXNjcmlwdGlvbjpgVGhpcyBsaW5rIGRvZXNuJ3QgY29udGFpbiBhbnkgdGV4dCBvciBpbWFnZS5cbiAgICBUaGlzIG1pZ2h0IGJlIGEgbWlzdGFrZTsgeW91IGNhbiByZW1vdmUgaXRcbiAgICBmcm9tIHRoZSBjb2RlLCBvciBieSBjbGlja2luZyB0aGUgYnV0dG9uIHRvIHRoZVxuICAgIHJpZ2h0LCBhbmQgdGhpcyBsaW5rIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIHlvdSBleHBvcnQgdGhlIGNvZGUuYCxcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6ICc8aSBjbGFzcz1cInRyYXNoIGljb25cIj48L2k+IFJlbW92ZSBsaW5rJyxcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QubmV3LnVybCA9IFwiXCI7XG4gICAgICAgIExpbmtPYmplY3QuZGVsZXRlT25SZW5kZXIgPSB0cnVlO1xuICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHByb2NlZWQ7XG5cbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcImh5cGVybGluay1yZW1vdmUtdGl0bGUtdGFnXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiUmVtb3ZlIHRpdGxlIHRhZ1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiTGlua3MgaW4gZW1haWxzIHNob3VsZG4ndCB1c2UgdGl0bGUgdGFncy4gVGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggYWNjZXNzaWJpbGl0eSBmb3Igc2NyZWVuIHJlYWRlcnMsIGJ1dCBhbHNvIGNhbiBtaXNyZXByZXNlbnQgbGlua3MuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5NZWRpdW0sXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBHbG9iYWxWYXJzLkxpbmtIYXNUaXRsZVRhZ1JlZ2V4R2xvYmFsLnRlc3QoTGlua09iamVjdC5jb250ZXh0KVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
