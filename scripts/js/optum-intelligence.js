EMLIntelligence.module("hyperlink").register("hyperlink-descriptive-ctas",["LinkObject",function(e){return{title:"Use descriptive CTAs",description:"\"Click here\" links aren't really descriptive enough to be effective CTAs. It's better to introduce a link by saying something like: <br>'Read the new <a href=\"javascript:angular.noop()\">Product brochure</a>.'",type:ErrorType.Warn,severity:ErrorSeverity.Low,canContinue:!0,when:function(){return e.context&&/click|click\shere/g.test(e.context)}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-has-spaces",["LinkObject",function(e){return{title:"This link has spaces",description:"Stuff like this breaks. Fix it now.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:"Remove spaces",handler:function(){e["new"].url=e["new"].url.replace(/\s/g,"%20"),e.isLinkComplete()}},when:function(){return e["new"].contains(" ")}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-landing-page-preferred",["LinkObject",function(e){var n=GlobalVars.landingPagePreferred.test(e["new"].url);if(n){var t=e["new"].url.match(GlobalVars.landingPagePreferred);if(t.length>0)var i=t[0].toUpperCase().substr(1,t[0].length)}return{title:"Landing page preferred",description:["When you direct email ","traffic to ",/^[aeiouAEIOU]/gi.test(i)?"an ":"a ",i,", it's generally a good idea to serve the ",i," on"," a landing page with more information about the asset. This will also ","give you more analytics data, like session/visit duration and promote ","browsing other content."].join(""),type:ErrorType.BestPractice,severity:ErrorSeverity.High,canContinue:!0,when:function(){return n}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-no-shortlinks",["LinkObject",function(e){return{title:"Don't use shortlinks or vanity URLs in emails",description:"Always use the long link. Adding query string parameter to a vanity     url inside an email will not track appropriately.",type:e["new"].contains("optum.co")?ErrorType.Fix:ErrorType.BestPractice,severity:ErrorSeverity.High,canContinue:!e["new"].contains("optum.co"),when:function(){return/.com?(\.[a-z]{2,3})?\/([a-zA-Z0-9\-]+)\/*(\?.*)?$/.test(e["new"].url.trim())&&!e["new"].contains("info.optum")&&!/(twitter|linkedin|facebook|youtube)\.com?/.test(e["new"].url)}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-ofts-dont-use",["LinkObject",function(e){return{title:"We don't link to OFTs in emails we send.",description:"You should not be sending OFTs to external contacts.    OFTs only work with Outlook on PCs, and that is less     than half of the population of email clients these days.",type:ErrorType.BestPractice,severity:ErrorSeverity.High,canContinue:!0,when:function(){var n=e["new"].url.indexOf(".oft")>-1;return n}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-ofts-implement-ftac",["LinkObject",function(e){return{title:"Forward to a colleague?",description:"If you are trying to do a Forward to a Colleague (FTAC)   feature, forget doing that with an OFT. You can achieve    the same effect by using a mailto link. <br><br><em>NOTE:     You can leave the email address field blank for this one.      When the user clicks the link the email field will be empty,       so he/she can add their own recipients.</em>",type:ErrorType.Suggestion,severity:ErrorSeverity.Low,canContinue:!0,cta:{label:'<i class="wizard icon"></i> Try it?',handler:function(){e.mailto.email="",e.mailto.subject="I wanted you to see this",e.mailto.body="Check out this link\n\nhttps://www.yourlinkgoeshere.com",e.mailto.composeEmail(),e.mailto.initEmailEditor(),e.mailto.openEditor(),e.isLinkComplete(),window.ga("send","event","Suggestion","Use FTAC","Use FTAC")}},when:function(){return e["new"].url.indexOf(".oft")>-1}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-relative-path",["LinkObject",function(e){return{title:"This URL is not correct.",description:"/content/optum3/en/ is only for use in author in AEM, not on the live site.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,when:function(){return/http(.*)\/content\/optum(.*)\.html/gi.test(e["new"].url)}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-style-matters",["LinkObject",function(e){return{title:"Style matters",description:"You should not put punctuation inside of a link unless it is a button, and even then it's a little weird.",type:ErrorType.BestPractice,severity:ErrorSeverity.Medium,canContinue:!0,cta:{label:"Move the punctuation",handler:function(){e.context=e.context.replace(GlobalVars.linkEncapsulatedPunctuation,"</a>$1"),e.isLinkComplete()}},when:function(){return GlobalVars.linkEncapsulatedPunctuation.test(e.context)}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-tracking-add-all",["LinkObject",function(e){var n=!1;return e.requiresTrackingCode()&&e.hasTrackingCode()&&e._super.mapLinkObjects(function(e){e.requiresTrackingCode()&&!e.hasTrackingCode()&&(n=!0)}),{title:"Need a hand?",description:"I noticed you added a tracking code to this link, great job.     If you want I can add the same tracking code to the other links in this email      which require tracking codes.",type:ErrorType.Suggestion,severity:ErrorSeverity.Low,canContinue:!0,cta:{label:'<i class="wizard icon"></i> Update all links',handler:function(){var n="";e["new"].searchParams.entries.forEach(function(t){e.hasTrackingCode(t)&&(n=t)}),e._super.mapLinkObjects(function(e){e.requiresTrackingCode()&&!e.hasTrackingCode()&&e["new"].searchParams.append(n)}),e._super.mapLinkObjects(function(e){e.isLinkComplete()}),window.ga("send","event","Suggestion","Cascade Tracking Code","Cascade Tracking Code")}},when:function(){return n}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-tracking-not-required",["LinkObject",function(e){var n=/^[aeiouAEIOU]/gi.test(i)?"an ":"a "+i,t=e["new"].url.match(GlobalVars.extDoesNotrequireTrackingCode);if(t&&t.length>0)var i=t[0].toUpperCase().substr(1,t[0].length),n=/^[aeiouAEIOU]/gi.test(i)?"an ":"a "+i;return{title:"Unnecessary tracking link",description:"It looks like you added a tracking code to "+n+" file.\n    In fact, you can only track web pages with these tracking codes.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:'<i class="wizard icon"></i>Fix it now',handler:function(){for(var n=0;n<e["new"].searchParams.entries.length;n++)/[a-z]{1,4}=(.*?:){3,9}/gi.test(e["new"].searchParams.entries[n])&&e["new"].searchParams.deleteAtIndex(n),window.ga("send","event","Suggestion","Unnecessary tracking code","Remove Tracking Code");e["new"].searchParams.updateEntries(),e.isLinkComplete()}},when:function(){return GlobalVars.extDoesNotrequireTrackingCode.test(e["new"].url)&&e.hasTrackingCode()}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-tracking-required",["LinkObject",function(e){return{id:"optum-budurl-tracking-code-required",title:"This URL needs a tracking code.",description:"Create and add one to make this message go away.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:'<i class="unlock alternate icon"></i> Do not track link',handler:function(){e.overrideTrackingRequirements(),e.isLinkComplete()}},when:function(){return e.whiteListedUrl!==e["new"].url&&e.needsTrackingCode()&&!e["new"].contains("optum.co/")}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-tracking-s-code",["LinkObject",function(e){return{title:"Are you tracking channel source with your form?",description:"If this link directs to a page with a form, consider adding      an s-code to the URL so you can populate a form field with       a value from the query string to track the channel source        of the form submission.<br><br><em>NOTE: You can change         the value of the s-code to whatever you'd like, but we'll          add the <code>s=email</code> by default.</em>",type:ErrorType.Suggestion,severity:ErrorSeverity.Low,cta:{label:'<i class="wizard icon"></i>Add S-Code',handler:function(){e["new"].searchParams.append("s=email"),e.isLinkComplete(),window.ga("send","event","Suggestion","Add s-code","s=email")}},when:function(){var n=e.requiresSCode(),t=e["new"].searchParams.has("s"),i=n&&!t;return i&&!t}}}]),EMLIntelligence.module("hyperlink").register("hyperlink-v-equals",["LinkObject",function(e){return{title:"V= cannot be used in emails.",description:"This query string parameter is reserved for vanity urls, and should never be used in an email.",type:ErrorType.Fix,severity:ErrorSeverity.High,canContinue:!1,cta:{label:"Remove parameter",handler:function(){e["new"].searchParams["delete"]("v"),e.isLinkComplete()}},when:function(){return e["new"].searchParams.has("v")}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh5cGVybGluay1kZXNjcmlwdGl2ZS1jdGFzLnRzIiwiaHlwZXJsaW5rLWhhcy1zcGFjZXMudHMiLCJoeXBlcmxpbmstbGFuZGluZy1wYWdlLXByZWZlcnJlZC50cyIsImh5cGVybGluay1uby1zaG9ydGxpbmtzLnRzIiwiaHlwZXJsaW5rLW9mdHMtZG9udC11c2UudHMiLCJoeXBlcmxpbmstb2Z0cy1pbXBsZW1lbnQtZnRhYy50cyIsImh5cGVybGluay1yZWxhdGl2ZS1wYXRoLnRzIiwiaHlwZXJsaW5rLXN0eWxlLW1hdHRlcnMudHMiLCJoeXBlcmxpbmstdHJhY2tpbmctYWRkLWFsbC50cyIsImh5cGVybGluay10cmFja2luZy1ub3QtcmVxdWlyZWQudHMiLCJoeXBlcmxpbmstdHJhY2tpbmctcmVxdWlyZWQudHMiLCJoeXBlcmxpbmstdHJhY2tpbmctcy1jb2RlLnRzIiwiaHlwZXJsaW5rLXYtZXF1YWxzLnRzIl0sIm5hbWVzIjpbIkVNTEludGVsbGlnZW5jZSIsIm1vZHVsZSIsInJlZ2lzdGVyIiwiTGlua09iamVjdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiRXJyb3JUeXBlIiwiV2FybiIsInNldmVyaXR5IiwiRXJyb3JTZXZlcml0eSIsIkxvdyIsImNhbkNvbnRpbnVlIiwid2hlbiIsImNvbnRleHQiLCJ0ZXN0IiwiRml4IiwiSGlnaCIsImN0YSIsImxhYmVsIiwiaGFuZGxlciIsInVybCIsInJlcGxhY2UiLCJpc0xpbmtDb21wbGV0ZSIsImNvbnRhaW5zIiwicHJvY2VlZCIsIkdsb2JhbFZhcnMiLCJsYW5kaW5nUGFnZVByZWZlcnJlZCIsIm1hdGNoIiwibGVuZ3RoIiwiZXh0IiwidG9VcHBlckNhc2UiLCJzdWJzdHIiLCJqb2luIiwiQmVzdFByYWN0aWNlIiwidHJpbSIsImluZGV4T2YiLCJTdWdnZXN0aW9uIiwibWFpbHRvIiwiZW1haWwiLCJzdWJqZWN0IiwiYm9keSIsImNvbXBvc2VFbWFpbCIsImluaXRFbWFpbEVkaXRvciIsIm9wZW5FZGl0b3IiLCJ3aW5kb3ciLCJnYSIsIk1lZGl1bSIsImxpbmtFbmNhcHN1bGF0ZWRQdW5jdHVhdGlvbiIsImFmZmVjdGVkIiwicmVxdWlyZXNUcmFja2luZ0NvZGUiLCJoYXNUcmFja2luZ0NvZGUiLCJfc3VwZXIiLCJtYXBMaW5rT2JqZWN0cyIsIkxPIiwidHJhY2tpbmdDb2RlIiwic2VhcmNoUGFyYW1zIiwiZW50cmllcyIsImZvckVhY2giLCJzdHJQYXJhbWV0ZXIiLCJhcHBlbmQiLCJwaHJhc2UiLCJleHREb2VzTm90cmVxdWlyZVRyYWNraW5nQ29kZSIsImkiLCJkZWxldGVBdEluZGV4IiwidXBkYXRlRW50cmllcyIsImlkIiwib3ZlcnJpZGVUcmFja2luZ1JlcXVpcmVtZW50cyIsIndoaXRlTGlzdGVkVXJsIiwibmVlZHNUcmFja2luZ0NvZGUiLCJyZXF1aXJlc1MiLCJyZXF1aXJlc1NDb2RlIiwiaGFzUyIsImhhcyJdLCJtYXBwaW5ncyI6IkFBQUFBLGdCQUFnQkMsT0FBTyxhQUFhQyxTQUFTLDhCQUMzQyxhQUFhLFNBQVNDLEdBR3RCLE9BRUVDLE1BQU8sdUJBQ1BDLFlBQWEsdU5BQ2JDLEtBQU1DLFVBQVVDLEtBQ2hCQyxTQUFVQyxjQUFjQyxJQUV4QkMsYUFBYSxFQVFiQyxLQUFNLFdBQ0osTUFBT1YsR0FBV1csU0FBVyxxQkFBcUJDLEtBQUtaLEVBQVdXLGNDcEJ4RWQsZ0JBQWdCQyxPQUFPLGFBQWFDLFNBQVMsd0JBQzNDLGFBQWEsU0FBU0MsR0FHdEIsT0FFRUMsTUFBTyx1QkFDUEMsWUFBWSxzQ0FDWkMsS0FBTUMsVUFBVVMsSUFDaEJQLFNBQVVDLGNBQWNPLEtBRXhCTCxhQUFhLEVBQ2JNLEtBQ0VDLE1BQU8sZ0JBQ1BDLFFBQVMsV0FDUGpCLEVBQUFBLE9BQWVrQixJQUFNbEIsRUFBQUEsT0FBZWtCLElBQUlDLFFBQVEsTUFBTyxPQUN2RG5CLEVBQVdvQixtQkFHZlYsS0FBTSxXQUNKLE1BQU9WLEdBQUFBLE9BQWVxQixTQUFTLFVDcEJyQ3hCLGdCQUFnQkMsT0FBTyxh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LGFBQWMsYUFHM0RqQyxLQUFNLFdBRUosR0FBSXlELEdBQVluRSxFQUFXb0UsZ0JBQ3ZCQyxFQUFPckUsRUFBQUEsT0FBZXFELGFBQWFpQixJQUFJLEtBQ3ZDaEQsRUFBVTZDLElBQWNFLENBRTVCLE9BQU8vQyxLQUFZK0MsT0NoQ3pCeEUsZ0JBQWdCQyxPQUFPLGFBQWFDLFNBQ2xDLHNCQUNBLGFBQWEsU0FBU0MsR0FHdEIsT0FFRUMsTUFBTywrQkFDUEMsWUFBWSxpR0FDWkMsS0FBTUMsVUFBVVMsSUFDaEJQLFNBQVVDLGNBQWNPLEtBRXhCTCxhQUFhLEVBQ2JNLEtBQ0VDLE1BQU8sbUJBQ1BDLFFBQVMsV0FDUGpCLEVBQUFBLE9BQWVxRCxhQUFmckQsVUFBbUMsS0FDbkNBLEVBQVdvQixtQkFHZlYsS0FBTSxXQUNKLE1BQU9WLEdBQUFBLE9BQWVxRCxhQUFhaUIsSUFBSSIsImZpbGUiOiJvcHR1bS1pbnRlbGxpZ2VuY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJFTUxJbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWRlc2NyaXB0aXZlLWN0YXNcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJVc2UgZGVzY3JpcHRpdmUgQ1RBc1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlxcXCJDbGljayBoZXJlXFxcIiBsaW5rcyBhcmVuJ3QgcmVhbGx5IGRlc2NyaXB0aXZlIGVub3VnaCB0byBiZSBlZmZlY3RpdmUgQ1RBcy4gSXQncyBiZXR0ZXIgdG8gaW50cm9kdWNlIGEgbGluayBieSBzYXlpbmcgc29tZXRoaW5nIGxpa2U6IDxicj4nUmVhZCB0aGUgbmV3IDxhIGhyZWY9XFxcImphdmFzY3JpcHQ6YW5ndWxhci5ub29wKClcXFwiPlByb2R1Y3QgYnJvY2h1cmU8L2E+LidcIixcbiAgICB0eXBlOiBFcnJvclR5cGUuV2FybixcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5Mb3csXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBMaW5rT2JqZWN0LmNvbnRleHQgJiYgL2NsaWNrfGNsaWNrXFxzaGVyZS9nLnRlc3QoTGlua09iamVjdC5jb250ZXh0KVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxJbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFwiaHlwZXJsaW5rLWhhcy1zcGFjZXNcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJUaGlzIGxpbmsgaGFzIHNwYWNlc1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiU3R1ZmYgbGlrZSB0aGlzIGJyZWFrcy4gRml4IGl0IG5vdy5cIixcbiAgICB0eXBlOiBFcnJvclR5cGUuRml4LFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IGZhbHNlLFxuICAgIGN0YToge1xuICAgICAgbGFiZWw6IFwiUmVtb3ZlIHNwYWNlc1wiLFxuICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgTGlua09iamVjdC5uZXcudXJsID0gTGlua09iamVjdC5uZXcudXJsLnJlcGxhY2UoL1xccy9nLCBcIiUyMFwiKTtcbiAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBMaW5rT2JqZWN0Lm5ldy5jb250YWlucyhcIiBcIik7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTEludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXG4gIFwiaHlwZXJsaW5rLWxhbmRpbmctcGFnZS1wcmVmZXJyZWRcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xubGV0IHByb2NlZWQgPSBHbG9iYWxWYXJzLmxhbmRpbmdQYWdlUHJlZmVycmVkLnRlc3QoTGlua09iamVjdC5uZXcudXJsKTtcbmlmKHByb2NlZWQpe1xuICB2YXIgbWF0Y2ggPSBMaW5rT2JqZWN0Lm5ldy51cmwubWF0Y2goR2xvYmFsVmFycy5sYW5kaW5nUGFnZVByZWZlcnJlZCk7XG4gIGlmKG1hdGNoLmxlbmd0aD4wKXtcbiAgICB2YXIgZXh0ID0gbWF0Y2hbMF0udG9VcHBlckNhc2UoKS5zdWJzdHIoMSxtYXRjaFswXS5sZW5ndGgpO1xuICB9XG5cbn0gZWxzZSB7XG5cbn1cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkxhbmRpbmcgcGFnZSBwcmVmZXJyZWRcIixcbiAgICBkZXNjcmlwdGlvbjpbXCJXaGVuIHlvdSBkaXJlY3QgZW1haWwgXCIsXG4gICAgXCJ0cmFmZmljIHRvIFwiLCAoL15bYWVpb3VBRUlPVV0vZ2kudGVzdChleHQpID8gXCJhbiBcIiA6IFwiYSBcIiksXG4gICAgZXh0LFwiLCBpdCdzIGdlbmVyYWxseSBhIGdvb2QgaWRlYSB0byBzZXJ2ZSB0aGUgXCIsZXh0LFwiIG9uXCIsXG4gICAgXCIgYSBsYW5kaW5nIHBhZ2Ugd2l0aCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhc3NldC4gVGhpcyB3aWxsIGFsc28gXCIsXG4gICAgXCJnaXZlIHlvdSBtb3JlIGFuYWx5dGljcyBkYXRhLCBsaWtlIHNlc3Npb24vdmlzaXQgZHVyYXRpb24gYW5kIHByb21vdGUgXCIsXG4gICAgXCJicm93c2luZyBvdGhlciBjb250ZW50LlwiXS5qb2luKFwiXCIpLFxuICAgIHR5cGU6IEVycm9yVHlwZS5CZXN0UHJhY3RpY2UsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICAvLyBjdGE6IHtcbiAgICAvLyAgIGxhYmVsOiBcIlJlbW92ZSBwYXJhbWV0ZXJcIixcbiAgICAvLyAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgLy8gICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJ2XCIpO1xuICAgIC8vICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgLy8gICB9XG4gICAgLy8gfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHByb2NlZWRcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MSW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcbiAgXCJoeXBlcmxpbmstbm8tc2hvcnRsaW5rc1wiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIkRvbid0IHVzZSBzaG9ydGxpbmtzIG9yIHZhbml0eSBVUkxzIGluIGVtYWlsc1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiQWx3YXlzIHVzZSB0aGUgbG9uZyBsaW5rLiBBZGRpbmcgcXVlcnkgc3RyaW5nIHBhcmFtZXRlciB0byBhIHZhbml0eVxcXG4gICAgIHVybCBpbnNpZGUgYW4gZW1haWwgd2lsbCBub3QgdHJhY2sgYXBwcm9wcmlhdGVseS5cIixcbiAgICB0eXBlOiAoTGlua09iamVjdC5uZXcuY29udGFpbnMoXCJvcHR1bS5jb1wiKSkgPyBFcnJvclR5cGUuRml4IDogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiAoTGlua09iamVjdC5uZXcuY29udGFpbnMoXCJvcHR1bS5jb1wiKSkgPyBmYWxzZSA6IHRydWUsXG4gICAgLy8gY3RhOiB7XG4gICAgLy8gICBsYWJlbDogXCJSZW1vdmUgcGFyYW1ldGVyXCIsXG4gICAgLy8gICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAvLyAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiAvLmNvbT8oXFwuW2Etel17MiwzfSk/XFwvKFthLXpBLVowLTlcXC1dKylcXC8qKFxcPy4qKT8kLy50ZXN0KExpbmtPYmplY3QubmV3LnVybC50cmltKCkpXG4gICAgICAmJiAhTGlua09iamVjdC5uZXcuY29udGFpbnMoJ2luZm8ub3B0dW0nKVxuICAgICAgJiYgIS8odHdpdHRlcnxsaW5rZWRpbnxmYWNlYm9va3x5b3V0dWJlKVxcLmNvbT8vLnRlc3QoTGlua09iamVjdC5uZXcudXJsKVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxJbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFxuICBcImh5cGVybGluay1vZnRzLWRvbnQtdXNlXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG5cbnJldHVybiB7XG4gIC8vIGlkOiBcIlwiLFxuICB0aXRsZTogXCJXZSBkb24ndCBsaW5rIHRvIE9GVHMgaW4gZW1haWxzIHdlIHNlbmQuXCIsXG4gIGRlc2NyaXB0aW9uOlwiWW91IHNob3VsZCBub3QgYmUgc2VuZGluZyBPRlRzIHRvIGV4dGVybmFsIGNvbnRhY3RzLlxcXG4gICAgT0ZUcyBvbmx5IHdvcmsgd2l0aCBPdXRsb29rIG9uIFBDcywgYW5kIHRoYXQgaXMgbGVzc1xcXG4gICAgIHRoYW4gaGFsZiBvZiB0aGUgcG9wdWxhdGlvbiBvZiBlbWFpbCBjbGllbnRzIHRoZXNlIGRheXMuXCIsXG4gIHR5cGU6IEVycm9yVHlwZS5CZXN0UHJhY3RpY2UsXG4gIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkhpZ2gsXG4gIC8vIHJlc291cmNlOiBcIlwiLFxuICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgLy8gY3RhOiB7XG4gIC8vICAgbGFiZWw6IFwiUmVtb3ZlIHBhcmFtZXRlclwiLFxuICAvLyAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gIC8vICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgLy8gICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgLy8gICB9XG4gIC8vIH0sXG4gIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgbGV0IHByb2NlZWQgPSBMaW5rT2JqZWN0Lm5ldy51cmwuaW5kZXhPZihcIi5vZnRcIik+LTE7XG4gICAgcmV0dXJuIHByb2NlZWRcbiAgICB9XG4gIH07XG59XSk7XG4iLCJFTUxJbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFxuICBcImh5cGVybGluay1vZnRzLWltcGxlbWVudC1mdGFjXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG5yZXR1cm4ge1xuICAvLyBpZDogXCJcIixcbiAgdGl0bGU6IFwiRm9yd2FyZCB0byBhIGNvbGxlYWd1ZT9cIixcbiAgZGVzY3JpcHRpb246XCJJZiB5b3UgYXJlIHRyeWluZyB0byBkbyBhIEZvcndhcmQgdG8gYSBDb2xsZWFndWUgKEZUQUMpXFxcbiAgIGZlYXR1cmUsIGZvcmdldCBkb2luZyB0aGF0IHdpdGggYW4gT0ZULiBZb3UgY2FuIGFjaGlldmVcXFxuICAgIHRoZSBzYW1lIGVmZmVjdCBieSB1c2luZyBhIG1haWx0byBsaW5rLiA8YnI+PGJyPjxlbT5OT1RFOlxcXG4gICAgIFlvdSBjYW4gbGVhdmUgdGhlIGVtYWlsIGFkZHJlc3MgZmllbGQgYmxhbmsgZm9yIHRoaXMgb25lLlxcXG4gICAgICBXaGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgbGluayB0aGUgZW1haWwgZmllbGQgd2lsbCBiZSBlbXB0eSxcXFxuICAgICAgIHNvIGhlL3NoZSBjYW4gYWRkIHRoZWlyIG93biByZWNpcGllbnRzLjwvZW0+XCIsXG4gIHR5cGU6IEVycm9yVHlwZS5TdWdnZXN0aW9uLFxuICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5Mb3csXG4gIC8vIHJlc291cmNlOiBcIlwiLFxuICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgY3RhOiB7XG4gICAgbGFiZWw6IFwiPGkgY2xhc3M9XFxcIndpemFyZCBpY29uXFxcIj48L2k+IFRyeSBpdD9cIixcbiAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgTGlua09iamVjdC5tYWlsdG8uZW1haWwgPSBcIlwiO1xuICAgICAgTGlua09iamVjdC5tYWlsdG8uc3ViamVjdCA9IFwiSSB3YW50ZWQgeW91IHRvIHNlZSB0aGlzXCI7XG4gICAgICBMaW5rT2JqZWN0Lm1haWx0by5ib2R5ID0gXCJDaGVjayBvdXQgdGhpcyBsaW5rXFxuXFxuaHR0cHM6Ly93d3cueW91cmxpbmtnb2VzaGVyZS5jb21cIjtcbiAgICAgIExpbmtPYmplY3QubWFpbHRvLmNvbXBvc2VFbWFpbCgpO1xuICAgICAgTGlua09iamVjdC5tYWlsdG8uaW5pdEVtYWlsRWRpdG9yKCk7XG4gICAgICBMaW5rT2JqZWN0Lm1haWx0by5vcGVuRWRpdG9yKCk7XG4gICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIlN1Z2dlc3Rpb25cIiwgXCJVc2UgRlRBQ1wiLCBcIlVzZSBGVEFDXCIpO1xuICAgIH1cbiAgfSxcbiAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gTGlua09iamVjdC5uZXcudXJsLmluZGV4T2YoXCIub2Z0XCIpPi0xXG4gICAgfVxuICB9O1xufV0pO1xuIiwiRU1MSW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcbiAgXCJoeXBlcmxpbmstcmVsYXRpdmUtcGF0aFwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG5cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIlRoaXMgVVJMIGlzIG5vdCBjb3JyZWN0LlwiLFxuICAgIGRlc2NyaXB0aW9uOlwiL2NvbnRlbnQvb3B0dW0zL2VuLyBpcyBvbmx5IGZvciB1c2UgaW4gYXV0aG9yIGluIEFFTSwgbm90IG9uIHRoZSBsaXZlIHNpdGUuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkZpeCxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiBmYWxzZSxcbiAgICAvLyBjdGE6IHtcbiAgICAvLyAgIGxhYmVsOiBcIlJlbW92ZSBwYXJhbWV0ZXJcIixcbiAgICAvLyAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgLy8gICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJ2XCIpO1xuICAgIC8vICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgLy8gICB9XG4gICAgLy8gfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIC9odHRwKC4qKVxcL2NvbnRlbnRcXC9vcHR1bSguKilcXC5odG1sL2dpLnRlc3QoTGlua09iamVjdC5uZXcudXJsKVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxJbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFxuICBcImh5cGVybGluay1zdHlsZS1tYXR0ZXJzXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiU3R5bGUgbWF0dGVyc1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiWW91IHNob3VsZCBub3QgcHV0IHB1bmN0dWF0aW9uIGluc2lkZSBvZiBhIGxpbmsgdW5sZXNzIGl0IGlzIGEgYnV0dG9uLCBhbmQgZXZlbiB0aGVuIGl0J3MgYSBsaXR0bGUgd2VpcmQuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkJlc3RQcmFjdGljZSxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5NZWRpdW0sXG4gICAgLy8gcmVzb3VyY2U6IFwiXCIsXG4gICAgY2FuQ29udGludWU6IHRydWUsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogJ01vdmUgdGhlIHB1bmN0dWF0aW9uJyxcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QuY29udGV4dCA9IExpbmtPYmplY3QuY29udGV4dC5yZXBsYWNlKEdsb2JhbFZhcnMubGlua0VuY2Fwc3VsYXRlZFB1bmN0dWF0aW9uLCBcIjwvYT4kMVwiKTtcbiAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBHbG9iYWxWYXJzLmxpbmtFbmNhcHN1bGF0ZWRQdW5jdHVhdGlvbi50ZXN0KExpbmtPYmplY3QuY29udGV4dClcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MSW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcbiAgXCJoeXBlcmxpbmstdHJhY2tpbmctYWRkLWFsbFwiLFtcbiAgXCJMaW5rT2JqZWN0XCIsZnVuY3Rpb24oTGlua09iamVjdCl7XG4gICAgdmFyIGFmZmVjdGVkID0gZmFsc2U7XG4gICAgaWYoTGlua09iamVjdC5yZXF1aXJlc1RyYWNraW5nQ29kZSgpICYmIExpbmtPYmplY3QuaGFzVHJhY2tpbmdDb2RlKCkpe1xuICAgICAgTGlua09iamVjdC5fc3VwZXIubWFwTGlua09iamVjdHMoZnVuY3Rpb24oTE8pe1xuICAgICAgICBpZihMTy5yZXF1aXJlc1RyYWNraW5nQ29kZSgpICYmICFMTy5oYXNUcmFja2luZ0NvZGUoKSl7XG4gICAgICAgICAgYWZmZWN0ZWQ9dHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gIHJldHVybiB7XG4gICAgLy8gaWQ6IFwiXCIsXG4gICAgdGl0bGU6IFwiTmVlZCBhIGhhbmQ/XCIsXG4gICAgZGVzY3JpcHRpb246XCJJIG5vdGljZWQgeW91IGFkZGVkIGEgdHJhY2tpbmcgY29kZSB0byB0aGlzIGxpbmssIGdyZWF0IGpvYi5cXFxuICAgICBJZiB5b3Ugd2FudCBJIGNhbiBhZGQgdGhlIHNhbWUgdHJhY2tpbmcgY29kZSB0byB0aGUgb3RoZXIgbGlua3MgaW4gdGhpcyBlbWFpbCBcXFxuICAgICB3aGljaCByZXF1aXJlIHRyYWNraW5nIGNvZGVzLlwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5TdWdnZXN0aW9uLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkxvdyxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIjxpIGNsYXNzPVxcXCJ3aXphcmQgaWNvblxcXCI+PC9pPiBVcGRhdGUgYWxsIGxpbmtzXCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdHJhY2tpbmdDb2RlID0gXCJcIjtcbiAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXMuZm9yRWFjaChmdW5jdGlvbihzdHJQYXJhbWV0ZXIpe1xuICAgICAgICAgIGlmKExpbmtPYmplY3QuaGFzVHJhY2tpbmdDb2RlKHN0clBhcmFtZXRlcikpe1xuICAgICAgICAgICAgdHJhY2tpbmdDb2RlID0gc3RyUGFyYW1ldGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIExpbmtPYmplY3QuX3N1cGVyLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExPKXtcbiAgICAgICAgICBpZihMTy5yZXF1aXJlc1RyYWNraW5nQ29kZSgpICYmICFMTy5oYXNUcmFja2luZ0NvZGUoKSl7XG4gICAgICAgICAgICBMTy5uZXcuc2VhcmNoUGFyYW1zLmFwcGVuZCh0cmFja2luZ0NvZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIExpbmtPYmplY3QuX3N1cGVyLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExPKXsgTE8uaXNMaW5rQ29tcGxldGUoKTsgfSk7XG4gICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiU3VnZ2VzdGlvblwiLCBcIkNhc2NhZGUgVHJhY2tpbmcgQ29kZVwiLCBcIkNhc2NhZGUgVHJhY2tpbmcgQ29kZVwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoZW46IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gYWZmZWN0ZWRcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MSW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcbiAgXCJoeXBlcmxpbmstdHJhY2tpbmctbm90LXJlcXVpcmVkXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuICB2YXIgcGhyYXNlID0gL15bYWVpb3VBRUlPVV0vZ2kudGVzdChleHQpID8gXCJhbiBcIiA6IFwiYSBcIiArIGV4dDtcblxuICB2YXIgbWF0Y2ggPSBMaW5rT2JqZWN0Lm5ldy51cmwubWF0Y2goR2xvYmFsVmFycy5leHREb2VzTm90cmVxdWlyZVRyYWNraW5nQ29kZSk7XG4gIGlmKG1hdGNoICYmIG1hdGNoLmxlbmd0aD4wKXtcbiAgICB2YXIgZXh0ID0gbWF0Y2hbMF0udG9VcHBlckNhc2UoKS5zdWJzdHIoMSxtYXRjaFswXS5sZW5ndGgpO1xuICAgIHZhciBwaHJhc2UgPSAvXlthZWlvdUFFSU9VXS9naS50ZXN0KGV4dCkgPyBcImFuIFwiIDogXCJhIFwiICsgZXh0O1xuICAgIH1cblxuICByZXR1cm4ge1xuICAgIC8vIGlkOiBcIlwiLFxuICAgIHRpdGxlOiBcIlVubmVjZXNzYXJ5IHRyYWNraW5nIGxpbmtcIixcbiAgICBkZXNjcmlwdGlvbjpgSXQgbG9va3MgbGlrZSB5b3UgYWRkZWQgYSB0cmFja2luZyBjb2RlIHRvICR7cGhyYXNlfSBmaWxlLlxuICAgIEluIGZhY3QsIHlvdSBjYW4gb25seSB0cmFjayB3ZWIgcGFnZXMgd2l0aCB0aGVzZSB0cmFja2luZyBjb2Rlcy5gLFxuICAgIHR5cGU6IEVycm9yVHlwZS5GaXgsXG4gICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuSGlnaCxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICBjYW5Db250aW51ZTogZmFsc2UsXG4gICAgY3RhOiB7XG4gICAgICBsYWJlbDogXCI8aSBjbGFzcz1cXFwid2l6YXJkIGljb25cXFwiPjwvaT5GaXggaXQgbm93XCIsXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpPExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5lbnRyaWVzLmxlbmd0aDtpKyspe1xuICAgICAgICAgIGlmKC9bYS16XXsxLDR9PSguKj86KXszLDl9L2lnLnRlc3QoTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXNbaV0pKXtcbiAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBdEluZGV4KGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIlN1Z2dlc3Rpb25cIiwgXCJVbm5lY2Vzc2FyeSB0cmFja2luZyBjb2RlXCIsIFwiUmVtb3ZlIFRyYWNraW5nIENvZGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLnVwZGF0ZUVudHJpZXMoKTtcbiAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBHbG9iYWxWYXJzLmV4dERvZXNOb3RyZXF1aXJlVHJhY2tpbmdDb2RlLnRlc3QoTGlua09iamVjdC5uZXcudXJsKSAmJiBMaW5rT2JqZWN0Lmhhc1RyYWNraW5nQ29kZSgpXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIkVNTEludGVsbGlnZW5jZS5tb2R1bGUoXCJoeXBlcmxpbmtcIikucmVnaXN0ZXIoXG4gIFwiaHlwZXJsaW5rLXRyYWNraW5nLXJlcXVpcmVkXCIsW1xuICBcIkxpbmtPYmplY3RcIixmdW5jdGlvbihMaW5rT2JqZWN0KXtcblxuXG4gIHJldHVybiB7XG4gICAgaWQ6IFwib3B0dW0tYnVkdXJsLXRyYWNraW5nLWNvZGUtcmVxdWlyZWRcIixcbiAgICB0aXRsZTogXCJUaGlzIFVSTCBuZWVkcyBhIHRyYWNraW5nIGNvZGUuXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQ3JlYXRlIGFuZCBhZGQgb25lIHRvIG1ha2UgdGhpcyBtZXNzYWdlIGdvIGF3YXkuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkZpeCxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiBmYWxzZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiAnPGkgY2xhc3M9XCJ1bmxvY2sgYWx0ZXJuYXRlIGljb25cIj48L2k+IERvIG5vdCB0cmFjayBsaW5rJyxcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3Qub3ZlcnJpZGVUcmFja2luZ1JlcXVpcmVtZW50cygpO1xuICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIChMaW5rT2JqZWN0LndoaXRlTGlzdGVkVXJsIT09TGlua09iamVjdC5uZXcudXJsKVxuICAgICAgJiYgTGlua09iamVjdC5uZWVkc1RyYWNraW5nQ29kZSgpXG4gICAgICAmJiFMaW5rT2JqZWN0Lm5ldy5jb250YWlucyhcIm9wdHVtLmNvL1wiKVxuICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJFTUxJbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLnJlZ2lzdGVyKFxuICBcImh5cGVybGluay10cmFja2luZy1zLWNvZGVcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJBcmUgeW91IHRyYWNraW5nIGNoYW5uZWwgc291cmNlIHdpdGggeW91ciBmb3JtP1wiLFxuICAgIGRlc2NyaXB0aW9uOlwiSWYgdGhpcyBsaW5rIGRpcmVjdHMgdG8gYSBwYWdlIHdpdGggYSBmb3JtLCBjb25zaWRlciBhZGRpbmdcXFxuICAgICAgYW4gcy1jb2RlIHRvIHRoZSBVUkwgc28geW91IGNhbiBwb3B1bGF0ZSBhIGZvcm0gZmllbGQgd2l0aFxcXG4gICAgICAgYSB2YWx1ZSBmcm9tIHRoZSBxdWVyeSBzdHJpbmcgdG8gdHJhY2sgdGhlIGNoYW5uZWwgc291cmNlXFxcbiAgICAgICAgb2YgdGhlIGZvcm0gc3VibWlzc2lvbi48YnI+PGJyPjxlbT5OT1RFOiBZb3UgY2FuIGNoYW5nZVxcXG4gICAgICAgICB0aGUgdmFsdWUgb2YgdGhlIHMtY29kZSB0byB3aGF0ZXZlciB5b3UnZCBsaWtlLCBidXQgd2UnbGxcXFxuICAgICAgICAgIGFkZCB0aGUgPGNvZGU+cz1lbWFpbDwvY29kZT4gYnkgZGVmYXVsdC48L2VtPlwiLFxuICAgIHR5cGU6IEVycm9yVHlwZS5TdWdnZXN0aW9uLFxuICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkxvdyxcbiAgICAvLyByZXNvdXJjZTogXCJcIixcbiAgICAvLyBjYW5Db250aW51ZTogdHJ1ZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIjxpIGNsYXNzPVxcXCJ3aXphcmQgaWNvblxcXCI+PC9pPkFkZCBTLUNvZGVcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJzPWVtYWlsXCIpO1xuICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiU3VnZ2VzdGlvblwiLCBcIkFkZCBzLWNvZGVcIiwgXCJzPWVtYWlsXCIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2hlbjogZnVuY3Rpb24oKXtcblxuICAgICAgbGV0IHJlcXVpcmVzUyA9IExpbmtPYmplY3QucmVxdWlyZXNTQ29kZSgpO1xuICAgICAgbGV0IGhhc1MgPSBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKFwic1wiKTtcbiAgICAgIGxldCBwcm9jZWVkID0gcmVxdWlyZXNTICYmICFoYXNTO1xuICAgICAgXG4gICAgICByZXR1cm4gcHJvY2VlZCAmJiAhaGFzUztcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiRU1MSW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5yZWdpc3RlcihcbiAgXCJoeXBlcmxpbmstdi1lcXVhbHNcIixbXG4gIFwiTGlua09iamVjdFwiLGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuXG5cbiAgcmV0dXJuIHtcbiAgICAvLyBpZDogXCJcIixcbiAgICB0aXRsZTogXCJWPSBjYW5ub3QgYmUgdXNlZCBpbiBlbWFpbHMuXCIsXG4gICAgZGVzY3JpcHRpb246XCJUaGlzIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXIgaXMgcmVzZXJ2ZWQgZm9yIHZhbml0eSB1cmxzLCBhbmQgc2hvdWxkIG5ldmVyIGJlIHVzZWQgaW4gYW4gZW1haWwuXCIsXG4gICAgdHlwZTogRXJyb3JUeXBlLkZpeCxcbiAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5IaWdoLFxuICAgIC8vIHJlc291cmNlOiBcIlwiLFxuICAgIGNhbkNvbnRpbnVlOiBmYWxzZSxcbiAgICBjdGE6IHtcbiAgICAgIGxhYmVsOiBcIlJlbW92ZSBwYXJhbWV0ZXJcIixcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJ2XCIpO1xuICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3aGVuOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5oYXMoXCJ2XCIpXG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
