var EMLMakerAIEngine;!function(e){function a(){e.emailAILastEval=0}function r(a){if(Date.now()-e.emailAILastEval<300)return e.emailAILastEval=Date.now(),e.emailAILastCheck;e.emailAILastEval=Date.now();var r=new t(a);return r.when(function(){var e=0,r=0,t=[];return a.linkData.forEach(function(a){!a.readOnly&&a.needsTrackingCode()&&/resource|campaign/g.test(a["new"].url)&&(r++,a["new"].searchParams.has("s")&&(e++,t.push(a["new"].searchParams.get("s"))))}),t.sort().filter(function(e,a,r){return!a||e!=r[a-1]}),1==t.length?a.defaultSCode="s="+t[0]:a.defaultSCode="s=email",e<r}(),function(a,r){r.messages.push(new errorObject(ErrorType.Suggestion,"Want to update s-codes to ["+a._defaultSCode+"]","some description",{severity:ErrorSeverity.Low,handler:function(a){a.linkData.forEach(function(r){return!(!r.readOnly&&r.needsTrackingCode()&&/resource|campaign/g.test(r["new"].url))||(e.emailAILastEval=Date.now()-400,r["new"].searchParams.append(a._defaultSCode),void r.isLinkComplete())})},ctaLabel:"Add s-code"}))}).when(function(){var e=!1;return a.linkData.forEach(function(a){a.readOnly||!a["new"].searchParams.has("elqTrack")&&!a["new"].searchParams.has("elqTrackId")||(e=!0)}),e}(),function(a,r){r.messages.push(new errorObject(ErrorType.Suggestion,"Want to remove the junk Eloqua query strings?","I can remove those tags for you to clean things up, Eloqua will add them back anyways.",{severity:ErrorSeverity.Low,handler:function(a){a.linkData.forEach(function(a){return!!a.readOnly||(e.emailAILastEval=Date.now()-400,a["new"].searchParams["delete"]("elqTrack"),a["new"].searchParams["delete"]("elqTrackId"),a["new"].searchParams.updateSearchProp(),void a.isLinkComplete())})},ctaLabel:"Remove them"}))}),e.emailAILastCheck=r,r}var t=function(){function e(e){this.messages=[],this.canContinue=!0,this.EMLWorkspace=e}return e.prototype.when=function(e,a){return e&&a(this.EMLWorkspace,this),this},Object.defineProperty(e.prototype,"tabs",{get:function(){for(var e={},a=0;a<this.messages.length;a++)e[ErrorType[this.messages[a].type]]=this.messages[a].type;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){for(var e={},a=0;a<this.messages.length;a++)void 0===e[ErrorType[this.messages[a].type]]&&(e[ErrorType[this.messages[a].type]]=0),e[ErrorType[this.messages[a].type]]++;return e},enumerable:!0,configurable:!0}),e}();e.EmailIntelligence=t,e.emailAILastEval=0,e.emailAILastCheck=new t,e.resetCache=a,e.CheckEmail=r}(EMLMakerAIEngine||(EMLMakerAIEngine={}));