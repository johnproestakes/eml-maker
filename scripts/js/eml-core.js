function getOfflineVersionNumber(){var e="";if(window.location.search.indexOf("offline_version")){var t=window.location.search.substr(1,window.location.search.length).split("&");t.forEach(function(t){t.indexOf("offline_version=")>-1&&(e=t.substr("offline_version=".length,t.length))})}return e}var EMLFilterEngine=function(){function e(){this.scopes=[]}return e.prototype.__locateScope=function(e){var t=this.scopes.filter(function(t){return t.scope==e});if(0==t.length){var i=new EMLFilterScope(e);this.scopes.push(i);return i}return t[0]},e.prototype.module=function(e){var t=this.__locateScope(e);return t},e}(),EMLFilterScope=function(){function e(e){this.scope=e,this.rules=[],this.variables={}}return e.prototype.add=function(e){this.rules.push(e)},e.prototype.inject=function(e,t){this.variables[e]=t},e.prototype.associateVariable=function(e,t){this.inject(e,t),console.warn("EMLFilter: associateVariable has depreciated use inject.")},e.prototype.applyAction=function(e){},e.prototype.applyFilter=function(e){var t=e;if(this.rules.length>0)for(var i,r,n,s=function(){var e=o.rules[a];if("object"==typeof e){i=e[e.length-1],r=e.slice(0,e.length-1);var s=o;n=r.map(function(e){return s.variables[e]}),t=i.apply(null,n)(t)}else t=e()(t)},o=this,a=0;a<this.rules.length;a++)s();return t},e}(),EMLMaker;!function(e){e.filter=new EMLFilterEngine}(EMLMaker||(EMLMaker={}));var ErrorSeverity;!function(e){e[e.High=1]="High",e[e.Medium=2]="Medium",e[e.Low=3]="Low",e[e.Zero=4]="Zero"}(ErrorSeverity||(ErrorSeverity={}));var ErrorType;!function(e){e[e.Fix=1]="Fix",e[e.Warn=2]="Warn",e[e.Suggestion=3]="Suggestion",e[e.QA=4]="QA",e[e.BestPractice=5]="BestPractice"}(ErrorType||(ErrorType={}));var GlobalVars;!function(e){e.landingPagePreferred=/(\.mp4|\.avi|\.mpeg|\.mp3|\.swf|\.mov|\.pdf)/i,e.extDoesNotrequireTrackingCode=/(\.pdf|\.oft|\.ics|\.png|\.jpeg|\.jpg)/i,e.linkEncapsulatedPunctuation=/([\.\?\,\:\*]+)((\n|\r|\s)+)?<\/a>$/,e.RequiresSCodeRegex=/http(.*)optum(.*)\/(campaign|resource)/i,e.RequiresTrackingCodeRegex=RegExp("^http(s)?://(.*?)?optum(.*?)?.co[m.]?"),e.TelephoneRegex=/(\+?\d{1,2}(\s|-|\.))?\(?\d{3}\)?[\s.-]\d{3,}[\s.-]\d{4,}/,e.TelephoneRegexGlobal=/(\+?\d{1,2}(\s|-|\.))?\(?\d{3}\)?[\s.-]\d{3,}[\s.-]\d{4,}/g,e.EmailRegex=/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,e.EmailRegexGlobal=/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g,e.UrlRegex=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i,e.LinkHasTitleTagRegexGlobal=/<a\s([^<]*)title=\"(.*?)\">/gi,e.PreheaderRegexGlobal=/\<p\s[^\<]*class=\"preheader\"[^\>]*\>/gi,e.RequiredTrackingCodeWhitelist=[".pdf",".ics",".oft","optumsurveys.co","healthid.optum.com","learning.optum.com","app.info.optum.com","optum.webex.com","twitter.com","facebook.com","linkedin.com","info.optum"]}(GlobalVars||(GlobalVars={}));var InjectorModule=function(){function e(){this.variables={}}return e.prototype.__getParams=function(e,t){var i=e.map(function(e){return t[e]});return i},e.prototype.__getInjector=function(e){var t={fn:function(){},args:[]};return"object"==typeof e?(t.fn=e[e.length-1],t.args=this.__getParams(e.slice(0,e.length-1),this.variables)):t.fn=e,t},e.prototype.inject=function(e,t){this.variables[e]=t},e}(),EMLModule;!function(e){var t=function(){function e(e){this.status=!1,this.parent=e,this.text="",this.defaultPreviewTextCSS=".preheader {display:none !important; visibility:hidden; opacity:0; color:#fff; font-size:0; height:0; width:0;}",this.defaultPreviewTextCode='<p class="preheader" style="display: none !important; visibility: hidden; opacity: 0; color: transparent; height: 0; width: 0; margin:0; padding:0;"></p>'}return e.prototype.render=function(){},e.prototype.init=function(){var e=this.parent.generateOutputCode("email",!0),t=/\<p.*class=\"preheader\"[^\>].*\>([^<].*)?\<\/p\>/gi,i=/\<p([^\>].*)class=\"preheader\"([^\>].*)\>/gi,r=this.parent.workingCode.toString();if(i.test(e)){var n=e.match(t);n?(this.status=!0,this.text=window.jQuery(n[0]).text()):(/\<style\s?(\s[^>].*)?\>/.test(r)?r=r.replace(new RegExp("</style>","g"),this.defaultPreviewTextCSS+"\n</style>"):r.indexOf("</head>")>-1&&(r=r.replace(new RegExp("</head>","g"),'<style type="text/css">'+this.defaultPreviewTextCSS+"</style>")),r=r.replace(new RegExp("(<body[^>]*>)","g"),"$1\n"+this.defaultPreviewTextCode))}this.parent.workingCode=r},e}();e.PreviewTextObject=t;var i=function(){function e(e){this.parent=e,this.email="",this.subject="",this.body="",this.parent.isLinkType("mailto")&&this.initEmailEditor()}return e.prototype.has=function(e){return this.updateMailtoObj(),this[e]&&""!==this[e].trim()},e.prototype.isValidEmailAddress=function(){return GlobalVars.EmailRegex.test(this.email)},e.prototype.deinitEmailEditor=function(){this.email="",this.subject="",this.body=""},e.prototype.composeEmail=function(){this.parent["new"].url="mailto:"+this.email;for(var e=["subject","body"],t=0;t<e.length;t++)this[e[t]]&&""!==this[e[t]]?this.parent["new"].searchParams.set(e[t],this[e[t]]):""==this[e[t]]&&this.parent["new"].searchParams["delete"](e[t])},e.prototype.updateMailtoObj=function(){var e=this,t=this.parent["new"].url.substr(7,this.parent["new"].url.length-7),i=t.split("?");this.email=i[0],this.parent["new"].searchParams.updateEntries(),i.length>1?["subject","body"].forEach(function(t){e.parent["new"].searchParams.has(t)&&(e[t]=window.decodeURIComponent(e.parent["new"].searchParams.get(t)))}):(this.subject="",this.body="")},e.prototype.inputOnBlur=function(){this.parent["new"].searchParams.updateEntries(),this.parent["new"].searchParams.updateSearchProp()},e.prototype.openEditor=function(){this.initEmailEditor();var e=this.parent;console.log(e.id-1),e.showMailtoEditor=!0},e.prototype.initEmailEditor=function(){this.updateMailtoObj()},e}();e.MailtoLinkObject=i;var r=function(){function e(e){this.href="",this.search="",this.origin="",this.hash="",this.protocol="",this.url=e,this.searchParams=new n(this)}return e.prototype.prepareExport=function(){},e.prototype.isValid=function(){return GlobalVars.UrlRegex.test(this.url)},e.prototype.contains=function(e){return this.url.indexOf(e)>-1},Object.defineProperty(e.prototype,"url",{get:function(){this.prepareExport();var e=this.origin+this.search+this.hash;return e=e.replace("?undefined","")},set:function(e){this.search="",this.hash="";var t=/^(https?|mailto|ftp)\:/gi;if(t.test(e)){var i=e.match(t);this.protocol=i[0]}if(this.href=e,"#"==e.trim())this.hash="#";else if(e.trim().length>1&&e.indexOf("#")>-1){var r=e.split("#");this.hash="#"+r.pop();var n=r.join("#").split("?");this.origin=n[0],this.search=n.length>0?"?"+n[1]:""}else if(e.indexOf("?")>-1){var n=e.split("?");this.origin=n[0],this.search=n.length>0?"?"+n[1]:""}else this.origin=e},enumerable:!0,configurable:!0}),e}();e.URLObj=r;var n=function(){function e(e){this.parent=e,this.parent.search.length>0?this._entries=this.parent.search.substr(1,this.parent.search.length).split(/\&amp\;|\&/g):this._entries=[]}return Object.defineProperty(e.prototype,"entries",{get:function(){for(var e=[],t=0;t<this._entries.length;t++){var i=this._entries[t].split("=");i.length>1&&(i[1]=decodeURIComponent(i[1])),e.push(i.join("="))}return e},enumerable:!0,configurable:!0}),e.prototype.updateEntries=function(){if(this._entries=[],"?"!==this.parent.search&&this.parent.search.length>1)for(var e=this.parent.search.substr(1,this.parent.search.length).split(/\&amp\;|\&/g),t=0;t<e.length;t++)this._entries.push(e[t])},e.prototype.updateSearchProp=function(){var e=[];if(this._entries.length>0)for(var t=0;t<this._entries.length;t++){var i=this._entries[t].split("=");/[a-z]{1,4}=(.*?:){3,9}/gi.test(this._entries[t])?e.push(this._entries[t]):e.push(i[0]+(i.length>1?"="+encodeURIComponent(decodeURIComponent(i[1])):""))}this.parent.search=e.length>0?"?"+e.join("&"):""},e.prototype.has=function(e){for(var t=new RegExp("^"+e+"=","g"),i=!1,r=0;r<this._entries.length;r++)t.test(this._entries[r])&&(i=!0);return i},e.prototype.get=function(e){for(var t=new RegExp("^"+e+"=","g"),i=!1,r=0;r<this._entries.length;r++)t.test(this._entries[r])&&(i=this._entries[r].split("=").pop());return i},e.prototype.set=function(e,t){for(var i=new RegExp("^"+e+"=","g"),r=!1,n=0;n<this._entries.length;n++)i.test(this._entries[n])&&(this._entries[n]=e+"="+t,r=!0);r||this.append(e+"="+t),this.updateSearchProp()},e.prototype.append=function(e){this._entries.push(e),this.updateSearchProp()},e.prototype.deleteAll=function(){this._entries=[],this.updateSearchProp()},e.prototype.deleteAtIndex=function(e){this._entries.splice(e,1),this.updateSearchProp()},e.prototype["delete"]=function(e){for(var t=0;t<this._entries.length;t++)this._entries[t].substr(0,e.length+1)==e+"="&&this.deleteAtIndex(t)},e}();e.URLObjSearchParams=n;var s=function(){function e(e,t){this.context=t,this._super=e;for(var i=["src","alt","height","width"],r=0,n=i;r<n.length;r++){var s=n[r],o=new RegExp(s+'="([^"].*?)?"',"i");o.test(t)&&(this[s]=t.match(o)[1])}var a=this.width&&parseInt(this.width.toString()),l=this.height&&parseInt(this.height.toString());a&&l||"string"==typeof this.src&&this.preloadImage(this.src)}return e.prototype.preloadImage=function(e){var t=this,i=new Image;i.onload=function(){t.height=i.height,t.width=i.width,console.log(i.height,i.width),i.parentNode.removeChild(i)},i.src=t.src,console.log(i),document.body.appendChild(i)},e.prototype.generateOutput=function(e){var t=this;return e=this.context.indexOf("alt")>-1?e.replace(this.context,function(e){return e.replace(/alt\=\"([^\"].*?)?\"/g,'alt="'+(void 0===t.alt?"":t.alt)+'"')}):e.replace(this.context,function(e){return e.replace("<img",'<img alt="'+(void 0===t.alt?"":t.alt)+'"')})},e}();e.LinkedImage=s;var o=function(){function e(e,t,r){this.__isComplete=!1,this._super=r,this.showQueryStringEditor=!1,this.showMailtoEditor=!1,this.id=0,this.line=e+1,this.context=t,this.queryStrings=[],this.ChangeMonitor=new a(this),this.errors=EMLMaker.intelligence.module("hyperlink").monitor(),this.errors.inject("LinkObject",this),this.errors.inject("EMLWorkspace",this._super),this.whiteListedUrl="~~whitelist~~",this.__locateHref(t),this.__locateLinkedImage(t),this.mailto=new i(this),this.isLinkComplete()}return e.prototype.__locateHref=function(e){var t=/href\=\"([^\"\>]*)\"/g,i=e.match(t);i.length>0&&('href=""'==i[0]?(this["new"]=new r("#"),this.old=new r("#"),this.context=this.context.replace(new RegExp('href=""',"g"),'href="#"')):(this["new"]=new r(i[0].substr(6,i[0].length-7).trim().replace(/\n/g,"")),this.old=new r(i[0].substr(6,i[0].length-7).trim().replace(/\n/g,""))))},e.prototype.__locateLinkedImage=function(e){if(/\<img([^>].*?)\>/.test(e)){var t=e.match(/\<img([^>].*?)\>/);t.length>0&&(this.LinkedImage=new s(this,t[0]),this.LinkedImageOld=new s(this,t[0]))}},e.prototype.hasDuplicateQueryStrings=function(){var e=[],t=[];if(this["new"].searchParams.entries.length>0)for(var i=0,r=this["new"].searchParams.entries;i<r.length;i++){var n=r[i],s=n.split("=").shift();t.indexOf(s)>-1&&e.push(s),t.push(s)}return e.length>0&&e},e.prototype.overrideTrackingRequirements=function(){this.whiteListedUrl=this["new"].url},e.prototype.displayFormattedURL=function(){var e=this.context;e=e.replace(/\seml\-id\=\"([0-9]*)\"/,"");var t='href="',i=e.indexOf(t);return e=e.replace(new RegExp('href=""',"g"),'href="#"'),this.LinkedImage&&(e=this.LinkedImage.generateOutput(e)),e=e.substr(0,i)+t+"|||a.href|||"+e.substr(i+(t.length+this.old.url.length),e.length),e=e.replace(new RegExp('"',"g"),"&quot;"),e=e.replace(new RegExp("/","g"),"&#47;"),e=e.replace(new RegExp(">","g"),"&gt;"),e=e.replace(new RegExp("<","g"),"&lt;"),e=e.replace(/([^\s]*?)\=/g,'<span class="attr">$1</span><span class="keyword">=</span>'),e=e.replace(/\&quot\;\&gt\;/g,'&quot;<span class="tag">&gt;</span>'),e=e.replace(/\&\#47\;\&gt\;/g,'<span class="tag">&#47;&gt;</span>'),e=e.replace(/\&quot\;(.*?)\&quot\;/g,'<span class="value">"$1"</span>'),e=e.replace(/\&lt\;([a-z]+\s?)/g,'<span class="tag">&lt;$1</span>'),e=e.replace(/\&lt\;\&\#47\;([a-z]+\s?)\&gt\;/g,'<span class="tag">&lt;&#47;$1&gt;</span>'),e=e.replace(/\n/g,"<br>"),e=e.replace(/\&gt\;/g,'<span class="tag">&gt;</span>'),e=e.replace(/\s{3}/g,"&nbsp;&nbsp;&nbsp"),e=e.replace(/\|\|\|a\.href\|\|\|/g,"<strong>"+(this.hasOwnProperty("deleteOnRender")&&this.deleteOnRender?this.old.url:this["new"].url)+"</strong>")},e.prototype.isLinkComplete=function(){return this._super.intelligence.evaluateRules(),this.errors.evaluateRules(),this.ChangeMonitor.update(),this.__isComplete=this.errors.canContinue,this.hasOwnProperty("deleteOnRender")&&this.deleteOnRender&&(this.__isComplete=!0),this.__isComplete},e.prototype.isLinkType=function(e){var t=!1;switch(e){case"http":"http:"!=this["new"].protocol&&"https:"!=this["new"].protocol||(t=!0);break;case"mailto":"mailto:"==this["new"].protocol&&(t=!0)}return t},e.prototype.hasTrackingCode=function(e){void 0===e&&(e=this["new"].url);var t=/[a-z]{1,4}=(.*?:){3,9}/gi;return t.test(e)},e.prototype.requiresTrackingCode=function(e){var t=!1;if(GlobalVars.RequiresTrackingCodeRegex.test(this["new"].url)){t=!0;for(var i=0;i<GlobalVars.RequiredTrackingCodeWhitelist.length;i++)GlobalVars.RequiredTrackingCodeWhitelist[i]instanceof RegExp?GlobalVars.RequiredTrackingCodeWhitelist[i].test(this["new"].url)&&(t=!1):this["new"].url.indexOf(GlobalVars.RequiredTrackingCodeWhitelist[i])>-1&&(t=!1)}return t},e.prototype.requiresSCode=function(){return!!GlobalVars.RequiresSCodeRegex.test(this["new"].url)},e.prototype.needsTrackingCode=function(){var e=this.requiresTrackingCode();return this.whiteListedUrl!=this["new"].url&&(this.hasTrackingCode()&&(e=!1),e)},e.prototype.updateInput=function(){this.isLinkType("mailto")?this.mailto.updateMailtoObj():this["new"].searchParams.updateEntries(),this.isLinkComplete()},e}();e.LinkObject=o;var a=function(){function e(e){this.visible=!1,this._super=e,this.messages=[]}return e.prototype.compareOldAndNew=function(){var e=["protocol","origin","search","hash"],t=[],i=this._super;return e.forEach(function(e){i.old.hasOwnProperty(e)&&i.old[e]!==i["new"][e]&&t.push(e)}),i.LinkedImage&&i.LinkedImage.alt!==i.LinkedImageOld.alt&&t.push("alt"),t},e.prototype.beforeDidReturnChanges=function(){},e.prototype.afterDidReturnChanges=function(){},e.prototype.update=function(){if(0==this._super.readOnly){var e=[],t=this.compareOldAndNew(),i=this;t.forEach(function(t){e.push(i.articulateChanges(t,{}))}),this.messages=e}},e.prototype.compareSearchStrings=function(e,t){var i={added:[],updated:[],removed:[]};for(var r in e)t.indexOf(e[r])===-1&&i.removed.push(e[r]);for(r in t)e.indexOf(t[r])===-1&&i.added.push(t[r]);var n=function(e,t){for(var i=-1,r=0;r<t.length;r++)e.test(t[r])&&(i=r);return i};for(r in e){var s=new RegExp(e[r].split("=")[0]+"="),o=n(s,i.added);if(o>-1){i.updated.push(i.added[o]);var a=n(s,i.removed);i.removed.splice(a,1),i.added.splice(o,1)}}return i},e.prototype.articulateChanges=function(e,t){if("protocol"==e)return"mailto:"==this._super["new"].protocol?{message:"Changed to mailto link.",data:[]}:{message:(""==this._super.old.protocol?"Updated":"Changed")+" protocol to "+this._super["new"].protocol,data:[]};if("origin"==e)return"mailto:"==this._super["new"].protocol?{message:"Changed mailto link to "+this._super["new"].origin,data:[]}:{message:"Changed link URL to "+this._super["new"].origin,data:[]};if("alt"==e)return""==this._super.LinkedImage.alt?{message:"Removed linked image ALT text",data:[]}:{message:"Updated linked image ALT text to <b>"+this._super.LinkedImage.alt+"</b>",data:[]};if("search"==e){var i=this._super.old.searchParams._entries,r=this._super["new"].searchParams._entries,n=this.compareSearchStrings(i,r),s="",o=this._super;return["updated","added","removed"].forEach(function(e){n[e].length>0&&(s=s+e[0].toUpperCase()+e.substr(1,e.length)+" "+("mailto:"==o["new"].protocol?"parameter":"query string")+(n[e].length>1?"s":"")+": <b>"+n[e].join(", ")+"</b><br>")}),{message:s,data:[]}}return"hash"==e?""==this._super.old.hash?{message:"You added the hash "+this._super["new"].hash,data:[]}:""==this._super["new"].hash?{message:"You removed the hash "+this._super.old.hash,data:[]}:{message:"You changed the hash from "+this._super.old.hash+" to "+this._super["new"].hash,data:[]}:void 0},e}();e.ChangeMonitor=a;var l=function(){function e(e,t){this.overriddenIds=[],void 0===e&&(e=""),void 0===t&&(t="");this.buffer=null,this.scope=t,this.linksView="experimental",this.sourceCode=e,this.workingCode="",this.fileName="eml-maker-untitled",this.linkData=[],this._defaultSCode="s=email",this.header={subject:""},this.messages=[],this.exportForEloqua="Yes",this.__emlHeaders="",this.keyBoardShortcuts=[],this.__allowableHeaderFields={to:{syntax:"To: ",label:"To",instructions:"A list of email addresses separated by commas."},subject:{syntax:"Subject: ",label:"Subject",instructions:""},cc:{syntax:"Cc: ",label:"CC",instructions:"A list of email addresses separated by commas."},replyto:{syntax:"Reply-to: ",label:"Reply to",instructions:"A list of email addresses separated by commas."}},this.headers=["X-Unsent: 1","Mime-Version: 1.0 (Mac OS X Mail 10.1 (3251))","X-Uniform-Type-Identifier: com.apple.mail-draft","Content-Transfer-Encoding: 7bit"],this.intelligence=EMLMaker.intelligence.module("email").monitor(),this.intelligence.inject("EMLWorkspace",this)}return e.prototype.mapLinkObjects=function(e){if(this.linkData.length>0)for(var t=0;t<this.linkData.length;t++)e(this.linkData[t])},e.prototype.composeEML=function(){location.href="#/export-compose-eml"},e.prototype.downloadEml=function(){var e=EMLMaker.filter.module("beforeDidDownloadEml");e.inject("EMLWorkspace",this);var t=e.applyFilter(this.generateOutputCode("oft"));t=this.__emlHeaders+"\n\n"+this.__removeWhiteSpace(this.__replaceEloquaMergeFields(t)),this.fileName=this.__formatFileName(this.fileName),this.mapLinkObjects(function(e){e.ChangeMonitor.update()}),window.saveAs(new Blob([t],{type:"text/html"}),this.fileName+".eml"),this.afterDidDownloadEml()},e.prototype.afterDidDownloadEml=function(){window.ga("send","event","EML","download","EML Export"),location.href="#/export-eml"},e.prototype.downloadCsv=function(){var e="Context,Original URL,Modified URL\n";this.mapLinkObjects(function(t){e+=t.context.replace(/,/g,"(comma)")+","+t.old.url+","+t["new"].url+"\n"}),this.fileName=this.__formatFileName(this.fileName),window.saveAs(new Blob([e],{type:"text/csv"}),this.fileName+"_links.csv"),window.ga("send","event","CSV","download","CSV Export")},e.prototype.downloadHtml=function(){var e=this.beforeDidDownloadHtml(this.generateOutputCode("email"));this.fileName=this.__formatFileName(this.fileName),window.saveAs(new Blob([e],{type:"text/html"}),this.fileName+".html"),this.afterDidDownloadHtml()},e.prototype.beforeDidDownloadHtml=function(e){return e},e.prototype.afterDidDownloadHtml=function(){window.ga("send","event","HTML","download","HTML Export")},e.prototype.exportCodeToHTML=function(){this.beforeDidExportCodeToHTML(),this.outputCode=this.generateOutputCode("email"),this.afterDidExportCodeToHTML()},e.prototype.beforeDidExportCodeToHTML=function(){this.exportForEloqua&&"Yes"==this.exportForEloqua?(window.ga("send","event","HTML","Add Eloqua Tracking","Add Eloqua Tracking"),this.mapLinkObjects(function(e){trackingOptOut=e.whiteListedUrl==e["new"].url,e.isLinkType("mailto")||e["new"].searchParams.has("elqTrack")||/app\.info\.optum\.com/gi.test(e["new"].url)||(e["new"].searchParams.append("elqTrack=true"),trackingOptOut&&(e.whiteListedUrl=e["new"].url))})):this.mapLinkObjects(function(e){if(e["new"].searchParams.has("elqTrack")){var t=e["new"].searchParams.entries.indexOf("elqTrack=true");t>-1&&e["new"].searchParams.deleteAtIndex(t),e.isLinkComplete()}e.ChangeMonitor.update()}),this.mapLinkObjects(function(e){!e["new"].searchParams.has("s")&&e.requiresSCode()?e["new"].searchParams.append("s=email"):e["new"].searchParams.has("s")&&"oft"==e["new"].searchParams.get("s")&&e["new"].searchParams.set("s","email"),e.ChangeMonitor.update()}),this.mapLinkObjects(function(e){e.ChangeMonitor.update()})},e.prototype.afterDidExportCodeToHTML=function(){this.mapLinkObjects(function(e){e.whiteListedUrl==e["new"].url&&window.ga("send","event","Tracking-Optout","override",e["new"].url)}),window.ga("send","event","HTML","view sourcecode","Export/View HTML"),location.href="#/export-html"},e.prototype.removeAllSearchStrings=function(){var e=this;this.mapLinkObjects(function(t){return!!t.readOnly||(t["new"].searchParams["delete"]("o"),t["new"].searchParams["delete"]("oin"),t["new"].searchParams["delete"]("v"),t["new"].searchParams["delete"]("oiex"),t["new"].searchParams["delete"]("elq_mid"),t["new"].searchParams["delete"]("elq_lid"),t["new"].searchParams["delete"]("elqTrack"),t["new"].searchParams["delete"]("elqTrackId"),t["new"].searchParams["delete"]("s"),t["new"].searchParams["delete"]("s3"),t.isLinkComplete(),void e.areLinksComplete())})},e.prototype.removeEloquaSearchStrings=function(){var e=this;this.mapLinkObjects(function(t){return!!t.readOnly||(t["new"].searchParams["delete"]("v"),t["new"].searchParams["delete"]("elq_mid"),t["new"].searchParams["delete"]("elq_lid"),t["new"].searchParams["delete"]("elqTrack"),t["new"].searchParams["delete"]("elqTrackId"),t.isLinkComplete(),void e.areLinksComplete())})},e.prototype.setUpShortcutKeys=function(){},e.prototype.replaceSpecialCharacters=function(e){var t={174:["&reg;"],169:["&copy;"],8211:["&ndash;"],8212:["&mdash;"],8220:["&ldquo;"],8221:["&rdquo;"],8216:["&lsquo;"],8217:["&rsquo;"],8482:["&trade;"]};for(var i in t)if(t.hasOwnProperty(i)){var r=new RegExp(String.fromCharCode(parseInt(i)),"g");r.test(e)&&(e=e.replace(r,t[i][0]))}return e},e.prototype.processHtml=function(){if(this.setUpShortcutKeys(),this.linkData=[],this.intelligence.overridden=[],this.intelligence.evaluateRules(),window.scrollTo(0,0),this.workingCode=this.replaceSpecialCharacters(this.sourceCode),this.__emlHeaders=this.__buildHeaders(),"untitled"==this.fileName){var e=/<title>([^<].*?)<\/title>/gi;if(e.test(this.workingCode)){var i=this.workingCode.match(e);i.length>0&&(this.fileName=this.__formatFileName(i[0].replace(e,"$1")))}}this.previewText=new t(this),this.previewText.init(),console.log("preview text",this.previewText);var r=this,n=/<a\b[^>]*?>([\r\n]|.)*?<\/a>/gm,s=0;this.workingCode=this.workingCode.replace(n,function(e){return s++,e.replace("<a",'<a eml-id="'+s+'"')}),s=0,this.workingCode=this.workingCode.replace(n,function(e){s++;var t=r.workingCode.substr(0,r.workingCode.indexOf(e)).split("\n").length-1;if(/(href\=\"([^\"\>]*)\"?)/g.test(e)){s++;var i=new o(t,e,r);return i.id=s,i.readOnly=i["new"].contains(".com/e/es.aspx")&&i["new"].contains("~~eloqua"),r.linkData.push(i),"{{EMLMaker_Link:"+s+"}}"}return e}),this.mapLinkObjects(function(e){e.isLinkComplete()}),location.href="#/links"},e.prototype.addNewHeaderField=function(e){this.header[e]=""},e.prototype.removeHeaderField=function(e){delete this.header[e]},e.prototype.isHeaderSelected=function(e){return!this.header.hasOwnProperty(e)||""==this.header},e.prototype.verifyLinkSectionComplete=function(){var e=!1;return!(this.intelligence&&!this.intelligence.canContinue)&&(e=(!this.linkData||0!=this.linkData.length)&&!!this.areLinksComplete())},e.prototype.generateOutputCode=function(e,t){void 0===e&&(e="email"),void 0===t&&(t=!0);var i=this.workingCode;this.mapLinkObjects(function(e){if(e.hasOwnProperty("deleteOnRender")&&e.deleteOnRender)i=i.replace(new RegExp("{{EMLMaker_Link:"+e.id+"}}","gi"),"");else if(e.readOnly){var t=e.context.replace(/eml\-id\=\"[0-9]{1,}\"\s/g,"");i=i.replace(new RegExp("{{EMLMaker_Link:"+e.id+"}}","gi"),t)}else{var r=e.context.indexOf('href="'+e.old.url),n=e.context;n=n.substr(0,r)+'href="'+e["new"].url+n.substr(r+6+e.old.url.length,n.length),e.LinkedImage&&(n=e.LinkedImage.generateOutput(n)),n=n.replace(/\s?eml\-id\=\"[0-9]*\"/g,""),i=i.replace(new RegExp("{{EMLMaker_Link:"+e.id+"}}","gi"),n)}}),EMLMaker.filter.module("beforeDidGenerateCode").inject("EMLWorkspace",this),i=EMLMaker.filter.module("beforeDidGenerateCode").applyFilter(i);try{i=i.replace(/<\/a>\n{0,5}(\.|,|\?|!|:|;|\|)/g,"</a>$1")}catch(r){console.log("error merging lines with links that previously had punctuation.")}return i},e.prototype.updateLinksAndExport=function(){return!!this.areLinksComplete()&&(location.href="#/export",window.scrollTo(0,0),!0)},e.prototype.areLinksComplete=function(){var e=!0;return this.mapLinkObjects(function(t){t.__isComplete||(e=!1),t.needsTrackingCode()&&(e=!1)}),e},e.prototype.getLinksSummary=function(){var e={needsTracking:0,invalidUrl:0};return this.mapLinkObjects(function(t){t.needsTrackingCode()&&e.needsTracking++,t.isLinkComplete()&&e.invalidUrl++}),e},e.prototype.importHtmlFromFileDrop=function(e){this.sourceCode.length>0&&(this.sourceCode="");var t=e.dataTransfer.files;if(e.dataTransfer.files.length>1)alert("you can only import one file at at time.");else{var i=new FileReader,r=this;i.onloadend=function(e){var i=e.target.result,n=t[0].name.split("."),s=n.pop().toLowerCase();r.fileName=r.__formatFileName(n.join(".")),"eml"==s?r.sourceCode=r.__stripHtmlAndSubjectFromEML(i):r.sourceCode=i,r.processHtml(),location.href="#/links"},i.readAsText(t[0]),window.ga("send","event","HTML","import","HTML Import File Drop")}},Object.defineProperty(e.prototype,"defaultSCode",{set:function(e){var t=this._defaultSCode;t!==e&&(this._defaultSCode=e,this.mapLinkObjects(function(e){e.isLinkComplete()}))},enumerable:!0,configurable:!0}),e.prototype.__formatFileName=function(e){var t=/[^\w\s-]/g,i=/[-\s]+/g;return e=e.replace(t,"").trim().toLowerCase(),e=e.replace(i,"-")},e.prototype.__replaceEloquaMergeFields=function(e){var t=/<span(%20|\s)class="?eloquaemail"?\s?>(.*?)<\/span>/gi;return e=e.replace(t,"#$2#")},e.prototype.__stripHtmlAndSubjectFromEML=function(e){for(var t=e.split("\n"),i=t.pop(),r=0;r<t.length;r++)t[r].indexOf("Subject:")>-1&&void 0===this.header&&(this.header={});return i},e.prototype.__removeWhiteSpace=function(e){var t=e;return t=t.replace(new RegExp("\n","g")," "),t=t.replace(new RegExp("\t","g")," "),t=t.replace(/\s{2,99999}/g," ")},e.prototype.__buildHeaders=function(){for(var e=[],t=0;t<this.headers.length;t++)e.push(this.headers[t]);var i=this.__getCharsetFromHTML(this.sourceCode);""==i&&(i="charset=UTF-8"),e.push("Content-Type: text/html;\n\t"+i);for(var r in this.header)this.header.hasOwnProperty(r)&&this.__allowableHeaderFields.hasOwnProperty(r)&&e.push(this.__allowableHeaderFields[r].syntax+" "+this.header[r]);return this.__emlHeaders=e.join("\n"),e.join("\n")},e.prototype.__getCharsetFromHTML=function(e){var t=/<meta.*?charset=([^\s"]*)/gi,i="",r=e.match(t);return r&&r.forEach(function(e){var t=e.match(/charset=([^\s"]*)/gi);i=t?t[0]:"charset=UTF-8"}),i},e}();e.EMLWorkspace=l}(EMLModule||(EMLModule={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},IntelligenceAlert=function(){function e(){this.override=!1}return e.prototype.generateGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this.cleanType=ErrorType[e]},enumerable:!0,configurable:!0}),e.prototype.setOverrideStatus=function(e){this.override=e},e}(),EMLMakerIntelligence;!function(e){var t=function(){function e(e,t){this._scope=t,this._monitor=e,this.searchType=this.defaultSearchType()}return e.prototype.setType=function(e){this.searchType=e},e.prototype.defaultSearchType=function(){this._monitor.types;return Object.keys(this._monitor.tabs).length>1?"":this._monitor.tabs[Object.keys(this._monitor.tabs)[0]]},e.prototype.canViewAll=function(){return Object.keys(this._monitor.tabs).length>1},Object.defineProperty(e.prototype,"search",{get:function(){var e=this._monitor.types;return e&&this.searchType in e?{type:this.searchType}:{type:this.defaultSearchType()}},enumerable:!0,configurable:!0}),e}();e.IntelligenceCenter=t;var i=function(){function e(){this.messages=[],this.canContinue=!0,this.cachedResults=[],this.scopes=[]}return e.prototype.__locateScope=function(e){var t=this.scopes.filter(function(t){return t.scope==e});if(0==t.length){var i=new r(e);this.scopes.push(i);return i}return t[0]},e.prototype.readOutRules=function(){this.scopes.forEach(function(e){for(var t=Object.keys(e.rules),i=0;i<t.length;i++);})},e.prototype.module=function(e){var t=this.__locateScope(e);return t},e}();e.IntelligenceEngine=i;var r=function(){function e(e){this.scope=e,this.rules={}}return e.prototype.monitor=function(){return new n(this)},e.prototype.register=function(e,t){return this.rules[e]=t,this},e}();e.IntelligenceModule=r;var n=function(e){function t(t){e.call(this),this.rules=t.rules,this.overridden=[],this.inject("IntelligenceMonitor",this),this.reset()}return __extends(t,e),t.prototype.reset=function(){this.messages=[],this.canContinue=!0},t.prototype.associateVariable=function(e,t){this.inject(e,t),console.warn("associateVariable is depreciated, use inject method.")},t.prototype.evaluateRule=function(e){var t;if("object"==typeof e){var i=this.__getInjector(e);t=i.fn.apply(null,i.args)}else t=e();return t},t.prototype.evaluateRules=function(){this.reset();for(var e=Object.keys(this.rules),t=0,i=e;t<i.length;t++){var r=i[t],n=this.evaluateRule(this.rules[r]),s=!!n.hasOwnProperty("when")&&n.when.apply(null);if(s){var o=new IntelligenceAlert;o.id=void 0===n.id||""==n.id?o.generateGuid():n.id,o.type=void 0===n.type?ErrorType.Warn:n.type,o.severity=void 0===n.severity?ErrorSeverity.Zero:n.severity,o.title=void 0===n.title?"":n.title,o.description=void 0===n.description?"":n.description,o.resource=void 0===n.resource?"":n.resource,o.suggestion=void 0===n.suggestion?"":n.suggestion,o.resourceText=void 0===n.resourceText?"Read more":n.resourceText,o.ctaHandler=n.cta&&n.cta.handler?n.cta.handler:function(){},o.ctaLabel=n.cta&&n.cta.label?n.cta.label:"",o.canContinue=!n.hasOwnProperty("canContinue")||n.canContinue,this.messages.push(o)}}for(var a=0;a<this.messages.length;a++)this.overridden.indexOf(this.messages[a].id)>-1&&(this.messages[a].override=!0),this.messages[a].canContinue||this.messages[a].override||(this.canContinue=!1);this.messages.sort(function(e,t){return e._type>t._type?1:e._type<t._type?-1:0})},Object.defineProperty(t.prototype,"tabs",{get:function(){for(var e={},t=0;t<this.messages.length;t++)e[this.messages[t].cleanType]=this.messages[t].type;return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"types",{get:function(){for(var e={},t=0;t<this.messages.length;t++)e[this.messages[t].type]=ErrorType[this.messages[t].type];return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){for(var e={},t=0;t<this.messages.length;t++)void 0===e[ErrorType[this.messages[t].type]]&&(e[ErrorType[this.messages[t].type]]=0),e[ErrorType[this.messages[t].type]]++;return e},enumerable:!0,configurable:!0}),t}(InjectorModule);e.IntelligenceMonitor=n}(EMLMakerIntelligence||(EMLMakerIntelligence={}));var EMLMaker;!function(e){e.intelligence=new EMLMakerIntelligence.IntelligenceEngine}(EMLMaker||(EMLMaker={}));var AccessOnlineVersion=function(){function e(e){this.animate=!0,this.status="attempting",this.headline="Checking availability of online version",
this.message="If we're able to access the online version, you will be redirected.",void 0===e.success&&(e.success=function(){}),void 0===e.onerror&&(e.onerror=function(){}),window.LOCALHOST=this.isLocalMachine(),window.OFFLINE_VERSION=getOfflineVersionNumber(),window.LOCALHOST?(window.scrollTo(0,0),this.obtainKeyFromServer(e)):(this.status="failed",this.animate=!1,document.title=window.PAGE_TITLE)}return e.prototype.obtainKeyFromServer=function(e){if(this.isLocalMachine()){var t,i,r;window.redirectJsonpCallback=function(t){1==t?(e.success(),console.log("FOUND?"),setTimeout(function(){location.href="http://johnproestakes.github.io/eml-maker?offline_version="+window.CURRENT_VERSION},500)):console.log("not github")},t=document.createElement("script"),i=document.getElementsByTagName("script")[0],t.type="text/javascript",t.onerror=function(){e.onerror()},this.isLocalMachine()&&(t.src="http://johnproestakes.github.io/eml-maker/prod/app/canredirect.js"),setTimeout(function(){i.parentNode.insertBefore(t,r)},2e3),document.title=window.PAGE_TITLE+" (Offline Mode)"}else this.status="failed",this.animate=!1,document.title=window.PAGE_TITLE},e.prototype.getOfflineVersionNumber=function(){var e="";if(window.location.search.indexOf("offline_version")){var t=window.location.search.substr(1,window.location.search.length).split("&");t.forEach(function(t){t.indexOf("offline_version=")>-1&&(e=t.substr("offline_version=".length,t.length))})}return e},e.prototype.isLocalMachine=function(){return location.href.indexOf("johnproestakes.github.io")==-1&&location.href.indexOf("localhost:")==-1},e}(),UpdateModule=function(){function e(){if(this.updateVersion=!1,this.updateForced=!1,this.offlineVersion=void 0===window.OFFLINE_VERSION?getOfflineVersionNumber():window.OFFLINE_VERSION,this.onlineVersion=window.CURRENT_VERSION,location.href.indexOf("localhost")>-1&&(window.LOCALHOST=!1),""==this.offlineVersion)this.accessingFromOffline=!1;else if(this.offlineVersion&&window.LOCALHOST&&(this.accessingFromOffline=!0),this.offlineVersion&&this.offlineVersion!==this.onlineVersion){this.updateVersion=!0;var e=new ApplicationVersion(this.offlineVersion),t=new ApplicationVersion(this.onlineVersion);this.updateForced=e.compareAgainst(t)<=AppVersionDifferenceType.PATCH,console.log("UPDATEFORCED?",this.updateForced,e,t)}}return e.prototype.showMessage=function(){return this.updateVersion&&this.updateForced},e.prototype.showTeaser=function(){return""==this.offlineVersion&&!window.LOCALHOST},e.prototype.forceUpdate=function(e,t){for(var i=e.split("."),r=t.split("."),n=0,s=!1,o=0;o<r.length;o++)r[o]==i[o]&&n++;return n<3&&(s=!0),s},e}(),AppVersionDifferenceType;!function(e){e[e.MAJOR=0]="MAJOR",e[e.MINOR=1]="MINOR",e[e.PATCH=2]="PATCH",e[e.SUBPATCH=3]="SUBPATCH",e[e.NONE=4]="NONE"}(AppVersionDifferenceType||(AppVersionDifferenceType={}));var ApplicationVersion=function(){function e(e){this._version=e,this.versionObject=this._version.split(".").map(function(e){return parseInt(e)})}return e.prototype.compareAgainst=function(e){for(var t=this.versionObject,i=e.versionObject,r=0,n=0;n<4&&t[n]==i[n];n++)r++;return AppVersionDifferenceType[AppVersionDifferenceType[r]]},e}(),SecureGateway=function(){function e(e,t){this.canLogin=!1,this.loginCallback=e,this.loginTimer=null,this.sessionUserEmail="",this.timerDelay=500,this.salt="47dafea9aae3b28ab5c39eb7f7d2c924",this.emailRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.sessionIdLocalStorageKey="EMLMaker.emlSessionUID",window.persist_store||(window.persist_store=new window.Persist.Store("EMLMaker"),window.addEventListener("unload",function(){window.persist_store.save()}));location.href="#/login"}return e.prototype.init=function(){var e=this;this.hasSavedSessionId()&&this.isValidEmailAddress(this.sessionId)?(this.sessionUserEmail=this.sessionId,location.href="#/login",this.loginTimer=setTimeout(function(){location.href="#/main",e.setCurrentUser(e.sessionUserEmail)},this.timerDelay)):(location.href="#/login",this.sessionUserEmail=""),window.addEventListener("hashchange",function(){""!=e.sessionUserEmail&&e.hasSavedSessionId()||(location.href="#/login")})},e.prototype.logOut=function(){this.loginAsOther(),this.sessionId="",this.sessionUserEmail="",window.persist_store.remove(this.sessionIdLocalStorageKey),"reload"in location?location.reload():document.location.href=document.location.href},e.prototype.loginAsOther=function(){clearTimeout(this.loginTimer),delete this.loginTimer},e.prototype.sessionUpdateUserEmail=function(){this.errorMessage="",this.isValidEmailAddress(this.sessionUserEmail)?(this.setCurrentUser(this.sessionUserEmail),this.loginCallback(),location.href="#/main"):this.errorMessage="Sorry! You have to enter a valid email address."},e.prototype.hasSavedSessionId=function(){var e=window.persist_store.get(this.sessionIdLocalStorageKey);return e?(this.sessionId=this.decrypt(e),!0):(this.sessionId="",!1)},e.prototype.encrypt=function(e){var t=e+"";return t=t.replace(/./gi,function(e){return String.fromCharCode(e.charCodeAt(0)+1)})},e.prototype.decrypt=function(e){var t=e+"";return t=t.replace(/./gi,function(e){return String.fromCharCode(e.charCodeAt(0)-1)})},e.prototype.setCurrentUser=function(e){var t=window.CryptoJS.MD5(e+this.salt).toString();window.persist_store.set(this.sessionIdLocalStorageKey,this.encrypt(e)),window.ga("set","userId",t)},e.prototype.isValidEmailAddress=function(e){return this.emailRegex.test(e)?(console.log(e,"is valid"),!0):(console.log(e,"is not valid"),!1)},e}(),__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},KeyboardShortcutEnum;!function(e){e[e.ENABLED=0]="ENABLED",e[e.DISABLED=1]="DISABLED"}(KeyboardShortcutEnum||(KeyboardShortcutEnum={}));var KeyBoardShortcuts=function(e){function t(){e.call(this),this.rules={},this.status=KeyboardShortcutEnum.ENABLED}return __extends(t,e),t.prototype.register=function(e,t){this.rules[e]=t},t.prototype.enable=function(){var e=this;document.onkeyup=function(t){return this.status!=KeyboardShortcutEnum.DISABLED&&void e.evaluate(t)}},t.prototype.evaluate=function(e){for(var t=Object.keys(this.rules),i=0;i<t.length;i++){var r=this.__getInjector(this.rules[t[i]]),n=r.fn.apply(null,r.args);n.when&&n.when(e)&&n["do"]()}},t}(InjectorModule),EMLMaker;!function(e){e.keyboard=new KeyBoardShortcuts}(EMLMaker||(EMLMaker={})),EMLMaker.filter.module("beforeDidDownloadEml").add(["EMLWorkspace",function(e){return function(t){e.mapLinkObjects(function(e){if(e["new"].searchParams.has("elqTrack")){var t=e["new"].searchParams.entries.indexOf("elqTrack=true");t>-1&&e["new"].searchParams.deleteAtIndex(t)}!e["new"].searchParams.has("s")&&e.requiresSCode()?e["new"].searchParams.append("s=oft"):"email"==e["new"].searchParams.get("s")&&e["new"].searchParams.set("s","oft")});var i=/\<p[^\>](.*?)\>([^\<p].*?)\<\/p\>/g;if(i.test(t)){var r=t.match(i);if(r)for(var n=0;n<r.length;n++)if(r[n].indexOf("http://app.info.optum.com/e/es.aspx")>-1){var s=t.indexOf(r[n]);t=t.substring(0,s)+t.substring(s+r[n].length,t.length)}}return t}}]),EMLMaker.filter.module("beforeDidGenerateCode").add(function(){return function(e){return e=e.replace(/\<img[^\>].*?\>/gi,function(e){return e.indexOf("alt=")>-1?e:e.replace(/\<img/gi,'<img alt=""')})}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVwZGF0ZU1vZHVsZS50cyIsIkVNTEZpbHRlcnMudHMiLCJlbWwtY29yZS5qcyIsIkVNTE1vZHVsZS50cyIsIkludGVsbGlnZW5jZUVuZ2luZS50cyIsIlVzZXJNYW5hZ2VtZW50LnRzIiwia2V5Ym9hcmRTaG9ydGN1dHMudHMiLCJmaWx0ZXJzL2JlZm9yZURpZERvd25sb2FkRW1sLnRzIiwiZmlsdGVycy9iZWZvcmVEaWRHZW5lcmF0ZUNvZGUudHMiXSwibmFtZXMiOlsiZ2V0T2ZmbGluZVZlcnNpb25OdW1iZXIiLCJvdXRwdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsImluZGV4T2YiLCJwYXJhbXMiLCJzdWJzdHIiLCJsZW5ndGgiLCJzcGxpdCIsImZvckVhY2giLCJwYXJhbSIsIkVNTEZpbHRlckVuZ2luZSIsInRoaXMiLCJzY29wZXMiLCJwcm90b3R5cGUiLCJfX2xvY2F0ZVNjb3BlIiwic2NvcGUiLCJyZXN1bHQiLCJmaWx0ZXIiLCJvYmoiLCJhIiwiRU1MRmlsdGVyU2NvcGUiLCJwdXNoIiwibW9kdWxlIiwicnVsZXMiLCJ2YXJpYWJsZXMiLCJhZGQiLCJydWxlIiwiaW5qZWN0IiwiYWNjZXNzb3IiLCJ2YWx1ZSIsImFzc29jaWF0ZVZhcmlhYmxlIiwiY29uc29sZSIsIndhcm4iLCJhcHBseUFjdGlvbiIsImlucHV0QXJnIiwiYXBwbHlGaWx0ZXIiLCJ0ZW1wIiwiZnVuYyIsInBhcmFtZXRlcnMiLCJhcmdzIiwiX2xvb3BfMSIsInRoaXNfMSIsImkiLCJzbGljZSIsIklNXzEiLCJtYXAiLCJrZXkiLCJhcHBseSIsIkVNTE1ha2VyIiwiRXJyb3JTZXZlcml0eSIsIkVycm9yVHlwZSIsIkdsb2JhbFZhcnMiLCJsYW5kaW5nUGFnZVByZWZlcnJlZCIsImV4dERvZXNOb3RyZXF1aXJlVHJhY2tpbmdDb2RlIiwibGlua0VuY2Fwc3VsYXRlZFB1bmN0dWF0aW9uIiwiUmVxdWlyZXNTQ29kZVJlZ2V4IiwiUmVxdWlyZXNUcmFja2luZ0NvZGVSZWdleCIsIlJlZ0V4cCIsIlRlbGVwaG9uZVJlZ2V4IiwiVGVsZXBob25lUmVnZXhHbG9iYWwiLCJFbWFpbFJlZ2V4IiwiRW1haWxSZWdleEdsb2JhbCIsIlVybFJlZ2V4IiwiTGlua0hhc1RpdGxlVGFnUmVnZXhHbG9iYWwiLCJQcmVoZWFkZXJSZWdleEdsb2JhbCIsIlJlcXVpcmVkVHJhY2tpbmdDb2RlV2hpdGVsaXN0IiwiSW5qZWN0b3JNb2R1bGUiLCJfX2dldFBhcmFtcyIsImtleXMiLCJpbmplY3RhYmxlcyIsIl9fZ2V0SW5qZWN0b3IiLCJzcGVjcyIsImZuIiwidmFyTmFtZSIsInZhclZhbHVlIiwiRU1MTW9kdWxlIiwiUHJldmlld1RleHRPYmplY3QiLCJFTUxXb3Jrc3BhY2UiLCJzdGF0dXMiLCJwYXJlbnQiLCJ0ZXh0IiwiZGVmYXVsdFByZXZpZXdUZXh0Q1NTIiwiZGVmYXVsdFByZXZpZXdUZXh0Q29kZSIsInJlbmRlciIsImluaXQiLCJvdXRwdXRDb2RlIiwiZ2VuZXJhdGVPdXRwdXRDb2RlIiwicmVnZXgiLCJyZWdleFMiLCJ3b3JraW5nQ29kZSIsInRvU3RyaW5nIiwidGVzdCIsImZvdW5kIiwibWF0Y2giLCJqUXVlcnkiLCJyZXBsYWNlIiwiTWFpbHRvTGlua09iamVjdCIsIkxpbmtPYmplY3QiLCJlbWFpbCIsInN1YmplY3QiLCJib2R5IiwiaXNMaW5rVHlwZSIsImluaXRFbWFpbEVkaXRvciIsImhhcyIsIm9wdGlvbiIsInVwZGF0ZU1haWx0b09iaiIsInRyaW0iLCJpc1ZhbGlkRW1haWxBZGRyZXNzIiwiZGVpbml0RW1haWxFZGl0b3IiLCJjb21wb3NlRW1haWwiLCJ1cmwiLCJvcHRpb25zIiwic2VhcmNoUGFyYW1zIiwic2V0IiwiX3RoaXMiLCJiIiwidXBkYXRlRW50cmllcyIsImRlY29kZVVSSUNvbXBvbmVudCIsImdldCIsImlucHV0T25CbHVyIiwidXBkYXRlU2VhcmNoUHJvcCIsIm9wZW5FZGl0b3IiLCJMTyIsImxvZyIsImlkIiwic2hvd01haWx0b0VkaXRvciIsIlVSTE9iaiIsImhyZWYiLCJvcmlnaW4iLCJoYXNoIiwicHJvdG9jb2wiLCJVUkxPYmpTZWFyY2hQYXJhbXMiLCJwcmVwYXJlRXhwb3J0IiwiaXNWYWxpZCIsImNvbnRhaW5zIiwic3RyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ1IiwicHJvdG9jb2xUeXBlIiwidXJsUGFydHMiLCJwb3AiLCJwYXJ0cyIsImpvaW4iLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiX2VudHJpZXMiLCJwcm9wcyIsInByb3AiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhcHBlbmQiLCJ2YWx1ZVBhaXIiLCJkZWxldGVBbGwiLCJkZWxldGVBdEluZGV4IiwiaW5kZXgiLCJzcGxpY2UiLCJMaW5rZWRJbWFnZSIsIl9zdXBlciIsImNvZGUiLCJjb250ZXh0IiwidGFncyIsIl9pIiwidGFnc18xIiwidGFnIiwiaGFzV2lkdGgiLCJ3aWR0aCIsInBhcnNlSW50IiwiaGFzSGVpZ2h0IiwiaGVpZ2h0Iiwic3JjIiwicHJlbG9hZEltYWdlIiwiTEkiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImRvY3VtZW50IiwiYXBwZW5kQ2hpbGQiLCJnZW5lcmF0ZU91dHB1dCIsImNvbnRlbnQiLCJmIiwidW5kZWZpbmVkIiwiYWx0IiwibGluZSIsIl9faXNDb21wbGV0ZSIsInNob3dRdWVyeVN0cmluZ0VkaXRvciIsInF1ZXJ5U3RyaW5ncyIsIkNoYW5nZU1vbml0b3IiLCJlcnJvcnMiLCJpbnRlbGxpZ2VuY2UiLCJtb25pdG9yIiwid2hpdGVMaXN0ZWRVcmwiLCJfX2xvY2F0ZUhyZWYiLCJfX2xvY2F0ZUxpbmtlZEltYWdlIiwibWFpbHRvIiwiaXNMaW5rQ29tcGxldGUiLCJyZTIiLCJvbGQiLCJMaW5rZWRJbWFnZU9sZCIsImhhc0R1cGxpY2F0ZVF1ZXJ5U3RyaW5ncyIsInVzZWRTdHJpbmdzIiwiZW50cmllcyIsIl9hIiwic2hpZnQiLCJvdmVycmlkZVRyYWNraW5nUmVxdWlyZW1lbnRzIiwiZGlzcGxheUZvcm1hdHRlZFVSTCIsImZpbmRTdGFydCIsInN0YXJ0IiwiaGFzT3duUHJvcGVydHkiLCJkZWxldGVPblJlbmRlciIsImV2YWx1YXRlUnVsZXMiLCJ1cGRhdGUiLCJjYW5Db250aW51ZSIsInR5cGUiLCJoYXNUcmFja2luZ0NvZGUiLCJyZXF1aXJlc1RyYWNraW5nQ29kZSIsInJlcXVpcmVzU0NvZGUiLCJuZWVkc1RyYWNraW5nQ29kZSIsInVwZGF0ZUlucHV0IiwidmlzaWJsZSIsIm1lc3NhZ2VzIiwiY29tcGFyZU9sZEFuZE5ldyIsInVybFBhcmFtcyIsImNoYW5nZWQiLCJiZWZvcmVEaWRSZXR1cm5DaGFuZ2VzIiwiYWZ0ZXJEaWRSZXR1cm5DaGFuZ2VzIiwicmVhZE9ubHkiLCJjaGFuZ2VzIiwiQ00iLCJhcnRpY3VsYXRlQ2hhbmdlcyIsImNvbXBhcmVTZWFyY2hTdHJpbmdzIiwib2xkUCIsIm5ld1AiLCJwYXlsb2FkIiwiYWRkZWQiLCJ1cGRhdGVkIiwicmVtb3ZlZCIsImZpbmRfcGF0dGVybl9pbkFycmF5IiwicGF0dGVybiIsImFyciIsInkiLCJyZSIsIm90aGVyIiwibWVzc2FnZSIsImRhdGEiLCJvbGRQYXJhbXMiLCJuZXdQYXJhbXMiLCJzZWFyY2hDaGFuZ2VzXzEiLCJ0b1VwcGVyQ2FzZSIsImh0bWwiLCIkc2NvcGUiLCJvdmVycmlkZGVuSWRzIiwiYnVmZmVyIiwibGlua3NWaWV3Iiwic291cmNlQ29kZSIsImZpbGVOYW1lIiwibGlua0RhdGEiLCJfZGVmYXVsdFNDb2RlIiwiaGVhZGVyIiwiZXhwb3J0Rm9yRWxvcXVhIiwiX19lbWxIZWFkZXJzIiwia2V5Qm9hcmRTaG9ydGN1dHMiLCJfX2FsbG93YWJsZUhlYWRlckZpZWxkcyIsInRvIiwic3ludGF4IiwibGFiZWwiLCJpbnN0cnVjdGlvbnMiLCJjYyIsInJlcGx5dG8iLCJoZWFkZXJzIiwibWFwTGlua09iamVjdHMiLCJjYWxsYmFjayIsImNvbXBvc2VFTUwiLCJkb3dubG9hZEVtbCIsImJlZm9yZURpZERvd25sb2FkRW1sIiwiX19yZW1vdmVXaGl0ZVNwYWNlIiwiX19yZXBsYWNlRWxvcXVhTWVyZ2VGaWVsZHMiLCJfX2Zvcm1hdEZpbGVOYW1lIiwic2F2ZUFzIiwiQmxvYiIsImFmdGVyRGlkRG93bmxvYWRFbWwiLCJnYSIsImRvd25sb2FkQ3N2IiwiZG93bmxvYWRIdG1sIiwiYmVmb3JlRGlkRG93bmxvYWRIdG1sIiwiYWZ0ZXJEaWREb3dubG9hZEh0bWwiLCJleHBvcnRDb2RlVG9IVE1MIiwiYmVmb3JlRGlkRXhwb3J0Q29kZVRvSFRNTCIsImFmdGVyRGlkRXhwb3J0Q29kZVRvSFRNTCIsInRyYWNraW5nT3B0T3V0IiwicmVtb3ZlQWxsU2VhcmNoU3RyaW5ncyIsImFyZUxpbmtzQ29tcGxldGUiLCJyZW1vdmVFbG9xdWFTZWFyY2hTdHJpbmdzIiwic2V0VXBTaG9ydGN1dEtleXMiLCJyZXBsYWNlU3BlY2lhbENoYXJhY3RlcnMiLCIxNzQiLCIxNjkiLCI4MjExIiwiODIxMiIsIjgyMjAiLCI4MjIxIiwiODIxNiIsIjgyMTciLCI4NDgyIiwicmVnZXhwIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwicHJvY2Vzc0h0bWwiLCJvdmVycmlkZGVuIiwic2Nyb2xsVG8iLCJfX2J1aWxkSGVhZGVycyIsInRpdGxlUmVnIiwidGl0bGVUYWciLCJwcmV2aWV3VGV4dCIsInJlMSIsIm4iLCJhZGROZXdIZWFkZXJGaWVsZCIsInJlbW92ZUhlYWRlckZpZWxkIiwiaXNIZWFkZXJTZWxlY3RlZCIsInZlcmlmeUxpbmtTZWN0aW9uQ29tcGxldGUiLCJjbG9uZSIsInJlYWRPbmx5VXJsIiwibmV3Q29udGV4dCIsImUiLCJ1cGRhdGVMaW5rc0FuZEV4cG9ydCIsImdldExpbmtzU3VtbWFyeSIsIm5lZWRzVHJhY2tpbmciLCJpbnZhbGlkVXJsIiwiaW1wb3J0SHRtbEZyb21GaWxlRHJvcCIsImV2dCIsImZpbGVzIiwiZGF0YVRyYW5zZmVyIiwiYWxlcnQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiV1MiLCJvbmxvYWRlbmQiLCJkcm9wVGV4dCIsInRhcmdldCIsIm5hbWVQYXJ0cyIsIm5hbWUiLCJleHQiLCJ0b0xvd2VyQ2FzZSIsIl9fc3RyaXBIdG1sQW5kU3ViamVjdEZyb21FTUwiLCJyZWFkQXNUZXh0IiwibmV3VmFsdWUiLCJfc2x1Z2lmeV9zdHJpcF9yZSIsIl9zbHVnaWZ5X2h5cGhlbmF0ZV9yZSIsInJlNCIsImNoYXJzZXQiLCJfX2dldENoYXJzZXRGcm9tSFRNTCIsImlfMSIsInJlNSIsIm1ldGFUYWdzIiwiaXRlbSIsImNoYXJzZXRWYWxzIiwiX19leHRlbmRzIiwiZCIsIl9fIiwiY29uc3RydWN0b3IiLCJwIiwiY3JlYXRlIiwiSW50ZWxsaWdlbmNlQWxlcnQiLCJvdmVycmlkZSIsImdlbmVyYXRlR3VpZCIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3Vic3RyaW5nIiwiX3R5cGUiLCJuZXdWYWwiLCJjbGVhblR5cGUiLCJzZXRPdmVycmlkZVN0YXR1cyIsInZhbCIsIkVNTE1ha2VySW50ZWxsaWdlbmNlIiwiSW50ZWxsaWdlbmNlQ2VudGVyIiwiJG1vbml0b3IiLCJfc2NvcGUiLCJfbW9uaXRvciIsInNlYXJjaFR5cGUiLCJkZWZhdWx0U2VhcmNoVHlwZSIsInNldFR5cGUiLCJ0eXBlcyIsInRhYnMiLCJjYW5WaWV3QWxsIiwiSW50ZWxsaWdlbmNlRW5naW5lIiwiY2FjaGVkUmVzdWx0cyIsIkludGVsbGlnZW5jZU1vZHVsZSIsInJlYWRPdXRSdWxlcyIsIkludGVsbGlnZW5jZU1vbml0b3IiLCJyZWdpc3RlciIsInBhcmVudFNjb3BlIiwiY2FsbCIsInJlc2V0IiwiZXZhbHVhdGVSdWxlIiwiaW5qZWN0b3IiLCJydWxlc18xIiwicHJvY2VlZCIsIndoZW4iLCJJQSIsIldhcm4iLCJzZXZlcml0eSIsIlplcm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicmVzb3VyY2UiLCJzdWdnZXN0aW9uIiwicmVzb3VyY2VUZXh0IiwiY3RhSGFuZGxlciIsImN0YSIsImhhbmRsZXIiLCJjdGFMYWJlbCIsInNvcnQiLCJBY2Nlc3NPbmxpbmVWZXJzaW9uIiwiYW5pbWF0ZSIsImhlYWRsaW5lIiwic3VjY2VzcyIsIm9uZXJyb3IiLCJMT0NBTEhPU1QiLCJpc0xvY2FsTWFjaGluZSIsIk9GRkxJTkVfVkVSU0lPTiIsIm9idGFpbktleUZyb21TZXJ2ZXIiLCJQQUdFX1RJVExFIiwiciIsIm0iLCJyZWRpcmVjdEpzb25wQ2FsbGJhY2siLCJzZXRUaW1lb3V0IiwiQ1VSUkVOVF9WRVJTSU9OIiwiY3JlYXRlRWxlbWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5zZXJ0QmVmb3JlIiwiVXBkYXRlTW9kdWxlIiwidXBkYXRlVmVyc2lvbiIsInVwZGF0ZUZvcmNlZCIsIm9mZmxpbmVWZXJzaW9uIiwib25saW5lVmVyc2lvbiIsImFjY2Vzc2luZ0Zyb21PZmZsaW5lIiwib2ZWIiwiQXBwbGljYXRpb25WZXJzaW9uIiwib25WIiwiY29tcGFyZUFnYWluc3QiLCJBcHBWZXJzaW9uRGlmZmVyZW5jZVR5cGUiLCJQQVRDSCIsInNob3dNZXNzYWdlIiwic2hvd1RlYXNlciIsImZvcmNlVXBkYXRlIiwib2ZmbGluZSIsIm9ubGluZSIsInZlcnNpb24iLCJfdmVyc2lvbiIsInZlcnNpb25PYmplY3QiLCJPdGhlclZlcnNpb24iLCJtZSIsIlNlY3VyZUdhdGV3YXkiLCJsb2dpbkNhbGxiYWNrIiwiY2FuTG9naW4iLCJsb2dpblRpbWVyIiwic2Vzc2lvblVzZXJFbWFpbCIsInRpbWVyRGVsYXkiLCJzYWx0IiwiZW1haWxSZWdleCIsInNlc3Npb25JZExvY2FsU3RvcmFnZUtleSIsInBlcnNpc3Rfc3RvcmUiLCJQZXJzaXN0IiwiU3RvcmUiLCJhZGRFdmVudExpc3RlbmVyIiwic2F2ZSIsImhhc1NhdmVkU2Vzc2lvbklkIiwic2Vzc2lvbklkIiwic2V0Q3VycmVudFVzZXIiLCJsb2dPdXQiLCJsb2dpbkFzT3RoZXIiLCJyZW1vdmUiLCJyZWxvYWQiLCJjbGVhclRpbWVvdXQiLCJzZXNzaW9uVXBkYXRlVXNlckVtYWlsIiwiZXJyb3JNZXNzYWdlIiwic2F2ZWRFbWFpbElkIiwiZGVjcnlwdCIsImVuY3J5cHQiLCJjaCIsImNoYXJDb2RlQXQiLCJDcnlwdG9KUyIsIk1ENSIsIktleWJvYXJkU2hvcnRjdXRFbnVtIiwiS2V5Qm9hcmRTaG9ydGN1dHMiLCJFTkFCTEVEIiwiZW5hYmxlIiwiS1MiLCJvbmtleXVwIiwiRElTQUJMRUQiLCJldmFsdWF0ZSIsInNob3J0Y3V0Iiwia2V5Ym9hcmQiLCJtYXRjaGVzIl0sIm1hcHBpbmdzIjoiQUFTQSxRQUFBQSwyQkFDRSxHQUFJQyxHQUFTLEVBQ2IsSUFBR0MsT0FBT0MsU0FBU0MsT0FBT0MsUUFBUSxtQkFBb0IsQ0FDcEQsR0FBSUMsR0FBU0osT0FBT0MsU0FBU0MsT0FBT0csT0FBTyxFQUFFTCxPQUFPQyxTQUFTQyxPQUFPSSxRQUFRQyxNQUFNLElBQ2xGSCxHQUFPSSxRQUFRLFNBQVNDLEdBQ25CQSxFQUFNTixRQUFRLHlCQUNmSixFQUFTVSxFQUFNSixPQUFPLG1CQUFtQkMsT0FBUUcsRUFBTUgsV0FJN0QsTUFBT1AsR0NsQlQsR0FBQVcsaUJBQUEsV0FFRSxRQUFBQSxLQUNFQyxLQUFLQyxVQW1CVCxNQWpCRUYsR0FBQUcsVUFBQUMsY0FBQSxTQUFjQyxHQUNaLEdBQUlDLEdBQVNMLEtBQUtDLE9BQU9LLE9BQU8sU0FBU0MsR0FDdkMsTUFBT0EsR0FBSUgsT0FBU0EsR0FHdEIsSUFBb0IsR0FBakJDLEVBQU9WLE9BQVksQ0FDcEIsR0FBSWEsR0FBSSxHQUFJQyxnQkFBZUwsRUFDbkJKLE1BQUtDLE9BQU9TLEtBQUtGLEVBQ3pCLE9BQU9BLEdBRVAsTUFBT0gsR0FBTyxJQUdsQk4sRUFBQUcsVUFBQVMsT0FBQSxTQUFPUCxHQUNMLEdBQUlPLEdBQVNYLEtBQUtHLGNBQWNDLEVBQ2hDLE9BQU9PLElBRVhaLEtBRUFVLGVBQUEsV0FLRSxRQUFBQSxHQUFZTCxHQUNWSixLQUFLSSxNQUFRQSxFQUNiSixLQUFLWSxTQUNMWixLQUFLYSxhQTBDVCxNQXhDRUosR0FBQVAsVUFBQVksSUFBQSxTQUFJQyxHQUNGZixLQUFLWSxNQUFNRixLQUFLSyxJQUdsQk4sRUFBQVAsVUFBQWMsT0FBQSxTQUFPQyxFQUFVQyxHQUNmbEIsS0FBS2EsVUFBVUksR0FBWUMsR0FFN0JULEVBQUFQLFVBQUFpQixrQkFBQSxTQUFrQkYsRUFBVUMsR0FDMUJsQixLQUFLZ0IsT0FBT0MsRUFBU0MsR0FDckJFLFFBQVFDLEtBQUssNkRBRWZaLEVBQUFQLFVBQUFvQixZQUFBLFNBQVlDLEtBSVpkLEVBQUFQLFVBQUFzQixZQUFBLFNBQVlELEdBQ1osR0FBSUUsR0FBT0YsQ0FDVCxJQUFHdkIsS0FBS1ksTUFBTWpCLE9BQU8sRUFDbkIsSUFBSSxHQUtJK0IsR0FDQUMsRUFHQUMsRUFUUkMsRUFBQSxXQUVFLEdBQUlkLEdBQU9lLEVBQUtsQixNQUFNbUIsRUFDdEIsSUFBa0IsZ0JBQVJoQixHQUFpQixDQUVyQlcsRUFBT1gsRUFBS0EsRUFBS3BCLE9BQU8sR0FDeEJnQyxFQUFhWixFQUFLaUIsTUFBTSxFQUFHakIsRUFBS3BCLE9BQU8sRUFDM0MsSUFBSXNDLEdBQUtILENBRUxGLEdBQU9ELEVBQVdPLElBQUksU0FBU0MsR0FDakMsTUFBT0YsR0FBR3BCLFVBQVVzQixLQUd0QlYsRUFBT0MsRUFBS1UsTUFBTSxLQUFNUixHQUFNSCxPQUc5QkEsR0FBT1YsSUFBT1UsSUNSUkssRUFBUzlCLEtEUlgrQixFQUFFLEVBQUVBLEVBQUUvQixLQUFLWSxNQUFNakIsT0FBT29DLElDV3RCRixHRFNaLE9BQU9KLElBRVhoQixLQUVJNEIsVUFDSixTQUFVQSxHQUNSQSxFQUFTL0IsT0FBUyxHQUFJUCxrQkFDckJzQyxXQUFXQSxhRXJEZCxJQUFLQyxnQkFBTCxTQUFLQSxHQUNIQSxFQUFBQSxFQUFBLEtBQUEsR0FBQSxPQUNBQSxFQUFBQSxFQUFBLE9BQUEsR0FBQSxTQUNBQSxFQUFBQSxFQUFBLElBQUEsR0FBQSxNQUNBQSxFQUFBQSxFQUFBLEtBQUEsR0FBQSxRQUpHQSxnQkFBQUEsa0JBTUwsSUFBS0MsWUFBTCxTQUFLQSxHQUNIQSxFQUFBQSxFQUFBLElBQUEsR0FBQSxNQUNBQSxFQUFBQSxFQUFBLEtBQUEsR0FBQSxPQUNBQSxFQUFBQSxFQUFBLFdBQUEsR0FBQSxhQUNBQSxFQUFBQSxFQUFBLEdBQUEsR0FBQSxLQUNBQSxFQUFBQSxFQUFBLGFBQUEsR0FBQSxnQkFMR0EsWUFBQUEsY0FTTCxJQUFVQyxhQUFWLFNBQVVBLEdBQ0dBLEVBQUFDLHFCQUF1QixnREFDdkJELEVBQUFFLDhCQUFnQywwQ0FDaENGLEVBQUFHLDRCQUE4QixzQ0FFOUJILEVBQUFJLG1CQUFxQiwwQ0FDckJKLEVBQUFLLDBCQUE0QkMsT0FBTyx5Q0FDbkNOLEVBQUFPLGVBQWlCLDREQUNqQlAsRUFBQVEscUJBQXVCLDZEQUN2QlIsRUFBQVMsV0FBYSx3SkFDYlQsRUFBQVUsaUJBQW1CLHlKQUNuQlYsRUFBQVcsU0FBVywwY0FDWFgsRUFBQVksMkJBQTZCLGdDQUM3QlosRUFBQWEscUJBQXVCLDJDQUN2QmIsRUFBQWMsK0JBQ1QsT0FBTyxPQUFPLE9BQU8sa0JBQWtCLHFCQUFxQixxQkFBcUIscUJBQ2pGLGtCQUFrQixjQUFjLGVBQWUsZUFBZSxlQWhCeERkLGFBQUFBLGVBb0JWLElBQUFlLGdCQUFBLFdBR0UsUUFBQUEsS0FDRXZELEtBQUthLGFBeUJULE1BdkJFMEMsR0FBQXJELFVBQUFzRCxZQUFBLFNBQVlDLEVBQU1DLEdBQ2hCLEdBQUk5QixHQUFPNkIsRUFBS3ZCLElBQUksU0FBQ0MsR0FDbkIsTUFBT3VCLEdBQVl2QixJQUdyQixPQUFPUCxJQUVUMkIsRUFBQXJELFVBQUF5RCxjQUFBLFNBQWNDLEdBQ1osR0FBSXhFLElBQVd5RSxHQUFJLGFBQWNqQyxRQVFqQyxPQVBtQixnQkFBVGdDLElBQ1J4RSxFQUFPeUUsR0FBS0QsRUFBTUEsRUFBTWpFLE9BQU8sR0FDL0JQLEVBQU93QyxLQUFPNUIsS0FBS3dELFlBQVlJLEVBQU01QixNQUFNLEVBQUc0QixFQUFNakUsT0FBTyxHQUFJSyxLQUFLYSxZQUdwRXpCLEVBQU95RSxHQUFLRCxFQUVQeEUsR0FHVG1FLEVBQUFyRCxVQUFBYyxPQUFBLFNBQU84QyxFQUFTQyxHQUNkL0QsS0FBS2EsVUFBVWlELEdBQVdDLEdBRzlCUixLQUVVUyxXQUFWLFNBQVVBLEdBRVIsR0FBQUMsR0FBQSxXQVNFLFFBQUFBLEdBQVlDLEdBQ1ZsRSxLQUFLbUUsUUFBUyxFQUNkbkUsS0FBS29FLE9BQVNGLEVBQ2RsRSxLQUFLcUUsS0FBTyxHQUNackUsS0FBS3NFLHNCQUF3QixrSEFDN0J0RSxLQUFLdUUsdUJBQXlCLDRKQXVDbEMsTUFwQ0VOLEdBQUEvRCxVQUFBc0UsT0FBQSxhQUdBUCxFQUFBL0QsVUFBQXVFLEtBQUEsV0FDRSxHQUFJQyxHQUFhMUUsS0FBS29FLE9BQU9PLG1CQUFtQixTQUFTLEdBQ3JEQyxFQUFRLHNEQUNSQyxFQUFTLCtDQUNUQyxFQUFjOUUsS0FBS29FLE9BQU9VLFlBQVlDLFVBQzFDLElBQUdGLEVBQU9HLEtBQUtOLEdBQVksQ0FDekIsR0FBSU8sR0FBUVAsRUFBV1EsTUFBTU4sRUFDMUJLLElBRURqRixLQUFLbUUsUUFBUyxFQUNkbkUsS0FBS3FFLEtBQU9oRixPQUFPOEYsT0FBT0YsRUFBTSxJQUFJWixTQU1qQywwQkFBMEJXLEtBQUtGLEdBRWhDQSxFQUFjQSxFQUFZTSxRQUFRLEdBQUl0QyxRQUFPLFdBQVksS0FBTTlDLEtBQUtzRSxzQkFBd0IsY0FFekZRLEVBQVl0RixRQUFRLGdCQUNyQnNGLEVBQWNBLEVBQVlNLFFBQVEsR0FBSXRDLFFBQU8sVUFBVyxLQUFNLDBCQUE4QjlDLEtBQUtzRSxzQkFBd0IsYUFNN0hRLEVBQWNBLEVBQVlNLFFBQVEsR0FBSXRDLFFBQU8sZ0JBQWlCLEtBQU0sT0FBUzlDLEtBQUt1RSx5QkFJdEZ2RSxLQUFLb0UsT0FBT1UsWUFBY0EsR0FFOUJiLElBckRhRCxHQUFBQyxrQkFBaUJBLENBdUQ5QixJQUFBb0IsR0FBQSxXQU1HLFFBQUFBLEdBQVlDLEdBQ1Z0RixLQUFLb0UsT0FBU2tCLEVBQ2R0RixLQUFLdUYsTUFBUSxHQUNidkYsS0FBS3dGLFFBQVUsR0FDZnhGLEtBQUt5RixLQUFPLEdBRVR6RixLQUFLb0UsT0FBT3NCLFdBQVcsV0FDeEIxRixLQUFLMkYsa0JBdUVYLE1BcEVFTixHQUFBbkYsVUFBQTBGLElBQUEsU0FBSUMsR0FFRixNQURBN0YsTUFBSzhGLGtCQUNFOUYsS0FBSzZGLElBQWlDLEtBQXRCN0YsS0FBSzZGLEdBQVFFLFFBRXRDVixFQUFBbkYsVUFBQThGLG9CQUFBLFdBQ0UsTUFBT3hELFlBQVdTLFdBQVcrQixLQUFLaEYsS0FBS3VGLFFBRXpDRixFQUFBbkYsVUFBQStGLGtCQUFBLFdBQ0VqRyxLQUFLdUYsTUFBUSxHQUNidkYsS0FBS3dGLFFBQVUsR0FDZnhGLEtBQUt5RixLQUFPLElBRWRKLEVBQUFuRixVQUFBZ0csYUFBQSxXQUNFbEcsS0FBS29FLE9BQUxwRSxPQUFnQm1HLElBQU0sVUFBWW5HLEtBQUt1RixLQUV2QyxLQUFJLEdBREFhLElBQVcsVUFBVSxRQUNqQnJFLEVBQUcsRUFBR0EsRUFBRXFFLEVBQVF6RyxPQUFRb0MsSUFDM0IvQixLQUFLb0csRUFBUXJFLEtBQTRCLEtBQXJCL0IsS0FBS29HLEVBQVFyRSxJQUNsQy9CLEtBQUtvRSxPQUFMcEUsT0FBZ0JxRyxhQUFhQyxJQUFJRixFQUFRckUsR0FBSS9CLEtBQUtvRyxFQUFRckUsS0FDaEMsSUFBbEIvQixLQUFLb0csRUFBUXJFLEtBQ3JCL0IsS0FBS29FLE9BQUxwRSxPQUFnQnFHLGFBQWhCckcsVUFBb0NvRyxFQUFRckUsS0FXbERzRCxFQUFBbkYsVUFBQTRGLGdCQUFBLFdBQUEsR0FBQVMsR0FBQXZHLEtBRU1RLEVBQUlSLEtBQUtvRSxPQUFMcEUsT0FBZ0JtRyxJQUFJekcsT0FBTyxFQUFHTSxLQUFLb0UsT0FBTHBFLE9BQWdCbUcsSUFBSXhHLE9BQU8sR0FDN0Q2RyxFQUFJaEcsRUFBRVosTUFBTSxJQUNoQkksTUFBS3VGLE1BQVFpQixFQUFFLEdBRWZ4RyxLQUFLb0UsT0FBTHBFLE9BQWdCcUcsYUFBYUksZ0JBQzFCRCxFQUFFN0csT0FBTyxHQUNULFVBQVUsUUFBUUUsUUFBUSxTQUFDZ0csR0FDdkJVLEVBQUtuQyxPQUFMbUMsT0FBZ0JGLGFBQWFULElBQUlDLEtBQ2xDVSxFQUFLVixHQUFVeEcsT0FBT3FILG1CQUFtQkgsRUFBS25DLE9BQUxtQyxPQUFnQkYsYUFBYU0sSUFBSWQsUUFJOUU3RixLQUFLd0YsUUFBUyxHQUNkeEYsS0FBS3lGLEtBQU8sS0FHaEJKLEVBQUFuRixVQUFBMEcsWUFBQSxXQUlFNUcsS0FBS29FLE9BQUxwRSxPQUFnQnFHLGFBQWFJLGdCQUM3QnpHLEtBQUtvRSxPQUFMcEUsT0FBZ0JxRyxhQUFhUSxvQkFJL0J4QixFQUFBbkYsVUFBQTRHLFdBQUEsV0FDRTlHLEtBQUsyRixpQkFHTCxJQUFJb0IsR0FBSy9HLEtBQUtvRSxNQUNaaEQsU0FBUTRGLElBQUlELEVBQUdFLEdBQUcsR0FDbEJGLEVBQUdHLGtCQUFtQixHQUUxQjdCLEVBQUFuRixVQUFBeUYsZ0JBQUEsV0FDRTNGLEtBQUs4RixtQkFFVFQsSUFwRllyQixHQUFBcUIsaUJBQWdCQSxDQXNGN0IsSUFBQThCLEdBQUEsV0FRRSxRQUFBQSxHQUFZaEIsR0FDVm5HLEtBQUtvSCxLQUFPLEdBQ1pwSCxLQUFLVCxPQUFTLEdBQ2RTLEtBQUtxSCxPQUFTLEdBQ2RySCxLQUFLc0gsS0FBTyxHQUNadEgsS0FBS3VILFNBQVcsR0FDaEJ2SCxLQUFLbUcsSUFBTUEsRUFDWG5HLEtBQUtxRyxhQUFlLEdBQUltQixHQUFtQnhILE1BdUQvQyxNQXJERW1ILEdBQUFqSCxVQUFBdUgsY0FBQSxhQUlBTixFQUFBakgsVUFBQXdILFFBQUEsV0FDRSxNQUFPbEYsWUFBV1csU0FBUzZCLEtBQUtoRixLQUFLbUcsTUFFdkNnQixFQUFBakgsVUFBQXlILFNBQUEsU0FBU0MsR0FDUCxNQUFHNUgsTUFBS21HLElBQUkzRyxRQUFRb0ksT0FNdEJDLE9BQUFDLGVBQUlYLEVBQUFqSCxVQUFBLE9EY0l5RyxJQ2RSLFdBQ0UzRyxLQUFLeUgsZUFDTCxJQUFJTSxHQUFJL0gsS0FBS3FILE9BQVNySCxLQUFLVCxPQUFTUyxLQUFLc0gsSUFFekMsT0FEQVMsR0FBSUEsRUFBRTNDLFFBQVEsYUFBYSxLRGlCckJrQixJQ2RSLFNBQVFILEdBQ05uRyxLQUFLVCxPQUFTLEdBQ2RTLEtBQUtzSCxLQUFPLEVBQ1osSUFBSVUsR0FBZSwwQkFDbkIsSUFBR0EsRUFBYWhELEtBQUttQixHQUFLLENBQ3hCLEdBQUkzRixHQUFJMkYsRUFBSWpCLE1BQU04QyxFQUNsQmhJLE1BQUt1SCxTQUFXL0csRUFBRSxHQUdwQixHQURBUixLQUFLb0gsS0FBT2pCLEVBQ0csS0FBWkEsRUFBSUosT0FDTC9GLEtBQUtzSCxLQUFPLFFBRVQsSUFBR25CLEVBQUlKLE9BQU9wRyxPQUFPLEdBQUt3RyxFQUFJM0csUUFBUSxRQUFRLENBQ2pELEdBQUl5SSxHQUFXOUIsRUFBSXZHLE1BQU0sSUFDekJJLE1BQUtzSCxLQUFPLElBQU1XLEVBQVNDLEtBQzNCLElBQUlDLEdBQVNGLEVBQVNHLEtBQUssS0FBTXhJLE1BQU0sSUFDdkNJLE1BQUtxSCxPQUFTYyxFQUFNLEdBQ3BCbkksS0FBS1QsT0FBUzRJLEVBQU14SSxPQUFPLEVBQUksSUFBSXdJLEVBQU0sR0FBRyxPQUk1QyxJQUFHaEMsRUFBSTNHLFFBQVEsUUFBUSxDQUNyQixHQUFJMkksR0FBUWhDLEVBQUl2RyxNQUFNLElBQ3RCSSxNQUFLcUgsT0FBU2MsRUFBTSxHQUNwQm5JLEtBQUtULE9BQVU0SSxFQUFNeEksT0FBUyxFQUFLLElBQUl3SSxFQUFNLEdBQUcsT0FFaERuSSxNQUFLcUgsT0FBU2xCLEdEbUJaa0MsWUFBWSxFQUNaQyxjQUFjLElDYnhCbkIsSUF0RWFuRCxHQUFBbUQsT0FBTUEsQ0F3RW5CLElBQUFLLEdBQUEsV0FJRSxRQUFBQSxHQUFZcEQsR0FFVnBFLEtBQUtvRSxPQUFTQSxFQUNYcEUsS0FBS29FLE9BQU83RSxPQUFPSSxPQUFPLEVBQzNCSyxLQUFLdUksU0FBWXZJLEtBQUtvRSxPQUFPN0UsT0FBT0csT0FBTyxFQUFFTSxLQUFLb0UsT0FBTzdFLE9BQU9JLFFBQVNDLE1BQU0sZUFFL0VJLEtBQUt1SSxZQStGWCxNQTFGRVYsUUFBQUMsZUFBSU4sRUFBQXRILFVBQUEsV0RZSXlHLElDWlIsV0FFRSxJQUFJLEdBREF2SCxNQUNJMkMsRUFBSSxFQUFHQSxFQUFFL0IsS0FBS3VJLFNBQVM1SSxPQUFPb0MsSUFBSSxDQUN4QyxHQUFJdkIsR0FBSVIsS0FBS3VJLFNBQVN4RyxHQUFHbkMsTUFBTSxJQUM1QlksR0FBRWIsT0FBTyxJQUNWYSxFQUFFLEdBQUtrRyxtQkFBbUJsRyxFQUFFLEtBRTlCcEIsRUFBT3NCLEtBQUtGLEVBQUU0SCxLQUFLLE1BSXJCLE1BQU9oSixJRFlEaUosWUFBWSxFQUNaQyxjQUFjLElDWHRCZCxFQUFBdEgsVUFBQXVHLGNBQUEsV0FFRSxHQURBekcsS0FBS3VJLFlBQ29CLE1BQXRCdkksS0FBS29FLE9BQU83RSxRQUFpQlMsS0FBS29FLE9BQU83RSxPQUFPSSxPQUFPLEVBRXhELElBQUksR0FEQTZJLEdBQVN4SSxLQUFLb0UsT0FBTzdFLE9BQU9HLE9BQU8sRUFBRU0sS0FBS29FLE9BQU83RSxPQUFPSSxRQUFTQyxNQUFNLGVBQ25FbUMsRUFBSSxFQUFHQSxFQUFFeUcsRUFBTTdJLE9BQU9vQyxJQUM1Qi9CLEtBQUt1SSxTQUFTN0gsS0FBSzhILEVBQU16RyxLQUkvQnlGLEVBQUF0SCxVQUFBMkcsaUJBQUEsV0FDRSxHQUFJekgsS0FDSixJQUFHWSxLQUFLdUksU0FBUzVJLE9BQU8sRUFDdEIsSUFBSSxHQUFJb0MsR0FBRyxFQUFFQSxFQUFFL0IsS0FBS3VJLFNBQVM1SSxPQUFPb0MsSUFBSSxDQUN0QyxHQUFJMEcsR0FBTXpJLEtBQUt1SSxTQUFTeEcsR0FBR25DLE1BQU0sSUFDOUIsNEJBQTJCb0YsS0FBS2hGLEtBQUt1SSxTQUFTeEcsSUFDL0MzQyxFQUFPc0IsS0FBS1YsS0FBS3VJLFNBQVN4RyxJQUUxQjNDLEVBQU9zQixLQUFLK0gsRUFBSyxJQUFJQSxFQUFLOUksT0FBTyxFQUFJLElBQUsrSSxtQkFBbUJoQyxtQkFBbUIrQixFQUFLLEtBQU8sS0FLbEd6SSxLQUFLb0UsT0FBTzdFLE9BQVNILEVBQU9PLE9BQU8sRUFBSSxJQUFJUCxFQUFPZ0osS0FBSyxLQUFPLElBRWhFWixFQUFBdEgsVUFBQTBGLElBQUEsU0FBSTlGLEdBR0YsSUFBSSxHQUZBOEUsR0FBUSxHQUFJOUIsUUFBTyxJQUFNaEQsRUFBUSxJQUFLLEtBQ3RDVixHQUFTLEVBQ0wyQyxFQUFFLEVBQUVBLEVBQUUvQixLQUFLdUksU0FBUzVJLE9BQU9vQyxJQUM5QjZDLEVBQU1JLEtBQUtoRixLQUFLdUksU0FBU3hHLE1BQUszQyxHQUFTLEVBRTVDLE9BQU9BLElBRVRvSSxFQUFBdEgsVUFBQXlHLElBQUEsU0FBSTdHLEdBR0YsSUFBSSxHQUZBOEUsR0FBUSxHQUFJOUIsUUFBTyxJQUFNaEQsRUFBUSxJQUFLLEtBQ3RDVixHQUFTLEVBQ0wyQyxFQUFFLEVBQUVBLEVBQUUvQixLQUFLdUksU0FBUzVJLE9BQU9vQyxJQUM5QjZDLEVBQU1JLEtBQUtoRixLQUFLdUksU0FBU3hHLE1BQzFCM0MsRUFBVVksS0FBS3VJLFNBQVN4RyxHQUFHbkMsTUFBTSxLQUFNc0ksTUFHM0MsT0FBTzlJLElBRVRvSSxFQUFBdEgsVUFBQW9HLElBQUEsU0FBSXhHLEVBQU9vQixHQUdULElBQUksR0FGQTBELEdBQVEsR0FBSTlCLFFBQU8sSUFBTWhELEVBQVEsSUFBSyxLQUN0Q1YsR0FBUyxFQUNMMkMsRUFBRSxFQUFFQSxFQUFFL0IsS0FBS3VJLFNBQVM1SSxPQUFPb0MsSUFDOUI2QyxFQUFNSSxLQUFLaEYsS0FBS3VJLFNBQVN4RyxNQUMxQi9CLEtBQUt1SSxTQUFTeEcsR0FBS2pDLEVBQVEsSUFBTW9CLEVBQ2pDOUIsR0FBUyxFQUdUQSxJQUNGWSxLQUFLMkksT0FBTzdJLEVBQVEsSUFBTW9CLEdBRTVCbEIsS0FBSzZHLG9CQUVQVyxFQUFBdEgsVUFBQXlJLE9BQUEsU0FBT0MsR0FDTDVJLEtBQUt1SSxTQUFTN0gsS0FBS2tJLEdBQ25CNUksS0FBSzZHLG9CQUVQVyxFQUFBdEgsVUFBQTJJLFVBQUEsV0FDRTdJLEtBQUt1SSxZQUNMdkksS0FBSzZHLG9CQUVQVyxFQUFBdEgsVUFBQTRJLGNBQUEsU0FBY0MsR0FDWi9JLEtBQUt1SSxTQUFTUyxPQUFPRCxFQUFPLEdBQzVCL0ksS0FBSzZHLG9CQUVQVyxFQUFBdEgsVUFBQXNILFVBQUEsU0FBTzFILEdBRUwsSUFBSSxHQUFJaUMsR0FBRSxFQUFFQSxFQUFJL0IsS0FBS3VJLFNBQVM1SSxPQUFPb0MsSUFDaEMvQixLQUFLdUksU0FBU3hHLEdBQUdyQyxPQUFPLEVBQUVJLEVBQU1ILE9BQU8sSUFBSUcsRUFBTSxLQUNsREUsS0FBSzhJLGNBQWMvRyxJQUszQnlGLElBekdheEQsR0FBQXdELG1CQUFrQkEsQ0EyRy9CLElBQUF5QixHQUFBLFdBU0UsUUFBQUEsR0FBYUMsRUFBUUMsR0FDbkJuSixLQUFLb0osUUFBVUQsRUFDZm5KLEtBQUtrSixPQUFTQSxDQUVkLEtBQWUsR0FEWEcsSUFBUSxNQUFPLE1BQU8sU0FBVSxTQUNyQkMsRUFBQSxFQUFBQyxFQUFBRixFQUFBQyxFQUFBQyxFQUFBNUosT0FBQTJKLElBQUssQ0FBaEIsR0FBSUUsR0FBR0QsRUFBQUQsR0FDTDFFLEVBQVEsR0FBSTlCLFFBQU8wRyxFQUFJLGdCQUFtQixJQUMzQzVFLEdBQU1JLEtBQUttRSxLQUNabkosS0FBS3dKLEdBQU9MLEVBQUtqRSxNQUFNTixHQUFPLElBR2xDLEdBQUk2RSxHQUFXekosS0FBSzBKLE9BQVNDLFNBQVMzSixLQUFLMEosTUFBTTNFLFlBQzdDNkUsRUFBWTVKLEtBQUs2SixRQUFVRixTQUFTM0osS0FBSzZKLE9BQU85RSxXQUVoRDBFLElBQWFHLEdBQ1EsZ0JBQWI1SixNQUFLOEosS0FDYjlKLEtBQUsrSixhQUFhL0osS0FBSzhKLEtBaUMvQixNQTVCRWIsR0FBQS9JLFVBQUE2SixhQUFBLFNBQWFELEdBQ1gsR0FBSUUsR0FBS2hLLEtBQ0hpSyxFQUFNLEdBQUlDLE1BRWRELEdBQUlFLE9BQU8sV0FDVEgsRUFBR0gsT0FBU0ksRUFBSUosT0FDaEJHLEVBQUdOLE1BQVFPLEVBQUlQLE1BQ2Z0SSxRQUFRNEYsSUFBSWlELEVBQUlKLE9BQU9JLEVBQUlQLE9BQzNCTyxFQUFJRyxXQUFXQyxZQUFZSixJQUk3QkEsRUFBSUgsSUFBY0UsRUFBR0YsSUFDckIxSSxRQUFRNEYsSUFBSWlELEdBQ1pLLFNBQVM3RSxLQUFLOEUsWUFBWU4sSUFFOUJoQixFQUFBL0ksVUFBQXNLLGVBQUEsU0FBZUMsR0FDYixHQUFJbEUsR0FBT3ZHLElBU1gsT0FQRXlLLEdBREN6SyxLQUFLb0osUUFBUTVKLFFBQVEsVUFDWmlMLEVBQVFyRixRQUFRcEYsS0FBS29KLFFBQVMsU0FBU3NCLEdBQy9DLE1BQU9BLEdBQUV0RixRQUFRLHdCQUF5QixTQUF3QnVGLFNBQVpwRSxFQUFNcUUsSUFBZ0IsR0FBR3JFLEVBQU1xRSxLQUFPLE9BR3BGSCxFQUFRckYsUUFBUXBGLEtBQUtvSixRQUFTLFNBQVNzQixHQUMvQyxNQUFPQSxHQUFFdEYsUUFBUSxPQUFRLGNBQTJCdUYsU0FBWnBFLEVBQU1xRSxJQUFnQixHQUFHckUsRUFBTXFFLEtBQUssUUFJcEYzQixJQXpEYWpGLEdBQUFpRixZQUFXQSxDQTJEeEIsSUFBQTNELEdBQUEsV0F5QkUsUUFBQUEsR0FBWXVGLEVBQWN6QixFQUFpQmhGLEdBQ3pDcEUsS0FBSzhLLGNBQWUsRUFDcEI5SyxLQUFLa0osT0FBUzlFLEVBRWRwRSxLQUFLK0ssdUJBQXdCLEVBQzdCL0ssS0FBS2tILGtCQUFtQixFQUV4QmxILEtBQUtpSCxHQUFLLEVBQ1ZqSCxLQUFLNkssS0FBT0EsRUFBTyxFQUNuQjdLLEtBQUtvSixRQUFVQSxFQUNmcEosS0FBS2dMLGdCQUVMaEwsS0FBS2lMLGNBQWdCLEdBQUlBLEdBQWNqTCxNQUN2Q0EsS0FBS2tMLE9BQVM3SSxTQUFTOEksYUFBYXhLLE9BQU8sYUFBYXlLLFVBQ3hEcEwsS0FBS2tMLE9BQU9sSyxPQUFPLGFBQWNoQixNQUNqQ0EsS0FBS2tMLE9BQU9sSyxPQUFPLGVBQWdCaEIsS0FBS2tKLFFBRXhDbEosS0FBS3FMLGVBQWlCLGdCQUd0QnJMLEtBQUtzTCxhQUFhbEMsR0FFbEJwSixLQUFLdUwsb0JBQW9CbkMsR0FHekJwSixLQUFLd0wsT0FBUyxHQUFJbkcsR0FBaUJyRixNQUNuQ0EsS0FBS3lMLGlCQTRLVCxNQTFLRW5HLEdBQUFwRixVQUFBb0wsYUFBQSxTQUFhbEMsR0FDWCxHQUFJc0MsR0FBTSx3QkFDTnRFLEVBQU9nQyxFQUFRbEUsTUFBTXdHLEVBQ3RCdEUsR0FBS3pILE9BQU8sSUFDRCxXQUFUeUgsRUFBSyxJQUNOcEgsS0FBQUEsT0FBWSxHQUFJbUgsR0FBTyxLQUN2Qm5ILEtBQUsyTCxJQUFNLEdBQUl4RSxHQUFPLEtBQ3RCbkgsS0FBS29KLFFBQVVwSixLQUFLb0osUUFBUWhFLFFBQVEsR0FBSXRDLFFBQU8sVUFBWSxLQUFLLGNBRWhFOUMsS0FBQUEsT0FBVyxHQUFJbUgsR0FBUUMsRUFBSyxHQUFHMUgsT0FBTyxFQUFHMEgsRUFBSyxHQUFHekgsT0FBTyxHQUFJb0csT0FBT1gsUUFBUSxNQUFNLEtBQ2pGcEYsS0FBSzJMLElBQU0sR0FBSXhFLEdBQVFDLEVBQUssR0FBRzFILE9BQU8sRUFBRzBILEVBQUssR0FBR3pILE9BQU8sR0FBSW9HLE9BQU9YLFFBQVEsTUFBTSxRQUt2RkUsRUFBQXBGLFVBQUFxTCxvQkFBQSxTQUFvQm5DLEdBQ2xCLEdBQUcsbUJBQW1CcEUsS0FBS29FLEdBQVMsQ0FDbEMsR0FBSW5FLEdBQVFtRSxFQUFRbEUsTUFBTSxtQkFDdkJELEdBQU10RixPQUFPLElBQ2RLLEtBQUtpSixZQUFjLEdBQUlBLEdBQVlqSixLQUFNaUYsRUFBTSxJQUMvQ2pGLEtBQUs0TCxlQUFpQixHQUFJM0MsR0FBWWpKLEtBQU1pRixFQUFNLE9BS3hESyxFQUFBcEYsVUFBQTJMLHlCQUFBLFdBQ0UsR0FBSXhMLE1BQ0F5TCxJQUVKLElBQUc5TCxLQUFBQSxPQUFTcUcsYUFBYTBGLFFBQVFwTSxPQUFTLEVBQ3hDLElBQWEsR0FBQTJKLEdBQUEsRUFBQTBDLEVBQUFoTSxLQUFBQSxPQUFTcUcsYUFBYTBGLFFBQXRCekMsRUFBQTBDLEVBQUFyTSxPQUFBMkosSUFBOEIsQ0FBdkMsR0FBSTlJLEdBQUN3TCxFQUFBMUMsR0FDSHhKLEVBQVFVLEVBQUVaLE1BQU0sS0FBS3FNLE9BQ3RCSCxHQUFZdE0sUUFBUU0sT0FDckJPLEVBQU9LLEtBQUtaLEdBRWRnTSxFQUFZcEwsS0FBS1osR0FJckIsTUFBR08sR0FBT1YsT0FBTyxHQUNSVSxHQU9YaUYsRUFBQXBGLFVBQUFnTSw2QkFBQSxXQUNFbE0sS0FBS3FMLGVBQWlCckwsS0FBQUEsT0FBU21HLEtBRWpDYixFQUFBcEYsVUFBQWlNLG9CQUFBLFdBRUUsR0FBSTFCLEdBQVV6SyxLQUFLb0osT0FDbkJxQixHQUFVQSxFQUFRckYsUUFBUSwwQkFBMkIsR0FFckQsSUFBSWdILEdBQVksU0FDWkMsRUFBUTVCLEVBQVFqTCxRQUFRNE0sRUFrQzVCLE9BakNBM0IsR0FBVUEsRUFBUXJGLFFBQVEsR0FBSXRDLFFBQU8sVUFBWSxLQUFNLFlBRXBEOUMsS0FBS2lKLGNBQ053QixFQUFVekssS0FBS2lKLFlBQVl1QixlQUFlQyxJQUU1Q0EsRUFBVUEsRUFBUS9LLE9BQU8sRUFBRzJNLEdBQVNELEVBQVcsZUFBaUIzQixFQUFRL0ssT0FBTzJNLEdBQVNELEVBQVV6TSxPQUFRSyxLQUFLMkwsSUFBSXhGLElBQVUsUUFBSXNFLEVBQVE5SyxRQUMxSThLLEVBQVVBLEVBQVFyRixRQUFRLEdBQUl0QyxRQUFPLElBQUssS0FBTSxVQUNoRDJILEVBQVVBLEVBQVFyRixRQUFRLEdBQUl0QyxRQUFPLElBQUksS0FBTSxTQUMvQzJILEVBQVVBLEVBQVFyRixRQUFRLEdBQUl0QyxRQUFPLElBQUksS0FBTSxRQUMvQzJILEVBQVVBLEVBQVFyRixRQUFRLEdBQUl0QyxRQUFPLElBQUksS0FBTSxRQUcvQzJILEVBQVVBLEVBQVFyRixRQUFRLGVBQWUsOERBQ3pDcUYsRUFBVUEsRUFBUXJGLFFBQVEsa0JBQWtCLHVDQUM1Q3FGLEVBQVVBLEVBQVFyRixRQUFRLGtCQUFrQixzQ0FDNUNxRixFQUFVQSxFQUFRckYsUUFBUSx5QkFBeUIsbUNBQ25EcUYsRUFBVUEsRUFBUXJGLFFBQVEscUJBQXFCLG1DQUMvQ3FGLEVBQVVBLEVBQVFyRixRQUFRLG1DQUFtQyw0Q0FDN0RxRixFQUFVQSxFQUFRckYsUUFBUSxNQUFNLFFBRWhDcUYsRUFBVUEsRUFBUXJGLFFBQVEsVUFBVSxpQ0FDcENxRixFQUFVQSxFQUFRckYsUUFBUSxTQUFTLHFCQU1uQ3FGLEVBQVVBLEVBQVFyRixRQUFRLHVCQUF3QixZQUFZcEYsS0FBS3NNLGVBQWUsbUJBQXFCdE0sS0FBS3VNLGVBQWlCdk0sS0FBSzJMLElBQUl4RixJQUFNbkcsS0FBQUEsT0FBU21HLEtBQUssY0FTNUpiLEVBQUFwRixVQUFBdUwsZUFBQSxXQVNFLE1BUEF6TCxNQUFLa0osT0FBT2lDLGFBQWFxQixnQkFDekJ4TSxLQUFLa0wsT0FBT3NCLGdCQUVaeE0sS0FBS2lMLGNBQWN3QixTQUVuQnpNLEtBQUs4SyxhQUFjOUssS0FBS2tMLE9BQU93QixZQUM1QjFNLEtBQUtzTSxlQUFlLG1CQUFvQnRNLEtBQUt1TSxpQkFBZ0J2TSxLQUFLOEssY0FBZSxHQUM3RTlLLEtBQUs4SyxjQUdkeEYsRUFBQXBGLFVBQUF3RixXQUFBLFNBQVdpSCxHQUNULEdBQUl2TixJQUFTLENBQ2IsUUFBUXVOLEdBQ04sSUFBSyxPQUNtQixTQUFuQjNNLEtBQUFBLE9BQVN1SCxVQUF3QyxVQUFuQnZILEtBQUFBLE9BQVN1SCxXQUN4Q25JLEdBQVMsRUFFWCxNQUNGLEtBQUssU0FDbUIsV0FBbkJZLEtBQUFBLE9BQVN1SCxXQUNWbkksR0FBUyxHQU1mLE1BQU9BLElBR1RrRyxFQUFBcEYsVUFBQTBNLGdCQUFBLFNBQWdCck0sR0FDTG9LLFNBQU5wSyxJQUFpQkEsRUFBTVAsS0FBQUEsT0FBU21HLElBRW5DLElBQUkzRixHQUFJLDBCQUNSLE9BQU9BLEdBQUV3RSxLQUFLekUsSUFFaEIrRSxFQUFBcEYsVUFBQTJNLHFCQUFBLFNBQXFCdE0sR0FDbkIsR0FBSW5CLElBQWtCLENBQ3RCLElBQUdvRCxXQUFXSywwQkFBMEJtQyxLQUFLaEYsS0FBQUEsT0FBU21HLEtBQU0sQ0FDMUQvRyxHQUFTLENBRVQsS0FBSSxHQUFJMkMsR0FBRyxFQUFHQSxFQUFJUyxXQUFXYyw4QkFBOEIzRCxPQUFRb0MsSUFDN0RTLFdBQVdjLDhCQUE4QnZCLFlBQWNlLFFBQ3RETixXQUFXYyw4QkFBOEJ2QixHQUFTLEtBQUUvQixLQUFBQSxPQUFTbUcsT0FBUS9HLEdBQVMsR0FFOUVZLEtBQUFBLE9BQVNtRyxJQUFJM0csUUFBUWdELFdBQVdjLDhCQUE4QnZCLFNBQVUzQyxHQUFTLEdBSTFGLE1BQU9BLElBRVRrRyxFQUFBcEYsVUFBQTRNLGNBQUEsV0FDRSxRQUFHdEssV0FBV0ksbUJBQW1Cb0MsS0FBS2hGLEtBQUFBLE9BQVNtRyxNQU1qRGIsRUFBQXBGLFVBQUE2TSxrQkFBQSxXQUNFLEdBQUkzTixHQUFrQlksS0FBSzZNLHNCQUMzQixPQUFHN00sTUFBS3FMLGdCQUFnQnJMLEtBQUFBLE9BQVNtRyxNQUU5Qm5HLEtBQUs0TSxvQkFDTnhOLEdBQVMsR0FFSkEsSUFFVGtHLEVBQUFwRixVQUFBOE0sWUFBQSxXQUNLaE4sS0FBSzBGLFdBQVcsVUFDakIxRixLQUFLd0wsT0FBTzFGLGtCQUVaOUYsS0FBQUEsT0FBU3FHLGFBQWFJLGdCQUV4QnpHLEtBQUt5TCxrQkFHVG5HLElBL05hdEIsR0FBQXNCLFdBQVVBLENBb092QixJQUFBMkYsR0FBQSxXQUtFLFFBQUFBLEdBQVkvQixHQUNWbEosS0FBS2lOLFNBQVUsRUFDZmpOLEtBQUtrSixPQUFTQSxFQUNkbEosS0FBS2tOLFlBc0hULE1BcEhFakMsR0FBQS9LLFVBQUFpTixpQkFBQSxXQUNFLEdBQUlDLElBQWEsV0FBVyxTQUFTLFNBQVMsUUFDMUNDLEtBQ0FuRSxFQUFTbEosS0FBS2tKLE1BU2xCLE9BUkFrRSxHQUFVdk4sUUFBUSxTQUFTQyxHQUN0Qm9KLEVBQU95QyxJQUFJVyxlQUFleE0sSUFBVW9KLEVBQU95QyxJQUFJN0wsS0FBVW9KLEVBQUFBLE9BQVdwSixJQUNyRXVOLEVBQVEzTSxLQUFLWixLQUdkb0osRUFBT0QsYUFBZUMsRUFBT0QsWUFBWTJCLE1BQU0xQixFQUFPMEMsZUFBZWhCLEtBQ3RFeUMsRUFBUTNNLEtBQUssT0FFUjJNLEdBRVRwQyxFQUFBL0ssVUFBQW9OLHVCQUFBLGFBQ0FyQyxFQUFBL0ssVUFBQXFOLHNCQUFBLGFBQ0F0QyxFQUFBL0ssVUFBQXVNLE9BQUEsV0FDRSxHQUEyQixHQUF4QnpNLEtBQUtrSixPQUFPc0UsU0FBa0IsQ0FDL0IsR0FBSXBPLE1BQ0FxTyxFQUFVek4sS0FBS21OLG1CQUNmTyxFQUFLMU4sSUFDVHlOLEdBQVE1TixRQUFRLFNBQVNPLEdBQ3ZCaEIsRUFBT3NCLEtBQUtnTixFQUFHQyxrQkFBa0J2TixTQUVuQ0osS0FBS2tOLFNBQVc5TixJQUlwQjZMLEVBQUEvSyxVQUFBME4scUJBQUEsU0FBcUJDLEVBQU1DLEdBQ3pCLEdBQUlDLElBQ0ZDLFNBQ0FDLFdBQ0FDLFdBRUYsS0FBSSxHQUFJbk0sS0FBSzhMLEdBQ1JDLEVBQUt0TyxRQUFRcU8sRUFBSzlMLFVBQVdnTSxFQUFRRyxRQUFReE4sS0FBS21OLEVBQUs5TCxHQUU1RCxLQUFJQSxJQUFLK0wsR0FDSkQsRUFBS3JPLFFBQVFzTyxFQUFLL0wsVUFBV2dNLEVBQVFDLE1BQU10TixLQUFLb04sRUFBSy9MLEdBRTFELElBQUlvTSxHQUF1QixTQUFTQyxFQUFnQkMsR0FFakQsSUFBSSxHQUREalAsTUFDS2tQLEVBQUUsRUFBRUEsRUFBRUQsRUFBSTFPLE9BQU8yTyxJQUVwQkYsRUFBUXBKLEtBQUtxSixFQUFJQyxNQUNsQmxQLEVBQVNrUCxFQUdkLE9BQU9sUCxHQUVULEtBQUkyQyxJQUFLOEwsR0FBSyxDQUNaLEdBQUlVLEdBQUssR0FBSXpMLFFBQU8rSyxFQUFLOUwsR0FBR25DLE1BQU0sS0FBSyxHQUFHLEtBQ3RDcUYsRUFBUWtKLEVBQXFCSSxFQUFJUixFQUFRQyxNQUM3QyxJQUFHL0ksS0FBUyxDQUNWOEksRUFBUUUsUUFBUXZOLEtBQUtxTixFQUFRQyxNQUFNL0ksR0FDbkMsSUFBSXVKLEdBQVFMLEVBQXFCSSxFQUFJUixFQUFRRyxRQUM3Q0gsR0FBUUcsUUFBUWxGLE9BQU93RixFQUFNLEdBQzdCVCxFQUFRQyxNQUFNaEYsT0FBTy9ELEVBQU0sSUFHL0IsTUFBTzhJLElBRVQ5QyxFQUFBL0ssVUFBQXlOLGtCQUFBLFNBQWtCdk4sRUFBT3dCLEdBQ3ZCLEdBQVUsWUFBUHhCLEVBQ0QsTUFBK0IsV0FBNUJKLEtBQUtrSixPQUFMbEosT0FBZ0J1SCxVQUNUa0gsUUFBUywwQkFBMkJDLFVBRzFDRCxTQUFvQyxJQUExQnpPLEtBQUtrSixPQUFPeUMsSUFBSXBFLFNBQWUsVUFBWSxXQUFXLGdCQUFrQnZILEtBQUtrSixPQUFMbEosT0FBZ0J1SCxTQUNsR21ILFFBR0MsSUFBVSxVQUFQdE8sRUFDUixNQUErQixXQUE1QkosS0FBS2tKLE9BQUxsSixPQUFnQnVILFVBQ1RrSCxRQUFTLDBCQUE0QnpPLEtBQUtrSixPQUFMbEosT0FBZ0JxSCxPQUFRcUgsVUFFN0RELFFBQVMsdUJBQXlCek8sS0FBS2tKLE9BQUxsSixPQUFnQnFILE9BQVFxSCxRQUUvRCxJQUFVLE9BQVB0TyxFQUNSLE1BQWtDLElBQS9CSixLQUFLa0osT0FBT0QsWUFBWTJCLEtBQ2pCNkQsUUFBUyxnQ0FBaUNDLFVBRTFDRCxRQUFTLHVDQUF5Q3pPLEtBQUtrSixPQUFPRCxZQUFZMkIsSUFBTSxPQUFROEQsUUFFN0YsSUFBVSxVQUFQdE8sRUFBaUIsQ0FFekIsR0FBSXVPLEdBQVkzTyxLQUFLa0osT0FBT3lDLElBQUl0RixhQUFha0MsU0FDekNxRyxFQUFZNU8sS0FBS2tKLE9BQUxsSixPQUFnQnFHLGFBQWFrQyxTQUV6Q3NHLEVBQWdCN08sS0FBSzROLHFCQUFxQmUsRUFBV0MsR0FFckRILEVBQVUsR0FDVnZGLEVBQVNsSixLQUFLa0osTUFPbEIsUUFOQyxVQUFVLFFBQVEsV0FBV3JKLFFBQVEsU0FBU3NDLEdBQzFDME0sRUFBYzFNLEdBQUt4QyxPQUFPLElBQzNCOE8sRUFBVUEsRUFBVXRNLEVBQUksR0FBRzJNLGNBQWMzTSxFQUFJekMsT0FBTyxFQUFFeUMsRUFBSXhDLFFBQVUsS0FBMEIsV0FBckJ1SixFQUFBQSxPQUFXM0IsU0FBc0IsWUFBYyxpQkFBaUJzSCxFQUFjMU0sR0FBS3hDLE9BQU8sRUFBSSxJQUFLLElBQU0sUUFBVWtQLEVBQWMxTSxHQUFLaUcsS0FBSyxNQUFRLGVBSXZOcUcsUUFBU0EsRUFBU0MsU0FHdEIsTUFBVSxRQUFQdE8sRUFDa0IsSUFBdkJKLEtBQUtrSixPQUFPeUMsSUFBSXJFLE1BQ1RtSCxRQUFTLHNCQUF3QnpPLEtBQUtrSixPQUFMbEosT0FBZ0JzSCxLQUFNb0gsU0FFckMsSUFBdkIxTyxLQUFLa0osT0FBTGxKLE9BQWdCc0gsTUFDVG1ILFFBQVMsd0JBQTBCek8sS0FBS2tKLE9BQU95QyxJQUFJckUsS0FBTW9ILFVBRXpERCxRQUFTLDZCQUErQnpPLEtBQUtrSixPQUFPeUMsSUFBSXJFLEtBQU8sT0FBU3RILEtBQUtrSixPQUFMbEosT0FBZ0JzSCxLQUFNb0gsU0FQckcsUUFjWHpELElBOUhhakgsR0FBQWlILGNBQWFBLENBK0gxQixJQUFBL0csR0FBQSxXQXVCRSxRQUFBQSxHQUFZNkssRUFBY0MsR0FDeEJoUCxLQUFLaVAsaUJBQ1F0RSxTQUFUb0UsSUFBb0JBLEVBQU8sSUFDaEJwRSxTQUFYcUUsSUFBc0JBLEVBQVMsR0FHbkNoUCxNQUFLa1AsT0FBUyxLQUNkbFAsS0FBS0ksTUFBUTRPLEVBQ2JoUCxLQUFLbVAsVUFBWSxlQUNqQm5QLEtBQUtvUCxXQUFhTCxFQUNsQi9PLEtBQUs4RSxZQUFjLEdBQ25COUUsS0FBS3FQLFNBQVcscUJBQ2hCclAsS0FBS3NQLFlBQ0x0UCxLQUFLdVAsY0FBZ0IsVUFDckJ2UCxLQUFLd1AsUUFBVWhLLFFBQVUsSUFDekJ4RixLQUFLa04sWUFDTGxOLEtBQUt5UCxnQkFBbUIsTUFFeEJ6UCxLQUFLMFAsYUFBZSxHQUNwQjFQLEtBQUsyUCxxQkFDTDNQLEtBQUs0UCx5QkFDSEMsSUFBT0MsT0FBTyxPQUFRQyxNQUFNLEtBQU1DLGFBQWMsa0RBQ2hEeEssU0FBWXNLLE9BQVEsWUFBYUMsTUFBTSxVQUFXQyxhQUFjLElBQ2hFQyxJQUFRSCxPQUFPLE9BQVFDLE1BQU0sS0FBTUMsYUFBYyxrREFDakRFLFNBQWFKLE9BQU8sYUFBY0MsTUFBTSxXQUFZQyxhQUFjLG1EQUVwRWhRLEtBQUttUSxTQUNILGNBQ0EsZ0RBQ0Esa0RBQ0EsbUNBRUZuUSxLQUFLbUwsYUFBZTlJLFNBQVM4SSxhQUFheEssT0FBTyxTQUFTeUssVUFDMURwTCxLQUFLbUwsYUFBYW5LLE9BQU8sZUFBZ0JoQixNQXVrQjdDLE1BcmtCRWtFLEdBQUFoRSxVQUFBa1EsZUFBQSxTQUFlQyxHQUNiLEdBQUdyUSxLQUFLc1AsU0FBUzNQLE9BQU8sRUFDdEIsSUFBSSxHQUFJb0MsR0FBRSxFQUFHQSxFQUFFL0IsS0FBS3NQLFNBQVMzUCxPQUFRb0MsSUFDbkNzTyxFQUFTclEsS0FBS3NQLFNBQVN2TixLQUk3Qm1DLEVBQUFoRSxVQUFBb1EsV0FBQSxXQUNFaFIsU0FBUzhILEtBQU0sd0JBR2pCbEQsRUFBQWhFLFVBQUFxUSxZQUFBLFdBRUUsR0FBSUMsR0FBdUJuTyxTQUFTL0IsT0FBT0ssT0FBTyx1QkFDbEQ2UCxHQUFxQnhQLE9BQU8sZUFBZ0JoQixLQUU1QyxJQUFJWixHQUFTb1IsRUFBcUJoUCxZQUFZeEIsS0FBSzJFLG1CQUFtQixPQUN0RXZGLEdBQVNZLEtBQUswUCxhQUFlLE9BQVMxUCxLQUFLeVEsbUJBQW1CelEsS0FBSzBRLDJCQUEyQnRSLElBQzlGWSxLQUFLcVAsU0FBV3JQLEtBQUsyUSxpQkFBaUIzUSxLQUFLcVAsVUFFM0NyUCxLQUFLb1EsZUFBZSxTQUFTOUssR0FDM0JBLEVBQVcyRixjQUFjd0IsV0FFM0JwTixPQUFPdVIsT0FBTyxHQUFJQyxPQUFNelIsSUFBVXVOLEtBQUssY0FBZTNNLEtBQUtxUCxTQUFTLFFBQ3BFclAsS0FBSzhRLHVCQUdQNU0sRUFBQWhFLFVBQUE0USxvQkFBQSxXQUNFelIsT0FBTzBSLEdBQUcsT0FBUSxRQUFTLE1BQU8sV0FBWSxjQUM5Q3pSLFNBQVM4SCxLQUFNLGdCQUdqQmxELEVBQUFoRSxVQUFBOFEsWUFBQSxXQUNFLEdBQUk1UixHQUFTLHFDQUNiWSxNQUFLb1EsZUFBZSxTQUFTOUssR0FDM0JsRyxHQUFVa0csRUFBVzhELFFBQVFoRSxRQUFRLEtBQU0sV0FBYSxJQUFNRSxFQUFXcUcsSUFBSXhGLElBQU0sSUFBS2IsRUFBQUEsT0FBZWEsSUFBTSxPQUUvR25HLEtBQUtxUCxTQUFXclAsS0FBSzJRLGlCQUFpQjNRLEtBQUtxUCxVQUMzQ2hRLE9BQU91UixPQUFPLEdBQUlDLE9BQU16UixJQUFVdU4sS0FBSyxhQUFjM00sS0FBS3FQLFNBQVMsY0FDbkVoUSxPQUFPMFIsR0FBRyxPQUFRLFFBQVMsTUFBTyxXQUFZLGVBR2hEN00sRUFBQWhFLFVBQUErUSxhQUFBLFdBQ0UsR0FBSTdSLEdBQVNZLEtBQUtrUixzQkFBc0JsUixLQUFLMkUsbUJBQW1CLFNBQ2hFM0UsTUFBS3FQLFNBQVdyUCxLQUFLMlEsaUJBQWlCM1EsS0FBS3FQLFVBQzNDaFEsT0FBT3VSLE9BQU8sR0FBSUMsT0FBTXpSLElBQVV1TixLQUFLLGNBQWUzTSxLQUFLcVAsU0FBUyxTQUNwRXJQLEtBQUttUix3QkFFUGpOLEVBQUFoRSxVQUFBZ1Isc0JBQUEsU0FBc0IvSCxHQUNwQixNQUFPQSxJQUVUakYsRUFBQWhFLFVBQUFpUixxQkFBQSxXQUNFOVIsT0FBTzBSLEdBQUcsT0FBUSxRQUFTLE9BQVEsV0FBWSxnQkFJakQ3TSxFQUFBaEUsVUFBQWtSLGlCQUFBLFdBQ0VwUixLQUFLcVIsNEJBQ0xyUixLQUFLMEUsV0FBYTFFLEtBQUsyRSxtQkFBbUIsU0FDMUMzRSxLQUFLc1IsNEJBRVBwTixFQUFBaEUsVUFBQW1SLDBCQUFBLFdBR0tyUixLQUFLeVAsaUJBQTJDLE9BQXhCelAsS0FBS3lQLGlCQUM5QnBRLE9BQU8wUixHQUFHLE9BQVEsUUFBUyxPQUFRLHNCQUF1Qix1QkFDMUQvUSxLQUFLb1EsZUFBZSxTQUFTOUssR0FDM0JpTSxlQUFpQmpNLEVBQVcrRixnQkFBa0IvRixFQUFBQSxPQUFlYSxJQUN6RGIsRUFBV0ksV0FBVyxXQUN0QkosRUFBQUEsT0FBZWUsYUFBYVQsSUFBSSxhQUNoQywwQkFBMEJaLEtBQUtNLEVBQUFBLE9BQWVhLE9BQ2hEYixFQUFBQSxPQUFlZSxhQUFhc0MsT0FBTyxpQkFFaEM0SSxpQkFDRGpNLEVBQVcrRixlQUFpQi9GLEVBQUFBLE9BQWVhLFNBT2pEbkcsS0FBS29RLGVBQWUsU0FBUzlLLEdBQzNCLEdBQUdBLEVBQUFBLE9BQWVlLGFBQWFULElBQUksWUFBWSxDQUM3QyxHQUFJbUQsR0FBUXpELEVBQUFBLE9BQWVlLGFBQWEwRixRQUFRdk0sUUFBUSxnQkFDckR1SixPQUNEekQsRUFBQUEsT0FBZWUsYUFBYXlDLGNBQWNDLEdBRTVDekQsRUFBV21HLGlCQUVibkcsRUFBVzJGLGNBQWN3QixXQUk3QnpNLEtBQUtvUSxlQUFlLFNBQVM5SyxJQUN2QkEsRUFBQUEsT0FBZWUsYUFBYVQsSUFBSSxNQUFRTixFQUFXd0gsZ0JBQ3JEeEgsRUFBQUEsT0FBZWUsYUFBYXNDLE9BQU8sV0FFaENyRCxFQUFBQSxPQUFlZSxhQUFhVCxJQUFJLE1BQThDLE9BQXRDTixFQUFBQSxPQUFlZSxhQUFhTSxJQUFJLE1BQ3pFckIsRUFBQUEsT0FBZWUsYUFBYUMsSUFBSSxJQUFJLFNBR3hDaEIsRUFBVzJGLGNBQWN3QixXQUczQnpNLEtBQUtvUSxlQUFlLFNBQVM5SyxHQUMzQkEsRUFBVzJGLGNBQWN3QixZQUk3QnZJLEVBQUFoRSxVQUFBb1IseUJBQUEsV0FDRXRSLEtBQUtvUSxlQUFlLFNBQVM5SyxHQUN4QkEsRUFBVytGLGdCQUFnQi9GLEVBQUFBLE9BQWVhLEtBRTNDOUcsT0FBTzBSLEdBQUcsT0FBUSxRQUFTLGtCQUFtQixXQUFZekwsRUFBQUEsT0FBZWEsT0FHN0U5RyxPQUFPMFIsR0FBRyxPQUFRLFFBQVMsT0FBUSxrQkFBbUIsb0JBQ3REelIsU0FBUzhILEtBQU0saUJBRWpCbEQsRUFBQWhFLFVBQUFzUix1QkFBQSxXQUNFLEdBQUlqTCxHQUFPdkcsSUFFVEEsTUFBS29RLGVBQWUsU0FBUzlLLEdBQzNCLFFBQUdBLEVBQVdrSSxXQUNkbEksRUFBQUEsT0FBZWUsYUFBZmYsVUFBbUMsS0FDbkNBLEVBQUFBLE9BQWVlLGFBQWZmLFVBQW1DLE9BQ25DQSxFQUFBQSxPQUFlZSxhQUFmZixVQUFtQyxLQUNuQ0EsRUFBQUEsT0FBZWUsYUFBZmYsVUFBbUMsUUFDbkNBLEVBQUFBLE9BQWVlLGFBQWZmLFVBQW1DLFdBQ25DQSxFQUFBQSxPQUFlZSxhQUFmZixVQUFtQyxXQUNuQ0EsRUFBQUEsT0FBZWUsYUFBZmYsVUFBbUMsWUFDbkNBLEVBQUFBLE9BQWVlLGFBQWZmLFVBQW1DLGNBQ25DQSxFQUFBQSxPQUFlZSxhQUFmZixVQUFtQyxLQUNuQ0EsRUFBQUEsT0FBZWUsYUFBZmYsVUFBbUMsTUFFbkNBLEVBQVdtRyxxQkFDWGxGLEdBQU1rTCx1QkFLWnZOLEVBQUFoRSxVQUFBd1IsMEJBQUEsV0FDRSxHQUFJbkwsR0FBT3ZHLElBRVRBLE1BQUtvUSxlQUFlLFNBQVM5SyxHQUMzQixRQUFHQSxFQUFXa0ksV0FDZGxJLEVBQUFBLE9BQWVlLGFBQWZmLFVBQW1DLEtBQ25DQSxFQUFBQSxPQUFlZSxhQUFmZixVQUFtQyxXQUNuQ0EsRUFBQUEsT0FBZWUsYUFBZmYsVUFBbUMsV0FDbkNBLEVBQUFBLE9BQWVlLGFBQWZmLFVBQW1DLFlBQ25DQSxFQUFBQSxPQUFlZSxhQUFmZixVQUFtQyxjQUVuQ0EsRUFBV21HLHFCQUNYbEYsR0FBTWtMLHVCQU1adk4sRUFBQWhFLFVBQUF5UixrQkFBQSxhQXdHQXpOLEVBQUFoRSxVQUFBMFIseUJBQUEsU0FBeUJ2TixHQUN2QixHQUFJZSxJQUNGeU0sS0FBTSxTQUNOQyxLQUFNLFVBQ05DLE1BQVEsV0FDUkMsTUFBUSxXQUNSQyxNQUFRLFdBQ1JDLE1BQVEsV0FDUkMsTUFBUSxXQUNSQyxNQUFRLFdBQ1JDLE1BQVEsV0FFVixLQUFJLEdBQUl0USxLQUFLcUQsR0FDWCxHQUFHQSxFQUFRa0gsZUFBZXZLLEdBQUcsQ0FDM0IsR0FBSXVRLEdBQVMsR0FBSXhQLFFBQU95UCxPQUFPQyxhQUFhN0ksU0FBUzVILElBQUksSUFDdER1USxHQUFPdE4sS0FBS1gsS0FFYkEsRUFBT0EsRUFBS2UsUUFBUWtOLEVBQVFsTixFQUFRckQsR0FBRyxLQUk3QyxNQUFPc0MsSUFFVEgsRUFBQWhFLFVBQUF1UyxZQUFBLFdBZ0JFLEdBZEF6UyxLQUFLMlIsb0JBQ0wzUixLQUFLc1AsWUFDTHRQLEtBQUttTCxhQUFhdUgsY0FDbEIxUyxLQUFLbUwsYUFBYXFCLGdCQUVsQm5OLE9BQU9zVCxTQUFTLEVBQUUsR0FFbEIzUyxLQUFLOEUsWUFBYzlFLEtBQUs0Uix5QkFBeUI1UixLQUFLb1AsWUFFdERwUCxLQUFLMFAsYUFBZTFQLEtBQUs0UyxpQkFLUCxZQUFmNVMsS0FBS3FQLFNBQXFCLENBQzNCLEdBQUl3RCxHQUFXLDZCQUNmLElBQUdBLEVBQVM3TixLQUFLaEYsS0FBSzhFLGFBQWEsQ0FDakMsR0FBSWdPLEdBQVc5UyxLQUFLOEUsWUFBWUksTUFBTTJOLEVBQ25DQyxHQUFTblQsT0FBTyxJQUNqQkssS0FBS3FQLFNBQVdyUCxLQUFLMlEsaUJBQWlCbUMsRUFBUyxHQUFHMU4sUUFBUXlOLEVBQVUsU0FNMUU3UyxLQUFLK1MsWUFBYyxHQUFJOU8sR0FBa0JqRSxNQUN6Q0EsS0FBSytTLFlBQVl0TyxPQUNqQnJELFFBQVE0RixJQUFJLGVBQWdCaEgsS0FBSytTLFlBRWpDLElBQUk3SixHQUFTbEosS0FDVGdULEVBQU0saUNBQWtDQyxFQUFJLENBQ2hEalQsTUFBSzhFLFlBQWM5RSxLQUFLOEUsWUFBWU0sUUFBUTROLEVBQUssU0FBUy9OLEdBQ25ELE1BQUxnTyxLQUFZaE8sRUFBTUcsUUFBUSxLQUFNLGNBQWU2TixFQUFFLE9BR25EQSxFQUFJLEVBQ0pqVCxLQUFLOEUsWUFBYzlFLEtBQUs4RSxZQUFZTSxRQUFRNE4sRUFBSyxTQUFTNUosR0FDeEQ2SixHQUVBLElBQUlwSSxHQUFPM0IsRUFBT3BFLFlBQVlwRixPQUFPLEVBQUd3SixFQUFPcEUsWUFBWXRGLFFBQVE0SixJQUFVeEosTUFBTSxNQUFNRCxPQUFPLENBRWhHLElBQUcsMkJBQTJCcUYsS0FBS29FLEdBQVMsQ0FDMUM2SixHQUNBLElBQUl6UyxHQUFJLEdBQUk4RSxHQUFXdUYsRUFBTXpCLEVBQVNGLEVBSXRDLE9BSEExSSxHQUFFeUcsR0FBS2dNLEVBQ1B6UyxFQUFFZ04sU0FBWWhOLEVBQUFBLE9BQU1tSCxTQUFTLG1CQUFxQm5ILEVBQUFBLE9BQU1tSCxTQUFTLFlBQ2pFdUIsRUFBT29HLFNBQVM1TyxLQUFLRixHQUNkLG1CQUFtQnlTLEVBQUUsS0FFNUIsTUFBTzdKLEtBTVhwSixLQUFLb1EsZUFBZSxTQUFTOUssR0FDM0JBLEVBQVdtRyxtQkFPYm5NLFNBQVM4SCxLQUFLLFdBRWhCbEQsRUFBQWhFLFVBQUFnVCxrQkFBQSxTQUFrQmhTLEdBQ2hCbEIsS0FBS3dQLE9BQU90TyxHQUFTLElBRXZCZ0QsRUFBQWhFLFVBQUFpVCxrQkFBQSxTQUFrQmpTLFNBQ1RsQixNQUFLd1AsT0FBT3RPLElBRXJCZ0QsRUFBQWhFLFVBQUFrVCxpQkFBQSxTQUFpQjVELEdBQ2YsT0FBSXhQLEtBQUt3UCxPQUFPbEQsZUFBZWtELElBQXdCLElBQWJ4UCxLQUFLd1AsUUFHakR0TCxFQUFBaEUsVUFBQW1ULDBCQUFBLFdBQ0UsR0FBSWpVLElBQVMsQ0FFYixTQUFHWSxLQUFLbUwsZUFBaUJuTCxLQUFLbUwsYUFBYXVCLGVBTXpDdE4sSUFERVksS0FBS3NQLFVBQW9DLEdBQXhCdFAsS0FBS3NQLFNBQVMzUCxXQUc3QkssS0FBS3lSLHFCQVdidk4sRUFBQWhFLFVBQUF5RSxtQkFBQSxTQUFtQmdJLEVBQU8yRyxHQUNaM0ksU0FBVGdDLElBQW9CQSxFQUFPLFNBQ2pCaEMsU0FBVjJJLElBQXFCQSxHQUFRLEVBQ2hDLElBQ0lsVSxHQUFnQlksS0FBSzhFLFdBS3pCOUUsTUFBS29RLGVBQWUsU0FBUzlLLEdBSTNCLEdBQUdBLEVBQVdnSCxlQUFlLG1CQUFtQmhILEVBQVdpSCxlQUN6RG5OLEVBQVNBLEVBQU9nRyxRQUFRLEdBQUl0QyxRQUFPLG1CQUFtQndDLEVBQVcyQixHQUFHLEtBQU0sTUFBTyxRQUM1RSxJQUFHM0IsRUFBV2tJLFNBQVUsQ0FDN0IsR0FBSStGLEdBQWNqTyxFQUFXOEQsUUFBUWhFLFFBQVEsNEJBQTRCLEdBQ3pFaEcsR0FBU0EsRUFBT2dHLFFBQVEsR0FBSXRDLFFBQU8sbUJBQW1Cd0MsRUFBVzJCLEdBQUcsS0FBTSxNQUFPc00sT0FFNUUsQ0FDTCxHQUFJbEgsR0FBUS9HLEVBQVc4RCxRQUFRNUosUUFBUSxTQUFZOEYsRUFBV3FHLElBQUl4RixLQUM5RHFOLEVBQWFsTyxFQUFXOEQsT0FDNUJvSyxHQUFhQSxFQUFXOVQsT0FBTyxFQUFFMk0sR0FBUyxTQUFZL0csRUFBQUEsT0FBZWEsSUFBTXFOLEVBQVc5VCxPQUFPMk0sRUFBTSxFQUFFL0csRUFBV3FHLElBQUl4RixJQUFJeEcsT0FBUTZULEVBQVc3VCxRQUN4STJGLEVBQVcyRCxjQUNadUssRUFBYWxPLEVBQVcyRCxZQUFZdUIsZUFBZWdKLElBRXJEQSxFQUFhQSxFQUFXcE8sUUFBUSwwQkFBMEIsSUFFMURoRyxFQUFTQSxFQUFPZ0csUUFBUSxHQUFJdEMsUUFBTyxtQkFBbUJ3QyxFQUFXMkIsR0FBRyxLQUFNLE1BQU91TSxNQU9yRm5SLFNBQVMvQixPQUFPSyxPQUFPLHlCQUF5QkssT0FBTyxlQUFlaEIsTUFDdEVaLEVBQVNpRCxTQUFTL0IsT0FBT0ssT0FBTyx5QkFBeUJhLFlBQVlwQyxFQUVyRSxLQUNFQSxFQUFTQSxFQUFPZ0csUUFBUSxrQ0FBbUMsVUFDM0QsTUFBTXFPLEdBQ05yUyxRQUFRNEYsSUFBSSxtRUFFZCxNQUFPNUgsSUFFVDhFLEVBQUFoRSxVQUFBd1QscUJBQUEsV0FDRSxRQUFJMVQsS0FBS3lSLHFCQUtUblMsU0FBUzhILEtBQUssV0FDZC9ILE9BQU9zVCxTQUFTLEVBQUUsSUFDWCxJQUVUek8sRUFBQWhFLFVBQUF1UixpQkFBQSxXQUNFLEdBQUlyUyxJQUFTLENBWWIsT0FWQVksTUFBS29RLGVBQWUsU0FBUzlLLEdBRXZCQSxFQUFXd0YsZUFDYjFMLEdBQVMsR0FFUmtHLEVBQVd5SCxzQkFDWjNOLEdBQVMsS0FJTkEsR0FFVDhFLEVBQUFoRSxVQUFBeVQsZ0JBQUEsV0FDRSxHQUFJakYsSUFDRmtGLGNBQWUsRUFDZkMsV0FBWSxFQU1kLE9BSkE3VCxNQUFLb1EsZUFBZSxTQUFTOUssR0FDeEJBLEVBQVd5SCxxQkFBcUIyQixFQUFLa0YsZ0JBQ3JDdE8sRUFBV21HLGtCQUFrQmlELEVBQUttRixlQUVoQ25GLEdBRVR4SyxFQUFBaEUsVUFBQTRULHVCQUFBLFNBQXVCQyxHQUNsQi9ULEtBQUtvUCxXQUFXelAsT0FBTyxJQUFLSyxLQUFLb1AsV0FBYSxHQUNqRCxJQUFJNEUsR0FBUUQsRUFBSUUsYUFBYUQsS0FDN0IsSUFBR0QsRUFBSUUsYUFBYUQsTUFBTXJVLE9BQU8sRUFDL0J1VSxNQUFNLGdEQUNELENBQ0wsR0FBSUMsR0FBUyxHQUFJQyxZQUNiQyxFQUFLclUsSUFDVG1VLEdBQU9HLFVBQVksU0FBU1AsR0FDMUIsR0FBSVEsR0FBV1IsRUFBSVMsT0FBT25VLE9BRXRCb1UsRUFBWVQsRUFBTSxHQUFHVSxLQUFLOVUsTUFBTSxLQUNoQytVLEVBQU1GLEVBQVV2TSxNQUFNME0sYUFDMUJQLEdBQUdoRixTQUFXZ0YsRUFBRzFELGlCQUFpQjhELEVBQVVyTSxLQUFLLE1BRXpDLE9BQUx1TSxFQUNETixFQUFHakYsV0FBYWlGLEVBQUdRLDZCQUE2Qk4sR0FFaERGLEVBQUdqRixXQUFhbUYsRUFFbEJGLEVBQUc1QixjQUVIblQsU0FBUzhILEtBQU8sV0FFbEIrTSxFQUFPVyxXQUFXZCxFQUFNLElBQ3hCM1UsT0FBTzBSLEdBQUcsT0FBUSxRQUFTLE9BQVEsU0FBVSwyQkFJakRsSixPQUFBQyxlQUFJNUQsRUFBQWhFLFVBQUEsZ0JEMUZJb0csSUMwRlIsU0FBaUJ5TyxHQUNmLEdBQUlwSixHQUFLM0wsS0FBS3VQLGFBRVg1RCxLQUFNb0osSUFDUC9VLEtBQUt1UCxjQUFnQndGLEVBQ3JCL1UsS0FBS29RLGVBQWUsU0FBUzlLLEdBQzNCQSxFQUFXbUcscUJEdkZUcEQsWUFBWSxFQUNaQyxjQUFjLElDNkZ0QnBFLEVBQUFoRSxVQUFBeVEsaUJBQUEsU0FBaUIrRCxHQUNmLEdBQUlNLEdBQW9CLFlBQ3BCQyxFQUF3QixTQUc1QixPQUZBUCxHQUFPQSxFQUFLdFAsUUFBUTRQLEVBQW1CLElBQUlqUCxPQUFPNk8sY0FDbERGLEVBQU9BLEVBQUt0UCxRQUFRNlAsRUFBdUIsTUFHN0MvUSxFQUFBaEUsVUFBQXdRLDJCQUFBLFNBQTJCakcsR0FDekIsR0FBSXlLLEdBQU0sdURBRVYsT0FEQXpLLEdBQVVBLEVBQVFyRixRQUFROFAsRUFBSyxTQUdqQ2hSLEVBQUFoRSxVQUFBMlUsNkJBQUEsU0FBNkIxTCxHQUkzQixJQUFJLEdBSEEvSixHQUFTK0osRUFBS3ZKLE1BQU0sTUFDcEJtUCxFQUFPM1AsRUFBTzhJLE1BRVZuRyxFQUFHLEVBQUdBLEVBQUczQyxFQUFPTyxPQUFRb0MsSUFFM0IzQyxFQUFPMkMsR0FBR3ZDLFFBQVEsZ0JBQ0FtTCxTQUFoQjNLLEtBQUt3UCxTQUFzQnhQLEtBQUt3UCxVQU92QyxPQUFPVCxJQUVUN0ssRUFBQWhFLFVBQUF1USxtQkFBQSxTQUFtQnRILEdBQ2pCLEdBQUkvSixHQUFTK0osQ0FJYixPQUhBL0osR0FBU0EsRUFBT2dHLFFBQVEsR0FBSXRDLFFBQU8sS0FBTSxLQUFNLEtBQy9DMUQsRUFBU0EsRUFBT2dHLFFBQVEsR0FBSXRDLFFBQU8sS0FBTSxLQUFNLEtBQy9DMUQsRUFBU0EsRUFBT2dHLFFBQVEsZUFBZ0IsTUFHMUNsQixFQUFBaEUsVUFBQTBTLGVBQUEsV0FFRSxJQUFJLEdBREF6QyxNQUNJcE8sRUFBRSxFQUFHQSxFQUFFL0IsS0FBS21RLFFBQVF4USxPQUFRb0MsSUFBTW9PLEVBQVF6UCxLQUFLVixLQUFLbVEsUUFBUXBPLEdBQ3BFLElBQUlvVCxHQUFVblYsS0FBS29WLHFCQUFxQnBWLEtBQUtvUCxXQUMvQixLQUFYK0YsSUFBZUEsRUFBVSxpQkFDNUJoRixFQUFRelAsS0FBSywrQkFBaUN5VSxFQUc5QyxLQUFJLEdBQUlFLEtBQUtyVixNQUFLd1AsT0FDYnhQLEtBQUt3UCxPQUFPbEQsZUFBZStJLElBQ3pCclYsS0FBSzRQLHdCQUF3QnRELGVBQWUrSSxJQUM3Q2xGLEVBQVF6UCxLQUNOVixLQUFLNFAsd0JBQXdCeUYsR0FBR3ZGLE9BQVMsSUFBTTlQLEtBQUt3UCxPQUFPNkYsR0FNbkUsT0FEQXJWLE1BQUswUCxhQUFlUyxFQUFRL0gsS0FBSyxNQUMxQitILEVBQVEvSCxLQUFLLE9BRXRCbEUsRUFBQWhFLFVBQUFrVixxQkFBQSxTQUFxQjNLLEdBQ25CLEdBQUk2SyxHQUFNLDhCQUErQkgsRUFBUyxHQUU5Q0ksRUFBVzlLLEVBQVF2RixNQUFNb1EsRUFZN0IsT0FYR0MsSUFDREEsRUFBUzFWLFFBQVEsU0FBUzJWLEdBQ3hCLEdBQUlDLEdBQWNELEVBQUt0USxNQUFNLHNCQUUzQmlRLEdBRENNLEVBQ1NBLEVBQVksR0FFWixrQkFLVE4sR0FHWGpSLElBL25CYUYsR0FBQUUsYUFBWUEsR0FodUJqQkYsWUFBQUEsY0Rrd0NWLElBQUkwUixXQUFhMVYsTUFBUUEsS0FBSzBWLFdBQWMsU0FBVUMsRUFBR25QLEdBRXJELFFBQVNvUCxLQUFPNVYsS0FBSzZWLFlBQWNGLEVBRG5DLElBQUssR0FBSUcsS0FBS3RQLEdBQU9BLEVBQUU4RixlQUFld0osS0FBSUgsRUFBRUcsR0FBS3RQLEVBQUVzUCxHQUVuREgsR0FBRXpWLFVBQWtCLE9BQU5zRyxFQUFhcUIsT0FBT2tPLE9BQU92UCxJQUFNb1AsRUFBRzFWLFVBQVlzRyxFQUFFdEcsVUFBVyxHQUFJMFYsS0VyMENuRkksa0JBQUEsV0F3QkUsUUFBQUEsS0FDRWhXLEtBQUtpVyxVQUFXLEVBYXBCLE1BdEJFRCxHQUFBOVYsVUFBQWdXLGFBQUEsV0FDRSxRQUFBQyxLQUNFLE1BQU9DLE1BQUtDLE1BQTRCLE9BQXJCLEVBQUlELEtBQUtFLFdBQ3pCdlIsU0FBUyxJQUNUd1IsVUFBVSxHQUVmLE1BQU9KLEtBQU9BLElBQU8sSUFBTUEsSUFBTyxJQUFNQSxJQUFPLElBQU1BLElBQU8sSUFBTUEsSUFBT0EsSUFBT0EsS0FLbEZ0TyxPQUFBQyxlQUFJa08sRUFBQTlWLFVBQUEsUUZ5ekNFeUcsSUV6ekNOLFdBQ0UsTUFBTzNHLE1BQUt3VyxPRjJ6Q1JsUSxJRXp6Q04sU0FBU21RLEdBQ1B6VyxLQUFLd1csTUFBUUMsRUFDYnpXLEtBQUswVyxVQUFZblUsVUFBVWtVLElGMnpDdkJwTyxZQUFZLEVBQ1pDLGNBQWMsSUUxekNwQjBOLEVBQUE5VixVQUFBeVcsa0JBQUEsU0FBa0JDLEdBQ2hCNVcsS0FBS2lXLFNBQVdXLEdBR3BCWixLQUlPYSxzQkFBUCxTQUFPQSxHQUVMLEdBQUFDLEdBQUEsV0FNRSxRQUFBQSxHQUFZQyxFQUFVL0gsR0FDcEJoUCxLQUFLZ1gsT0FBU2hJLEVBQ2RoUCxLQUFLaVgsU0FBV0YsRUFDaEIvVyxLQUFLa1gsV0FBYWxYLEtBQUttWCxvQkF3QjNCLE1BdEJFTCxHQUFBNVcsVUFBQWtYLFFBQUEsU0FBUVIsR0FDTjVXLEtBQUtrWCxXQUFhTixHQUVwQkUsRUFBQTVXLFVBQUFpWCxrQkFBQSxXQUNjblgsS0FBS2lYLFNBQVNJLEtBQzFCLE9BQU94UCxRQUFPcEUsS0FBS3pELEtBQUtpWCxTQUFTSyxNQUFNM1gsT0FBTyxFQUM1QyxHQUNDSyxLQUFLaVgsU0FBYSxLQUFHcFAsT0FBT3BFLEtBQUt6RCxLQUFLaVgsU0FBU0ssTUFBTSxLQUUxRFIsRUFBQTVXLFVBQUFxWCxXQUFBLFdBQ0UsTUFBTzFQLFFBQU9wRSxLQUFLekQsS0FBS2lYLFNBQVNLLE1BQU0zWCxPQUFPLEdBRWhEa0ksT0FBQUMsZUFBSWdQLEVBQUE1VyxVQUFBLFVGc3pDSXlHLElFdHpDUixXQUVFLEdBQUkwUSxHQUFRclgsS0FBS2lYLFNBQVNJLEtBRTFCLE9BQUlBLElBQVNyWCxLQUFLa1gsYUFBY0csSUFDdEIxSyxLQUFNM00sS0FBS2tYLGFBRVh2SyxLQUFNM00sS0FBS21YLHNCRnl6Q2Y5TyxZQUFZLEVBQ1pDLGNBQWMsSUV2ekN4QndPLElBakNhRCxHQUFBQyxtQkFBa0JBLENBb0MvQixJQUFBVSxHQUFBLFdBT0UsUUFBQUEsS0FDRXhYLEtBQUtrTixZQUNMbE4sS0FBSzBNLGFBQWMsRUFDbkIxTSxLQUFLeVgsaUJBQ0x6WCxLQUFLQyxVQXdDVCxNQXJDRXVYLEdBQUF0WCxVQUFBQyxjQUFBLFNBQWNDLEdBQ1osR0FBSUMsR0FBU0wsS0FBS0MsT0FBT0ssT0FBTyxTQUFTQyxHQUN2QyxNQUFPQSxHQUFJSCxPQUFTQSxHQUd0QixJQUFvQixHQUFqQkMsRUFBT1YsT0FBWSxDQUNwQixHQUFJYSxHQUFJLEdBQUlrWCxHQUFtQnRYLEVBQ3ZCSixNQUFLQyxPQUFPUyxLQUFLRixFQUN6QixPQUFPQSxHQUVQLE1BQU9ILEdBQU8sSUFHbEJtWCxFQUFBdFgsVUFBQXlYLGFBQUEsV0FHRTNYLEtBQUtDLE9BQU9KLFFBQVEsU0FBQzJWLEdBSW5CLElBQUksR0FEQTVVLEdBQVFpSCxPQUFPcEUsS0FBSytSLEVBQUs1VSxPQUNyQm1CLEVBQUUsRUFBR0EsRUFBRW5CLEVBQU1qQixPQUFRb0MsU0FhakN5VixFQUFBdFgsVUFBQVMsT0FBQSxTQUFPUCxHQUNMLEdBQUlPLEdBQVNYLEtBQUtHLGNBQWNDLEVBQ2hDLE9BQU9PLElBRVg2VyxJQW5EYVgsR0FBQVcsbUJBQWtCQSxDQXFEL0IsSUFBQUUsR0FBQSxXQU9FLFFBQUFBLEdBQVl0WCxHQUNWSixLQUFLSSxNQUFRQSxFQUNiSixLQUFLWSxTQVdULE1BUEU4VyxHQUFBeFgsVUFBQWtMLFFBQUEsV0FDRSxNQUFPLElBQUl3TSxHQUFvQjVYLE9BRWpDMFgsRUFBQXhYLFVBQUEyWCxTQUFBLFNBQVM1USxFQUFJbEcsR0FFWCxNQURBZixNQUFLWSxNQUFNcUcsR0FBTWxHLEVBQ1ZmLE1BRVgwWCxJQXBCYWIsR0FBQWEsbUJBQWtCQSxDQXFCL0IsSUFBQUUsR0FBQSxTQUFBMU8sR0FPRSxRQUFBME8sR0FBWUUsR0FDVjVPLEVBQUE2TyxLQUFBL1gsTUFDQUEsS0FBS1ksTUFBUWtYLEVBQVlsWCxNQUN6QlosS0FBSzBTLGNBQ0wxUyxLQUFLZ0IsT0FBTyxzQkFBdUJoQixNQUNuQ0EsS0FBS2dZLFFBZ0hULE1BNUh5Q3RDLFdBQUFrQyxFQUFBMU8sR0FjdkMwTyxFQUFBMVgsVUFBQThYLE1BQUEsV0FDRWhZLEtBQUtrTixZQUNMbE4sS0FBSzBNLGFBQWMsR0FFckJrTCxFQUFBMVgsVUFBQWlCLGtCQUFBLFNBQWtCRixFQUFVQyxHQUMxQmxCLEtBQUtnQixPQUFPQyxFQUFVQyxHQUN0QkUsUUFBUUMsS0FBSyx5REFHZnVXLEVBQUExWCxVQUFBK1gsYUFBQSxTQUFhbFgsR0FFWCxHQUFJVixFQU1GLElBQW1CLGdCQUFUVSxHQUFrQixDQUMxQixHQUFJbVgsR0FBV2xZLEtBQUsyRCxjQUFjNUMsRUFDbENWLEdBQVM2WCxFQUFTclUsR0FBR3pCLE1BQU0sS0FBTThWLEVBQVN0VyxVQWdCNUN2QixHQUFTVSxHQUVYLE9BQU9WLElBRVR1WCxFQUFBMVgsVUFBQXNNLGNBQUEsV0FDRXhNLEtBQUtnWSxPQUVMLEtBQWlCLEdBRGJwWCxHQUFRaUgsT0FBT3BFLEtBQUt6RCxLQUFLWSxPQUNaMEksRUFBQSxFQUFBNk8sRUFBQXZYLEVBQUEwSSxFQUFBNk8sRUFBQXhZLE9BQUEySixJQUFNLENBQW5CLEdBQUl2SSxHQUFJb1gsRUFBQTdPLEdBQ05qSixFQUFTTCxLQUFLaVksYUFBYWpZLEtBQUtZLE1BQU1HLElBRXRDcVgsSUFBVS9YLEVBQU9pTSxlQUFlLFNBQVVqTSxFQUFPZ1ksS0FBS2pXLE1BQU0sS0FFaEUsSUFBR2dXLEVBQVEsQ0FFVCxHQUFJRSxHQUFLLEdBQUl0QyxrQkFDYnNDLEdBQUdyUixHQUFpQjBELFNBQVp0SyxFQUFPNEcsSUFBNkIsSUFBWDVHLEVBQU80RyxHQUFTcVIsRUFBR3BDLGVBQWlCN1YsRUFBTzRHLEdBQzVFcVIsRUFBRzNMLEtBQXVCaEMsU0FBaEJ0SyxFQUFPc00sS0FBcUJwSyxVQUFVZ1csS0FBT2xZLEVBQU9zTSxLQUM5RDJMLEVBQUdFLFNBQStCN04sU0FBcEJ0SyxFQUFPbVksU0FBeUJsVyxjQUFjbVcsS0FBT3BZLEVBQU9tWSxTQUMxRUYsRUFBR0ksTUFBeUIvTixTQUFqQnRLLEVBQU9xWSxNQUFzQixHQUFLclksRUFBT3FZLE1BQ3BESixFQUFHSyxZQUFxQ2hPLFNBQXZCdEssRUFBT3NZLFlBQTRCLEdBQUt0WSxFQUFPc1ksWUFDaEVMLEVBQUdNLFNBQStCak8sU0FBcEJ0SyxFQUFPdVksU0FBeUIsR0FBS3ZZLEVBQU91WSxTQUMxRE4sRUFBR08sV0FBbUNsTyxTQUF0QnRLLEVBQU93WSxXQUEyQixHQUFLeFksRUFBT3dZLFdBQzlEUCxFQUFHUSxhQUF1Q25PLFNBQXhCdEssRUFBT3lZLGFBQTZCLFlBQWN6WSxFQUFPeVksYUFFM0VSLEVBQUdTLFdBQWExWSxFQUFPMlksS0FBTzNZLEVBQU8yWSxJQUFJQyxRQUFVNVksRUFBTzJZLElBQUlDLFFBQVUsYUFDeEVYLEVBQUdZLFNBQVc3WSxFQUFPMlksS0FBTzNZLEVBQU8yWSxJQUFJakosTUFBUTFQLEVBQU8yWSxJQUFJakosTUFBUSxHQUNsRXVJLEVBQUc1TCxhQUFjck0sRUFBT2lNLGVBQWUsZ0JBQWlCak0sRUFBT3FNLFlBQy9EMU0sS0FBS2tOLFNBQVN4TSxLQUFLNFgsSUFJdkIsSUFBSSxHQUFJdlcsR0FBRSxFQUFHQSxFQUFJL0IsS0FBS2tOLFNBQVN2TixPQUFRb0MsSUFDbEMvQixLQUFLMFMsV0FBV2xULFFBQVNRLEtBQUtrTixTQUFTbkwsR0FBR2tGLFNBQzNDakgsS0FBS2tOLFNBQVNuTCxHQUFHa1UsVUFBVyxHQUcxQmpXLEtBQUtrTixTQUFTbkwsR0FBRzJLLGFBQ2YxTSxLQUFLa04sU0FBU25MLEdBQUdrVSxXQUNuQmpXLEtBQUswTSxhQUFjLEVBTXpCMU0sTUFBS2tOLFNBQVNpTSxLQUFLLFNBQUMzWSxFQUFxQmdHLEdBQ3JDLE1BQUdoRyxHQUFFZ1csTUFBTWhRLEVBQUVnUSxNQUFjLEVBQ3hCaFcsRUFBRWdXLE1BQU1oUSxFQUFFZ1EsU0FDTixLQUdiM08sT0FBQUMsZUFBSThQLEVBQUExWCxVQUFBLFFGNndDSXlHLElFN3dDUixXQUVFLElBQUksR0FEQXZILE1BQ0kyQyxFQUFJLEVBQUdBLEVBQUUvQixLQUFLa04sU0FBU3ZOLE9BQVFvQyxJQUNyQzNDLEVBQU9ZLEtBQUtrTixTQUFTbkwsR0FBRzJVLFdBQWExVyxLQUFLa04sU0FBU25MLEdBQUc0SyxJQUd4RCxPQUFPdk4sSUY4d0NEaUosWUFBWSxFQUNaQyxjQUFjLElFN3dDdEJULE9BQUFDLGVBQUk4UCxFQUFBMVgsVUFBQSxTRmd4Q0l5RyxJRWh4Q1IsV0FFRSxJQUFJLEdBREF2SCxNQUNJMkMsRUFBSSxFQUFHQSxFQUFFL0IsS0FBS2tOLFNBQVN2TixPQUFRb0MsSUFDckMzQyxFQUFPWSxLQUFLa04sU0FBU25MLEdBQUc0SyxNQUFRcEssVUFBVXZDLEtBQUtrTixTQUFTbkwsR0FBRzRLLEtBRTdELE9BQU92TixJRmt4Q0RpSixZQUFZLEVBQ1pDLGNBQWMsSUVqeEN0QlQsT0FBQUMsZUFBSThQLEVBQUExWCxVQUFBLFNGb3hDSXlHLElFcHhDUixXQUVFLElBQUksR0FEQXZILE1BQ0kyQyxFQUFHLEVBQUdBLEVBQUkvQixLQUFLa04sU0FBU3ZOLE9BQVFvQyxJQUNVNEksU0FBN0N2TCxFQUFPbUQsVUFBVXZDLEtBQUtrTixTQUFTbkwsR0FBRzRLLFNBQ25Ddk4sRUFBT21ELFVBQVV2QyxLQUFLa04sU0FBU25MLEdBQUc0SyxPQUFTLEdBRTdDdk4sRUFBT21ELFVBQVV2QyxLQUFLa04sU0FBU25MLEdBQUc0SyxRQUVwQyxPQUFPdk4sSUZzeENEaUosWUFBWSxFQUNaQyxjQUFjLElFcnhDeEJzUCxHQTVIeUNyVSxlQUE1QnNULEdBQUFlLG9CQUFtQkEsR0FoSDNCZix1QkFBQUEseUJBZ1BQLElBQUl4VSxXQUNKLFNBQVdBLEdBQ1BBLEVBQVM4SSxhQUFnQixHQUFJMEwsc0JBQXFCVyxvQkFDbkRuVixXQUFhQSxhSnJTaEIsSUFBQStXLHFCQUFBLFdBT0UsUUFBQUEsR0FBWXhYLEdBRVY1QixLQUFLcVosU0FBUyxFQUNkclosS0FBS21FLE9BQVEsYUFDYm5FLEtBQUtzWixTQUFVO0FBQ2Z0WixLQUFLeU8sUUFBUyxzRUFFTTlELFNBQWpCL0ksRUFBSzJYLFVBQXVCM1gsRUFBSzJYLFFBQVEsY0FDeEI1TyxTQUFqQi9JLEVBQUs0WCxVQUF1QjVYLEVBQUs0WCxRQUFRLGNBRTVDbmEsT0FBT29hLFVBQVl6WixLQUFLMFosaUJBQ3hCcmEsT0FBT3NhLGdCQUFrQnhhLDBCQUV0QkUsT0FBT29hLFdBQ1JwYSxPQUFPc1QsU0FBUyxFQUFHLEdBQ25CM1MsS0FBSzRaLG9CQUFvQmhZLEtBRXpCNUIsS0FBS21FLE9BQVMsU0FDZG5FLEtBQUtxWixTQUFVLEVBQ2YvTyxTQUFTb08sTUFBUXJaLE9BQU93YSxZQXlEOUIsTUFwREVULEdBQUFsWixVQUFBMFosb0JBQUEsU0FBb0JoWSxHQUVsQixHQUFHNUIsS0FBSzBaLGlCQUFpQixDQUN2QixHQUFJSSxHQUFHdFosRUFBR3VaLENBQ1IxYSxRQUFPMmEsc0JBQXdCLFNBQVMzWixHQUN6QixHQUFWQSxHQUNEdUIsRUFBSzJYLFVBQ0xuWSxRQUFRNEYsSUFBSSxVQUNaaVQsV0FBVyxXQUNUM2EsU0FBUzhILEtBQUssNkRBQTZEL0gsT0FBTzZhLGlCQUNqRixNQUVMOVksUUFBUTRGLElBQUksZUFHaEI4UyxFQUFJeFAsU0FBUzZQLGNBQWMsVUFDM0IzWixFQUFJOEosU0FBUzhQLHFCQUFxQixVQUFVLEdBQzVDTixFQUFFbk4sS0FBSyxrQkFDUG1OLEVBQUVOLFFBQVUsV0FDVjVYLEVBQUs0WCxXQUdIeFosS0FBSzBaLG1CQUNOSSxFQUFFaFEsSUFBSyxxRUFFVm1RLFdBQVcsV0FDVHpaLEVBQUU0SixXQUFXaVEsYUFBYVAsRUFBRUMsSUFDNUIsS0FDRnpQLFNBQVNvTyxNQUFRclosT0FBT3dhLFdBQWEsc0JBRXJDN1osTUFBS21FLE9BQVMsU0FDZG5FLEtBQUtxWixTQUFVLEVBQ2YvTyxTQUFTb08sTUFBUXJaLE9BQU93YSxZQUk1QlQsRUFBQWxaLFVBQUFmLHdCQUFBLFdBQ0UsR0FBSUMsR0FBUyxFQUNiLElBQUdDLE9BQU9DLFNBQVNDLE9BQU9DLFFBQVEsbUJBQW9CLENBQ3BELEdBQUlDLEdBQVNKLE9BQU9DLFNBQVNDLE9BQU9HLE9BQU8sRUFBRUwsT0FBT0MsU0FBU0MsT0FBT0ksUUFBUUMsTUFBTSxJQUNsRkgsR0FBT0ksUUFBUSxTQUFTQyxHQUNuQkEsRUFBTU4sUUFBUSx5QkFDZkosRUFBU1UsRUFBTUosT0FBTyxtQkFBbUJDLE9BQVFHLEVBQU1ILFdBSTdELE1BQU9QLElBRVRnYSxFQUFBbFosVUFBQXdaLGVBQUEsV0FFRSxNQUFPcGEsVUFBUzhILEtBQUs1SCxRQUFRLGlDQUFtQ0YsU0FBUzhILEtBQUs1SCxRQUFRLG1CQUUxRjRaLEtBR0FrQixhQUFBLFdBUUUsUUFBQUEsS0FVRSxHQVJBdGEsS0FBS3VhLGVBQWdCLEVBQ3JCdmEsS0FBS3dhLGNBQWUsRUFDcEJ4YSxLQUFLeWEsZUFBNEM5UCxTQUEzQnRMLE9BQU9zYSxnQkFBZ0N4YSwwQkFBNEJFLE9BQU9zYSxnQkFDaEczWixLQUFLMGEsY0FBZ0JyYixPQUFPNmEsZ0JBR3pCNWEsU0FBUzhILEtBQUs1SCxRQUFRLGtCQUFrQkgsT0FBT29hLFdBQVksR0FFcEMsSUFBdkJ6WixLQUFLeWEsZUFDTnphLEtBQUsyYSxzQkFBdUIsTUFLNUIsSUFIRzNhLEtBQUt5YSxnQkFBa0JwYixPQUFPb2EsWUFDL0J6WixLQUFLMmEsc0JBQXVCLEdBRTNCM2EsS0FBS3lhLGdCQUFtQnphLEtBQUt5YSxpQkFBbUJ6YSxLQUFLMGEsY0FBZSxDQUNyRTFhLEtBQUt1YSxlQUFnQixDQUNyQixJQUFJSyxHQUFNLEdBQUlDLG9CQUFtQjdhLEtBQUt5YSxnQkFDcENLLEVBQU0sR0FBSUQsb0JBQW1CN2EsS0FBSzBhLGNBQ3BDMWEsTUFBS3dhLGFBQWVJLEVBQUlHLGVBQWVELElBQVFFLHlCQUF5QkMsTUFDeEU3WixRQUFRNEYsSUFBSSxnQkFBaUJoSCxLQUFLd2EsYUFBY0ksRUFBSUUsSUF1QjVELE1BbEJFUixHQUFBcGEsVUFBQWdiLFlBQUEsV0FDRSxNQUFPbGIsTUFBS3VhLGVBQWlCdmEsS0FBS3dhLGNBRXBDRixFQUFBcGEsVUFBQWliLFdBQUEsV0FDRSxNQUE0QixJQUFyQm5iLEtBQUt5YSxpQkFBdUJwYixPQUFPb2EsV0FFNUNhLEVBQUFwYSxVQUFBa2IsWUFBQSxTQUFZQyxFQUFTQyxHQUluQixJQUFJLEdBSEFiLEdBQWlCWSxFQUFRemIsTUFBTSxLQUNuQzhhLEVBQWdCWSxFQUFPMWIsTUFBTSxLQUM3QnNGLEVBQVEsRUFBRzlGLEdBQVMsRUFDWjJDLEVBQUUsRUFBR0EsRUFBRTJZLEVBQWMvYSxPQUFPb0MsSUFDL0IyWSxFQUFjM1ksSUFBSzBZLEVBQWUxWSxJQUFJbUQsR0FLM0MsT0FIR0EsR0FBTSxJQUNQOUYsR0FBUyxHQUVKQSxHQUVYa2IsS0FFS1UsMEJBQUwsU0FBS0EsR0FDSEEsRUFBQUEsRUFBQSxNQUFBLEdBQUEsUUFDQUEsRUFBQUEsRUFBQSxNQUFBLEdBQUEsUUFDQUEsRUFBQUEsRUFBQSxNQUFBLEdBQUEsUUFDQUEsRUFBQUEsRUFBQSxTQUFBLEdBQUEsV0FDQUEsRUFBQUEsRUFBQSxLQUFBLEdBQUEsUUFMR0EsMkJBQUFBLDZCQU9MLElBQUFILG9CQUFBLFdBR0UsUUFBQUEsR0FBWVUsR0FDVnZiLEtBQUt3YixTQUFXRCxFQUNoQnZiLEtBQUt5YixjQUFnQnpiLEtBQUt3YixTQUFTNWIsTUFBTSxLQUFLc0MsSUFBSSxTQUFDK1EsR0FBVyxNQUFBdEosVUFBU3NKLEtBa0IzRSxNQWhCRTRILEdBQUEzYSxVQUFBNmEsZUFBQSxTQUFlVyxHQU1iLElBQUksR0FMQUMsR0FBSzNiLEtBQUt5YixjQUNaak4sRUFBUWtOLEVBQWFELGNBQ3JCdlcsRUFBUSxFQUdGbkQsRUFBRSxFQUFHQSxFQUFFLEdBQ1Y0WixFQUFHNVosSUFBS3lNLEVBQU16TSxHQURGQSxJQUVabUQsR0FNTCxPQUFPOFYsMEJBQXlCQSx5QkFBeUI5VixLQUU3RDJWLEtLdExBZSxjQUFBLFdBY0UsUUFBQUEsR0FBWUMsRUFBZTdNLEdBQ3pCaFAsS0FBSzhiLFVBQVcsRUFDaEI5YixLQUFLNmIsY0FBZ0JBLEVBQ3JCN2IsS0FBSytiLFdBQWEsS0FDbEIvYixLQUFLZ2MsaUJBQW1CLEdBQ3hCaGMsS0FBS2ljLFdBQWEsSUFDbEJqYyxLQUFLa2MsS0FBTyxtQ0FDWmxjLEtBQUttYyxXQUFhLHlKQUNsQm5jLEtBQUtvYyx5QkFBMkIseUJBRTVCL2MsT0FBT2dkLGdCQUNWaGQsT0FBT2dkLGNBQWdCLEdBQUloZCxRQUFPaWQsUUFBUUMsTUFBTSxZQUNqRGxkLE9BQU9tZCxpQkFBaUIsU0FBVSxXQUNoQ25kLE9BQU9nZCxjQUFjSSxTQUd2Qm5kLFVBQVM4SCxLQUFLLFVBeUdsQixNQXZHRXdVLEdBQUExYixVQUFBdUUsS0FBQSxXQUFBLEdBQUE4QixHQUFBdkcsSUFFS0EsTUFBSzBjLHFCQUNIMWMsS0FBS2dHLG9CQUFvQmhHLEtBQUsyYyxZQUMvQjNjLEtBQUtnYyxpQkFBbUJoYyxLQUFLMmMsVUFFN0JyZCxTQUFTOEgsS0FBSyxVQUlkcEgsS0FBSytiLFdBQWE5QixXQUFXLFdBQzNCM2EsU0FBUzhILEtBQUssU0FDZGIsRUFBS3FXLGVBQWVyVyxFQUFLeVYsbUJBQ3hCaGMsS0FBS2ljLGNBU1YzYyxTQUFTOEgsS0FBSyxVQUNkcEgsS0FBS2djLGlCQUFtQixJQUUxQjNjLE9BQU9tZCxpQkFBaUIsYUFBYyxXQUNQLElBQXpCalcsRUFBS3lWLGtCQUEyQnpWLEVBQUttVyxzQkFDdkNwZCxTQUFTOEgsS0FBSyxjQUlwQndVLEVBQUExYixVQUFBMmMsT0FBQSxXQUNFN2MsS0FBSzhjLGVBQ0w5YyxLQUFLMmMsVUFBWSxHQUNqQjNjLEtBQUtnYyxpQkFBbUIsR0FDeEIzYyxPQUFPZ2QsY0FBY1UsT0FBTy9jLEtBQUtvYywwQkFDOUIsVUFBWTljLFVBQ2JBLFNBQVMwZCxTQUVUMVMsU0FBU2hMLFNBQVM4SCxLQUFPa0QsU0FBU2hMLFNBQVM4SCxNQUcvQ3dVLEVBQUExYixVQUFBNGMsYUFBQSxXQUNFRyxhQUFhamQsS0FBSytiLGtCQUNYL2IsTUFBSytiLFlBRWRILEVBQUExYixVQUFBZ2QsdUJBQUEsV0FDRWxkLEtBQUttZCxhQUFlLEdBRWpCbmQsS0FBS2dHLG9CQUFvQmhHLEtBQUtnYyxtQkFDL0JoYyxLQUFLNGMsZUFBZTVjLEtBQUtnYyxrQkFDekJoYyxLQUFLNmIsZ0JBQ0x2YyxTQUFTOEgsS0FBTyxVQUdoQnBILEtBQUttZCxhQUFlLG1EQUd4QnZCLEVBQUExYixVQUFBd2Msa0JBQUEsV0FDRSxHQUFJVSxHQUFlL2QsT0FBT2dkLGNBQWMxVixJQUFJM0csS0FBS29jLHlCQUVqRCxPQUFHZ0IsSUFDRHBkLEtBQUsyYyxVQUFZM2MsS0FBS3FkLFFBQVFELElBQ3ZCLElBRVBwZCxLQUFLMmMsVUFBWSxJQUNWLElBR1hmLEVBQUExYixVQUFBb2QsUUFBQSxTQUFRalosR0FDTixHQUFJakYsR0FBT2lGLEVBQUssRUFLaEIsT0FKQWpGLEdBQVNBLEVBQU9nRyxRQUFRLE1BQU0sU0FBU21ZLEdBRXJDLE1BQU9oTCxRQUFPQyxhQUFhK0ssRUFBR0MsV0FBVyxHQUFHLE1BS2hENUIsRUFBQTFiLFVBQUFtZCxRQUFBLFNBQVFoWixHQUNOLEdBQUlqRixHQUFPaUYsRUFBSyxFQUtoQixPQUpBakYsR0FBU0EsRUFBT2dHLFFBQVEsTUFBTSxTQUFTbVksR0FFckMsTUFBT2hMLFFBQU9DLGFBQWErSyxFQUFHQyxXQUFXLEdBQUcsTUFLaEQ1QixFQUFBMWIsVUFBQTBjLGVBQUEsU0FBZXJYLEdBQ2IsR0FBSStCLEdBQU9qSSxPQUFPb2UsU0FBU0MsSUFBSW5ZLEVBQVF2RixLQUFLa2MsTUFBTW5YLFVBQ2xEMUYsUUFBT2dkLGNBQWMvVixJQUFJdEcsS0FBS29jLHlCQUEwQnBjLEtBQUtzZCxRQUFRL1gsSUFDckVsRyxPQUFPMFIsR0FBRyxNQUFPLFNBQVV6SixJQUU3QnNVLEVBQUExYixVQUFBOEYsb0JBQUEsU0FBb0JULEdBQ2xCLE1BQUd2RixNQUFLbWMsV0FBV25YLEtBQUtPLElBQ3RCbkUsUUFBUTRGLElBQUl6QixFQUFPLGFBQ1osSUFFUG5FLFFBQVE0RixJQUFJekIsRUFBTyxpQkFDWixJQUticVcsS0g0dERJbEcsVUFBYTFWLE1BQVFBLEtBQUswVixXQUFjLFNBQVVDLEVBQUduUCxHQUVyRCxRQUFTb1AsS0FBTzVWLEtBQUs2VixZQUFjRixFQURuQyxJQUFLLEdBQUlHLEtBQUt0UCxHQUFPQSxFQUFFOEYsZUFBZXdKLEtBQUlILEVBQUVHLEdBQUt0UCxFQUFFc1AsR0FFbkRILEdBQUV6VixVQUFrQixPQUFOc0csRUFBYXFCLE9BQU9rTyxPQUFPdlAsSUFBTW9QLEVBQUcxVixVQUFZc0csRUFBRXRHLFVBQVcsR0FBSTBWLEtJNzJEOUUrSCxzQkFBTCxTQUFLQSxHQUNIQSxFQUFBQSxFQUFBLFFBQUEsR0FBQSxVQUNBQSxFQUFBQSxFQUFBLFNBQUEsR0FBQSxZQUZHQSx1QkFBQUEseUJBSUwsSUFBQUMsbUJBQUEsU0FBQTFVLEdBSUUsUUFBQTBVLEtBQ0UxVSxFQUFBNk8sS0FBQS9YLE1BQ0FBLEtBQUtZLFNBQ0xaLEtBQUttRSxPQUFTd1oscUJBQXFCRSxRQXNCckMsTUE3QjhCbkksV0FBQWtJLEVBQUExVSxHQVM5QjBVLEVBQUExZCxVQUFBMlgsU0FBQSxTQUFTbkQsRUFBTTNULEdBQ2JmLEtBQUtZLE1BQU04VCxHQUFRM1QsR0FFckI2YyxFQUFBMWQsVUFBQTRkLE9BQUEsV0FDRSxHQUFJQyxHQUFLL2QsSUFDVHNLLFVBQVMwVCxRQUFVLFNBQVN2SyxHQUMxQixNQUFHelQsTUFBS21FLFFBQVV3WixxQkFBcUJNLGNBQ3ZDRixHQUFHRyxTQUFTekssS0FHaEJtSyxFQUFBMWQsVUFBQWdlLFNBQUEsU0FBU3pLLEdBRVAsSUFBSSxHQURBaFEsR0FBT29FLE9BQU9wRSxLQUFLekQsS0FBS1ksT0FDcEJtQixFQUFHLEVBQUdBLEVBQUUwQixFQUFLOUQsT0FBT29DLElBQUksQ0FDOUIsR0FBSW1XLEdBQVdsWSxLQUFLMkQsY0FBYzNELEtBQUtZLE1BQU02QyxFQUFLMUIsS0FDOUNvYyxFQUFXakcsRUFBU3JVLEdBQUd6QixNQUFNLEtBQU04VixFQUFTdFcsS0FDM0N1YyxHQUFTOUYsTUFBUThGLEVBQVM5RixLQUFLNUUsSUFDaEMwSyxFQUFBQSxVQUlSUCxHQTdCOEJyYSxnQkErQjVCbEIsVUFDSixTQUFVQSxHQUNSQSxFQUFTK2IsU0FBVyxHQUFJUixvQkFDdkJ2YixXQUFZQSxjQ3hDZkEsU0FBUy9CLE9BQU9LLE9BQU8sd0JBQXdCRyxLQUM1QyxlQUFnQixTQUFTb0QsR0FTeEIsTUFBTyxVQUFTOUUsR0FFZDhFLEVBQWFrTSxlQUFlLFNBQVM5SyxHQUNuQyxHQUFHQSxFQUFBQSxPQUFlZSxhQUFhVCxJQUFJLFlBQVksQ0FDN0MsR0FBSW1ELEdBQVF6RCxFQUFBQSxPQUFlZSxhQUFhMEYsUUFBUXZNLFFBQVEsZ0JBQ3JEdUosT0FDRHpELEVBQUFBLE9BQWVlLGFBQWF5QyxjQUFjQyxJQUcxQ3pELEVBQUFBLE9BQWVlLGFBQWFULElBQUksTUFBT04sRUFBV3dILGdCQUNwRHhILEVBQUFBLE9BQWVlLGFBQWFzQyxPQUFPLFNBRU0sU0FBdENyRCxFQUFBQSxPQUFlZSxhQUFhTSxJQUFJLE1BQ2pDckIsRUFBQUEsT0FBZWUsYUFBYUMsSUFBSSxJQUFJLFFBTTFDLElBQUlFLEdBQUksb0NBRVIsSUFBR0EsRUFBRXhCLEtBQUs1RixHQUFRLENBQ2hCLEdBQUlpZixHQUFVamYsRUFBTzhGLE1BQU1zQixFQUMzQixJQUFHNlgsRUFDRCxJQUFJLEdBQUl0YyxHQUFFLEVBQUVBLEVBQUVzYyxFQUFRMWUsT0FBT29DLElBRTNCLEdBQUdzYyxFQUFRdGMsR0FBR3ZDLFFBQVEsMENBQTBDLENBRzlELEdBQUk2TSxHQUFRak4sRUFBT0ksUUFBUTZlLEVBQVF0YyxHQUNuQzNDLEdBQVNBLEVBQU9tWCxVQUFVLEVBQUVsSyxHQUFRak4sRUFBT21YLFVBQVVsSyxFQUFPZ1MsRUFBUXRjLEdBQUdwQyxPQUFPUCxFQUFPTyxTQU03RixNQUFPUCxPQzlDYmlELFNBQVMvQixPQUFPSyxPQUFPLHlCQUF5QkcsSUFBSSxXQUVsRCxNQUFPLFVBQVMxQixHQVNaLE1BUkZBLEdBQVNBLEVBQU9nRyxRQUFRLG9CQUFxQixTQUFTSCxHQUNwRCxNQUFHQSxHQUFNekYsUUFBUSxXQUNSeUYsRUFFQUEsRUFBTUcsUUFBUSxVQUFXIiwiZmlsZSI6ImVtbC1jb3JlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbnRlcmZhY2UgV2luZG93IHtcbiAgT0ZGTElORV9WRVJTSU9OOiBzdHJpbmc7XG4gIENVUlJFTlRfVkVSU0lPTjogc3RyaW5nO1xuICBwZXJzaXN0X3N0b3JlOiBhbnk7XG4gIExPQ0FMSE9TVDogYm9vbGVhbjtcbiAgUEFHRV9USVRMRTogc3RyaW5nO1xuICByZWRpcmVjdEpzb25wQ2FsbGJhY2s6IChzdHJpbmcpPT52b2lkO1xufVxuZnVuY3Rpb24gZ2V0T2ZmbGluZVZlcnNpb25OdW1iZXIoKXtcbiAgdmFyIG91dHB1dCA9IFwiXCI7XG4gIGlmKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZihcIm9mZmxpbmVfdmVyc2lvblwiKSkge1xuICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxLHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gubGVuZ3RoKS5zcGxpdChcIiZcIik7XG4gICAgcGFyYW1zLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pe1xuICAgICAgaWYocGFyYW0uaW5kZXhPZihcIm9mZmxpbmVfdmVyc2lvbj1cIik+LTEpe1xuICAgICAgICBvdXRwdXQgPSBwYXJhbS5zdWJzdHIoXCJvZmZsaW5lX3ZlcnNpb249XCIubGVuZ3RoLCBwYXJhbS5sZW5ndGgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5jbGFzcyBBY2Nlc3NPbmxpbmVWZXJzaW9uIHtcbiAgaGVhZGxpbmU6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgYW5pbWF0ZTogYm9vbGVhbjtcbiAgc3VjY2VzczooKT0+dm9pZDtcbiAgb25lcnJvcjooKT0+dm9pZDtcbiAgY29uc3RydWN0b3IoYXJncyl7XG5cbiAgICB0aGlzLmFuaW1hdGU9IHRydWU7XG4gICAgdGhpcy5zdGF0dXM9IFwiYXR0ZW1wdGluZ1wiO1xuICAgIHRoaXMuaGVhZGxpbmU9IFwiQ2hlY2tpbmcgYXZhaWxhYmlsaXR5IG9mIG9ubGluZSB2ZXJzaW9uXCI7XG4gICAgdGhpcy5tZXNzYWdlPSBcIklmIHdlJ3JlIGFibGUgdG8gYWNjZXNzIHRoZSBvbmxpbmUgdmVyc2lvbiwgeW91IHdpbGwgYmUgcmVkaXJlY3RlZC5cIjtcblxuICAgIGlmKGFyZ3Muc3VjY2VzcyA9PT0gdW5kZWZpbmVkKSBhcmdzLnN1Y2Nlc3M9ZnVuY3Rpb24oKXt9O1xuICAgIGlmKGFyZ3Mub25lcnJvciA9PT0gdW5kZWZpbmVkKSBhcmdzLm9uZXJyb3I9ZnVuY3Rpb24oKXt9O1xuXG4gICAgd2luZG93LkxPQ0FMSE9TVCA9IHRoaXMuaXNMb2NhbE1hY2hpbmUoKTtcbiAgICB3aW5kb3cuT0ZGTElORV9WRVJTSU9OID0gZ2V0T2ZmbGluZVZlcnNpb25OdW1iZXIoKTtcblxuICAgIGlmKHdpbmRvdy5MT0NBTEhPU1Qpe1xuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgdGhpcy5vYnRhaW5LZXlGcm9tU2VydmVyKGFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IFwiZmFpbGVkXCI7XG4gICAgICB0aGlzLmFuaW1hdGUgPSBmYWxzZTtcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gd2luZG93LlBBR0VfVElUTEU7XG4gICAgfVxuXG5cbiAgfVxuICBvYnRhaW5LZXlGcm9tU2VydmVyKGFyZ3Mpe1xuXG4gICAgaWYodGhpcy5pc0xvY2FsTWFjaGluZSgpKXtcbiAgICAgIHZhciByLCBhLCBtO1xuICAgICAgICB3aW5kb3cucmVkaXJlY3RKc29ucENhbGxiYWNrID0gZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICBpZihyZXN1bHQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgYXJncy5zdWNjZXNzKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZPVU5EP1wiKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZj1cImh0dHA6Ly9qb2hucHJvZXN0YWtlcy5naXRodWIuaW8vZW1sLW1ha2VyP29mZmxpbmVfdmVyc2lvbj1cIit3aW5kb3cuQ1VSUkVOVF9WRVJTSU9OO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnbm90IGdpdGh1YicpO1xuXG4gICAgICB9fTtcbiAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSxcbiAgICAgIGEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gICAgICByLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICAgIHIub25lcnJvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGFyZ3Mub25lcnJvcigpO1xuICAgICAgIH07XG5cbiAgICAgICBpZih0aGlzLmlzTG9jYWxNYWNoaW5lKCkpe1xuICAgICAgICAgci5zcmM9IFwiaHR0cDovL2pvaG5wcm9lc3Rha2VzLmdpdGh1Yi5pby9lbWwtbWFrZXIvcHJvZC9hcHAvY2FucmVkaXJlY3QuanNcIjtcbiAgICAgICB9XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocixtKTtcbiAgICAgIH0sMjAwMCk7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IHdpbmRvdy5QQUdFX1RJVExFICsgXCIgKE9mZmxpbmUgTW9kZSlcIjtcbiAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IFwiZmFpbGVkXCI7XG4gICAgICB0aGlzLmFuaW1hdGUgPSBmYWxzZTtcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gd2luZG93LlBBR0VfVElUTEU7XG5cbiAgIH1cbiAgfVxuICBnZXRPZmZsaW5lVmVyc2lvbk51bWJlcigpOnN0cmluZ3tcbiAgICB2YXIgb3V0cHV0ID0gXCJcIjtcbiAgICBpZih3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoXCJvZmZsaW5lX3ZlcnNpb25cIikpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxLHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gubGVuZ3RoKS5zcGxpdChcIiZcIik7XG4gICAgICBwYXJhbXMuZm9yRWFjaChmdW5jdGlvbihwYXJhbSl7XG4gICAgICAgIGlmKHBhcmFtLmluZGV4T2YoXCJvZmZsaW5lX3ZlcnNpb249XCIpPi0xKXtcbiAgICAgICAgICBvdXRwdXQgPSBwYXJhbS5zdWJzdHIoXCJvZmZsaW5lX3ZlcnNpb249XCIubGVuZ3RoLCBwYXJhbS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBpc0xvY2FsTWFjaGluZSgpe1xuICAgIC8vIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gbG9jYXRpb24uaHJlZi5pbmRleE9mKCdqb2hucHJvZXN0YWtlcy5naXRodWIuaW8nKT09LTEgJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKCdsb2NhbGhvc3Q6Jyk9PS0xO1xuICB9XG59XG5cblxuY2xhc3MgVXBkYXRlTW9kdWxlIHtcblxuICB1cGRhdGVWZXJzaW9uOiBib29sZWFuO1xuICB1cGRhdGVGb3JjZWQ6IGJvb2xlYW47XG4gIG9mZmxpbmVWZXJzaW9uOiBzdHJpbmc7XG4gIG9ubGluZVZlcnNpb246IHN0cmluZztcbiAgYWNjZXNzaW5nRnJvbU9mZmxpbmU6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoKXtcblxuICAgIHRoaXMudXBkYXRlVmVyc2lvbiA9IGZhbHNlO1xuICAgIHRoaXMudXBkYXRlRm9yY2VkID0gZmFsc2U7XG4gICAgdGhpcy5vZmZsaW5lVmVyc2lvbiA9IHdpbmRvdy5PRkZMSU5FX1ZFUlNJT04gPT09IHVuZGVmaW5lZCA/IGdldE9mZmxpbmVWZXJzaW9uTnVtYmVyKCkgOiB3aW5kb3cuT0ZGTElORV9WRVJTSU9OIDtcbiAgICB0aGlzLm9ubGluZVZlcnNpb24gPSB3aW5kb3cuQ1VSUkVOVF9WRVJTSU9OO1xuXG4gICAgLy90cmVhdCBsb2NhbGhvc3Q6ODg4OCBhcyBpbnRlcm5ldFxuICAgIGlmKGxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImxvY2FsaG9zdFwiKT4tMSl7IHdpbmRvdy5MT0NBTEhPU1QgPSBmYWxzZTt9XG5cbiAgICBpZih0aGlzLm9mZmxpbmVWZXJzaW9uID09IFwiXCIpe1xuICAgICAgdGhpcy5hY2Nlc3NpbmdGcm9tT2ZmbGluZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZih0aGlzLm9mZmxpbmVWZXJzaW9uICYmIHdpbmRvdy5MT0NBTEhPU1Qpe1xuICAgICAgICB0aGlzLmFjY2Vzc2luZ0Zyb21PZmZsaW5lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMub2ZmbGluZVZlcnNpb24gJiYgKHRoaXMub2ZmbGluZVZlcnNpb24gIT09IHRoaXMub25saW5lVmVyc2lvbikpe1xuICAgICAgICB0aGlzLnVwZGF0ZVZlcnNpb24gPSB0cnVlO1xuICAgICAgICBsZXQgb2ZWID0gbmV3IEFwcGxpY2F0aW9uVmVyc2lvbih0aGlzLm9mZmxpbmVWZXJzaW9uKSxcbiAgICAgICAgICBvblYgPSBuZXcgQXBwbGljYXRpb25WZXJzaW9uKHRoaXMub25saW5lVmVyc2lvbik7XG4gICAgICAgIHRoaXMudXBkYXRlRm9yY2VkID0gb2ZWLmNvbXBhcmVBZ2FpbnN0KG9uVikgPD0gQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlLlBBVENIO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlVQREFURUZPUkNFRD9cIiwgdGhpcy51cGRhdGVGb3JjZWQsIG9mVixvblYpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG4gIHNob3dNZXNzYWdlKCl7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlVmVyc2lvbiAmJiB0aGlzLnVwZGF0ZUZvcmNlZDtcbiAgfVxuICBzaG93VGVhc2VyKCl7XG4gICAgcmV0dXJuIHRoaXMub2ZmbGluZVZlcnNpb249PVwiXCIgJiYgIXdpbmRvdy5MT0NBTEhPU1Q7XG4gIH1cbiAgZm9yY2VVcGRhdGUob2ZmbGluZSwgb25saW5lKXtcbiAgICB2YXIgb2ZmbGluZVZlcnNpb24gPSBvZmZsaW5lLnNwbGl0KFwiLlwiKSxcbiAgICBvbmxpbmVWZXJzaW9uID0gb25saW5lLnNwbGl0KFwiLlwiKSxcbiAgICBtYXRjaCA9IDAsIG91dHB1dCA9IGZhbHNlO1xuICAgIGZvcih2YXIgaT0wOyBpPG9ubGluZVZlcnNpb24ubGVuZ3RoO2krKyl7XG4gICAgICBpZihvbmxpbmVWZXJzaW9uW2ldPT0gb2ZmbGluZVZlcnNpb25baV0pIG1hdGNoKys7XG4gICAgfVxuICAgIGlmKG1hdGNoPDMpe1xuICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxufVxuXG5lbnVtIEFwcFZlcnNpb25EaWZmZXJlbmNlVHlwZXtcbiAgTUFKT1I9MCxcbiAgTUlOT1IsXG4gIFBBVENILFxuICBTVUJQQVRDSCxcbiAgTk9ORVxufVxuY2xhc3MgQXBwbGljYXRpb25WZXJzaW9uIHtcbiAgX3ZlcnNpb246IHN0cmluZztcbiAgdmVyc2lvbk9iamVjdDogbnVtYmVyW107XG4gIGNvbnN0cnVjdG9yKHZlcnNpb246c3RyaW5nKXtcbiAgICB0aGlzLl92ZXJzaW9uID0gdmVyc2lvbjtcbiAgICB0aGlzLnZlcnNpb25PYmplY3QgPSB0aGlzLl92ZXJzaW9uLnNwbGl0KFwiLlwiKS5tYXAoKG46c3RyaW5nKT0+cGFyc2VJbnQobikpO1xuICB9XG4gIGNvbXBhcmVBZ2FpbnN0KE90aGVyVmVyc2lvbjpBcHBsaWNhdGlvblZlcnNpb24pOkFwcFZlcnNpb25EaWZmZXJlbmNlVHlwZXtcbiAgICB2YXIgbWUgPSB0aGlzLnZlcnNpb25PYmplY3QsXG4gICAgICBvdGhlciA9IE90aGVyVmVyc2lvbi52ZXJzaW9uT2JqZWN0LFxuICAgICAgbWF0Y2ggPSAwLFxuICAgICAgb3V0cHV0ID0gZmFsc2U7XG5cbiAgICBmb3IodmFyIGk9MDsgaTw0O2krKyl7XG4gICAgICBpZihtZVtpXT09IG90aGVyW2ldKXtcbiAgICAgICAgIG1hdGNoKys7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIGJyZWFrO1xuICAgICAgIH1cbiAgICAgfVxuXG4gICAgcmV0dXJuIEFwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtBcHBWZXJzaW9uRGlmZmVyZW5jZVR5cGVbbWF0Y2hdXTtcbiAgfVxufVxuIiwiXG5jbGFzcyBFTUxGaWx0ZXJFbmdpbmUge1xuICBzY29wZXM6IEVNTEZpbHRlclNjb3BlW107XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5zY29wZXMgPSBbXTtcbiAgfVxuICBfX2xvY2F0ZVNjb3BlKHNjb3BlKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuc2NvcGVzLmZpbHRlcihmdW5jdGlvbihvYmo6RU1MRmlsdGVyU2NvcGUpe1xuICAgICAgcmV0dXJuIG9iai5zY29wZSA9PSBzY29wZTtcbiAgICAgfSk7XG5cbiAgICBpZihyZXN1bHQubGVuZ3RoID09IDApe1xuICAgICAgbGV0IGEgPSBuZXcgRU1MRmlsdGVyU2NvcGUoc2NvcGUpO1xuICAgICAgbGV0IGIgPSB0aGlzLnNjb3Blcy5wdXNoKGEpO1xuICAgICAgcmV0dXJuIGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgfVxuICB9XG4gIG1vZHVsZShzY29wZSl7XG4gICAgbGV0IG1vZHVsZSA9IHRoaXMuX19sb2NhdGVTY29wZShzY29wZSk7XG4gICAgcmV0dXJuIG1vZHVsZTtcbiAgfVxufVxuXG5jbGFzcyBFTUxGaWx0ZXJTY29wZSB7XG4gIHNjb3BlOiBzdHJpbmc7XG4gIHJ1bGVzOiBhbnlbXTtcbiAgdmFyaWFibGVzOiB7fTtcblxuICBjb25zdHJ1Y3RvcihzY29wZSl7XG4gICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgIHRoaXMucnVsZXMgPSBbXTtcbiAgICB0aGlzLnZhcmlhYmxlcyA9IHt9O1xuICB9XG4gIGFkZChydWxlKXtcbiAgICB0aGlzLnJ1bGVzLnB1c2gocnVsZSk7XG5cbiAgfVxuICBpbmplY3QoYWNjZXNzb3IsIHZhbHVlKXtcbiAgICB0aGlzLnZhcmlhYmxlc1thY2Nlc3Nvcl0gPSB2YWx1ZTtcbiAgfVxuICBhc3NvY2lhdGVWYXJpYWJsZShhY2Nlc3NvciwgdmFsdWUpe1xuICAgIHRoaXMuaW5qZWN0KGFjY2Vzc29yLHZhbHVlKTtcbiAgICBjb25zb2xlLndhcm4oXCJFTUxGaWx0ZXI6IGFzc29jaWF0ZVZhcmlhYmxlIGhhcyBkZXByZWNpYXRlZCB1c2UgaW5qZWN0LlwiKVxuICB9XG4gIGFwcGx5QWN0aW9uKGlucHV0QXJnPyl7XG5cbiAgfVxuLy8gIGlzb2xhdGVBY3Rpb24oKVxuICBhcHBseUZpbHRlcihpbnB1dEFyZyl7XG4gIHZhciB0ZW1wID0gaW5wdXRBcmc7XG4gICAgaWYodGhpcy5ydWxlcy5sZW5ndGg+MCl7XG4gICAgICBmb3IodmFyIGk9MDtpPHRoaXMucnVsZXMubGVuZ3RoO2krKyl7XG5cbiAgICAgICAgbGV0IHJ1bGUgPSB0aGlzLnJ1bGVzW2ldO1xuICAgICAgICBpZih0eXBlb2YgcnVsZSA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAvL2xhc3QgcGFyYW1ldGVyIGlzIHRoZSBmdXVuY3Rpb247XG4gICAgICAgICAgdmFyIGZ1bmMgPSBydWxlW3J1bGUubGVuZ3RoLTFdO1xuICAgICAgICAgIHZhciBwYXJhbWV0ZXJzID0gcnVsZS5zbGljZSgwLCBydWxlLmxlbmd0aC0xKTtcbiAgICAgICAgICBsZXQgSU0gPSB0aGlzO1xuXG4gICAgICAgICAgdmFyIGFyZ3MgPSBwYXJhbWV0ZXJzLm1hcChmdW5jdGlvbihrZXk6c3RyaW5nKXtcbiAgICAgICAgICAgIHJldHVybiBJTS52YXJpYWJsZXNba2V5XTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRlbXAgPSBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpKHRlbXApO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcCA9IHJ1bGUoKSh0ZW1wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGVtcDtcbiAgfVxufVxuXG52YXIgRU1MTWFrZXI7XG4oZnVuY3Rpb24oRU1MTWFrZXIpe1xuICBFTUxNYWtlci5maWx0ZXIgPSBuZXcgRU1MRmlsdGVyRW5naW5lKCk7XG59KShFTUxNYWtlcnx8KEVNTE1ha2VyPXt9KSk7XG4iLCJ2YXIgRU1MRmlsdGVyRW5naW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFTUxGaWx0ZXJFbmdpbmUoKSB7XG4gICAgICAgIHRoaXMuc2NvcGVzID0gW107XG4gICAgfVxuICAgIEVNTEZpbHRlckVuZ2luZS5wcm90b3R5cGUuX19sb2NhdGVTY29wZSA9IGZ1bmN0aW9uIChzY29wZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zY29wZXMuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmouc2NvcGUgPT0gc2NvcGU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBFTUxGaWx0ZXJTY29wZShzY29wZSk7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuc2NvcGVzLnB1c2goYSk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVNTEZpbHRlckVuZ2luZS5wcm90b3R5cGUubW9kdWxlID0gZnVuY3Rpb24gKHNjb3BlKSB7XG4gICAgICAgIHZhciBtb2R1bGUgPSB0aGlzLl9fbG9jYXRlU2NvcGUoc2NvcGUpO1xuICAgICAgICByZXR1cm4gbW9kdWxlO1xuICAgIH07XG4gICAgcmV0dXJuIEVNTEZpbHRlckVuZ2luZTtcbn0oKSk7XG52YXIgRU1MRmlsdGVyU2NvcGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVNTEZpbHRlclNjb3BlKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5ydWxlcyA9IFtdO1xuICAgICAgICB0aGlzLnZhcmlhYmxlcyA9IHt9O1xuICAgIH1cbiAgICBFTUxGaWx0ZXJTY29wZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgdGhpcy5ydWxlcy5wdXNoKHJ1bGUpO1xuICAgIH07XG4gICAgRU1MRmlsdGVyU2NvcGUucHJvdG90eXBlLmluamVjdCA9IGZ1bmN0aW9uIChhY2Nlc3NvciwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZXNbYWNjZXNzb3JdID0gdmFsdWU7XG4gICAgfTtcbiAgICBFTUxGaWx0ZXJTY29wZS5wcm90b3R5cGUuYXNzb2NpYXRlVmFyaWFibGUgPSBmdW5jdGlvbiAoYWNjZXNzb3IsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW5qZWN0KGFjY2Vzc29yLCB2YWx1ZSk7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkVNTEZpbHRlcjogYXNzb2NpYXRlVmFyaWFibGUgaGFzIGRlcHJlY2lhdGVkIHVzZSBpbmplY3QuXCIpO1xuICAgIH07XG4gICAgRU1MRmlsdGVyU2NvcGUucHJvdG90eXBlLmFwcGx5QWN0aW9uID0gZnVuY3Rpb24gKGlucHV0QXJnKSB7XG4gICAgfTtcbiAgICAvLyAgaXNvbGF0ZUFjdGlvbigpXG4gICAgRU1MRmlsdGVyU2NvcGUucHJvdG90eXBlLmFwcGx5RmlsdGVyID0gZnVuY3Rpb24gKGlucHV0QXJnKSB7XG4gICAgICAgIHZhciB0ZW1wID0gaW5wdXRBcmc7XG4gICAgICAgIGlmICh0aGlzLnJ1bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSB0aGlzXzEucnVsZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9sYXN0IHBhcmFtZXRlciBpcyB0aGUgZnV1bmN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBmdW5jID0gcnVsZVtydWxlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0gcnVsZS5zbGljZSgwLCBydWxlLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgSU1fMSA9IHRoaXNfMTtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IHBhcmFtZXRlcnMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTV8xLnZhcmlhYmxlc1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGZ1bmMuYXBwbHkobnVsbCwgYXJncykodGVtcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gcnVsZSgpKHRlbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgIHZhciBmdW5jLCBwYXJhbWV0ZXJzLCBhcmdzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgX2xvb3BfMSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgIH07XG4gICAgcmV0dXJuIEVNTEZpbHRlclNjb3BlO1xufSgpKTtcbnZhciBFTUxNYWtlcjtcbihmdW5jdGlvbiAoRU1MTWFrZXIpIHtcbiAgICBFTUxNYWtlci5maWx0ZXIgPSBuZXcgRU1MRmlsdGVyRW5naW5lKCk7XG59KShFTUxNYWtlciB8fCAoRU1MTWFrZXIgPSB7fSkpO1xuXG52YXIgRXJyb3JTZXZlcml0eTtcbihmdW5jdGlvbiAoRXJyb3JTZXZlcml0eSkge1xuICAgIEVycm9yU2V2ZXJpdHlbRXJyb3JTZXZlcml0eVtcIkhpZ2hcIl0gPSAxXSA9IFwiSGlnaFwiO1xuICAgIEVycm9yU2V2ZXJpdHlbRXJyb3JTZXZlcml0eVtcIk1lZGl1bVwiXSA9IDJdID0gXCJNZWRpdW1cIjtcbiAgICBFcnJvclNldmVyaXR5W0Vycm9yU2V2ZXJpdHlbXCJMb3dcIl0gPSAzXSA9IFwiTG93XCI7XG4gICAgRXJyb3JTZXZlcml0eVtFcnJvclNldmVyaXR5W1wiWmVyb1wiXSA9IDRdID0gXCJaZXJvXCI7XG59KShFcnJvclNldmVyaXR5IHx8IChFcnJvclNldmVyaXR5ID0ge30pKTtcbnZhciBFcnJvclR5cGU7XG4oZnVuY3Rpb24gKEVycm9yVHlwZSkge1xuICAgIEVycm9yVHlwZVtFcnJvclR5cGVbXCJGaXhcIl0gPSAxXSA9IFwiRml4XCI7XG4gICAgRXJyb3JUeXBlW0Vycm9yVHlwZVtcIldhcm5cIl0gPSAyXSA9IFwiV2FyblwiO1xuICAgIEVycm9yVHlwZVtFcnJvclR5cGVbXCJTdWdnZXN0aW9uXCJdID0gM10gPSBcIlN1Z2dlc3Rpb25cIjtcbiAgICBFcnJvclR5cGVbRXJyb3JUeXBlW1wiUUFcIl0gPSA0XSA9IFwiUUFcIjtcbiAgICBFcnJvclR5cGVbRXJyb3JUeXBlW1wiQmVzdFByYWN0aWNlXCJdID0gNV0gPSBcIkJlc3RQcmFjdGljZVwiO1xufSkoRXJyb3JUeXBlIHx8IChFcnJvclR5cGUgPSB7fSkpO1xudmFyIEdsb2JhbFZhcnM7XG4oZnVuY3Rpb24gKEdsb2JhbFZhcnMpIHtcbiAgICBHbG9iYWxWYXJzLmxhbmRpbmdQYWdlUHJlZmVycmVkID0gLyhcXC5tcDR8XFwuYXZpfFxcLm1wZWd8XFwubXAzfFxcLnN3ZnxcXC5tb3Z8XFwucGRmKS9pO1xuICAgIEdsb2JhbFZhcnMuZXh0RG9lc05vdHJlcXVpcmVUcmFja2luZ0NvZGUgPSAvKFxcLnBkZnxcXC5vZnR8XFwuaWNzfFxcLnBuZ3xcXC5qcGVnfFxcLmpwZykvaTtcbiAgICBHbG9iYWxWYXJzLmxpbmtFbmNhcHN1bGF0ZWRQdW5jdHVhdGlvbiA9IC8oW1xcLlxcP1xcLFxcOlxcKl0rKSgoXFxufFxccnxcXHMpKyk/PFxcL2E+JC87XG4gICAgR2xvYmFsVmFycy5SZXF1aXJlc1NDb2RlUmVnZXggPSAvaHR0cCguKilvcHR1bSguKilcXC8oY2FtcGFpZ258cmVzb3VyY2UpL2k7XG4gICAgR2xvYmFsVmFycy5SZXF1aXJlc1RyYWNraW5nQ29kZVJlZ2V4ID0gUmVnRXhwKFwiXmh0dHAocyk/OlxcL1xcLyguKj8pP29wdHVtKC4qPyk/XFwuY29bbVxcLl0/XCIpO1xuICAgIEdsb2JhbFZhcnMuVGVsZXBob25lUmVnZXggPSAvKFxcKz9cXGR7MSwyfShcXHN8LXxcXC4pKT9cXCg/XFxkezN9XFwpP1tcXHMuLV1cXGR7Myx9W1xccy4tXVxcZHs0LH0vO1xuICAgIEdsb2JhbFZhcnMuVGVsZXBob25lUmVnZXhHbG9iYWwgPSAvKFxcKz9cXGR7MSwyfShcXHN8LXxcXC4pKT9cXCg/XFxkezN9XFwpP1tcXHMuLV1cXGR7Myx9W1xccy4tXVxcZHs0LH0vZztcbiAgICBHbG9iYWxWYXJzLkVtYWlsUmVnZXggPSAvKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpLztcbiAgICBHbG9iYWxWYXJzLkVtYWlsUmVnZXhHbG9iYWwgPSAvKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpL2c7XG4gICAgR2xvYmFsVmFycy5VcmxSZWdleCA9IC9eKD86KD86KD86aHR0cHM/fGZ0cCk6KT9cXC9cXC8pKD86XFxTKyg/OjpcXFMqKT9AKT8oPzooPyEoPzoxMHwxMjcpKD86XFwuXFxkezEsM30pezN9KSg/ISg/OjE2OVxcLjI1NHwxOTJcXC4xNjgpKD86XFwuXFxkezEsM30pezJ9KSg/ITE3MlxcLig/OjFbNi05XXwyXFxkfDNbMC0xXSkoPzpcXC5cXGR7MSwzfSl7Mn0pKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswMV1cXGR8MjJbMC0zXSkoPzpcXC4oPzoxP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKSl7Mn0oPzpcXC4oPzpbMS05XVxcZD98MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC00XSkpfCg/Oig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldLSopKlthLXpcXHUwMGExLVxcdWZmZmYwLTldKykoPzpcXC4oPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XS0qKSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKig/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfSkpKSg/OjpcXGR7Miw1fSk/KD86Wy8/I11cXFMqKT8kL2k7XG4gICAgR2xvYmFsVmFycy5MaW5rSGFzVGl0bGVUYWdSZWdleEdsb2JhbCA9IC88YVxccyhbXjxdKil0aXRsZT1cXFwiKC4qPylcXFwiPi9naTtcbiAgICBHbG9iYWxWYXJzLlByZWhlYWRlclJlZ2V4R2xvYmFsID0gL1xcPHBcXHNbXlxcPF0qY2xhc3M9XFxcInByZWhlYWRlclxcXCJbXlxcPl0qXFw+L2dpO1xuICAgIEdsb2JhbFZhcnMuUmVxdWlyZWRUcmFja2luZ0NvZGVXaGl0ZWxpc3QgPSBbXG4gICAgICAgICcucGRmJywgJy5pY3MnLCAnLm9mdCcsICdvcHR1bXN1cnZleXMuY28nLCAnaGVhbHRoaWQub3B0dW0uY29tJywgJ2xlYXJuaW5nLm9wdHVtLmNvbScsICdhcHAuaW5mby5vcHR1bS5jb20nLFxuICAgICAgICAnb3B0dW0ud2ViZXguY29tJywgJ3R3aXR0ZXIuY29tJywgJ2ZhY2Vib29rLmNvbScsICdsaW5rZWRpbi5jb20nLCAnaW5mby5vcHR1bSdcbiAgICBdO1xufSkoR2xvYmFsVmFycyB8fCAoR2xvYmFsVmFycyA9IHt9KSk7XG52YXIgSW5qZWN0b3JNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEluamVjdG9yTW9kdWxlKCkge1xuICAgICAgICB0aGlzLnZhcmlhYmxlcyA9IHt9O1xuICAgIH1cbiAgICBJbmplY3Rvck1vZHVsZS5wcm90b3R5cGUuX19nZXRQYXJhbXMgPSBmdW5jdGlvbiAoa2V5cywgaW5qZWN0YWJsZXMpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gaW5qZWN0YWJsZXNba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coa2V5cyxhcmdzKTtcbiAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfTtcbiAgICBJbmplY3Rvck1vZHVsZS5wcm90b3R5cGUuX19nZXRJbmplY3RvciA9IGZ1bmN0aW9uIChzcGVjcykge1xuICAgICAgICB2YXIgb3V0cHV0ID0geyBmbjogZnVuY3Rpb24gKCkgeyB9LCBhcmdzOiBbXSB9O1xuICAgICAgICBpZiAodHlwZW9mIHNwZWNzID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIG91dHB1dC5mbiA9IHNwZWNzW3NwZWNzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgb3V0cHV0LmFyZ3MgPSB0aGlzLl9fZ2V0UGFyYW1zKHNwZWNzLnNsaWNlKDAsIHNwZWNzLmxlbmd0aCAtIDEpLCB0aGlzLnZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvdXRwdXQuZm4gPSBzcGVjcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG4gICAgSW5qZWN0b3JNb2R1bGUucHJvdG90eXBlLmluamVjdCA9IGZ1bmN0aW9uICh2YXJOYW1lLCB2YXJWYWx1ZSkge1xuICAgICAgICB0aGlzLnZhcmlhYmxlc1t2YXJOYW1lXSA9IHZhclZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIEluamVjdG9yTW9kdWxlO1xufSgpKTtcbnZhciBFTUxNb2R1bGU7XG4oZnVuY3Rpb24gKEVNTE1vZHVsZSkge1xuICAgIHZhciBQcmV2aWV3VGV4dE9iamVjdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFByZXZpZXdUZXh0T2JqZWN0KEVNTFdvcmtzcGFjZSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gRU1MV29ya3NwYWNlO1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFByZXZpZXdUZXh0Q1NTID0gXCIucHJlaGVhZGVyIHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDsgdmlzaWJpbGl0eTpoaWRkZW47IG9wYWNpdHk6MDsgY29sb3I6I2ZmZjsgZm9udC1zaXplOjA7IGhlaWdodDowOyB3aWR0aDowO31cIjtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFByZXZpZXdUZXh0Q29kZSA9IFwiPHAgY2xhc3M9XFxcInByZWhlYWRlclxcXCIgc3R5bGU9XFxcImRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgdmlzaWJpbGl0eTogaGlkZGVuOyBvcGFjaXR5OiAwOyBjb2xvcjogdHJhbnNwYXJlbnQ7IGhlaWdodDogMDsgd2lkdGg6IDA7IG1hcmdpbjowOyBwYWRkaW5nOjA7XFxcIj48L3A+XCI7XG4gICAgICAgIH1cbiAgICAgICAgUHJldmlld1RleHRPYmplY3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUHJldmlld1RleHRPYmplY3QucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0Q29kZSA9IHRoaXMucGFyZW50LmdlbmVyYXRlT3V0cHV0Q29kZShcImVtYWlsXCIsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gL1xcPHAuKmNsYXNzPVxcXCJwcmVoZWFkZXJcXFwiW15cXD5dLipcXD4oW148XS4qKT9cXDxcXC9wXFw+L2dpO1xuICAgICAgICAgICAgdmFyIHJlZ2V4UyA9IC9cXDxwKFteXFw+XS4qKWNsYXNzPVxcXCJwcmVoZWFkZXJcXFwiKFteXFw+XS4qKVxcPi9naTtcbiAgICAgICAgICAgIHZhciB3b3JraW5nQ29kZSA9IHRoaXMucGFyZW50LndvcmtpbmdDb2RlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAocmVnZXhTLnRlc3Qob3V0cHV0Q29kZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBvdXRwdXRDb2RlLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9oYXMgY29kZSBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IHdpbmRvdy5qUXVlcnkoZm91bmRbMF0pLnRleHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBmb3VuZFxuICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGFkZCB0aGUgY29kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9cXDxzdHlsZVxccz8oXFxzW14+XS4qKT9cXD4vLnRlc3Qod29ya2luZ0NvZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCB0byBleGlzdGluZyBjb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nQ29kZSA9IHdvcmtpbmdDb2RlLnJlcGxhY2UobmV3IFJlZ0V4cChcIjwvc3R5bGU+XCIsIFwiZ1wiKSwgdGhpcy5kZWZhdWx0UHJldmlld1RleHRDU1MgKyBcIlxcbjwvc3R5bGU+XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmtpbmdDb2RlLmluZGV4T2YoXCI8L2hlYWQ+XCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nQ29kZSA9IHdvcmtpbmdDb2RlLnJlcGxhY2UobmV3IFJlZ0V4cChcIjwvaGVhZD5cIiwgXCJnXCIpLCBcIjxzdHlsZSB0eXBlPVxcXCJ0ZXh0L2Nzc1xcXCI+XCIgKyB0aGlzLmRlZmF1bHRQcmV2aWV3VGV4dENTUyArIFwiPC9zdHlsZT5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3b3JraW5nQ29kZSA9IHdvcmtpbmdDb2RlLnJlcGxhY2UobmV3IFJlZ0V4cChcIig8Ym9keVtePl0qPilcIiwgXCJnXCIpLCBcIiQxXFxuXCIgKyB0aGlzLmRlZmF1bHRQcmV2aWV3VGV4dENvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LndvcmtpbmdDb2RlID0gd29ya2luZ0NvZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcmV2aWV3VGV4dE9iamVjdDtcbiAgICB9KCkpO1xuICAgIEVNTE1vZHVsZS5QcmV2aWV3VGV4dE9iamVjdCA9IFByZXZpZXdUZXh0T2JqZWN0O1xuICAgIHZhciBNYWlsdG9MaW5rT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTWFpbHRvTGlua09iamVjdChMaW5rT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IExpbmtPYmplY3Q7XG4gICAgICAgICAgICB0aGlzLmVtYWlsID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdCA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzLmJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzTGlua1R5cGUoJ21haWx0bycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RW1haWxFZGl0b3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBNYWlsdG9MaW5rT2JqZWN0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1haWx0b09iaigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbb3B0aW9uXSAmJiB0aGlzW29wdGlvbl0udHJpbSgpICE9PSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBNYWlsdG9MaW5rT2JqZWN0LnByb3RvdHlwZS5pc1ZhbGlkRW1haWxBZGRyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEdsb2JhbFZhcnMuRW1haWxSZWdleC50ZXN0KHRoaXMuZW1haWwpO1xuICAgICAgICB9O1xuICAgICAgICBNYWlsdG9MaW5rT2JqZWN0LnByb3RvdHlwZS5kZWluaXRFbWFpbEVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW1haWwgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5zdWJqZWN0ID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMuYm9keSA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIE1haWx0b0xpbmtPYmplY3QucHJvdG90eXBlLmNvbXBvc2VFbWFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5ldy51cmwgPSBcIm1haWx0bzpcIiArIHRoaXMuZW1haWw7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IFtcInN1YmplY3RcIiwgXCJib2R5XCJdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbb3B0aW9uc1tpXV0gJiYgdGhpc1tvcHRpb25zW2ldXSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5uZXcuc2VhcmNoUGFyYW1zLnNldChvcHRpb25zW2ldLCB0aGlzW29wdGlvbnNbaV1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpc1tvcHRpb25zW2ldXSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKG9wdGlvbnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTWFpbHRvTGlua09iamVjdC5wcm90b3R5cGUudXBkYXRlTWFpbHRvT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhID0gdGhpcy5wYXJlbnQubmV3LnVybC5zdWJzdHIoNywgdGhpcy5wYXJlbnQubmV3LnVybC5sZW5ndGggLSA3KTtcbiAgICAgICAgICAgIHZhciBiID0gYS5zcGxpdChcIj9cIik7XG4gICAgICAgICAgICB0aGlzLmVtYWlsID0gYlswXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5ldy5zZWFyY2hQYXJhbXMudXBkYXRlRW50cmllcygpO1xuICAgICAgICAgICAgaWYgKGIubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIFtcInN1YmplY3RcIiwgXCJib2R5XCJdLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzW29wdGlvbl0gPSB3aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KF90aGlzLnBhcmVudC5uZXcuc2VhcmNoUGFyYW1zLmdldChvcHRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBNYWlsdG9MaW5rT2JqZWN0LnByb3RvdHlwZS5pbnB1dE9uQmx1ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vZGVjb2RlZCB1cmwgYWxsIHRoZSBlbnRyaWVzO1xuICAgICAgICAgICAgLy9yZWVuY29kZSB0aGVtLlxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy51cGRhdGVFbnRyaWVzKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5uZXcuc2VhcmNoUGFyYW1zLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFpbHRvTGlua09iamVjdC5wcm90b3R5cGUub3BlbkVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdEVtYWlsRWRpdG9yKCk7XG4gICAgICAgICAgICAvLyB3aW5kb3cualF1ZXJ5KFwiaHRtbCxib2R5XCIpXG4gICAgICAgICAgICAvLyAuYW5pbWF0ZSh7c2Nyb2xsVG9wOiB3aW5kb3cualF1ZXJ5KCcjbGluay0nKyh0aGlzLnBhcmVudC5pZC0xKSkub2Zmc2V0KCkudG9wIC0gNzV9LCAzMDApO1xuICAgICAgICAgICAgdmFyIExPID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhMTy5pZCAtIDEpO1xuICAgICAgICAgICAgTE8uc2hvd01haWx0b0VkaXRvciA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIE1haWx0b0xpbmtPYmplY3QucHJvdG90eXBlLmluaXRFbWFpbEVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWFpbHRvT2JqKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBNYWlsdG9MaW5rT2JqZWN0O1xuICAgIH0oKSk7XG4gICAgRU1MTW9kdWxlLk1haWx0b0xpbmtPYmplY3QgPSBNYWlsdG9MaW5rT2JqZWN0O1xuICAgIHZhciBVUkxPYmogPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBVUkxPYmoodXJsKSB7XG4gICAgICAgICAgICB0aGlzLmhyZWYgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW4gPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5oYXNoID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMucHJvdG9jb2wgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFBhcmFtcyA9IG5ldyBVUkxPYmpTZWFyY2hQYXJhbXModGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgVVJMT2JqLnByb3RvdHlwZS5wcmVwYXJlRXhwb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9kbyBzb21ldGhpbmcgaGVyZT9cbiAgICAgICAgICAgIC8vdGhpcy5zZWFyY2hQYXJhbXMudXBkYXRlU2VhcmNoUHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBVUkxPYmoucHJvdG90eXBlLmlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gR2xvYmFsVmFycy5VcmxSZWdleC50ZXN0KHRoaXMudXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgVVJMT2JqLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVybC5pbmRleE9mKHN0cikgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVVJMT2JqLnByb3RvdHlwZSwgXCJ1cmxcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlRXhwb3J0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHUgPSB0aGlzLm9yaWdpbiArIHRoaXMuc2VhcmNoICsgdGhpcy5oYXNoO1xuICAgICAgICAgICAgICAgIHUgPSB1LnJlcGxhY2UoXCI/dW5kZWZpbmVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc2ggPSBcIlwiO1xuICAgICAgICAgICAgICAgIHZhciBwcm90b2NvbFR5cGUgPSAvXihodHRwcz98bWFpbHRvfGZ0cClcXDovZ2k7XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvY29sVHlwZS50ZXN0KHVybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB1cmwubWF0Y2gocHJvdG9jb2xUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm90b2NvbCA9IGFbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICBpZiAodXJsLnRyaW0oKSA9PSBcIiNcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc2ggPSBcIiNcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodXJsLnRyaW0oKS5sZW5ndGggPiAxICYmIHVybC5pbmRleE9mKFwiI1wiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmxQYXJ0cyA9IHVybC5zcGxpdChcIiNcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzaCA9IFwiI1wiICsgdXJsUGFydHMucG9wKCk7IC8vanVtcCBsaW5rLi4gbmVlZCB0byByZW1vdmUgaXQgZnJvbSB0aGUgb3RoZXIgc3R1ZmYuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9ICh1cmxQYXJ0cy5qb2luKFwiI1wiKSkuc3BsaXQoXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9yaWdpbiA9IHBhcnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCA9IHBhcnRzLmxlbmd0aCA+IDAgPyBcIj9cIiArIHBhcnRzWzFdIDogXCJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihcIj9cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luID0gcGFydHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCA9IChwYXJ0cy5sZW5ndGggPiAwKSA/IFwiP1wiICsgcGFydHNbMV0gOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcmlnaW4gPSB1cmw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy90aGlzLnNlYXJjaFBhcmFtcy51cGRhdGVTZWFyY2hQcm9wKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFVSTE9iajtcbiAgICB9KCkpO1xuICAgIEVNTE1vZHVsZS5VUkxPYmogPSBVUkxPYmo7XG4gICAgdmFyIFVSTE9ialNlYXJjaFBhcmFtcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFVSTE9ialNlYXJjaFBhcmFtcyhwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlYXJjaC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW50cmllcyA9ICh0aGlzLnBhcmVudC5zZWFyY2guc3Vic3RyKDEsIHRoaXMucGFyZW50LnNlYXJjaC5sZW5ndGgpKS5zcGxpdCgvXFwmYW1wXFw7fFxcJi9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VudHJpZXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVVJMT2JqU2VhcmNoUGFyYW1zLnByb3RvdHlwZSwgXCJlbnRyaWVzXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2VudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0aGlzLl9lbnRyaWVzW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYVsxXSA9IGRlY29kZVVSSUNvbXBvbmVudChhWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChhLmpvaW4oXCI9XCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLnVwZGF0ZUVudHJpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9lbnRyaWVzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuc2VhcmNoICE9PSBcIj9cIiAmJiB0aGlzLnBhcmVudC5zZWFyY2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9ICh0aGlzLnBhcmVudC5zZWFyY2guc3Vic3RyKDEsIHRoaXMucGFyZW50LnNlYXJjaC5sZW5ndGgpKS5zcGxpdCgvXFwmYW1wXFw7fFxcJi9nKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VudHJpZXMucHVzaChwcm9wc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLnVwZGF0ZVNlYXJjaFByb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5fZW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9lbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gdGhpcy5fZW50cmllc1tpXS5zcGxpdChcIj1cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvW2Etel17MSw0fT0oLio/Oil7Myw5fS9naS50ZXN0KHRoaXMuX2VudHJpZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCh0aGlzLl9lbnRyaWVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHByb3BbMF0gKyAocHJvcC5sZW5ndGggPiAxID8gXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KHByb3BbMV0pKSA6IFwiXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNlYXJjaCA9IG91dHB1dC5sZW5ndGggPiAwID8gXCI/XCIgKyBvdXRwdXQuam9pbihcIiZcIikgOiBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhcmFtICsgXCJcXD1cIiwgXCJnXCIpO1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9lbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QodGhpcy5fZW50cmllc1tpXSkpXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhcmFtICsgXCJcXD1cIiwgXCJnXCIpLCBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZW50cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KHRoaXMuX2VudHJpZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9ICh0aGlzLl9lbnRyaWVzW2ldLnNwbGl0KFwiPVwiKSkucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgVVJMT2JqU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAocGFyYW0sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiXlwiICsgcGFyYW0gKyBcIlxcPVwiLCBcImdcIiksIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9lbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QodGhpcy5fZW50cmllc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZW50cmllc1tpXSA9IHBhcmFtICsgXCI9XCIgKyB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW91dHB1dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKHBhcmFtICsgXCI9XCIgKyB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVVJMT2JqU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAodmFsdWVQYWlyKSB7XG4gICAgICAgICAgICB0aGlzLl9lbnRyaWVzLnB1c2godmFsdWVQYWlyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoUHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLmRlbGV0ZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2VudHJpZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoUHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLmRlbGV0ZUF0SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX2VudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoUHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBVUkxPYmpTZWFyY2hQYXJhbXMucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgLy9kb2VzbnQgZG8gYW55dGhpbmcgeWV0LlxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9lbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2VudHJpZXNbaV0uc3Vic3RyKDAsIHBhcmFtLmxlbmd0aCArIDEpID09IHBhcmFtICsgXCI9XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVBdEluZGV4KGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFVSTE9ialNlYXJjaFBhcmFtcztcbiAgICB9KCkpO1xuICAgIEVNTE1vZHVsZS5VUkxPYmpTZWFyY2hQYXJhbXMgPSBVUkxPYmpTZWFyY2hQYXJhbXM7XG4gICAgdmFyIExpbmtlZEltYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTGlua2VkSW1hZ2UoX3N1cGVyLCBjb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb2RlO1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIgPSBfc3VwZXI7XG4gICAgICAgICAgICB2YXIgdGFncyA9IFtcInNyY1wiLCBcImFsdFwiLCBcImhlaWdodFwiLCBcIndpZHRoXCJdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0YWdzXzEgPSB0YWdzOyBfaSA8IHRhZ3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gdGFnc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHRhZyArIFwiPVxcXCIoW15cXFwiXS4qPyk/XFxcIlwiLCBcImlcIik7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QoY29kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1t0YWddID0gY29kZS5tYXRjaChyZWdleClbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhhc1dpZHRoID0gdGhpcy53aWR0aCAmJiBwYXJzZUludCh0aGlzLndpZHRoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdmFyIGhhc0hlaWdodCA9IHRoaXMuaGVpZ2h0ICYmIHBhcnNlSW50KHRoaXMuaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaWYgKCFoYXNXaWR0aCB8fCAhaGFzSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNyYyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRJbWFnZSh0aGlzLnNyYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAvL2VpdGhlciBpcyBub3Qgc2V0XG4gICAgICAgIH1cbiAgICAgICAgTGlua2VkSW1hZ2UucHJvdG90eXBlLnByZWxvYWRJbWFnZSA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICAgICAgICAgIHZhciBMSSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAvLyBpbWcuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIExJLmhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgTEkud2lkdGggPSBpbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW1nLmhlaWdodCwgaW1nLndpZHRoKTtcbiAgICAgICAgICAgICAgICBpbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBMSS5zcmM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpbWcpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgICB9O1xuICAgICAgICBMaW5rZWRJbWFnZS5wcm90b3R5cGUuZ2VuZXJhdGVPdXRwdXQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHQuaW5kZXhPZihcImFsdFwiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSh0aGlzLmNvbnRleHQsIGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmLnJlcGxhY2UoL2FsdFxcPVxcXCIoW15cXFwiXS4qPyk/XFxcIi9nLCBcImFsdD1cXFwiXCIgKyAoX3RoaXMuYWx0ID09PSB1bmRlZmluZWQgPyBcIlwiIDogX3RoaXMuYWx0KSArIFwiXFxcIlwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UodGhpcy5jb250ZXh0LCBmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5yZXBsYWNlKFwiPGltZ1wiLCBcIjxpbWcgYWx0PVxcXCJcIiArIChfdGhpcy5hbHQgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBfdGhpcy5hbHQpICsgXCJcXFwiXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMaW5rZWRJbWFnZTtcbiAgICB9KCkpO1xuICAgIEVNTE1vZHVsZS5MaW5rZWRJbWFnZSA9IExpbmtlZEltYWdlO1xuICAgIHZhciBMaW5rT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTGlua09iamVjdChsaW5lLCBjb250ZXh0LCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX19pc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9zdXBlciA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2hvd1F1ZXJ5U3RyaW5nRWRpdG9yID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNob3dNYWlsdG9FZGl0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaWQgPSAwO1xuICAgICAgICAgICAgdGhpcy5saW5lID0gbGluZSArIDE7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgdGhpcy5xdWVyeVN0cmluZ3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuQ2hhbmdlTW9uaXRvciA9IG5ldyBDaGFuZ2VNb25pdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiaHlwZXJsaW5rXCIpLm1vbml0b3IoKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JzLmluamVjdChcIkxpbmtPYmplY3RcIiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVycm9ycy5pbmplY3QoXCJFTUxXb3Jrc3BhY2VcIiwgdGhpcy5fc3VwZXIpO1xuICAgICAgICAgICAgdGhpcy53aGl0ZUxpc3RlZFVybCA9IFwifn53aGl0ZWxpc3R+flwiO1xuICAgICAgICAgICAgLy9maW5kIGhyZWZcbiAgICAgICAgICAgIHRoaXMuX19sb2NhdGVIcmVmKGNvbnRleHQpO1xuICAgICAgICAgICAgLy9maW5kIGltYWdlXG4gICAgICAgICAgICB0aGlzLl9fbG9jYXRlTGlua2VkSW1hZ2UoY29udGV4dCk7XG4gICAgICAgICAgICAvL25lZWQgdG8gc2V0IHRoZSB1cmwgYmVmb3JlIHlvdSBkbyB0aGlzO1xuICAgICAgICAgICAgdGhpcy5tYWlsdG8gPSBuZXcgTWFpbHRvTGlua09iamVjdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBMaW5rT2JqZWN0LnByb3RvdHlwZS5fX2xvY2F0ZUhyZWYgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHJlMiA9IC9ocmVmXFw9XFxcIihbXlxcXCJcXD5dKilcXFwiL2c7XG4gICAgICAgICAgICB2YXIgaHJlZiA9IGNvbnRleHQubWF0Y2gocmUyKTtcbiAgICAgICAgICAgIGlmIChocmVmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaHJlZlswXSA9PSBcImhyZWY9XFxcIlxcXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldyA9IG5ldyBVUkxPYmooXCIjXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9sZCA9IG5ldyBVUkxPYmooXCIjXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNvbnRleHQucmVwbGFjZShuZXcgUmVnRXhwKFwiaHJlZj1cXFwiXFxcIlwiLCBcImdcIiksIFwiaHJlZj1cXFwiI1xcXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldyA9IG5ldyBVUkxPYmooKGhyZWZbMF0uc3Vic3RyKDYsIGhyZWZbMF0ubGVuZ3RoIC0gNykpLnRyaW0oKS5yZXBsYWNlKC9cXG4vZywgXCJcIikpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9sZCA9IG5ldyBVUkxPYmooKGhyZWZbMF0uc3Vic3RyKDYsIGhyZWZbMF0ubGVuZ3RoIC0gNykpLnRyaW0oKS5yZXBsYWNlKC9cXG4vZywgXCJcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlua09iamVjdC5wcm90b3R5cGUuX19sb2NhdGVMaW5rZWRJbWFnZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgICAgICBpZiAoL1xcPGltZyhbXj5dLio/KVxcPi8udGVzdChjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGNvbnRleHQubWF0Y2goL1xcPGltZyhbXj5dLio/KVxcPi8pO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTGlua2VkSW1hZ2UgPSBuZXcgTGlua2VkSW1hZ2UodGhpcywgZm91bmRbMF0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkxpbmtlZEltYWdlT2xkID0gbmV3IExpbmtlZEltYWdlKHRoaXMsIGZvdW5kWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpbmtPYmplY3QucHJvdG90eXBlLmhhc0R1cGxpY2F0ZVF1ZXJ5U3RyaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXSwgdXNlZFN0cmluZ3MgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLm5ldy5zZWFyY2hQYXJhbXMuZW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMubmV3LnNlYXJjaFBhcmFtcy5lbnRyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gYS5zcGxpdChcIj1cIikuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZWRTdHJpbmdzLmluZGV4T2YocGFyYW0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBhcmFtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1c2VkU3RyaW5ncy5wdXNoKHBhcmFtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMaW5rT2JqZWN0LnByb3RvdHlwZS5vdmVycmlkZVRyYWNraW5nUmVxdWlyZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aGl0ZUxpc3RlZFVybCA9IHRoaXMubmV3LnVybDtcbiAgICAgICAgfTtcbiAgICAgICAgTGlua09iamVjdC5wcm90b3R5cGUuZGlzcGxheUZvcm1hdHRlZFVSTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vZGlzcGxheXMgdXJsO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXHNlbWxcXC1pZFxcPVxcXCIoWzAtOV0qKVxcXCIvLCBcIlwiKTtcbiAgICAgICAgICAgIHZhciBmaW5kU3RhcnQgPSBcImhyZWY9XFxcIlwiO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gY29udGVudC5pbmRleE9mKGZpbmRTdGFydCk7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJocmVmPVxcXCJcXFwiXCIsIFwiZ1wiKSwgXCJocmVmPVxcXCIjXFxcIlwiKTtcbiAgICAgICAgICAgIC8vIHZhciBpbWdSZWcgPSAvXFw8aW1nKFtePl0uKj8pXFw+L2c7XG4gICAgICAgICAgICBpZiAodGhpcy5MaW5rZWRJbWFnZSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLkxpbmtlZEltYWdlLmdlbmVyYXRlT3V0cHV0KGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyKDAsIHN0YXJ0KSArIGZpbmRTdGFydCArIFwifHx8YS5ocmVmfHx8XCIgKyBjb250ZW50LnN1YnN0cihzdGFydCArIChmaW5kU3RhcnQubGVuZ3RoICsgKHRoaXMub2xkLnVybC5sZW5ndGgpKSwgY29udGVudC5sZW5ndGgpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcIlwiLCBcImdcIiksIFwiJnF1b3Q7XCIpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKFwiL1wiLCBcImdcIiksIFwiJiM0NztcIik7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG5ldyBSZWdFeHAoXCI+XCIsIFwiZ1wiKSwgXCImZ3Q7XCIpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKFwiPFwiLCBcImdcIiksIFwiJmx0O1wiKTtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyhbXlxcc10qPylcXD0vZywgXCI8c3BhbiBjbGFzcz1cXFwiYXR0clxcXCI+JDE8L3NwYW4+PHNwYW4gY2xhc3M9XFxcImtleXdvcmRcXFwiPj08L3NwYW4+XCIpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFwmcXVvdFxcO1xcJmd0XFw7L2csIFwiJnF1b3Q7PHNwYW4gY2xhc3M9XFxcInRhZ1xcXCI+Jmd0Ozwvc3Bhbj5cIik7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXCZcXCM0N1xcO1xcJmd0XFw7L2csIFwiPHNwYW4gY2xhc3M9XFxcInRhZ1xcXCI+JiM0NzsmZ3Q7PC9zcGFuPlwiKTtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcJnF1b3RcXDsoLio/KVxcJnF1b3RcXDsvZywgXCI8c3BhbiBjbGFzcz1cXFwidmFsdWVcXFwiPlxcXCIkMVxcXCI8L3NwYW4+XCIpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFwmbHRcXDsoW2Etel0rXFxzPykvZywgXCI8c3BhbiBjbGFzcz1cXFwidGFnXFxcIj4mbHQ7JDE8L3NwYW4+XCIpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFwmbHRcXDtcXCZcXCM0N1xcOyhbYS16XStcXHM/KVxcJmd0XFw7L2csIFwiPHNwYW4gY2xhc3M9XFxcInRhZ1xcXCI+Jmx0OyYjNDc7JDEmZ3Q7PC9zcGFuPlwiKTtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcbi9nLCBcIjxicj5cIik7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXCZndFxcOy9nLCBcIjxzcGFuIGNsYXNzPVxcXCJ0YWdcXFwiPiZndDs8L3NwYW4+XCIpO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzezN9L2csIFwiJm5ic3A7Jm5ic3A7Jm5ic3BcIik7XG4gICAgICAgICAgICAvLyBpZih0aGlzLkxpbmtlZEltYWdlKSB7XG4gICAgICAgICAgICAvLyAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcfFxcfFxcfGltZ1xcLmFsdFxcfFxcfFxcfC9nLCB0aGlzLkxpbmtlZEltYWdlLmFsdCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMuTGlua2VkSW1hZ2UuYWx0KTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcfFxcfFxcfGFcXC5ocmVmXFx8XFx8XFx8L2csIFwiPHN0cm9uZz5cIiArICh0aGlzLmhhc093blByb3BlcnR5KFwiZGVsZXRlT25SZW5kZXJcIikgJiYgdGhpcy5kZWxldGVPblJlbmRlciA/IHRoaXMub2xkLnVybCA6IHRoaXMubmV3LnVybCkgKyBcIjwvc3Ryb25nPlwiKTtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICB9O1xuICAgICAgICBMaW5rT2JqZWN0LnByb3RvdHlwZS5pc0xpbmtDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vaW50ZWxsaWdlbmNlIHNjYW5zOlxuICAgICAgICAgICAgdGhpcy5fc3VwZXIuaW50ZWxsaWdlbmNlLmV2YWx1YXRlUnVsZXMoKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JzLmV2YWx1YXRlUnVsZXMoKTtcbiAgICAgICAgICAgIC8vdHJhY2sgY2hhbmdlczpcbiAgICAgICAgICAgIHRoaXMuQ2hhbmdlTW9uaXRvci51cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuX19pc0NvbXBsZXRlID0gdGhpcy5lcnJvcnMuY2FuQ29udGludWU7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShcImRlbGV0ZU9uUmVuZGVyXCIpICYmIHRoaXMuZGVsZXRlT25SZW5kZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5fX2lzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19pc0NvbXBsZXRlO1xuICAgICAgICB9O1xuICAgICAgICBMaW5rT2JqZWN0LnByb3RvdHlwZS5pc0xpbmtUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJodHRwXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ldy5wcm90b2NvbCA9PSBcImh0dHA6XCIgfHwgdGhpcy5uZXcucHJvdG9jb2wgPT0gXCJodHRwczpcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibWFpbHRvXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ldy5wcm90b2NvbCA9PSBcIm1haWx0bzpcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgTGlua09iamVjdC5wcm90b3R5cGUuaGFzVHJhY2tpbmdDb2RlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIG9iaiA9IHRoaXMubmV3LnVybDtcbiAgICAgICAgICAgIC8vIGlmKHRoaXMud2hpdGVMaXN0ZWRVcmw9PXRoaXMubmV3KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBhID0gL1thLXpdezEsNH09KC4qPzopezMsOX0vaWc7XG4gICAgICAgICAgICByZXR1cm4gYS50ZXN0KG9iaik7XG4gICAgICAgIH07XG4gICAgICAgIExpbmtPYmplY3QucHJvdG90eXBlLnJlcXVpcmVzVHJhY2tpbmdDb2RlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKEdsb2JhbFZhcnMuUmVxdWlyZXNUcmFja2luZ0NvZGVSZWdleC50ZXN0KHRoaXMubmV3LnVybCkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGUgb2ZlciB3aGl0ZWxpc3RcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdsb2JhbFZhcnMuUmVxdWlyZWRUcmFja2luZ0NvZGVXaGl0ZWxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEdsb2JhbFZhcnMuUmVxdWlyZWRUcmFja2luZ0NvZGVXaGl0ZWxpc3RbaV0gaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChHbG9iYWxWYXJzLlJlcXVpcmVkVHJhY2tpbmdDb2RlV2hpdGVsaXN0W2ldW1widGVzdFwiXSh0aGlzLm5ldy51cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXcudXJsLmluZGV4T2YoR2xvYmFsVmFycy5SZXF1aXJlZFRyYWNraW5nQ29kZVdoaXRlbGlzdFtpXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgTGlua09iamVjdC5wcm90b3R5cGUucmVxdWlyZXNTQ29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChHbG9iYWxWYXJzLlJlcXVpcmVzU0NvZGVSZWdleC50ZXN0KHRoaXMubmV3LnVybCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGlua09iamVjdC5wcm90b3R5cGUubmVlZHNUcmFja2luZ0NvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5yZXF1aXJlc1RyYWNraW5nQ29kZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMud2hpdGVMaXN0ZWRVcmwgPT0gdGhpcy5uZXcudXJsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIC8vIGRldGVybWluZSBsaW5rcyB0aGF0IG5lZWQgc3BlY2lhbCB0cmFja2luZ1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzVHJhY2tpbmdDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgICAgIExpbmtPYmplY3QucHJvdG90eXBlLnVwZGF0ZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMaW5rVHlwZSgnbWFpbHRvJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1haWx0by51cGRhdGVNYWlsdG9PYmooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3LnNlYXJjaFBhcmFtcy51cGRhdGVFbnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMaW5rT2JqZWN0O1xuICAgIH0oKSk7XG4gICAgRU1MTW9kdWxlLkxpbmtPYmplY3QgPSBMaW5rT2JqZWN0O1xuICAgIHZhciBDaGFuZ2VNb25pdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2hhbmdlTW9uaXRvcihfc3VwZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIgPSBfc3VwZXI7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgQ2hhbmdlTW9uaXRvci5wcm90b3R5cGUuY29tcGFyZU9sZEFuZE5ldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmxQYXJhbXMgPSBbXCJwcm90b2NvbFwiLCBcIm9yaWdpblwiLCBcInNlYXJjaFwiLCBcImhhc2hcIl07XG4gICAgICAgICAgICB2YXIgY2hhbmdlZCA9IFtdO1xuICAgICAgICAgICAgdmFyIF9zdXBlciA9IHRoaXMuX3N1cGVyO1xuICAgICAgICAgICAgdXJsUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9zdXBlci5vbGQuaGFzT3duUHJvcGVydHkocGFyYW0pICYmIF9zdXBlci5vbGRbcGFyYW1dICE9PSBfc3VwZXIubmV3W3BhcmFtXSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkLnB1c2gocGFyYW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKF9zdXBlci5MaW5rZWRJbWFnZSAmJiBfc3VwZXIuTGlua2VkSW1hZ2UuYWx0ICE9PSBfc3VwZXIuTGlua2VkSW1hZ2VPbGQuYWx0KSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZC5wdXNoKFwiYWx0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZU1vbml0b3IucHJvdG90eXBlLmJlZm9yZURpZFJldHVybkNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIENoYW5nZU1vbml0b3IucHJvdG90eXBlLmFmdGVyRGlkUmV0dXJuQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgQ2hhbmdlTW9uaXRvci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N1cGVyLnJlYWRPbmx5ID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5jb21wYXJlT2xkQW5kTmV3KCk7XG4gICAgICAgICAgICAgICAgdmFyIENNID0gdGhpcztcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKENNLmFydGljdWxhdGVDaGFuZ2VzKHNjb3BlLCB7fSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSBvdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYW5nZU1vbml0b3IucHJvdG90eXBlLmNvbXBhcmVTZWFyY2hTdHJpbmdzID0gZnVuY3Rpb24gKG9sZFAsIG5ld1ApIHtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIGFkZGVkOiBbXSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkOiBbXSxcbiAgICAgICAgICAgICAgICByZW1vdmVkOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gb2xkUCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdQLmluZGV4T2Yob2xkUFtpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQucmVtb3ZlZC5wdXNoKG9sZFBbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSBpbiBuZXdQKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFAuaW5kZXhPZihuZXdQW2ldKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5hZGRlZC5wdXNoKG5ld1BbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaW5kX3BhdHRlcm5faW5BcnJheSA9IGZ1bmN0aW9uIChwYXR0ZXJuLCBhcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0ID0gLTE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBhcnIubGVuZ3RoOyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ1dXBkYXRyZWQ/XCIseSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJuLnRlc3QoYXJyW3ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0geTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAoaSBpbiBvbGRQKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChvbGRQW2ldLnNwbGl0KFwiPVwiKVswXSArIFwiPVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmaW5kX3BhdHRlcm5faW5BcnJheShyZSwgcGF5bG9hZC5hZGRlZCk7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC51cGRhdGVkLnB1c2gocGF5bG9hZC5hZGRlZFtmb3VuZF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXIgPSBmaW5kX3BhdHRlcm5faW5BcnJheShyZSwgcGF5bG9hZC5yZW1vdmVkKTtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5yZW1vdmVkLnNwbGljZShvdGhlciwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuYWRkZWQuc3BsaWNlKGZvdW5kLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhbmdlTW9uaXRvci5wcm90b3R5cGUuYXJ0aWN1bGF0ZUNoYW5nZXMgPSBmdW5jdGlvbiAoc2NvcGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChzY29wZSA9PSBcInByb3RvY29sXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3VwZXIubmV3LnByb3RvY29sID09IFwibWFpbHRvOlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiQ2hhbmdlZCB0byBtYWlsdG8gbGluay5cIiwgZGF0YTogW10gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAodGhpcy5fc3VwZXIub2xkLnByb3RvY29sID09IFwiXCIgPyBcIlVwZGF0ZWRcIiA6IFwiQ2hhbmdlZFwiKSArIFwiIHByb3RvY29sIHRvIFwiICsgdGhpcy5fc3VwZXIubmV3LnByb3RvY29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZSA9PSBcIm9yaWdpblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N1cGVyLm5ldy5wcm90b2NvbCA9PSBcIm1haWx0bzpcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBcIkNoYW5nZWQgbWFpbHRvIGxpbmsgdG8gXCIgKyB0aGlzLl9zdXBlci5uZXcub3JpZ2luLCBkYXRhOiBbXSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJDaGFuZ2VkIGxpbmsgVVJMIHRvIFwiICsgdGhpcy5fc3VwZXIubmV3Lm9yaWdpbiwgZGF0YTogW10gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZSA9PSBcImFsdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N1cGVyLkxpbmtlZEltYWdlLmFsdCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiUmVtb3ZlZCBsaW5rZWQgaW1hZ2UgQUxUIHRleHRcIiwgZGF0YTogW10gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiVXBkYXRlZCBsaW5rZWQgaW1hZ2UgQUxUIHRleHQgdG8gPGI+XCIgKyB0aGlzLl9zdXBlci5MaW5rZWRJbWFnZS5hbHQgKyBcIjwvYj5cIiwgZGF0YTogW10gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZSA9PSBcInNlYXJjaFwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFBhcmFtcyA9IHRoaXMuX3N1cGVyLm9sZC5zZWFyY2hQYXJhbXMuX2VudHJpZXM7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHRoaXMuX3N1cGVyLm5ldy5zZWFyY2hQYXJhbXMuX2VudHJpZXM7XG4gICAgICAgICAgICAgICAgdmFyIHNlYXJjaENoYW5nZXNfMSA9IHRoaXMuY29tcGFyZVNlYXJjaFN0cmluZ3Mob2xkUGFyYW1zLCBuZXdQYXJhbXMpO1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgICAgICB2YXIgX3N1cGVyID0gdGhpcy5fc3VwZXI7XG4gICAgICAgICAgICAgICAgW1widXBkYXRlZFwiLCBcImFkZGVkXCIsIFwicmVtb3ZlZFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaENoYW5nZXNfMVtrZXldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsga2V5WzBdLnRvVXBwZXJDYXNlKCkgKyBrZXkuc3Vic3RyKDEsIGtleS5sZW5ndGgpICsgXCIgXCIgKyAoX3N1cGVyLm5ldy5wcm90b2NvbCA9PSBcIm1haWx0bzpcIiA/IFwicGFyYW1ldGVyXCIgOiBcInF1ZXJ5IHN0cmluZ1wiKSArIChzZWFyY2hDaGFuZ2VzXzFba2V5XS5sZW5ndGggPiAxID8gXCJzXCIgOiBcIlwiKSArIFwiOiA8Yj5cIiArIHNlYXJjaENoYW5nZXNfMVtrZXldLmpvaW4oXCIsIFwiKSArIFwiPC9iPjxicj5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UsIGRhdGE6IFtdIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZSA9PSBcImhhc2hcIikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdXBlci5vbGQuaGFzaCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwiWW91IGFkZGVkIHRoZSBoYXNoIFwiICsgdGhpcy5fc3VwZXIubmV3Lmhhc2gsIGRhdGE6IFtdIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3VwZXIubmV3Lmhhc2ggPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJZb3UgcmVtb3ZlZCB0aGUgaGFzaCBcIiArIHRoaXMuX3N1cGVyLm9sZC5oYXNoLCBkYXRhOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJZb3UgY2hhbmdlZCB0aGUgaGFzaCBmcm9tIFwiICsgdGhpcy5fc3VwZXIub2xkLmhhc2ggKyBcIiB0byBcIiArIHRoaXMuX3N1cGVyLm5ldy5oYXNoLCBkYXRhOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2hhbmdlTW9uaXRvcjtcbiAgICB9KCkpO1xuICAgIEVNTE1vZHVsZS5DaGFuZ2VNb25pdG9yID0gQ2hhbmdlTW9uaXRvcjtcbiAgICB2YXIgRU1MV29ya3NwYWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRU1MV29ya3NwYWNlKGh0bWwsICRzY29wZSkge1xuICAgICAgICAgICAgdGhpcy5vdmVycmlkZGVuSWRzID0gW107XG4gICAgICAgICAgICBpZiAoaHRtbCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGh0bWwgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKCRzY29wZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICRzY29wZSA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgV29ya3NwYWNlID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSAkc2NvcGU7XG4gICAgICAgICAgICB0aGlzLmxpbmtzVmlldyA9ICdleHBlcmltZW50YWwnOyAvL2FkdmFuY2VkIHNob3dzIGFsbFxuICAgICAgICAgICAgdGhpcy5zb3VyY2VDb2RlID0gaHRtbDsgLy9pbml0YWxcbiAgICAgICAgICAgIHRoaXMud29ya2luZ0NvZGUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5maWxlTmFtZSA9IFwiZW1sLW1ha2VyLXVudGl0bGVkXCI7XG4gICAgICAgICAgICB0aGlzLmxpbmtEYXRhID0gW107XG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0U0NvZGUgPSBcInM9ZW1haWxcIjtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0geyBcInN1YmplY3RcIjogXCJcIiB9O1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5leHBvcnRGb3JFbG9xdWEgPSBcIlllc1wiO1xuICAgICAgICAgICAgdGhpcy5fX2VtbEhlYWRlcnMgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5rZXlCb2FyZFNob3J0Y3V0cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fX2FsbG93YWJsZUhlYWRlckZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICBcInRvXCI6IHsgc3ludGF4OiBcIlRvOiBcIiwgbGFiZWw6IFwiVG9cIiwgaW5zdHJ1Y3Rpb25zOiBcIkEgbGlzdCBvZiBlbWFpbCBhZGRyZXNzZXMgc2VwYXJhdGVkIGJ5IGNvbW1hcy5cIiB9LFxuICAgICAgICAgICAgICAgIFwic3ViamVjdFwiOiB7IHN5bnRheDogXCJTdWJqZWN0OiBcIiwgbGFiZWw6IFwiU3ViamVjdFwiLCBpbnN0cnVjdGlvbnM6IFwiXCIgfSxcbiAgICAgICAgICAgICAgICBcImNjXCI6IHsgc3ludGF4OiBcIkNjOiBcIiwgbGFiZWw6IFwiQ0NcIiwgaW5zdHJ1Y3Rpb25zOiBcIkEgbGlzdCBvZiBlbWFpbCBhZGRyZXNzZXMgc2VwYXJhdGVkIGJ5IGNvbW1hcy5cIiB9LFxuICAgICAgICAgICAgICAgIFwicmVwbHl0b1wiOiB7IHN5bnRheDogXCJSZXBseS10bzogXCIsIGxhYmVsOiBcIlJlcGx5IHRvXCIsIGluc3RydWN0aW9uczogXCJBIGxpc3Qgb2YgZW1haWwgYWRkcmVzc2VzIHNlcGFyYXRlZCBieSBjb21tYXMuXCIgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycyA9IFtcbiAgICAgICAgICAgICAgICBcIlgtVW5zZW50OiAxXCIsXG4gICAgICAgICAgICAgICAgXCJNaW1lLVZlcnNpb246IDEuMCAoTWFjIE9TIFggTWFpbCAxMC4xIFxcKDMyNTFcXCkpXCIsXG4gICAgICAgICAgICAgICAgXCJYLVVuaWZvcm0tVHlwZS1JZGVudGlmaWVyOiBjb20uYXBwbGUubWFpbC1kcmFmdFwiLFxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogN2JpdFwiXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy5pbnRlbGxpZ2VuY2UgPSBFTUxNYWtlci5pbnRlbGxpZ2VuY2UubW9kdWxlKFwiZW1haWxcIikubW9uaXRvcigpO1xuICAgICAgICAgICAgdGhpcy5pbnRlbGxpZ2VuY2UuaW5qZWN0KFwiRU1MV29ya3NwYWNlXCIsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUubWFwTGlua09iamVjdHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmtEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlua0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5saW5rRGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmNvbXBvc2VFTUwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL2V4cG9ydC1jb21wb3NlLWVtbFwiO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmRvd25sb2FkRW1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJlZm9yZURpZERvd25sb2FkRW1sID0gRU1MTWFrZXIuZmlsdGVyLm1vZHVsZShcImJlZm9yZURpZERvd25sb2FkRW1sXCIpO1xuICAgICAgICAgICAgYmVmb3JlRGlkRG93bmxvYWRFbWwuaW5qZWN0KFwiRU1MV29ya3NwYWNlXCIsIHRoaXMpO1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IGJlZm9yZURpZERvd25sb2FkRW1sLmFwcGx5RmlsdGVyKHRoaXMuZ2VuZXJhdGVPdXRwdXRDb2RlKFwib2Z0XCIpKTtcbiAgICAgICAgICAgIG91dHB1dCA9IHRoaXMuX19lbWxIZWFkZXJzICsgXCJcXG5cXG5cIiArIHRoaXMuX19yZW1vdmVXaGl0ZVNwYWNlKHRoaXMuX19yZXBsYWNlRWxvcXVhTWVyZ2VGaWVsZHMob3V0cHV0KSk7XG4gICAgICAgICAgICB0aGlzLmZpbGVOYW1lID0gdGhpcy5fX2Zvcm1hdEZpbGVOYW1lKHRoaXMuZmlsZU5hbWUpO1xuICAgICAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbiAoTGlua09iamVjdCkge1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QuQ2hhbmdlTW9uaXRvci51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2luZG93LnNhdmVBcyhuZXcgQmxvYihbb3V0cHV0XSwgeyB0eXBlOiBcInRleHQvaHRtbFwiIH0pLCB0aGlzLmZpbGVOYW1lICsgXCIuZW1sXCIpO1xuICAgICAgICAgICAgdGhpcy5hZnRlckRpZERvd25sb2FkRW1sKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuYWZ0ZXJEaWREb3dubG9hZEVtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiRU1MXCIsIFwiZG93bmxvYWRcIiwgXCJFTUwgRXhwb3J0XCIpO1xuICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiIy9leHBvcnQtZW1sXCI7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuZG93bmxvYWRDc3YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gXCJDb250ZXh0LE9yaWdpbmFsIFVSTCxNb2RpZmllZCBVUkxcXG5cIjtcbiAgICAgICAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24gKExpbmtPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gTGlua09iamVjdC5jb250ZXh0LnJlcGxhY2UoLywvZywgXCIoY29tbWEpXCIpICsgXCIsXCIgKyBMaW5rT2JqZWN0Lm9sZC51cmwgKyBcIixcIiArIExpbmtPYmplY3QubmV3LnVybCArIFwiXFxuXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSB0aGlzLl9fZm9ybWF0RmlsZU5hbWUodGhpcy5maWxlTmFtZSk7XG4gICAgICAgICAgICB3aW5kb3cuc2F2ZUFzKG5ldyBCbG9iKFtvdXRwdXRdLCB7IHR5cGU6IFwidGV4dC9jc3ZcIiB9KSwgdGhpcy5maWxlTmFtZSArIFwiX2xpbmtzLmNzdlwiKTtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiQ1NWXCIsIFwiZG93bmxvYWRcIiwgXCJDU1YgRXhwb3J0XCIpO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmRvd25sb2FkSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmJlZm9yZURpZERvd25sb2FkSHRtbCh0aGlzLmdlbmVyYXRlT3V0cHV0Q29kZShcImVtYWlsXCIpKTtcbiAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSB0aGlzLl9fZm9ybWF0RmlsZU5hbWUodGhpcy5maWxlTmFtZSk7XG4gICAgICAgICAgICB3aW5kb3cuc2F2ZUFzKG5ldyBCbG9iKFtvdXRwdXRdLCB7IHR5cGU6IFwidGV4dC9odG1sXCIgfSksIHRoaXMuZmlsZU5hbWUgKyBcIi5odG1sXCIpO1xuICAgICAgICAgICAgdGhpcy5hZnRlckRpZERvd25sb2FkSHRtbCgpO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmJlZm9yZURpZERvd25sb2FkSHRtbCA9IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gY29kZTtcbiAgICAgICAgfTtcbiAgICAgICAgRU1MV29ya3NwYWNlLnByb3RvdHlwZS5hZnRlckRpZERvd25sb2FkSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiSFRNTFwiLCBcImRvd25sb2FkXCIsIFwiSFRNTCBFeHBvcnRcIik7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuZXhwb3J0Q29kZVRvSFRNTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlRGlkRXhwb3J0Q29kZVRvSFRNTCgpO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRDb2RlID0gdGhpcy5nZW5lcmF0ZU91dHB1dENvZGUoXCJlbWFpbFwiKTtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJEaWRFeHBvcnRDb2RlVG9IVE1MKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuYmVmb3JlRGlkRXhwb3J0Q29kZVRvSFRNTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmV4cG9ydEZvckVsb3F1YSAmJiB0aGlzLmV4cG9ydEZvckVsb3F1YSA9PSBcIlllc1wiKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJIVE1MXCIsIFwiQWRkIEVsb3F1YSBUcmFja2luZ1wiLCBcIkFkZCBFbG9xdWEgVHJhY2tpbmdcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbiAoTGlua09iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFja2luZ09wdE91dCA9IExpbmtPYmplY3Qud2hpdGVMaXN0ZWRVcmwgPT0gTGlua09iamVjdC5uZXcudXJsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUxpbmtPYmplY3QuaXNMaW5rVHlwZShcIm1haWx0b1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIUxpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5oYXMoXCJlbHFUcmFja1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIS9hcHBcXC5pbmZvXFwub3B0dW1cXC5jb20vZ2kudGVzdChMaW5rT2JqZWN0Lm5ldy51cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiZWxxVHJhY2s9dHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFja2luZ09wdE91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpbmtPYmplY3Qud2hpdGVMaXN0ZWRVcmwgPSBMaW5rT2JqZWN0Lm5ldy51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24gKExpbmtPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5oYXMoXCJlbHFUcmFja1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXMuaW5kZXhPZihcImVscVRyYWNrPXRydWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBdEluZGV4KGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBMaW5rT2JqZWN0LkNoYW5nZU1vbml0b3IudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uIChMaW5rT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKFwic1wiKSAmJiBMaW5rT2JqZWN0LnJlcXVpcmVzU0NvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicz1lbWFpbFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKFwic1wiKSAmJiBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZ2V0KFwic1wiKSA9PSBcIm9mdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuc2V0KFwic1wiLCBcImVtYWlsXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIExpbmtPYmplY3QuQ2hhbmdlTW9uaXRvci51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbiAoTGlua09iamVjdCkge1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QuQ2hhbmdlTW9uaXRvci51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmFmdGVyRGlkRXhwb3J0Q29kZVRvSFRNTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24gKExpbmtPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoTGlua09iamVjdC53aGl0ZUxpc3RlZFVybCA9PSBMaW5rT2JqZWN0Lm5ldy51cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXBvcnQgdGhlIG5vbiB0cmFja2VkIGxpbms7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiVHJhY2tpbmctT3B0b3V0XCIsIFwib3ZlcnJpZGVcIiwgTGlua09iamVjdC5uZXcudXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiSFRNTFwiLCBcInZpZXcgc291cmNlY29kZVwiLCBcIkV4cG9ydC9WaWV3IEhUTUxcIik7XG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL2V4cG9ydC1odG1sXCI7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUucmVtb3ZlQWxsU2VhcmNoU3RyaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAvLyB0aGlzLnNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbiAoTGlua09iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChMaW5rT2JqZWN0LnJlYWRPbmx5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwib1wiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwib2luXCIpO1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJ2XCIpO1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJvaWV4XCIpO1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFfbWlkXCIpO1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFfbGlkXCIpO1xuICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFUcmFja1wiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxVHJhY2tJZFwiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwic1wiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiczNcIik7XG4gICAgICAgICAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyZUxpbmtzQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUucmVtb3ZlRWxvcXVhU2VhcmNoU3RyaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAvLyB0aGlzLnNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbiAoTGlua09iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChMaW5rT2JqZWN0LnJlYWRPbmx5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxX21pZFwiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxX2xpZFwiKTtcbiAgICAgICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxVHJhY2tcIik7XG4gICAgICAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVscVRyYWNrSWRcIik7XG4gICAgICAgICAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyZUxpbmtzQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuc2V0VXBTaG9ydGN1dEtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyB2YXIgX3RoaXM9IHRoaXM7XG4gICAgICAgICAgICAvLyB0aGlzLmtleUJvYXJkU2hvcnRjdXRzID0gW107XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gX3RoaXMua2V5Qm9hcmRTaG9ydGN1dHMucHVzaChcbiAgICAgICAgICAgIC8vICAgbmV3IEtleWJvYXJkU2hvcnRjdXQoXG4gICAgICAgICAgICAvLyAgICAgZnVuY3Rpb24oZSl7IHJldHVybiAoZS5jdHJsS2V5fHxlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS53aGljaCA9PSA1MjsgfSxcbiAgICAgICAgICAgIC8vICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gICAgICAgLy9kb3RoaXM7XG4gICAgICAgICAgICAvLyAgICAgICBfdGhpcy5zY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ2Rvd25sb2FkaW5nIGZpbGUnKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgX3RoaXMuZG93bmxvYWRIdG1sKCk7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgfSk7XG4gICAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAgIC8vICAgICBcIkNUUkwgKyBTSElGVCArIDRcIixcbiAgICAgICAgICAgIC8vICAgICBcIkRvd25sb2FkIEhUTUxcIlxuICAgICAgICAgICAgLy8gICApXG4gICAgICAgICAgICAvLyApO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIF90aGlzLmtleUJvYXJkU2hvcnRjdXRzLnB1c2goXG4gICAgICAgICAgICAvLyAgIG5ldyBLZXlib2FyZFNob3J0Y3V0KFxuICAgICAgICAgICAgLy8gICAgIGZ1bmN0aW9uKGUpeyByZXR1cm4gKGUuY3RybEtleXx8ZS5tZXRhS2V5KSAmJiBlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT0gNTE7IH0sXG4gICAgICAgICAgICAvLyAgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vICAgICAgIC8vZG90aGlzO1xuICAgICAgICAgICAgLy8gICAgICAgX3RoaXMuc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyAgICAgICAgIF90aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgICAgICAgLy8gICAgICAgICAgIGlmKExpbmtPYmplY3QuZXJyb3JzLm1lc3NhZ2VzLmxlbmd0aD4wKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIExpbmtPYmplY3QuZXJyb3JzLm1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24oTWVzc2FnZU9iamVjdCl7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgIGlmKE1lc3NhZ2VPYmplY3QudHlwZSA9PSBFcnJvclR5cGUuU3VnZ2VzdGlvbil7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgTWVzc2FnZU9iamVjdC5jdGFIYW5kbGVyKCk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICB9LFxuICAgICAgICAgICAgLy8gICAgIFwiQ1RSTCArIFNISUZUICsgM1wiLFxuICAgICAgICAgICAgLy8gICAgIFwiQXBwbHkgYWxsIHN1Z2dlc3Rpb25zXCJcbiAgICAgICAgICAgIC8vICAgKVxuICAgICAgICAgICAgLy8gKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBfdGhpcy5rZXlCb2FyZFNob3J0Y3V0cy5wdXNoKFxuICAgICAgICAgICAgLy8gICBuZXcgS2V5Ym9hcmRTaG9ydGN1dChcbiAgICAgICAgICAgIC8vICAgICBmdW5jdGlvbihlKXsgcmV0dXJuIChlLmN0cmxLZXl8fGUubWV0YUtleSkgJiYgZS5zaGlmdEtleSAmJiBlLndoaWNoID09IDUwOyB9LFxuICAgICAgICAgICAgLy8gICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyAgICAgICAvL2RvdGhpcztcbiAgICAgICAgICAgIC8vICAgICAgIF90aGlzLnNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gICAgICAgICBfdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICBpZighTGlua09iamVjdC5yZWFkT25seVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgJiYgTGlua09iamVjdC5yZXF1aXJlc1NDb2RlKClcbiAgICAgICAgICAgIC8vICAgICAgICAgICAmJiAhTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmhhcygncycpKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3M9ZW1haWwnKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgICAgfSk7XG4gICAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAgIC8vICAgICBcIkNUUkwgKyBTSElGVCArIDJcIixcbiAgICAgICAgICAgIC8vICAgICBcIkFkZCBzPWVtYWlsIHRvIGFsbCBsaW5rc1wiXG4gICAgICAgICAgICAvLyAgIClcbiAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gX3RoaXMua2V5Qm9hcmRTaG9ydGN1dHMucHVzaChcbiAgICAgICAgICAgIC8vICAgbmV3IEtleWJvYXJkU2hvcnRjdXQoXG4gICAgICAgICAgICAvLyAgICAgZnVuY3Rpb24oZSl7IHJldHVybiAoZS5jdHJsS2V5fHxlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS53aGljaCA9PSA0OTsgfSxcbiAgICAgICAgICAgIC8vICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gICAgICAgLy9kb3RoaXM7XG4gICAgICAgICAgICAvLyAgICAgICBfdGhpcy5zY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgX3RoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24oTGlua09iamVjdCl7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgaWYoTGlua09iamVjdC5yZWFkT25seSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm9cIik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm9pblwiKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwib2lleFwiKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxX21pZFwiKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxX2xpZFwiKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxVHJhY2tcIik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVscVRyYWNrSWRcIik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInNcIik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInMzXCIpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgX3RoaXMuYXJlTGlua3NDb21wbGV0ZSgpO1xuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICB9LFxuICAgICAgICAgICAgLy8gICAgIFwiQ1RSTCArIFNISUZUICsgMVwiLFxuICAgICAgICAgICAgLy8gICAgIFwiUmVtb3ZlIGFsbCBxdWVyeSBzdHJpbmdzIGZyb20gZW1haWxcIlxuICAgICAgICAgICAgLy8gICApXG4gICAgICAgICAgICAvLyApO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gZG9jdW1lbnQub25rZXl1cCA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgLy8gICBmb3IobGV0IHNob3J0Y3V0IG9mIF90aGlzLmtleUJvYXJkU2hvcnRjdXRzKXtcbiAgICAgICAgICAgIC8vICAgICBpZihzaG9ydGN1dC53aGVuICYmIHNob3J0Y3V0LndoZW4oZSkpe1xuICAgICAgICAgICAgLy8gICAgICAgc2hvcnRjdXQuZG9UaGlzKCk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAvLyB9O1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLnJlcGxhY2VTcGVjaWFsQ2hhcmFjdGVycyA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICB2YXIgcmVwbGFjZSA9IHtcbiAgICAgICAgICAgICAgICAxNzQ6IFtcIiZyZWc7XCJdLFxuICAgICAgICAgICAgICAgIDE2OTogW1wiJmNvcHk7XCJdLFxuICAgICAgICAgICAgICAgIDgyMTE6IFtcIiZuZGFzaDtcIl0sXG4gICAgICAgICAgICAgICAgODIxMjogW1wiJm1kYXNoO1wiXSxcbiAgICAgICAgICAgICAgICA4MjIwOiBbXCImbGRxdW87XCJdLFxuICAgICAgICAgICAgICAgIDgyMjE6IFtcIiZyZHF1bztcIl0sXG4gICAgICAgICAgICAgICAgODIxNjogW1wiJmxzcXVvO1wiXSxcbiAgICAgICAgICAgICAgICA4MjE3OiBbXCImcnNxdW87XCJdLFxuICAgICAgICAgICAgICAgIDg0ODI6IFtcIiZ0cmFkZTtcIl1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlcGxhY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGkpKSwgXCJnXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhwLnRlc3QodGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZm91bmQgY2hhcmFjdGVyXCIgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGkpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZVtpXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfTtcbiAgICAgICAgRU1MV29ya3NwYWNlLnByb3RvdHlwZS5wcm9jZXNzSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vY3JlYXRlcyBhIG5ldyB3b3Jrc3BhY2UgZnJvbSBodG1sXG4gICAgICAgICAgICB0aGlzLnNldFVwU2hvcnRjdXRLZXlzKCk7XG4gICAgICAgICAgICB0aGlzLmxpbmtEYXRhID0gW107XG4gICAgICAgICAgICB0aGlzLmludGVsbGlnZW5jZS5vdmVycmlkZGVuID0gW107XG4gICAgICAgICAgICB0aGlzLmludGVsbGlnZW5jZS5ldmFsdWF0ZVJ1bGVzKCk7XG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAvLyAucmVwbGFjZShuZXcgUmVnRXhwKFwiPC9hPlwiLFwiaWdcIiksIFwiPC9hPlxcblwiKVxuICAgICAgICAgICAgdGhpcy53b3JraW5nQ29kZSA9IHRoaXMucmVwbGFjZVNwZWNpYWxDaGFyYWN0ZXJzKHRoaXMuc291cmNlQ29kZSk7XG4gICAgICAgICAgICAvL2RldGVybWluZSBlbWFpbCBoZWFkZXJzXG4gICAgICAgICAgICB0aGlzLl9fZW1sSGVhZGVycyA9IHRoaXMuX19idWlsZEhlYWRlcnMoKTtcbiAgICAgICAgICAgIC8vICAgJHNjb3BlLmRhdGEuaGVhZGVyLFxuICAgICAgICAgICAgLy8gICAkc2NvcGUuZGF0YS5hbGxvd2FibGVIZWFkZXJGaWVsZHMpO1xuICAgICAgICAgICAgLy9yZXBsYWNlIG1lcmdlIGZpZWxkc1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsZU5hbWUgPT0gXCJ1bnRpdGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlUmVnID0gLzx0aXRsZT4oW148XS4qPyk8XFwvdGl0bGU+L2dpO1xuICAgICAgICAgICAgICAgIGlmICh0aXRsZVJlZy50ZXN0KHRoaXMud29ya2luZ0NvZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZVRhZyA9IHRoaXMud29ya2luZ0NvZGUubWF0Y2godGl0bGVSZWcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGVUYWcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlTmFtZSA9IHRoaXMuX19mb3JtYXRGaWxlTmFtZSh0aXRsZVRhZ1swXS5yZXBsYWNlKHRpdGxlUmVnLCBcIiQxXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vcHJldmlldyBTdHVmZlxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3VGV4dCA9IG5ldyBQcmV2aWV3VGV4dE9iamVjdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlld1RleHQuaW5pdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ByZXZpZXcgdGV4dCcsIHRoaXMucHJldmlld1RleHQpO1xuICAgICAgICAgICAgdmFyIF9zdXBlciA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcmUxID0gLzxhXFxiW14+XSo/PihbXFxyXFxuXXwuKSo/PFxcL2E+L2dtLCBuID0gMDtcbiAgICAgICAgICAgIHRoaXMud29ya2luZ0NvZGUgPSB0aGlzLndvcmtpbmdDb2RlLnJlcGxhY2UocmUxLCBmdW5jdGlvbiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICBuKys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kLnJlcGxhY2UoXCI8YVwiLCBcIjxhIGVtbC1pZD1cXFwiXCIgKyBuICsgXCJcXFwiXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgICAgIHRoaXMud29ya2luZ0NvZGUgPSB0aGlzLndvcmtpbmdDb2RlLnJlcGxhY2UocmUxLCBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIG4rKztcbiAgICAgICAgICAgICAgICAvL2dldCBsaW5lXG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBfc3VwZXIud29ya2luZ0NvZGUuc3Vic3RyKDAsIF9zdXBlci53b3JraW5nQ29kZS5pbmRleE9mKGNvbnRleHQpKS5zcGxpdChcIlxcblwiKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGlmICgvKGhyZWZcXD1cXFwiKFteXFxcIlxcPl0qKVxcXCI/KS9nLnRlc3QoY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbisrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG5ldyBMaW5rT2JqZWN0KGxpbmUsIGNvbnRleHQsIF9zdXBlcik7XG4gICAgICAgICAgICAgICAgICAgIGEuaWQgPSBuO1xuICAgICAgICAgICAgICAgICAgICBhLnJlYWRPbmx5ID0gKGEubmV3LmNvbnRhaW5zKFwiLmNvbS9lL2VzLmFzcHhcIikgJiYgYS5uZXcuY29udGFpbnMoXCJ+fmVsb3F1YVwiKSk7XG4gICAgICAgICAgICAgICAgICAgIF9zdXBlci5saW5rRGF0YS5wdXNoKGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ7e0VNTE1ha2VyX0xpbms6XCIgKyBuICsgXCJ9fVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uIChMaW5rT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmludGVsbGlnZW5jZSk7XG4gICAgICAgICAgICAvL3JlZGlyZWN0XG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL2xpbmtzXCI7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuYWRkTmV3SGVhZGVyRmllbGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyW3ZhbHVlXSA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUucmVtb3ZlSGVhZGVyRmllbGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmhlYWRlclt2YWx1ZV07XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuaXNIZWFkZXJTZWxlY3RlZCA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oZWFkZXIuaGFzT3duUHJvcGVydHkoaGVhZGVyKSB8fCB0aGlzLmhlYWRlciA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUudmVyaWZ5TGlua1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVsbGlnZW5jZSAmJiAhdGhpcy5pbnRlbGxpZ2VuY2UuY2FuQ29udGludWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhcmUgdGhlcmUgbGluayBpc3N1ZXM/XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rRGF0YSAmJiB0aGlzLmxpbmtEYXRhLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcmVMaW5rc0NvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuZ2VuZXJhdGVPdXRwdXRDb2RlID0gZnVuY3Rpb24gKHR5cGUsIGNsb25lKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHR5cGUgPSBcImVtYWlsXCI7XG4gICAgICAgICAgICBpZiAoY2xvbmUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBjbG9uZSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMud29ya2luZ0NvZGU7XG4gICAgICAgICAgICAvL3Bvc3QgcHJvY2Vzc2luZy5cbiAgICAgICAgICAgIC8vZG8gcG9zdCBwcm9jZXNzaW5nLlxuICAgICAgICAgICAgLy9leHBvcnQgY29kZT9cbiAgICAgICAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24gKExpbmtPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBpZihMaW5rT2JqZWN0LnJlcXVpcmVzU0NvZGUoKSYmICFMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKFwic1wiKSkgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmFwcGVuZChcInM9ZW1haWxcIik7XG4gICAgICAgICAgICAgICAgaWYgKExpbmtPYmplY3QuaGFzT3duUHJvcGVydHkoXCJkZWxldGVPblJlbmRlclwiKSAmJiBMaW5rT2JqZWN0LmRlbGV0ZU9uUmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJ7e0VNTE1ha2VyX0xpbms6XCIgKyBMaW5rT2JqZWN0LmlkICsgXCJ9fVwiLCBcImdpXCIpLCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoTGlua09iamVjdC5yZWFkT25seSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZE9ubHlVcmwgPSBMaW5rT2JqZWN0LmNvbnRleHQucmVwbGFjZSgvZW1sXFwtaWRcXD1cXFwiWzAtOV17MSx9XFxcIlxccy9nLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UobmV3IFJlZ0V4cChcInt7RU1MTWFrZXJfTGluazpcIiArIExpbmtPYmplY3QuaWQgKyBcIn19XCIsIFwiZ2lcIiksIHJlYWRPbmx5VXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IExpbmtPYmplY3QuY29udGV4dC5pbmRleE9mKFwiaHJlZj1cXFwiXCIgKyBMaW5rT2JqZWN0Lm9sZC51cmwpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Q29udGV4dCA9IExpbmtPYmplY3QuY29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29udGV4dCA9IG5ld0NvbnRleHQuc3Vic3RyKDAsIHN0YXJ0KSArIFwiaHJlZj1cXFwiXCIgKyBMaW5rT2JqZWN0Lm5ldy51cmwgKyBuZXdDb250ZXh0LnN1YnN0cihzdGFydCArIDYgKyBMaW5rT2JqZWN0Lm9sZC51cmwubGVuZ3RoLCBuZXdDb250ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChMaW5rT2JqZWN0LkxpbmtlZEltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZXh0ID0gTGlua09iamVjdC5MaW5rZWRJbWFnZS5nZW5lcmF0ZU91dHB1dChuZXdDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXdDb250ZXh0ID0gbmV3Q29udGV4dC5yZXBsYWNlKC9cXHM/ZW1sXFwtaWRcXD1cXFwiWzAtOV0qXFxcIi9nLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGVuIHVwZGF0ZSB0aGUgd29ya2luZyBjb2RlIHdpdGggdGhlIG5ldyBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShuZXcgUmVnRXhwKFwie3tFTUxNYWtlcl9MaW5rOlwiICsgTGlua09iamVjdC5pZCArIFwifX1cIiwgXCJnaVwiKSwgbmV3Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2ZpbmQgYWxsIGltYWdlcyB3aXRob3V0IGFsdCBhdHRyaWJ1dGUgYW5kIGFkZCBhbHQ9XCJcIjtcbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXRwdXQgd2l0aCBob29rcyB0byA7XG4gICAgICAgICAgICBFTUxNYWtlci5maWx0ZXIubW9kdWxlKFwiYmVmb3JlRGlkR2VuZXJhdGVDb2RlXCIpLmluamVjdChcIkVNTFdvcmtzcGFjZVwiLCB0aGlzKTtcbiAgICAgICAgICAgIG91dHB1dCA9IEVNTE1ha2VyLmZpbHRlci5tb2R1bGUoXCJiZWZvcmVEaWRHZW5lcmF0ZUNvZGVcIikuYXBwbHlGaWx0ZXIob3V0cHV0KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoLzxcXC9hPlxcbnswLDV9KFxcLnwsfFxcP3whfDp8O3xcXHwpL2csIFwiPC9hPiQxXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIG1lcmdpbmcgbGluZXMgd2l0aCBsaW5rcyB0aGF0IHByZXZpb3VzbHkgaGFkIHB1bmN0dWF0aW9uLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUudXBkYXRlTGlua3NBbmRFeHBvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXJlTGlua3NDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiIy9leHBvcnRcIjtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmFyZUxpbmtzQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24gKExpbmtPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUxpbmtPYmplY3QuX19pc0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTGlua09iamVjdC5uZWVkc1RyYWNraW5nQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgRU1MV29ya3NwYWNlLnByb3RvdHlwZS5nZXRMaW5rc1N1bW1hcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBuZWVkc1RyYWNraW5nOiAwLFxuICAgICAgICAgICAgICAgIGludmFsaWRVcmw6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uIChMaW5rT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKExpbmtPYmplY3QubmVlZHNUcmFja2luZ0NvZGUoKSlcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5uZWVkc1RyYWNraW5nKys7XG4gICAgICAgICAgICAgICAgaWYgKExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKSlcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnZhbGlkVXJsKys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLmltcG9ydEh0bWxGcm9tRmlsZURyb3AgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zb3VyY2VDb2RlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZUNvZGUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbGVzID0gZXZ0LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICAgICAgICAgIGlmIChldnQuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBhbGVydCgneW91IGNhbiBvbmx5IGltcG9ydCBvbmUgZmlsZSBhdCBhdCB0aW1lLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIFdTID0gdGhpcztcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHJvcFRleHQgPSBldnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWVQYXJ0cyA9IGZpbGVzWzBdLm5hbWUuc3BsaXQoXCIuXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ID0gbmFtZVBhcnRzLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIFdTLmZpbGVOYW1lID0gV1MuX19mb3JtYXRGaWxlTmFtZShuYW1lUGFydHMuam9pbihcIi5cIikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ID09ICdlbWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBXUy5zb3VyY2VDb2RlID0gV1MuX19zdHJpcEh0bWxBbmRTdWJqZWN0RnJvbUVNTChkcm9wVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBXUy5zb3VyY2VDb2RlID0gZHJvcFRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgV1MucHJvY2Vzc0h0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiIy9saW5rc1wiO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZXNbMF0pO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiSFRNTFwiLCBcImltcG9ydFwiLCBcIkhUTUwgSW1wb3J0IEZpbGUgRHJvcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVNTFdvcmtzcGFjZS5wcm90b3R5cGUsIFwiZGVmYXVsdFNDb2RlXCIsIHtcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZCA9IHRoaXMuX2RlZmF1bHRTQ29kZTtcbiAgICAgICAgICAgICAgICBpZiAob2xkICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWZhdWx0U0NvZGUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbiAoTGlua09iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgRU1MV29ya3NwYWNlLnByb3RvdHlwZS5fX2Zvcm1hdEZpbGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfc2x1Z2lmeV9zdHJpcF9yZSA9IC9bXlxcd1xccy1dL2c7XG4gICAgICAgICAgICB2YXIgX3NsdWdpZnlfaHlwaGVuYXRlX3JlID0gL1stXFxzXSsvZztcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoX3NsdWdpZnlfc3RyaXBfcmUsICcnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoX3NsdWdpZnlfaHlwaGVuYXRlX3JlLCAnLScpO1xuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuX19yZXBsYWNlRWxvcXVhTWVyZ2VGaWVsZHMgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHJlNCA9IC88c3BhbiglMjB8XFxzKWNsYXNzPVwiP2Vsb3F1YWVtYWlsXCI/XFxzPz4oLio/KTxcXC9zcGFuPi9pZztcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmU0LCBcIiMkMiNcIik7XG4gICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgfTtcbiAgICAgICAgRU1MV29ya3NwYWNlLnByb3RvdHlwZS5fX3N0cmlwSHRtbEFuZFN1YmplY3RGcm9tRU1MID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBjb2RlLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgdmFyIGh0bWwgPSBvdXRwdXQucG9wKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dHB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRbaV0uaW5kZXhPZihcIlN1YmplY3Q6XCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBodG1sO1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLl9fcmVtb3ZlV2hpdGVTcGFjZSA9IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gY29kZTtcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIiBcIik7XG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShuZXcgUmVnRXhwKFwiXFx0XCIsIFwiZ1wiKSwgXCIgXCIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoL1xcc3syLDk5OTk5fS9nLCBcIiBcIik7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9O1xuICAgICAgICBFTUxXb3Jrc3BhY2UucHJvdG90eXBlLl9fYnVpbGRIZWFkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5wdXNoKHRoaXMuaGVhZGVyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hhcnNldCA9IHRoaXMuX19nZXRDaGFyc2V0RnJvbUhUTUwodGhpcy5zb3VyY2VDb2RlKTtcbiAgICAgICAgICAgIGlmIChjaGFyc2V0ID09IFwiXCIpXG4gICAgICAgICAgICAgICAgY2hhcnNldCA9IFwiY2hhcnNldD1VVEYtOFwiO1xuICAgICAgICAgICAgaGVhZGVycy5wdXNoKFwiQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7XFxuXFx0XCIgKyBjaGFyc2V0KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGhlYWRlcnMsIGFsbG93YWJsZUhlYWRlckZpZWxkcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpXzEgaW4gdGhpcy5oZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWFkZXIuaGFzT3duUHJvcGVydHkoaV8xKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fX2FsbG93YWJsZUhlYWRlckZpZWxkcy5oYXNPd25Qcm9wZXJ0eShpXzEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnB1c2godGhpcy5fX2FsbG93YWJsZUhlYWRlckZpZWxkc1tpXzFdLnN5bnRheCArIFwiIFwiICsgdGhpcy5oZWFkZXJbaV8xXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9fZW1sSGVhZGVycyA9IGhlYWRlcnMuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJzLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIH07XG4gICAgICAgIEVNTFdvcmtzcGFjZS5wcm90b3R5cGUuX19nZXRDaGFyc2V0RnJvbUhUTUwgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHJlNSA9IC88bWV0YS4qP2NoYXJzZXQ9KFteXFxzXCJdKikvaWcsIGNoYXJzZXQgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIG1ldGFUYWdzID0gY29udGVudC5tYXRjaChyZTUpO1xuICAgICAgICAgICAgaWYgKG1ldGFUYWdzKSB7XG4gICAgICAgICAgICAgICAgbWV0YVRhZ3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhcnNldFZhbHMgPSBpdGVtLm1hdGNoKC9jaGFyc2V0PShbXlxcc1wiXSopL2lnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJzZXRWYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gY2hhcnNldFZhbHNbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gXCJjaGFyc2V0PVVURi04XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGFyc2V0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRU1MV29ya3NwYWNlO1xuICAgIH0oKSk7XG4gICAgRU1MTW9kdWxlLkVNTFdvcmtzcGFjZSA9IEVNTFdvcmtzcGFjZTtcbn0pKEVNTE1vZHVsZSB8fCAoRU1MTW9kdWxlID0ge30pKTtcblxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgSW50ZWxsaWdlbmNlQWxlcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEludGVsbGlnZW5jZUFsZXJ0KCkge1xuICAgICAgICB0aGlzLm92ZXJyaWRlID0gZmFsc2U7XG4gICAgfVxuICAgIEludGVsbGlnZW5jZUFsZXJ0LnByb3RvdHlwZS5nZW5lcmF0ZUd1aWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIHM0KCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG4gICAgICAgICAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVsbGlnZW5jZUFsZXJ0LnByb3RvdHlwZSwgXCJ0eXBlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgICAgICB0aGlzLl90eXBlID0gbmV3VmFsO1xuICAgICAgICAgICAgdGhpcy5jbGVhblR5cGUgPSBFcnJvclR5cGVbbmV3VmFsXTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgSW50ZWxsaWdlbmNlQWxlcnQucHJvdG90eXBlLnNldE92ZXJyaWRlU3RhdHVzID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICB0aGlzLm92ZXJyaWRlID0gdmFsO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmlkICsgXCIgLSBvdmVycmlkZGVuXCIpO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVsbGlnZW5jZUFsZXJ0O1xufSgpKTtcbnZhciBFTUxNYWtlckludGVsbGlnZW5jZTtcbihmdW5jdGlvbiAoRU1MTWFrZXJJbnRlbGxpZ2VuY2UpIHtcbiAgICB2YXIgSW50ZWxsaWdlbmNlQ2VudGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW50ZWxsaWdlbmNlQ2VudGVyKCRtb25pdG9yLCAkc2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Njb3BlID0gJHNjb3BlO1xuICAgICAgICAgICAgdGhpcy5fbW9uaXRvciA9ICRtb25pdG9yO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hUeXBlID0gdGhpcy5kZWZhdWx0U2VhcmNoVHlwZSgpO1xuICAgICAgICB9XG4gICAgICAgIEludGVsbGlnZW5jZUNlbnRlci5wcm90b3R5cGUuc2V0VHlwZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVHlwZSA9IHZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZWxsaWdlbmNlQ2VudGVyLnByb3RvdHlwZS5kZWZhdWx0U2VhcmNoVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0eXBlcyA9IHRoaXMuX21vbml0b3IudHlwZXM7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fbW9uaXRvci50YWJzKS5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgOiAodGhpcy5fbW9uaXRvci50YWJzKVsoT2JqZWN0LmtleXModGhpcy5fbW9uaXRvci50YWJzKVswXSldO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlbGxpZ2VuY2VDZW50ZXIucHJvdG90eXBlLmNhblZpZXdBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fbW9uaXRvci50YWJzKS5sZW5ndGggPiAxO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZWxsaWdlbmNlQ2VudGVyLnByb3RvdHlwZSwgXCJzZWFyY2hcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGVzID0gdGhpcy5fbW9uaXRvci50eXBlcztcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInNlYXJjaFR5cGVcIix0aGlzLnNlYXJjaFR5cGUpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlcyAmJiB0aGlzLnNlYXJjaFR5cGUgaW4gdHlwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogdGhpcy5zZWFyY2hUeXBlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiB0aGlzLmRlZmF1bHRTZWFyY2hUeXBlKCkgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEludGVsbGlnZW5jZUNlbnRlcjtcbiAgICB9KCkpO1xuICAgIEVNTE1ha2VySW50ZWxsaWdlbmNlLkludGVsbGlnZW5jZUNlbnRlciA9IEludGVsbGlnZW5jZUNlbnRlcjtcbiAgICB2YXIgSW50ZWxsaWdlbmNlRW5naW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW50ZWxsaWdlbmNlRW5naW5lKCkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jYW5Db250aW51ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZFJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgSW50ZWxsaWdlbmNlRW5naW5lLnByb3RvdHlwZS5fX2xvY2F0ZVNjb3BlID0gZnVuY3Rpb24gKHNjb3BlKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zY29wZXMuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnNjb3BlID09IHNjb3BlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBuZXcgSW50ZWxsaWdlbmNlTW9kdWxlKHNjb3BlKTtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuc2NvcGVzLnB1c2goYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBJbnRlbGxpZ2VuY2VFbmdpbmUucHJvdG90eXBlLnJlYWRPdXRSdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHRoaXMuc2NvcGVzO1xuICAgICAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIC8vbGV0IHRyYXNoTW9uaXRvciA9IG5ldyBJbnRlbGxpZ2VuY2VNb25pdG9yKGl0ZW0uc2NvcGUpO1xuICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IE9iamVjdC5rZXlzKGl0ZW0ucnVsZXMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdHJhc2hNb25pdG9yID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9ydW4gZWFjaCBvZiB0aGUgZnVuY3Rpb25zIGFuZCByZXR1cm4gdGhlIHN1YnJ0LlxuICAgICAgICB9O1xuICAgICAgICBJbnRlbGxpZ2VuY2VFbmdpbmUucHJvdG90eXBlLm1vZHVsZSA9IGZ1bmN0aW9uIChzY29wZSkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZSA9IHRoaXMuX19sb2NhdGVTY29wZShzY29wZSk7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW50ZWxsaWdlbmNlRW5naW5lO1xuICAgIH0oKSk7XG4gICAgRU1MTWFrZXJJbnRlbGxpZ2VuY2UuSW50ZWxsaWdlbmNlRW5naW5lID0gSW50ZWxsaWdlbmNlRW5naW5lO1xuICAgIHZhciBJbnRlbGxpZ2VuY2VNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbnRlbGxpZ2VuY2VNb2R1bGUoc2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICAgICAgICAgIHRoaXMucnVsZXMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBJbnRlbGxpZ2VuY2VNb2R1bGUucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludGVsbGlnZW5jZU1vbml0b3IodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVsbGlnZW5jZU1vZHVsZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoaWQsIHJ1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucnVsZXNbaWRdID0gcnVsZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW50ZWxsaWdlbmNlTW9kdWxlO1xuICAgIH0oKSk7XG4gICAgRU1MTWFrZXJJbnRlbGxpZ2VuY2UuSW50ZWxsaWdlbmNlTW9kdWxlID0gSW50ZWxsaWdlbmNlTW9kdWxlO1xuICAgIHZhciBJbnRlbGxpZ2VuY2VNb25pdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEludGVsbGlnZW5jZU1vbml0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEludGVsbGlnZW5jZU1vbml0b3IocGFyZW50U2NvcGUpIHtcbiAgICAgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHBhcmVudFNjb3BlLnJ1bGVzO1xuICAgICAgICAgICAgdGhpcy5vdmVycmlkZGVuID0gW107XG4gICAgICAgICAgICB0aGlzLmluamVjdChcIkludGVsbGlnZW5jZU1vbml0b3JcIiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgSW50ZWxsaWdlbmNlTW9uaXRvci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICAgICAgICB0aGlzLmNhbkNvbnRpbnVlID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZWxsaWdlbmNlTW9uaXRvci5wcm90b3R5cGUuYXNzb2NpYXRlVmFyaWFibGUgPSBmdW5jdGlvbiAoYWNjZXNzb3IsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmluamVjdChhY2Nlc3NvciwgdmFsdWUpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiYXNzb2NpYXRlVmFyaWFibGUgaXMgZGVwcmVjaWF0ZWQsIHVzZSBpbmplY3QgbWV0aG9kLlwiKTtcbiAgICAgICAgICAgIC8vIHRoaXMudmFyaWFibGVzW2FjY2Vzc29yXSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlbGxpZ2VuY2VNb25pdG9yLnByb3RvdHlwZS5ldmFsdWF0ZVJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgLy9sb29rIGZvciBpbmplY3Rpb24gcGFyYW1ldGVyc1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIC8vbGFzdCBwYXJhbWV0ZXIgaXMgdGhlIGZ1dW5jdGlvbjtcbiAgICAgICAgICAgIHZhciBmdW5jO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnZhcmlhYmxlcyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5qZWN0b3IgPSB0aGlzLl9fZ2V0SW5qZWN0b3IocnVsZSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaW5qZWN0b3IuZm4uYXBwbHkobnVsbCwgaW5qZWN0b3IuYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBydWxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBJbnRlbGxpZ2VuY2VNb25pdG9yLnByb3RvdHlwZS5ldmFsdWF0ZVJ1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdmFyIHJ1bGVzID0gT2JqZWN0LmtleXModGhpcy5ydWxlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJ1bGVzXzEgPSBydWxlczsgX2kgPCBydWxlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZXZhbHVhdGVSdWxlKHRoaXMucnVsZXNbcnVsZV0pO1xuICAgICAgICAgICAgICAgIHZhciBwcm9jZWVkID0gcmVzdWx0Lmhhc093blByb3BlcnR5KFwid2hlblwiKSA/IHJlc3VsdC53aGVuLmFwcGx5KG51bGwpIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHByb2NlZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUFVTSCBBTEVSVCBNRVNTQUdFLlxuICAgICAgICAgICAgICAgICAgICB2YXIgSUEgPSBuZXcgSW50ZWxsaWdlbmNlQWxlcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgSUEuaWQgPSByZXN1bHQuaWQgPT09IHVuZGVmaW5lZCB8fCByZXN1bHQuaWQgPT0gXCJcIiA/IElBLmdlbmVyYXRlR3VpZCgpIDogcmVzdWx0LmlkO1xuICAgICAgICAgICAgICAgICAgICBJQS50eXBlID0gcmVzdWx0LnR5cGUgPT09IHVuZGVmaW5lZCA/IEVycm9yVHlwZS5XYXJuIDogcmVzdWx0LnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIElBLnNldmVyaXR5ID0gcmVzdWx0LnNldmVyaXR5ID09PSB1bmRlZmluZWQgPyBFcnJvclNldmVyaXR5Llplcm8gOiByZXN1bHQuc2V2ZXJpdHk7XG4gICAgICAgICAgICAgICAgICAgIElBLnRpdGxlID0gcmVzdWx0LnRpdGxlID09PSB1bmRlZmluZWQgPyBcIlwiIDogcmVzdWx0LnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBJQS5kZXNjcmlwdGlvbiA9IHJlc3VsdC5kZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHJlc3VsdC5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgSUEucmVzb3VyY2UgPSByZXN1bHQucmVzb3VyY2UgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiByZXN1bHQucmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIElBLnN1Z2dlc3Rpb24gPSByZXN1bHQuc3VnZ2VzdGlvbiA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHJlc3VsdC5zdWdnZXN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBJQS5yZXNvdXJjZVRleHQgPSByZXN1bHQucmVzb3VyY2VUZXh0ID09PSB1bmRlZmluZWQgPyBcIlJlYWQgbW9yZVwiIDogcmVzdWx0LnJlc291cmNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgSUEuY3RhSGFuZGxlciA9IHJlc3VsdC5jdGEgJiYgcmVzdWx0LmN0YS5oYW5kbGVyID8gcmVzdWx0LmN0YS5oYW5kbGVyIDogZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICAgICAgICAgICAgICBJQS5jdGFMYWJlbCA9IHJlc3VsdC5jdGEgJiYgcmVzdWx0LmN0YS5sYWJlbCA/IHJlc3VsdC5jdGEubGFiZWwgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBJQS5jYW5Db250aW51ZSA9IHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcImNhbkNvbnRpbnVlXCIpID8gcmVzdWx0LmNhbkNvbnRpbnVlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKElBKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vdmVycmlkZGVuLmluZGV4T2YodGhpcy5tZXNzYWdlc1tpXS5pZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzW2ldLm92ZXJyaWRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2VzW2ldLmNhbkNvbnRpbnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5tZXNzYWdlc1tpXS5vdmVycmlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5Db250aW51ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGEuX3R5cGUgPiBiLl90eXBlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAoYS5fdHlwZSA8IGIuX3R5cGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZWxsaWdlbmNlTW9uaXRvci5wcm90b3R5cGUsIFwidGFic1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0ID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFt0aGlzLm1lc3NhZ2VzW2ldLmNsZWFuVHlwZV0gPSB0aGlzLm1lc3NhZ2VzW2ldLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEludGVsbGlnZW5jZU1vbml0b3IucHJvdG90eXBlLCBcInR5cGVzXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBvdXRwdXQgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W3RoaXMubWVzc2FnZXNbaV0udHlwZV0gPSBFcnJvclR5cGVbdGhpcy5tZXNzYWdlc1tpXS50eXBlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW50ZWxsaWdlbmNlTW9uaXRvci5wcm90b3R5cGUsIFwiY291bnRcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0W0Vycm9yVHlwZVt0aGlzLm1lc3NhZ2VzW2ldLnR5cGVdXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbRXJyb3JUeXBlW3RoaXMubWVzc2FnZXNbaV0udHlwZV1dID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbRXJyb3JUeXBlW3RoaXMubWVzc2FnZXNbaV0udHlwZV1dKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEludGVsbGlnZW5jZU1vbml0b3I7XG4gICAgfShJbmplY3Rvck1vZHVsZSkpO1xuICAgIEVNTE1ha2VySW50ZWxsaWdlbmNlLkludGVsbGlnZW5jZU1vbml0b3IgPSBJbnRlbGxpZ2VuY2VNb25pdG9yO1xufSkoRU1MTWFrZXJJbnRlbGxpZ2VuY2UgfHwgKEVNTE1ha2VySW50ZWxsaWdlbmNlID0ge30pKTtcbnZhciBFTUxNYWtlcjtcbihmdW5jdGlvbiAoRU1MTWFrZXIpIHtcbiAgICBFTUxNYWtlci5pbnRlbGxpZ2VuY2UgPSBuZXcgRU1MTWFrZXJJbnRlbGxpZ2VuY2UuSW50ZWxsaWdlbmNlRW5naW5lKCk7XG59KShFTUxNYWtlciB8fCAoRU1MTWFrZXIgPSB7fSkpO1xuXG5mdW5jdGlvbiBnZXRPZmZsaW5lVmVyc2lvbk51bWJlcigpIHtcbiAgICB2YXIgb3V0cHV0ID0gXCJcIjtcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmRleE9mKFwib2ZmbGluZV92ZXJzaW9uXCIpKSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxLCB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmxlbmd0aCkuc3BsaXQoXCImXCIpO1xuICAgICAgICBwYXJhbXMuZm9yRWFjaChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgICAgIGlmIChwYXJhbS5pbmRleE9mKFwib2ZmbGluZV92ZXJzaW9uPVwiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gcGFyYW0uc3Vic3RyKFwib2ZmbGluZV92ZXJzaW9uPVwiLmxlbmd0aCwgcGFyYW0ubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG52YXIgQWNjZXNzT25saW5lVmVyc2lvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWNjZXNzT25saW5lVmVyc2lvbihhcmdzKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gXCJhdHRlbXB0aW5nXCI7XG4gICAgICAgIHRoaXMuaGVhZGxpbmUgPSBcIkNoZWNraW5nIGF2YWlsYWJpbGl0eSBvZiBvbmxpbmUgdmVyc2lvblwiO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIklmIHdlJ3JlIGFibGUgdG8gYWNjZXNzIHRoZSBvbmxpbmUgdmVyc2lvbiwgeW91IHdpbGwgYmUgcmVkaXJlY3RlZC5cIjtcbiAgICAgICAgaWYgKGFyZ3Muc3VjY2VzcyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgYXJncy5zdWNjZXNzID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICBpZiAoYXJncy5vbmVycm9yID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBhcmdzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHdpbmRvdy5MT0NBTEhPU1QgPSB0aGlzLmlzTG9jYWxNYWNoaW5lKCk7XG4gICAgICAgIHdpbmRvdy5PRkZMSU5FX1ZFUlNJT04gPSBnZXRPZmZsaW5lVmVyc2lvbk51bWJlcigpO1xuICAgICAgICBpZiAod2luZG93LkxPQ0FMSE9TVCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICAgICAgdGhpcy5vYnRhaW5LZXlGcm9tU2VydmVyKGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBcImZhaWxlZFwiO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHdpbmRvdy5QQUdFX1RJVExFO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFjY2Vzc09ubGluZVZlcnNpb24ucHJvdG90eXBlLm9idGFpbktleUZyb21TZXJ2ZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICBpZiAodGhpcy5pc0xvY2FsTWFjaGluZSgpKSB7XG4gICAgICAgICAgICB2YXIgciwgYSwgbTtcbiAgICAgICAgICAgIHdpbmRvdy5yZWRpcmVjdEpzb25wQ2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3Muc3VjY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZPVU5EP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vam9obnByb2VzdGFrZXMuZ2l0aHViLmlvL2VtbC1tYWtlcj9vZmZsaW5lX3ZlcnNpb249XCIgKyB3aW5kb3cuQ1VSUkVOVF9WRVJTSU9OO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vdCBnaXRodWInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLFxuICAgICAgICAgICAgICAgIGEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gICAgICAgICAgICByLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFyZ3Mub25lcnJvcigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9jYWxNYWNoaW5lKCkpIHtcbiAgICAgICAgICAgICAgICByLnNyYyA9IFwiaHR0cDovL2pvaG5wcm9lc3Rha2VzLmdpdGh1Yi5pby9lbWwtbWFrZXIvcHJvZC9hcHAvY2FucmVkaXJlY3QuanNcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUociwgbSk7XG4gICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gd2luZG93LlBBR0VfVElUTEUgKyBcIiAoT2ZmbGluZSBNb2RlKVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBcImZhaWxlZFwiO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHdpbmRvdy5QQUdFX1RJVExFO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBY2Nlc3NPbmxpbmVWZXJzaW9uLnByb3RvdHlwZS5nZXRPZmZsaW5lVmVyc2lvbk51bWJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IFwiXCI7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoXCJvZmZsaW5lX3ZlcnNpb25cIikpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxLCB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmxlbmd0aCkuc3BsaXQoXCImXCIpO1xuICAgICAgICAgICAgcGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLmluZGV4T2YoXCJvZmZsaW5lX3ZlcnNpb249XCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gcGFyYW0uc3Vic3RyKFwib2ZmbGluZV92ZXJzaW9uPVwiLmxlbmd0aCwgcGFyYW0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG4gICAgQWNjZXNzT25saW5lVmVyc2lvbi5wcm90b3R5cGUuaXNMb2NhbE1hY2hpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYuaW5kZXhPZignam9obnByb2VzdGFrZXMuZ2l0aHViLmlvJykgPT0gLTEgJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKCdsb2NhbGhvc3Q6JykgPT0gLTE7XG4gICAgfTtcbiAgICByZXR1cm4gQWNjZXNzT25saW5lVmVyc2lvbjtcbn0oKSk7XG52YXIgVXBkYXRlTW9kdWxlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVcGRhdGVNb2R1bGUoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVmVyc2lvbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZUZvcmNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9mZmxpbmVWZXJzaW9uID0gd2luZG93Lk9GRkxJTkVfVkVSU0lPTiA9PT0gdW5kZWZpbmVkID8gZ2V0T2ZmbGluZVZlcnNpb25OdW1iZXIoKSA6IHdpbmRvdy5PRkZMSU5FX1ZFUlNJT047XG4gICAgICAgIHRoaXMub25saW5lVmVyc2lvbiA9IHdpbmRvdy5DVVJSRU5UX1ZFUlNJT047XG4gICAgICAgIC8vdHJlYXQgbG9jYWxob3N0Ojg4ODggYXMgaW50ZXJuZXRcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImxvY2FsaG9zdFwiKSA+IC0xKSB7XG4gICAgICAgICAgICB3aW5kb3cuTE9DQUxIT1NUID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2ZmbGluZVZlcnNpb24gPT0gXCJcIikge1xuICAgICAgICAgICAgdGhpcy5hY2Nlc3NpbmdGcm9tT2ZmbGluZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMub2ZmbGluZVZlcnNpb24gJiYgd2luZG93LkxPQ0FMSE9TVCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjZXNzaW5nRnJvbU9mZmxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub2ZmbGluZVZlcnNpb24gJiYgKHRoaXMub2ZmbGluZVZlcnNpb24gIT09IHRoaXMub25saW5lVmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZlcnNpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBvZlYgPSBuZXcgQXBwbGljYXRpb25WZXJzaW9uKHRoaXMub2ZmbGluZVZlcnNpb24pLCBvblYgPSBuZXcgQXBwbGljYXRpb25WZXJzaW9uKHRoaXMub25saW5lVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGb3JjZWQgPSBvZlYuY29tcGFyZUFnYWluc3Qob25WKSA8PSBBcHBWZXJzaW9uRGlmZmVyZW5jZVR5cGUuUEFUQ0g7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVUERBVEVGT1JDRUQ/XCIsIHRoaXMudXBkYXRlRm9yY2VkLCBvZlYsIG9uVik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVXBkYXRlTW9kdWxlLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVmVyc2lvbiAmJiB0aGlzLnVwZGF0ZUZvcmNlZDtcbiAgICB9O1xuICAgIFVwZGF0ZU1vZHVsZS5wcm90b3R5cGUuc2hvd1RlYXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2ZmbGluZVZlcnNpb24gPT0gXCJcIiAmJiAhd2luZG93LkxPQ0FMSE9TVDtcbiAgICB9O1xuICAgIFVwZGF0ZU1vZHVsZS5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAob2ZmbGluZSwgb25saW5lKSB7XG4gICAgICAgIHZhciBvZmZsaW5lVmVyc2lvbiA9IG9mZmxpbmUuc3BsaXQoXCIuXCIpLCBvbmxpbmVWZXJzaW9uID0gb25saW5lLnNwbGl0KFwiLlwiKSwgbWF0Y2ggPSAwLCBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbmxpbmVWZXJzaW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAob25saW5lVmVyc2lvbltpXSA9PSBvZmZsaW5lVmVyc2lvbltpXSlcbiAgICAgICAgICAgICAgICBtYXRjaCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaCA8IDMpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuICAgIHJldHVybiBVcGRhdGVNb2R1bGU7XG59KCkpO1xudmFyIEFwcFZlcnNpb25EaWZmZXJlbmNlVHlwZTtcbihmdW5jdGlvbiAoQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlKSB7XG4gICAgQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlW0FwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtcIk1BSk9SXCJdID0gMF0gPSBcIk1BSk9SXCI7XG4gICAgQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlW0FwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtcIk1JTk9SXCJdID0gMV0gPSBcIk1JTk9SXCI7XG4gICAgQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlW0FwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtcIlBBVENIXCJdID0gMl0gPSBcIlBBVENIXCI7XG4gICAgQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlW0FwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtcIlNVQlBBVENIXCJdID0gM10gPSBcIlNVQlBBVENIXCI7XG4gICAgQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlW0FwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtcIk5PTkVcIl0gPSA0XSA9IFwiTk9ORVwiO1xufSkoQXBwVmVyc2lvbkRpZmZlcmVuY2VUeXBlIHx8IChBcHBWZXJzaW9uRGlmZmVyZW5jZVR5cGUgPSB7fSkpO1xudmFyIEFwcGxpY2F0aW9uVmVyc2lvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXBwbGljYXRpb25WZXJzaW9uKHZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5fdmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMudmVyc2lvbk9iamVjdCA9IHRoaXMuX3ZlcnNpb24uc3BsaXQoXCIuXCIpLm1hcChmdW5jdGlvbiAobikgeyByZXR1cm4gcGFyc2VJbnQobik7IH0pO1xuICAgIH1cbiAgICBBcHBsaWNhdGlvblZlcnNpb24ucHJvdG90eXBlLmNvbXBhcmVBZ2FpbnN0ID0gZnVuY3Rpb24gKE90aGVyVmVyc2lvbikge1xuICAgICAgICB2YXIgbWUgPSB0aGlzLnZlcnNpb25PYmplY3QsIG90aGVyID0gT3RoZXJWZXJzaW9uLnZlcnNpb25PYmplY3QsIG1hdGNoID0gMCwgb3V0cHV0ID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobWVbaV0gPT0gb3RoZXJbaV0pIHtcbiAgICAgICAgICAgICAgICBtYXRjaCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFwcFZlcnNpb25EaWZmZXJlbmNlVHlwZVtBcHBWZXJzaW9uRGlmZmVyZW5jZVR5cGVbbWF0Y2hdXTtcbiAgICB9O1xuICAgIHJldHVybiBBcHBsaWNhdGlvblZlcnNpb247XG59KCkpO1xuXG52YXIgU2VjdXJlR2F0ZXdheSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2VjdXJlR2F0ZXdheShsb2dpbkNhbGxiYWNrLCAkc2NvcGUpIHtcbiAgICAgICAgdGhpcy5jYW5Mb2dpbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvZ2luQ2FsbGJhY2sgPSBsb2dpbkNhbGxiYWNrO1xuICAgICAgICB0aGlzLmxvZ2luVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNlc3Npb25Vc2VyRW1haWwgPSBcIlwiO1xuICAgICAgICB0aGlzLnRpbWVyRGVsYXkgPSA1MDA7XG4gICAgICAgIHRoaXMuc2FsdCA9IFwiNDdkYWZlYTlhYWUzYjI4YWI1YzM5ZWI3ZjdkMmM5MjRcIjtcbiAgICAgICAgdGhpcy5lbWFpbFJlZ2V4ID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkTG9jYWxTdG9yYWdlS2V5ID0gXCJFTUxNYWtlci5lbWxTZXNzaW9uVUlEXCI7XG4gICAgICAgIGlmICghd2luZG93LnBlcnNpc3Rfc3RvcmUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5wZXJzaXN0X3N0b3JlID0gbmV3IHdpbmRvdy5QZXJzaXN0LlN0b3JlKCdFTUxNYWtlcicpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cucGVyc2lzdF9zdG9yZS5zYXZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgU0cgPSB0aGlzO1xuICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL2xvZ2luXCI7XG4gICAgfVxuICAgIFNlY3VyZUdhdGV3YXkucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmhhc1NhdmVkU2Vzc2lvbklkKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRFbWFpbEFkZHJlc3ModGhpcy5zZXNzaW9uSWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uVXNlckVtYWlsID0gdGhpcy5zZXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgLy8gbG9naW5DYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiMvbG9naW5cIjtcbiAgICAgICAgICAgICAgICAvL2F1dG8gbG9ncyBpbjtcbiAgICAgICAgICAgICAgICAvL2lzIG9mZmxpbmUgLT5nZXQgb25saW5lIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiMvbWFpblwiO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRDdXJyZW50VXNlcihfdGhpcy5zZXNzaW9uVXNlckVtYWlsKTtcbiAgICAgICAgICAgICAgICB9LCB0aGlzLnRpbWVyRGVsYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiIy9sb2dpblwiO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvblVzZXJFbWFpbCA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL2xvZ2luXCI7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25Vc2VyRW1haWwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnNlc3Npb25Vc2VyRW1haWwgPT0gXCJcIiB8fCAhX3RoaXMuaGFzU2F2ZWRTZXNzaW9uSWQoKSkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiMvbG9naW5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTZWN1cmVHYXRld2F5LnByb3RvdHlwZS5sb2dPdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubG9naW5Bc090aGVyKCk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gXCJcIjtcbiAgICAgICAgdGhpcy5zZXNzaW9uVXNlckVtYWlsID0gXCJcIjtcbiAgICAgICAgd2luZG93LnBlcnNpc3Rfc3RvcmUucmVtb3ZlKHRoaXMuc2Vzc2lvbklkTG9jYWxTdG9yYWdlS2V5KTtcbiAgICAgICAgaWYgKFwicmVsb2FkXCIgaW4gbG9jYXRpb24pIHtcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNlY3VyZUdhdGV3YXkucHJvdG90eXBlLmxvZ2luQXNPdGhlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubG9naW5UaW1lcik7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvZ2luVGltZXI7XG4gICAgfTtcbiAgICBTZWN1cmVHYXRld2F5LnByb3RvdHlwZS5zZXNzaW9uVXBkYXRlVXNlckVtYWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRFbWFpbEFkZHJlc3ModGhpcy5zZXNzaW9uVXNlckVtYWlsKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50VXNlcih0aGlzLnNlc3Npb25Vc2VyRW1haWwpO1xuICAgICAgICAgICAgdGhpcy5sb2dpbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL21haW5cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gXCJTb3JyeSEgWW91IGhhdmUgdG8gZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTZWN1cmVHYXRld2F5LnByb3RvdHlwZS5oYXNTYXZlZFNlc3Npb25JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNhdmVkRW1haWxJZCA9IHdpbmRvdy5wZXJzaXN0X3N0b3JlLmdldCh0aGlzLnNlc3Npb25JZExvY2FsU3RvcmFnZUtleSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNhdmVkRW1haWxJZCk7XG4gICAgICAgIGlmIChzYXZlZEVtYWlsSWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbklkID0gdGhpcy5kZWNyeXB0KHNhdmVkRW1haWxJZCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbklkID0gXCJcIjtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2VjdXJlR2F0ZXdheS5wcm90b3R5cGUuZW5jcnlwdCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIHZhciBvdXRwdXQgPSB0ZXh0ICsgXCJcIjtcbiAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoLy4vZ2ksIGZ1bmN0aW9uIChjaCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjaC5jaGFyQ29kZUF0KDApKzEpO1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2guY2hhckNvZGVBdCgwKSArIDEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuICAgIFNlY3VyZUdhdGV3YXkucHJvdG90eXBlLmRlY3J5cHQgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICB2YXIgb3V0cHV0ID0gdGV4dCArIFwiXCI7XG4gICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC8uL2dpLCBmdW5jdGlvbiAoY2gpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coY2guY2hhckNvZGVBdCgwKSsxKTtcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCkgLSAxKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbiAgICBTZWN1cmVHYXRld2F5LnByb3RvdHlwZS5zZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICB2YXIgaGFzaCA9IHdpbmRvdy5DcnlwdG9KUy5NRDUoZW1haWwgKyB0aGlzLnNhbHQpLnRvU3RyaW5nKCk7XG4gICAgICAgIHdpbmRvdy5wZXJzaXN0X3N0b3JlLnNldCh0aGlzLnNlc3Npb25JZExvY2FsU3RvcmFnZUtleSwgdGhpcy5lbmNyeXB0KGVtYWlsKSk7XG4gICAgICAgIHdpbmRvdy5nYSgnc2V0JywgJ3VzZXJJZCcsIGhhc2gpO1xuICAgIH07XG4gICAgU2VjdXJlR2F0ZXdheS5wcm90b3R5cGUuaXNWYWxpZEVtYWlsQWRkcmVzcyA9IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICBpZiAodGhpcy5lbWFpbFJlZ2V4LnRlc3QoZW1haWwpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbWFpbCwgXCJpcyB2YWxpZFwiKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZW1haWwsIFwiaXMgbm90IHZhbGlkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2VjdXJlR2F0ZXdheTtcbn0oKSk7XG5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEtleWJvYXJkU2hvcnRjdXRFbnVtO1xuKGZ1bmN0aW9uIChLZXlib2FyZFNob3J0Y3V0RW51bSkge1xuICAgIEtleWJvYXJkU2hvcnRjdXRFbnVtW0tleWJvYXJkU2hvcnRjdXRFbnVtW1wiRU5BQkxFRFwiXSA9IDBdID0gXCJFTkFCTEVEXCI7XG4gICAgS2V5Ym9hcmRTaG9ydGN1dEVudW1bS2V5Ym9hcmRTaG9ydGN1dEVudW1bXCJESVNBQkxFRFwiXSA9IDFdID0gXCJESVNBQkxFRFwiO1xufSkoS2V5Ym9hcmRTaG9ydGN1dEVudW0gfHwgKEtleWJvYXJkU2hvcnRjdXRFbnVtID0ge30pKTtcbnZhciBLZXlCb2FyZFNob3J0Y3V0cyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEtleUJvYXJkU2hvcnRjdXRzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEtleUJvYXJkU2hvcnRjdXRzKCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5ydWxlcyA9IHt9O1xuICAgICAgICB0aGlzLnN0YXR1cyA9IEtleWJvYXJkU2hvcnRjdXRFbnVtLkVOQUJMRUQ7XG4gICAgfVxuICAgIEtleUJvYXJkU2hvcnRjdXRzLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChuYW1lLCBydWxlKSB7XG4gICAgICAgIHRoaXMucnVsZXNbbmFtZV0gPSBydWxlO1xuICAgIH07XG4gICAgS2V5Qm9hcmRTaG9ydGN1dHMucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIEtTID0gdGhpcztcbiAgICAgICAgZG9jdW1lbnQub25rZXl1cCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gS2V5Ym9hcmRTaG9ydGN1dEVudW0uRElTQUJMRUQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgS1MuZXZhbHVhdGUoZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBLZXlCb2FyZFNob3J0Y3V0cy5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMucnVsZXMpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpbmplY3RvciA9IHRoaXMuX19nZXRJbmplY3Rvcih0aGlzLnJ1bGVzW2tleXNbaV1dKTtcbiAgICAgICAgICAgIHZhciBzaG9ydGN1dCA9IGluamVjdG9yLmZuLmFwcGx5KG51bGwsIGluamVjdG9yLmFyZ3MpO1xuICAgICAgICAgICAgaWYgKHNob3J0Y3V0LndoZW4gJiYgc2hvcnRjdXQud2hlbihlKSkge1xuICAgICAgICAgICAgICAgIHNob3J0Y3V0LmRvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBLZXlCb2FyZFNob3J0Y3V0cztcbn0oSW5qZWN0b3JNb2R1bGUpKTtcbnZhciBFTUxNYWtlcjtcbihmdW5jdGlvbiAoRU1MTWFrZXIpIHtcbiAgICBFTUxNYWtlci5rZXlib2FyZCA9IG5ldyBLZXlCb2FyZFNob3J0Y3V0cygpO1xufSkoRU1MTWFrZXIgfHwgKEVNTE1ha2VyID0ge30pKTtcblxuRU1MTWFrZXIuZmlsdGVyLm1vZHVsZShcImJlZm9yZURpZERvd25sb2FkRW1sXCIpLmFkZChbXCJFTUxXb3Jrc3BhY2VcIiwgZnVuY3Rpb24gKEVNTFdvcmtzcGFjZSkge1xuICAgICAgICAvLyBFTUxXb3Jrc3BhY2Uud29ya2luZ0NvZGUgPSBFTUxXb3Jrc3BhY2Uud29ya2luZ0NvZGUucmVwbGFjZSgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG91dHB1dCkge1xuICAgICAgICAgICAgRU1MV29ya3NwYWNlLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uIChMaW5rT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5oYXMoXCJlbHFUcmFja1wiKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZW50cmllcy5pbmRleE9mKFwiZWxxVHJhY2s9dHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBdEluZGV4KGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIUxpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5oYXMoXCJzXCIpICYmIExpbmtPYmplY3QucmVxdWlyZXNTQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJzPW9mdFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZ2V0KFwic1wiKSA9PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5zZXQoXCJzXCIsIFwib2Z0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgYiA9IC9cXDxwW15cXD5dKC4qPylcXD4oW15cXDxwXS4qPylcXDxcXC9wXFw+L2c7XG4gICAgICAgICAgICBpZiAoYi50ZXN0KG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG91dHB1dC5tYXRjaChiKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1hdGNoZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNbaV0uaW5kZXhPZihcImh0dHA6Ly9hcHAuaW5mby5vcHR1bS5jb20vZS9lcy5hc3B4XCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSBmcm9tIHdvcmtpbmcgY29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiRk9VTkQgXCIsIG1hdGNoZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IG91dHB1dC5pbmRleE9mKG1hdGNoZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5zdWJzdHJpbmcoMCwgc3RhcnQpICsgb3V0cHV0LnN1YnN0cmluZyhzdGFydCArIG1hdGNoZXNbaV0ubGVuZ3RoLCBvdXRwdXQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgfV0pO1xuXG5FTUxNYWtlci5maWx0ZXIubW9kdWxlKFwiYmVmb3JlRGlkR2VuZXJhdGVDb2RlXCIpLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvdXRwdXQpIHtcbiAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoL1xcPGltZ1teXFw+XS4qP1xcPi9naSwgZnVuY3Rpb24gKGZvdW5kKSB7XG4gICAgICAgICAgICBpZiAoZm91bmQuaW5kZXhPZihcImFsdD1cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZC5yZXBsYWNlKC9cXDxpbWcvZ2ksIFwiPGltZyBhbHQ9XFxcIlxcXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59KTtcbiIsIlxuaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgZ2Eob3B0aW9uMSwgb3B0aW9uMiwgb3B0aW9uMywgb3B0aW9uNCwgb3B0aW9uNSk6IHZvaWQ7XG4gICAgc2F2ZUFzKG9wdGlvbjE/LCBvcHRpb24yPyk6IHZvaWQ7XG4gICAgalF1ZXJ5KG9wdGlvbik6YW55O1xuICAgIGRlY29kZVVSSUNvbXBvbmVudChvcHRpb24pOiBzdHJpbmc7XG4gICAgZW5jb2RlVVJJQ29tcG9uZW50KG9wdGlvbik6IHN0cmluZztcbn1cbmludGVyZmFjZSBFdmVudFRhcmdldCB7XG4gIHJlc3VsdD86YW55O1xufVxuLy8gZGVjbGFyZSB2YXIgd2luZG93OiBNeVdpbmRvdztcblxuaW50ZXJmYWNlICRTY2Uge1xuICB0cnVzdEFzSHRtbChzdHI6IHN0cmluZyk6IGFueTtcbn1cblxuaW50ZXJmYWNlIFNlYXJjaFN0cmluZ1BheWxvYWQge1xuICBhZGRlZDogc3RyaW5nW10sXG4gIHVwZGF0ZWQ6IHN0cmluZ1tdLFxuICByZW1vdmVkOiBzdHJpbmdbXSxcbn1cbmludGVyZmFjZSBDaGFuZ2VNb25pdG9yTXNnIHtcbiAgbWVzc2FnZTogc3RyaW5nLFxuICBkYXRhOiBhbnlbXVxufVxuXG5lbnVtIEVycm9yU2V2ZXJpdHkge1xuICBIaWdoPTEsXG4gIE1lZGl1bSxcbiAgTG93LFxuICBaZXJvXG59XG5lbnVtIEVycm9yVHlwZSB7XG4gIEZpeD0xLFxuICBXYXJuLFxuICBTdWdnZXN0aW9uLFxuICBRQSxcbiAgQmVzdFByYWN0aWNlXG59XG5cblxubmFtZXNwYWNlIEdsb2JhbFZhcnMge1xuICBleHBvcnQgbGV0IGxhbmRpbmdQYWdlUHJlZmVycmVkID0gLyhcXC5tcDR8XFwuYXZpfFxcLm1wZWd8XFwubXAzfFxcLnN3ZnxcXC5tb3Z8XFwucGRmKS9pO1xuICBleHBvcnQgbGV0IGV4dERvZXNOb3RyZXF1aXJlVHJhY2tpbmdDb2RlID0gLyhcXC5wZGZ8XFwub2Z0fFxcLmljc3xcXC5wbmd8XFwuanBlZ3xcXC5qcGcpL2k7XG4gIGV4cG9ydCBsZXQgbGlua0VuY2Fwc3VsYXRlZFB1bmN0dWF0aW9uID0gLyhbXFwuXFw/XFwsXFw6XFwqXSspKChcXG58XFxyfFxccykrKT88XFwvYT4kLztcblxuICBleHBvcnQgbGV0IFJlcXVpcmVzU0NvZGVSZWdleCA9IC9odHRwKC4qKW9wdHVtKC4qKVxcLyhjYW1wYWlnbnxyZXNvdXJjZSkvaTtcbiAgZXhwb3J0IGxldCBSZXF1aXJlc1RyYWNraW5nQ29kZVJlZ2V4ID0gUmVnRXhwKFwiXmh0dHAocyk/OlxcL1xcLyguKj8pP29wdHVtKC4qPyk/XFwuY29bbVxcLl0/XCIpO1xuICBleHBvcnQgbGV0IFRlbGVwaG9uZVJlZ2V4ID0gLyhcXCs/XFxkezEsMn0oXFxzfC18XFwuKSk/XFwoP1xcZHszfVxcKT9bXFxzLi1dXFxkezMsfVtcXHMuLV1cXGR7NCx9LztcbiAgZXhwb3J0IGxldCBUZWxlcGhvbmVSZWdleEdsb2JhbCA9IC8oXFwrP1xcZHsxLDJ9KFxcc3wtfFxcLikpP1xcKD9cXGR7M31cXCk/W1xccy4tXVxcZHszLH1bXFxzLi1dXFxkezQsfS9nO1xuICBleHBvcnQgbGV0IEVtYWlsUmVnZXggPSAvKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpLztcbiAgZXhwb3J0IGxldCBFbWFpbFJlZ2V4R2xvYmFsID0gLygoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKS9nO1xuICBleHBvcnQgbGV0IFVybFJlZ2V4ID0gL14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0tKikqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldLSopKlthLXpcXHUwMGExLVxcdWZmZmYwLTldKykqKD86XFwuKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9KSkpKD86OlxcZHsyLDV9KT8oPzpbLz8jXVxcUyopPyQvaTtcbiAgZXhwb3J0IGxldCBMaW5rSGFzVGl0bGVUYWdSZWdleEdsb2JhbCA9IC88YVxccyhbXjxdKil0aXRsZT1cXFwiKC4qPylcXFwiPi9naTtcbiAgZXhwb3J0IGxldCBQcmVoZWFkZXJSZWdleEdsb2JhbCA9IC9cXDxwXFxzW15cXDxdKmNsYXNzPVxcXCJwcmVoZWFkZXJcXFwiW15cXD5dKlxcPi9naTtcbiAgZXhwb3J0IGxldCBSZXF1aXJlZFRyYWNraW5nQ29kZVdoaXRlbGlzdDogYW55W10gPSBbXG4gICAgJy5wZGYnLCcuaWNzJywnLm9mdCcsJ29wdHVtc3VydmV5cy5jbycsJ2hlYWx0aGlkLm9wdHVtLmNvbScsJ2xlYXJuaW5nLm9wdHVtLmNvbScsJ2FwcC5pbmZvLm9wdHVtLmNvbScsXG4gICAgJ29wdHVtLndlYmV4LmNvbScsJ3R3aXR0ZXIuY29tJywnZmFjZWJvb2suY29tJywnbGlua2VkaW4uY29tJywnaW5mby5vcHR1bSdcbiAgXTtcbn1cblxuY2xhc3MgSW5qZWN0b3JNb2R1bGUge1xuICAvLyBzY29wZTogYW55W107XG4gIHZhcmlhYmxlczoge3N0cmluZz86YW55fTtcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLnZhcmlhYmxlcyA9IHt9O1xuICB9XG4gIF9fZ2V0UGFyYW1zKGtleXMsIGluamVjdGFibGVzKXtcbiAgICB2YXIgYXJncyA9IGtleXMubWFwKChrZXk6c3RyaW5nKT0+e1xuICAgICAgcmV0dXJuIGluamVjdGFibGVzW2tleV1cbiAgICB9KTtcbiAgICAvL2NvbnNvbGUubG9nKGtleXMsYXJncyk7XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cbiAgX19nZXRJbmplY3RvcihzcGVjcyl7IC8vZm9ybWF0IGlzIFtcIlwiLCBmbihhKV0gb3IgZm4oKXt9XG4gICAgdmFyIG91dHB1dCA9IHsgZm46IGZ1bmN0aW9uKCl7fSwgYXJnczogW10gfTtcbiAgICBpZih0eXBlb2Ygc3BlY3MgPT0gXCJvYmplY3RcIil7XG4gICAgICBvdXRwdXQuZm4gPSBzcGVjc1tzcGVjcy5sZW5ndGgtMV07XG4gICAgICBvdXRwdXQuYXJncyA9IHRoaXMuX19nZXRQYXJhbXMoc3BlY3Muc2xpY2UoMCwgc3BlY3MubGVuZ3RoLTEpLCB0aGlzLnZhcmlhYmxlcyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LmZuID0gc3BlY3M7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cblxuICBpbmplY3QodmFyTmFtZSwgdmFyVmFsdWUpe1xuICAgIHRoaXMudmFyaWFibGVzW3Zhck5hbWVdID0gdmFyVmFsdWU7XG5cbiAgfVxufVxuXG5uYW1lc3BhY2UgRU1MTW9kdWxlIHtcblxuICBleHBvcnQgY2xhc3MgUHJldmlld1RleHRPYmplY3Qge1xuICAgIHBhcmVudDogRU1MV29ya3NwYWNlO1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBzdGF0dXM6IGJvb2xlYW47XG4gICAgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdO1xuICAgIGRlZmF1bHRQcmV2aWV3VGV4dENTUzogc3RyaW5nO1xuICAgIGRlZmF1bHRQcmV2aWV3VGV4dENvZGU6IHN0cmluZztcblxuXG4gICAgY29uc3RydWN0b3IoRU1MV29ya3NwYWNlKXtcbiAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XG4gICAgICB0aGlzLnBhcmVudCA9IEVNTFdvcmtzcGFjZTtcbiAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICB0aGlzLmRlZmF1bHRQcmV2aWV3VGV4dENTUyA9IGAucHJlaGVhZGVyIHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDsgdmlzaWJpbGl0eTpoaWRkZW47IG9wYWNpdHk6MDsgY29sb3I6I2ZmZjsgZm9udC1zaXplOjA7IGhlaWdodDowOyB3aWR0aDowO31gO1xuICAgICAgdGhpcy5kZWZhdWx0UHJldmlld1RleHRDb2RlID0gYDxwIGNsYXNzPVwicHJlaGVhZGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IGhpZGRlbjsgb3BhY2l0eTogMDsgY29sb3I6IHRyYW5zcGFyZW50OyBoZWlnaHQ6IDA7IHdpZHRoOiAwOyBtYXJnaW46MDsgcGFkZGluZzowO1wiPjwvcD5gO1xuXG4gICAgfVxuICAgIHJlbmRlcigpe1xuXG4gICAgfVxuICAgIGluaXQoKXtcbiAgICAgIGxldCBvdXRwdXRDb2RlID0gdGhpcy5wYXJlbnQuZ2VuZXJhdGVPdXRwdXRDb2RlKFwiZW1haWxcIiwgdHJ1ZSk7XG4gICAgICBsZXQgcmVnZXggPSAvXFw8cC4qY2xhc3M9XFxcInByZWhlYWRlclxcXCJbXlxcPl0uKlxcPihbXjxdLiopP1xcPFxcL3BcXD4vZ2k7XG4gICAgICBsZXQgcmVnZXhTID0gL1xcPHAoW15cXD5dLiopY2xhc3M9XFxcInByZWhlYWRlclxcXCIoW15cXD5dLiopXFw+L2dpO1xuICAgICAgdmFyIHdvcmtpbmdDb2RlID0gdGhpcy5wYXJlbnQud29ya2luZ0NvZGUudG9TdHJpbmcoKTtcbiAgICAgIGlmKHJlZ2V4Uy50ZXN0KG91dHB1dENvZGUpKXtcbiAgICAgICAgdmFyIGZvdW5kID0gb3V0cHV0Q29kZS5tYXRjaChyZWdleCk7XG4gICAgICAgIGlmKGZvdW5kKXtcbiAgICAgICAgICAvL2hhcyBjb2RlIGFscmVhZHkuXG4gICAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlO1xuICAgICAgICAgIHRoaXMudGV4dCA9IHdpbmRvdy5qUXVlcnkoZm91bmRbMF0pLnRleHQoKTtcbiAgICAgICAgICAvL2ZvdW5kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gbm90IGZvdW5kXG4gICAgICAgICAgLy8gbmVlZCB0byBhZGQgdGhlIGNvZGU7XG5cbiAgICAgICAgICBpZigvXFw8c3R5bGVcXHM/KFxcc1tePl0uKik/XFw+Ly50ZXN0KHdvcmtpbmdDb2RlKSl7XG4gICAgICAgICAgICAvL2FkZCB0byBleGlzdGluZyBjb2RlXG4gICAgICAgICAgICB3b3JraW5nQ29kZSA9IHdvcmtpbmdDb2RlLnJlcGxhY2UobmV3IFJlZ0V4cChcIjwvc3R5bGU+XCIsIFwiZ1wiKSwgdGhpcy5kZWZhdWx0UHJldmlld1RleHRDU1MgKyBcIlxcbjwvc3R5bGU+XCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZih3b3JraW5nQ29kZS5pbmRleE9mKFwiPC9oZWFkPlwiKT4tMSl7XG4gICAgICAgICAgICAgIHdvcmtpbmdDb2RlID0gd29ya2luZ0NvZGUucmVwbGFjZShuZXcgUmVnRXhwKFwiPC9oZWFkPlwiLCBcImdcIiksIFwiPHN0eWxlIHR5cGU9XFxcInRleHQvY3NzXFxcIj5cIiArIHRoaXMuZGVmYXVsdFByZXZpZXdUZXh0Q1NTICsgXCI8L3N0eWxlPlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cbiAgICAgICAgICB3b3JraW5nQ29kZSA9IHdvcmtpbmdDb2RlLnJlcGxhY2UobmV3IFJlZ0V4cChcIig8Ym9keVtePl0qPilcIiwgXCJnXCIpLCBcIiQxXFxuXCIgKyB0aGlzLmRlZmF1bHRQcmV2aWV3VGV4dENvZGUpO1xuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucGFyZW50LndvcmtpbmdDb2RlID0gd29ya2luZ0NvZGU7XG4gICAgfVxuICB9XG5cbiAgZXhwb3J0IGNsYXNzIE1haWx0b0xpbmtPYmplY3Qge1xuICAgICBwYXJlbnQ6IExpbmtPYmplY3Q7XG4gICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgIHN1YmplY3Q6IHN0cmluZztcbiAgICAgYm9keTogc3RyaW5nO1xuXG4gICAgIGNvbnN0cnVjdG9yKExpbmtPYmplY3Qpe1xuICAgICAgIHRoaXMucGFyZW50ID0gTGlua09iamVjdDtcbiAgICAgICB0aGlzLmVtYWlsID0gXCJcIjtcbiAgICAgICB0aGlzLnN1YmplY3QgPSBcIlwiO1xuICAgICAgIHRoaXMuYm9keSA9IFwiXCI7XG5cbiAgICAgICBpZih0aGlzLnBhcmVudC5pc0xpbmtUeXBlKCdtYWlsdG8nKSl7XG4gICAgICAgICB0aGlzLmluaXRFbWFpbEVkaXRvcigpO1xuICAgICAgIH1cbiAgICAgfVxuICAgICBoYXMob3B0aW9uKTpib29sZWFue1xuICAgICAgIHRoaXMudXBkYXRlTWFpbHRvT2JqKCk7XG4gICAgICAgcmV0dXJuIHRoaXNbb3B0aW9uXSAmJiB0aGlzW29wdGlvbl0udHJpbSgpIT09XCJcIjtcbiAgICAgfVxuICAgICBpc1ZhbGlkRW1haWxBZGRyZXNzKCl7XG4gICAgICAgcmV0dXJuIEdsb2JhbFZhcnMuRW1haWxSZWdleC50ZXN0KHRoaXMuZW1haWwpO1xuICAgICB9XG4gICAgIGRlaW5pdEVtYWlsRWRpdG9yKCl7XG4gICAgICAgdGhpcy5lbWFpbCA9IFwiXCI7XG4gICAgICAgdGhpcy5zdWJqZWN0ID0gXCJcIjtcbiAgICAgICB0aGlzLmJvZHkgPSBcIlwiO1xuICAgICB9XG4gICAgIGNvbXBvc2VFbWFpbCgpe1xuICAgICAgIHRoaXMucGFyZW50Lm5ldy51cmwgPSBcIm1haWx0bzpcIiArIHRoaXMuZW1haWw7XG4gICAgICAgdmFyIG9wdGlvbnMgPSBbXCJzdWJqZWN0XCIsXCJib2R5XCJdO1xuICAgICAgIGZvcih2YXIgaSA9MDsgaTxvcHRpb25zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgIGlmKHRoaXNbb3B0aW9uc1tpXV0gJiYgdGhpc1tvcHRpb25zW2ldXSAhPT0gXCJcIikge1xuICAgICAgICAgICB0aGlzLnBhcmVudC5uZXcuc2VhcmNoUGFyYW1zLnNldChvcHRpb25zW2ldLCB0aGlzW29wdGlvbnNbaV1dKTtcbiAgICAgICAgIH0gZWxzZSBpZih0aGlzW29wdGlvbnNbaV1dPT1cIlwiKXtcbiAgICAgICAgICAgdGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUob3B0aW9uc1tpXSk7XG4gICAgICAgICAgIC8vIFtcInN1YmplY3RcIixcImJvZHlcIl0uZm9yRWFjaCgob3B0aW9uKT0+e1xuICAgICAgICAgICAvLyAgIGlmKHRoaXNbb3B0aW9uXSA9PSBcIlwiKSB7XG4gICAgICAgICAgIC8vXG4gICAgICAgICAgIC8vICAgIH1cbiAgICAgICAgICAgLy8gIH0pO1xuICAgICAgICAgICAvLyAvL2RlbGV0ZSBpdDtcbiAgICAgICAgICAgLy8gdGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUob3B0aW9uc1tpXSk7XG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICB9XG4gICAgIHVwZGF0ZU1haWx0b09iaigpe1xuXG4gICAgICAgdmFyIGEgPSB0aGlzLnBhcmVudC5uZXcudXJsLnN1YnN0cig3LCB0aGlzLnBhcmVudC5uZXcudXJsLmxlbmd0aC03KTtcbiAgICAgICB2YXIgYiA9IGEuc3BsaXQoXCI/XCIpO1xuICAgICAgIHRoaXMuZW1haWwgPSBiWzBdO1xuXG4gICAgICAgdGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy51cGRhdGVFbnRyaWVzKCk7XG4gICAgICAgaWYoYi5sZW5ndGg+MSl7XG4gICAgICAgICBbXCJzdWJqZWN0XCIsXCJib2R5XCJdLmZvckVhY2goKG9wdGlvbik9PntcbiAgICAgICAgICAgaWYodGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy5oYXMob3B0aW9uKSl7XG4gICAgICAgICAgICAgdGhpc1tvcHRpb25dID0gd2luZG93LmRlY29kZVVSSUNvbXBvbmVudCh0aGlzLnBhcmVudC5uZXcuc2VhcmNoUGFyYW1zLmdldChvcHRpb24pKTtcbiAgICAgICAgICAgfVxuICAgICAgICAgfSk7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRoaXMuc3ViamVjdD0gXCJcIjtcbiAgICAgICAgIHRoaXMuYm9keSA9IFwiXCI7XG4gICAgICAgfVxuICAgICB9XG4gICAgIGlucHV0T25CbHVyKCl7XG4gICAgICAgLy9kZWNvZGVkIHVybCBhbGwgdGhlIGVudHJpZXM7XG4gICAgICAgLy9yZWVuY29kZSB0aGVtLlxuXG4gICAgICAgdGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy51cGRhdGVFbnRyaWVzKCk7XG4gICAgICAgdGhpcy5wYXJlbnQubmV3LnNlYXJjaFBhcmFtcy51cGRhdGVTZWFyY2hQcm9wKCk7XG5cblxuICAgICB9XG4gICAgIG9wZW5FZGl0b3IoKXtcbiAgICAgICB0aGlzLmluaXRFbWFpbEVkaXRvcigpO1xuICAgICAgIC8vIHdpbmRvdy5qUXVlcnkoXCJodG1sLGJvZHlcIilcbiAgICAgICAvLyAuYW5pbWF0ZSh7c2Nyb2xsVG9wOiB3aW5kb3cualF1ZXJ5KCcjbGluay0nKyh0aGlzLnBhcmVudC5pZC0xKSkub2Zmc2V0KCkudG9wIC0gNzV9LCAzMDApO1xuICAgICAgIHZhciBMTyA9IHRoaXMucGFyZW50O1xuICAgICAgICAgY29uc29sZS5sb2coTE8uaWQtMSk7XG4gICAgICAgICBMTy5zaG93TWFpbHRvRWRpdG9yID0gdHJ1ZTtcbiAgICAgfVxuICAgICBpbml0RW1haWxFZGl0b3IoKXtcbiAgICAgICB0aGlzLnVwZGF0ZU1haWx0b09iaigpO1xuICAgICB9XG4gICB9XG5cbiAgZXhwb3J0IGNsYXNzIFVSTE9iaiB7XG4gICAgc2VhcmNoOiBzdHJpbmc7XG4gICAgaHJlZjogc3RyaW5nO1xuICAgIG9yaWdpbjogc3RyaW5nO1xuICAgIGhhc2g6IHN0cmluZztcbiAgICBwcm90b2NvbDogc3RyaW5nO1xuICAgIHNlYXJjaFBhcmFtczogVVJMT2JqU2VhcmNoUGFyYW1zO1xuXG4gICAgY29uc3RydWN0b3IodXJsKXtcbiAgICAgIHRoaXMuaHJlZiA9IFwiXCI7XG4gICAgICB0aGlzLnNlYXJjaCA9IFwiXCI7XG4gICAgICB0aGlzLm9yaWdpbiA9IFwiXCI7XG4gICAgICB0aGlzLmhhc2ggPSBcIlwiO1xuICAgICAgdGhpcy5wcm90b2NvbCA9IFwiXCI7XG4gICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgIHRoaXMuc2VhcmNoUGFyYW1zID0gbmV3IFVSTE9ialNlYXJjaFBhcmFtcyh0aGlzKTtcbiAgICB9XG4gICAgcHJlcGFyZUV4cG9ydCgpe1xuICAgIC8vZG8gc29tZXRoaW5nIGhlcmU/XG4gICAgICAvL3RoaXMuc2VhcmNoUGFyYW1zLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICB9XG4gICAgaXNWYWxpZCgpOmJvb2xlYW4ge1xuICAgICAgcmV0dXJuIEdsb2JhbFZhcnMuVXJsUmVnZXgudGVzdCh0aGlzLnVybCk7XG4gICAgfVxuICAgIGNvbnRhaW5zKHN0cjpzdHJpbmcpOiBib29sZWFue1xuICAgICAgaWYodGhpcy51cmwuaW5kZXhPZihzdHIpPi0xKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBnZXQgdXJsKCl7XG4gICAgICB0aGlzLnByZXBhcmVFeHBvcnQoKTtcbiAgICAgIHZhciB1ID0gdGhpcy5vcmlnaW4gKyB0aGlzLnNlYXJjaCArIHRoaXMuaGFzaDtcbiAgICAgIHUgPSB1LnJlcGxhY2UoXCI/dW5kZWZpbmVkXCIsXCJcIik7XG4gICAgICByZXR1cm4gdTtcbiAgICB9XG4gICAgc2V0IHVybCh1cmwpe1xuICAgICAgdGhpcy5zZWFyY2ggPSBcIlwiO1xuICAgICAgdGhpcy5oYXNoID0gXCJcIjtcbiAgICAgIHZhciBwcm90b2NvbFR5cGUgPSAvXihodHRwcz98bWFpbHRvfGZ0cClcXDovZ2k7XG4gICAgICBpZihwcm90b2NvbFR5cGUudGVzdCh1cmwpKXtcbiAgICAgICAgdmFyIGEgPSB1cmwubWF0Y2gocHJvdG9jb2xUeXBlKTtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IGFbMF07XG4gICAgICB9XG4gICAgICB0aGlzLmhyZWYgPSB1cmw7XG4gICAgICBpZih1cmwudHJpbSgpPT1cIiNcIil7XG4gICAgICAgIHRoaXMuaGFzaCA9IFwiI1wiO1xuICAgICAgfVxuICAgICAgZWxzZSBpZih1cmwudHJpbSgpLmxlbmd0aD4xICYmIHVybC5pbmRleE9mKFwiI1wiKT4tMSl7XG4gICAgICAgIHZhciB1cmxQYXJ0cyA9IHVybC5zcGxpdChcIiNcIik7XG4gICAgICAgIHRoaXMuaGFzaCA9IFwiI1wiICsgdXJsUGFydHMucG9wKCk7IC8vanVtcCBsaW5rLi4gbmVlZCB0byByZW1vdmUgaXQgZnJvbSB0aGUgb3RoZXIgc3R1ZmYuXG4gICAgICAgIHZhciBwYXJ0cyA9ICh1cmxQYXJ0cy5qb2luKFwiI1wiKSkuc3BsaXQoXCI/XCIpO1xuICAgICAgICB0aGlzLm9yaWdpbiA9IHBhcnRzWzBdO1xuICAgICAgICB0aGlzLnNlYXJjaCA9IHBhcnRzLmxlbmd0aD4wID8gXCI/XCIrcGFydHNbMV06XCJcIjtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuXG4gICAgICAgIGlmKHVybC5pbmRleE9mKFwiP1wiKT4tMSl7XG4gICAgICAgICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KFwiP1wiKTtcbiAgICAgICAgICB0aGlzLm9yaWdpbiA9IHBhcnRzWzBdO1xuICAgICAgICAgIHRoaXMuc2VhcmNoID0gKHBhcnRzLmxlbmd0aCA+IDApID8gXCI/XCIrcGFydHNbMV06XCJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9yaWdpbiA9IHVybDtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgICAvL3RoaXMuc2VhcmNoUGFyYW1zLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICB9XG5cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBVUkxPYmpTZWFyY2hQYXJhbXMge1xuICAgIF9lbnRyaWVzIDogYW55W107XG4gICAgcGFyZW50OiBVUkxPYmo7XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6VVJMT2JqKXtcblxuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBpZih0aGlzLnBhcmVudC5zZWFyY2gubGVuZ3RoPjApe1xuICAgICAgICB0aGlzLl9lbnRyaWVzID0gKHRoaXMucGFyZW50LnNlYXJjaC5zdWJzdHIoMSx0aGlzLnBhcmVudC5zZWFyY2gubGVuZ3RoKSkuc3BsaXQoL1xcJmFtcFxcO3xcXCYvZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9lbnRyaWVzPVtdO1xuICAgICAgfVxuXG5cbiAgICB9XG4gICAgZ2V0IGVudHJpZXMoKXtcbiAgICAgIGxldCBvdXRwdXQgPSBbXTtcbiAgICAgIGZvcihsZXQgaSA9IDA7IGk8dGhpcy5fZW50cmllcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgdmFyIGEgPSB0aGlzLl9lbnRyaWVzW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgaWYoYS5sZW5ndGg+MSl7XG4gICAgICAgICAgYVsxXSA9IGRlY29kZVVSSUNvbXBvbmVudChhWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQucHVzaChhLmpvaW4oXCI9XCIpKTtcbiAgICAgIH1cblxuXG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICB1cGRhdGVFbnRyaWVzKCk6dm9pZCB7XG4gICAgICB0aGlzLl9lbnRyaWVzID0gW107XG4gICAgICBpZih0aGlzLnBhcmVudC5zZWFyY2ghPT0gXCI/XCIgJiYgdGhpcy5wYXJlbnQuc2VhcmNoLmxlbmd0aD4xKXtcbiAgICAgICAgdmFyIHByb3BzID0gKHRoaXMucGFyZW50LnNlYXJjaC5zdWJzdHIoMSx0aGlzLnBhcmVudC5zZWFyY2gubGVuZ3RoKSkuc3BsaXQoL1xcJmFtcFxcO3xcXCYvZyk7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGk8cHJvcHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgdGhpcy5fZW50cmllcy5wdXNoKHByb3BzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVTZWFyY2hQcm9wKCk6dm9pZHtcbiAgICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICAgIGlmKHRoaXMuX2VudHJpZXMubGVuZ3RoPjApe1xuICAgICAgICBmb3IodmFyIGkgPTA7aTx0aGlzLl9lbnRyaWVzLmxlbmd0aDtpKyspe1xuICAgICAgICAgIHZhciBwcm9wID10aGlzLl9lbnRyaWVzW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICBpZigvW2Etel17MSw0fT0oLio/Oil7Myw5fS9naS50ZXN0KHRoaXMuX2VudHJpZXNbaV0pKSB7XG4gICAgICAgICAgICBvdXRwdXQucHVzaCh0aGlzLl9lbnRyaWVzW2ldKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2gocHJvcFswXSsocHJvcC5sZW5ndGg+MSA/IFwiPVwiKyBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KHByb3BbMV0pKSA6IFwiXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5wYXJlbnQuc2VhcmNoID0gb3V0cHV0Lmxlbmd0aD4wID8gXCI/XCIrb3V0cHV0LmpvaW4oXCImXCIpIDogXCJcIjtcbiAgICB9XG4gICAgaGFzKHBhcmFtKTpib29sZWFue1xuICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhcmFtICsgXCJcXD1cIixcImdcIik7XG4gICAgICB2YXIgb3V0cHV0ID0gZmFsc2U7XG4gICAgICBmb3IodmFyIGk9MDtpPHRoaXMuX2VudHJpZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKHJlZ2V4LnRlc3QodGhpcy5fZW50cmllc1tpXSkpIG91dHB1dCA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBnZXQocGFyYW0pe1xuICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhcmFtICsgXCJcXD1cIixcImdcIiksXG4gICAgICAgICAgb3V0cHV0ID0gZmFsc2U7XG4gICAgICBmb3IodmFyIGk9MDtpPHRoaXMuX2VudHJpZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKHJlZ2V4LnRlc3QodGhpcy5fZW50cmllc1tpXSkpIHtcbiAgICAgICAgICBvdXRwdXQgPSAodGhpcy5fZW50cmllc1tpXS5zcGxpdChcIj1cIikpLnBvcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBzZXQocGFyYW0sIHZhbHVlKTp2b2lke1xuICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhcmFtICsgXCJcXD1cIixcImdcIiksXG4gICAgICAgICAgb3V0cHV0ID0gZmFsc2U7XG4gICAgICBmb3IodmFyIGk9MDtpPHRoaXMuX2VudHJpZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKHJlZ2V4LnRlc3QodGhpcy5fZW50cmllc1tpXSkpIHtcbiAgICAgICAgICB0aGlzLl9lbnRyaWVzW2ldID0gcGFyYW0gKyBcIj1cIiArIHZhbHVlO1xuICAgICAgICAgIG91dHB1dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKCFvdXRwdXQpe1xuICAgICAgICB0aGlzLmFwcGVuZChwYXJhbSArIFwiPVwiICsgdmFsdWUpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTZWFyY2hQcm9wKCk7XG4gICAgfVxuICAgIGFwcGVuZCh2YWx1ZVBhaXIpe1xuICAgICAgdGhpcy5fZW50cmllcy5wdXNoKHZhbHVlUGFpcik7XG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICB9XG4gICAgZGVsZXRlQWxsKCl7XG4gICAgICB0aGlzLl9lbnRyaWVzID0gW107XG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICB9XG4gICAgZGVsZXRlQXRJbmRleChpbmRleCl7XG4gICAgICB0aGlzLl9lbnRyaWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB0aGlzLnVwZGF0ZVNlYXJjaFByb3AoKTtcbiAgICB9XG4gICAgZGVsZXRlKHBhcmFtKXtcbiAgICAgIC8vZG9lc250IGRvIGFueXRoaW5nIHlldC5cbiAgICAgIGZvcihsZXQgaT0wO2kgPCB0aGlzLl9lbnRyaWVzLmxlbmd0aDtpKyspe1xuICAgICAgICBpZih0aGlzLl9lbnRyaWVzW2ldLnN1YnN0cigwLHBhcmFtLmxlbmd0aCsxKT09cGFyYW0rXCI9XCIpe1xuICAgICAgICAgIHRoaXMuZGVsZXRlQXRJbmRleChpKTtcbiAgICAgICAgICAvLyBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBMaW5rZWRJbWFnZSB7XG4gICAgc3JjOiBzdHJpbmd8Ym9vbGVhbjtcbiAgICBhbHQ6IHN0cmluZ3xib29sZWFuO1xuICAgIGhlaWdodDogbnVtYmVyfGJvb2xlYW47XG4gICAgd2lkdGg6IG51bWJlcnxib29sZWFuO1xuICAgIGNvbnRleHQ6IHN0cmluZztcbiAgICBfc3VwZXI6IExpbmtPYmplY3Q7XG5cblxuICAgIGNvbnN0cnVjdG9yIChfc3VwZXIsIGNvZGUpIHtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvZGU7XG4gICAgICB0aGlzLl9zdXBlciA9IF9zdXBlcjtcbiAgICAgIHZhciB0YWdzID0gW1wic3JjXCIsIFwiYWx0XCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIl07XG4gICAgICBmb3IobGV0IHRhZyBvZiB0YWdzKXtcbiAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCh0YWcrXCI9XFxcIihbXlxcXCJdLio/KT9cXFwiXCIsXCJpXCIpO1xuICAgICAgICBpZihyZWdleC50ZXN0KGNvZGUpKXtcbiAgICAgICAgICB0aGlzW3RhZ10gPSBjb2RlLm1hdGNoKHJlZ2V4KVsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGhhc1dpZHRoID0gdGhpcy53aWR0aCAmJiBwYXJzZUludCh0aGlzLndpZHRoLnRvU3RyaW5nKCkpO1xuICAgICAgbGV0IGhhc0hlaWdodCA9IHRoaXMuaGVpZ2h0ICYmIHBhcnNlSW50KHRoaXMuaGVpZ2h0LnRvU3RyaW5nKCkpO1xuXG4gICAgICBpZighaGFzV2lkdGggfHwgIWhhc0hlaWdodCl7XG4gICAgICAgIGlmKHR5cGVvZiB0aGlzLnNyYyA9PT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgdGhpcy5wcmVsb2FkSW1hZ2UodGhpcy5zcmMpO1xuICAgICAgICB9XG4gICAgICB9IC8vZWl0aGVyIGlzIG5vdCBzZXRcblxuICAgIH1cbiAgICBwcmVsb2FkSW1hZ2Uoc3JjKXtcbiAgICAgIHZhciBMSSA9IHRoaXM7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgLy8gaW1nLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICBpbWcub25sb2FkPWZ1bmN0aW9uKCl7XG4gICAgICAgICAgTEkuaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICAgICAgICBMSS53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhpbWcuaGVpZ2h0LGltZy53aWR0aCk7XG4gICAgICAgICAgaW1nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW1nKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIGltZy5zcmMgPSA8c3RyaW5nPkxJLnNyYztcbiAgICAgICAgY29uc29sZS5sb2coaW1nKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbWcpO1xuICAgIH1cbiAgICBnZW5lcmF0ZU91dHB1dChjb250ZW50KTpzdHJpbmcge1xuICAgICAgdmFyIF90aGlzPSB0aGlzO1xuICAgICAgaWYodGhpcy5jb250ZXh0LmluZGV4T2YoXCJhbHRcIik+LTEpe1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKHRoaXMuY29udGV4dCwgZnVuY3Rpb24oZil7XG4gICAgICAgICAgcmV0dXJuIGYucmVwbGFjZSgvYWx0XFw9XFxcIihbXlxcXCJdLio/KT9cXFwiL2csIFwiYWx0PVxcXCJcIiArIChfdGhpcy5hbHQ9PT11bmRlZmluZWQ/XCJcIjpfdGhpcy5hbHQpICsgXCJcXFwiXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UodGhpcy5jb250ZXh0LCBmdW5jdGlvbihmKXtcbiAgICAgICAgICByZXR1cm4gZi5yZXBsYWNlKFwiPGltZ1wiLCBcIjxpbWcgYWx0PVxcXCJcIisoX3RoaXMuYWx0PT09dW5kZWZpbmVkP1wiXCI6X3RoaXMuYWx0KStcIlxcXCJcIik7fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gIH1cblxuICBleHBvcnQgY2xhc3MgTGlua09iamVjdCB7XG4gICAgX3N1cGVyOiBFTUxXb3Jrc3BhY2U7XG4gICAgX19pc0NvbXBsZXRlOiBib29sZWFuO1xuXG5cbiAgICByZWFkT25seTogYm9vbGVhbjtcbiAgICBjb250ZXh0OiBzdHJpbmc7XG4gICAgZGVsZXRlT25SZW5kZXI6IGJvb2xlYW47XG4gICAgZW1haWxSZWdleDogUmVnRXhwO1xuICAgIGVycm9yczogYW55O1xuICAgIGlkOiBudW1iZXI7XG4gICAgbGluZTogbnVtYmVyO1xuICAgIExpbmtlZEltYWdlOiBMaW5rZWRJbWFnZTtcbiAgICBMaW5rZWRJbWFnZU9sZDogTGlua2VkSW1hZ2U7XG4gICAgbWFpbHRvOiBNYWlsdG9MaW5rT2JqZWN0O1xuICAgIG5ldzogVVJMT2JqO1xuICAgIG9sZDogVVJMT2JqO1xuICAgIENoYW5nZU1vbml0b3I6IENoYW5nZU1vbml0b3I7XG4gICAgc2hvd01haWx0b0VkaXRvcjogYm9vbGVhbjtcbiAgICBzaG93UXVlcnlTdHJpbmdFZGl0b3I6IGJvb2xlYW47XG4gICAgcXVlcnlTdHJpbmdzOiBzdHJpbmdbXTtcbiAgICAvLyB1cmxSZWdleDogUmVnRXhwO1xuICAgIHdoaXRlTGlzdGVkVXJsOiBzdHJpbmc7XG5cblxuICAgIGNvbnN0cnVjdG9yKGxpbmU6IG51bWJlciwgY29udGV4dDogc3RyaW5nLCBwYXJlbnQ6IEVNTFdvcmtzcGFjZSl7XG4gICAgICB0aGlzLl9faXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3VwZXIgPSBwYXJlbnQ7XG5cbiAgICAgIHRoaXMuc2hvd1F1ZXJ5U3RyaW5nRWRpdG9yID0gZmFsc2U7XG4gICAgICB0aGlzLnNob3dNYWlsdG9FZGl0b3IgPSBmYWxzZTtcblxuICAgICAgdGhpcy5pZCA9IDA7XG4gICAgICB0aGlzLmxpbmUgPSBsaW5lICsgMTtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLnF1ZXJ5U3RyaW5ncyA9IFtdO1xuXG4gICAgICB0aGlzLkNoYW5nZU1vbml0b3IgPSBuZXcgQ2hhbmdlTW9uaXRvcih0aGlzKTtcbiAgICAgIHRoaXMuZXJyb3JzID0gRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImh5cGVybGlua1wiKS5tb25pdG9yKCk7XG4gICAgICB0aGlzLmVycm9ycy5pbmplY3QoXCJMaW5rT2JqZWN0XCIsIHRoaXMpO1xuICAgICAgdGhpcy5lcnJvcnMuaW5qZWN0KFwiRU1MV29ya3NwYWNlXCIsIHRoaXMuX3N1cGVyKTtcblxuICAgICAgdGhpcy53aGl0ZUxpc3RlZFVybCA9IFwifn53aGl0ZWxpc3R+flwiO1xuXG4gICAgICAvL2ZpbmQgaHJlZlxuICAgICAgdGhpcy5fX2xvY2F0ZUhyZWYoY29udGV4dCk7XG4gICAgICAvL2ZpbmQgaW1hZ2VcbiAgICAgIHRoaXMuX19sb2NhdGVMaW5rZWRJbWFnZShjb250ZXh0KTtcblxuICAgICAgLy9uZWVkIHRvIHNldCB0aGUgdXJsIGJlZm9yZSB5b3UgZG8gdGhpcztcbiAgICAgIHRoaXMubWFpbHRvID0gbmV3IE1haWx0b0xpbmtPYmplY3QodGhpcyk7XG4gICAgICB0aGlzLmlzTGlua0NvbXBsZXRlKCk7XG4gICAgfVxuICAgIF9fbG9jYXRlSHJlZihjb250ZXh0KXtcbiAgICAgIHZhciByZTIgPSAvaHJlZlxcPVxcXCIoW15cXFwiXFw+XSopXFxcIi9nO1xuICAgICAgdmFyIGhyZWYgPSBjb250ZXh0Lm1hdGNoKHJlMik7XG4gICAgICBpZihocmVmLmxlbmd0aD4wKXtcbiAgICAgICAgaWYoaHJlZlswXT09XCJocmVmPVxcXCJcXFwiXCIpIHtcbiAgICAgICAgICB0aGlzLm5ldyA9ICBuZXcgVVJMT2JqKFwiI1wiKTtcbiAgICAgICAgICB0aGlzLm9sZCA9IG5ldyBVUkxPYmooXCIjXCIpO1xuICAgICAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY29udGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJocmVmPVxcXCJcXFwiXCIsXCJnXCIpLFwiaHJlZj1cXFwiI1xcXCJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5uZXcgPSBuZXcgVVJMT2JqKChocmVmWzBdLnN1YnN0cig2LCBocmVmWzBdLmxlbmd0aC03KSkudHJpbSgpLnJlcGxhY2UoL1xcbi9nLFwiXCIpKTtcbiAgICAgICAgICB0aGlzLm9sZCA9IG5ldyBVUkxPYmooKGhyZWZbMF0uc3Vic3RyKDYsIGhyZWZbMF0ubGVuZ3RoLTcpKS50cmltKCkucmVwbGFjZSgvXFxuL2csXCJcIikpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG4gICAgX19sb2NhdGVMaW5rZWRJbWFnZShjb250ZXh0KXtcbiAgICAgIGlmKC9cXDxpbWcoW14+XS4qPylcXD4vLnRlc3QoY29udGV4dCkpe1xuICAgICAgICB2YXIgZm91bmQgPSBjb250ZXh0Lm1hdGNoKC9cXDxpbWcoW14+XS4qPylcXD4vKTtcbiAgICAgICAgaWYoZm91bmQubGVuZ3RoPjApe1xuICAgICAgICAgIHRoaXMuTGlua2VkSW1hZ2UgPSBuZXcgTGlua2VkSW1hZ2UodGhpcywgZm91bmRbMF0pO1xuICAgICAgICAgIHRoaXMuTGlua2VkSW1hZ2VPbGQgPSBuZXcgTGlua2VkSW1hZ2UodGhpcywgZm91bmRbMF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaGFzRHVwbGljYXRlUXVlcnlTdHJpbmdzKCk6IHN0cmluZ1tdfGJvb2xlYW4ge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICAgIHVzZWRTdHJpbmdzID0gW107XG5cbiAgICAgIGlmKHRoaXMubmV3LnNlYXJjaFBhcmFtcy5lbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yKGxldCBhIG9mIHRoaXMubmV3LnNlYXJjaFBhcmFtcy5lbnRyaWVzKXtcbiAgICAgICAgICB2YXIgcGFyYW0gPSBhLnNwbGl0KFwiPVwiKS5zaGlmdCgpO1xuICAgICAgICAgIGlmKHVzZWRTdHJpbmdzLmluZGV4T2YocGFyYW0pPi0xKXtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBhcmFtKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXNlZFN0cmluZ3MucHVzaChwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYocmVzdWx0Lmxlbmd0aD4wKXtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIG92ZXJyaWRlVHJhY2tpbmdSZXF1aXJlbWVudHMoKXtcbiAgICAgIHRoaXMud2hpdGVMaXN0ZWRVcmwgPSB0aGlzLm5ldy51cmw7XG4gICAgfVxuICAgIGRpc3BsYXlGb3JtYXR0ZWRVUkwoKXtcbiAgICAgIC8vZGlzcGxheXMgdXJsO1xuICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXHNlbWxcXC1pZFxcPVxcXCIoWzAtOV0qKVxcXCIvLCBcIlwiKTtcblxuICAgICAgdmFyIGZpbmRTdGFydCA9IFwiaHJlZj1cXFwiXCI7XG4gICAgICB2YXIgc3RhcnQgPSBjb250ZW50LmluZGV4T2YoZmluZFN0YXJ0KTtcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UobmV3IFJlZ0V4cChcImhyZWY9XFxcIlxcXCJcIixcImdcIiksIFwiaHJlZj1cXFwiI1xcXCJcIik7XG4gICAgICAvLyB2YXIgaW1nUmVnID0gL1xcPGltZyhbXj5dLio/KVxcPi9nO1xuICAgICAgaWYodGhpcy5MaW5rZWRJbWFnZSl7XG4gICAgICAgIGNvbnRlbnQgPSB0aGlzLkxpbmtlZEltYWdlLmdlbmVyYXRlT3V0cHV0KGNvbnRlbnQpO1xuICAgICAgfVxuICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyKDAsIHN0YXJ0KSArIGZpbmRTdGFydCsgXCJ8fHxhLmhyZWZ8fHxcIiArIGNvbnRlbnQuc3Vic3RyKHN0YXJ0ICsgKGZpbmRTdGFydC5sZW5ndGgrKHRoaXMub2xkLnVybC5sZW5ndGgpKSwgY29udGVudC5sZW5ndGggKSA7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXFwiXCIsXCJnXCIpLCBcIiZxdW90O1wiKTtcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UobmV3IFJlZ0V4cChcIi9cIixcImdcIiksIFwiJiM0NztcIik7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG5ldyBSZWdFeHAoXCI+XCIsXCJnXCIpLCBcIiZndDtcIik7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG5ldyBSZWdFeHAoXCI8XCIsXCJnXCIpLCBcIiZsdDtcIik7XG5cblxuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvKFteXFxzXSo/KVxcPS9nLFwiPHNwYW4gY2xhc3M9XFxcImF0dHJcXFwiPiQxPC9zcGFuPjxzcGFuIGNsYXNzPVxcXCJrZXl3b3JkXFxcIj49PC9zcGFuPlwiKTtcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcJnF1b3RcXDtcXCZndFxcOy9nLFwiJnF1b3Q7PHNwYW4gY2xhc3M9XFxcInRhZ1xcXCI+Jmd0Ozwvc3Bhbj5cIik7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXCZcXCM0N1xcO1xcJmd0XFw7L2csXCI8c3BhbiBjbGFzcz1cXFwidGFnXFxcIj4mIzQ3OyZndDs8L3NwYW4+XCIpO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFwmcXVvdFxcOyguKj8pXFwmcXVvdFxcOy9nLFwiPHNwYW4gY2xhc3M9XFxcInZhbHVlXFxcIj5cXFwiJDFcXFwiPC9zcGFuPlwiKTtcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcJmx0XFw7KFthLXpdK1xccz8pL2csXCI8c3BhbiBjbGFzcz1cXFwidGFnXFxcIj4mbHQ7JDE8L3NwYW4+XCIpO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFwmbHRcXDtcXCZcXCM0N1xcOyhbYS16XStcXHM/KVxcJmd0XFw7L2csXCI8c3BhbiBjbGFzcz1cXFwidGFnXFxcIj4mbHQ7JiM0NzskMSZndDs8L3NwYW4+XCIpO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxuL2csXCI8YnI+XCIpO1xuXG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXCZndFxcOy9nLFwiPHNwYW4gY2xhc3M9XFxcInRhZ1xcXCI+Jmd0Ozwvc3Bhbj5cIik7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXHN7M30vZyxcIiZuYnNwOyZuYnNwOyZuYnNwXCIpO1xuXG4gICAgICAvLyBpZih0aGlzLkxpbmtlZEltYWdlKSB7XG4gICAgICAvLyAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcfFxcfFxcfGltZ1xcLmFsdFxcfFxcfFxcfC9nLCB0aGlzLkxpbmtlZEltYWdlLmFsdCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMuTGlua2VkSW1hZ2UuYWx0KTtcbiAgICAgIC8vIH1cblxuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFx8XFx8XFx8YVxcLmhyZWZcXHxcXHxcXHwvZywgXCI8c3Ryb25nPlwiKyh0aGlzLmhhc093blByb3BlcnR5KFwiZGVsZXRlT25SZW5kZXJcIikgJiYgdGhpcy5kZWxldGVPblJlbmRlciA/IHRoaXMub2xkLnVybCA6IHRoaXMubmV3LnVybCkrXCI8L3N0cm9uZz5cIik7XG5cblxuXG5cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaXNMaW5rQ29tcGxldGUoKXtcbiAgICAgIC8vaW50ZWxsaWdlbmNlIHNjYW5zOlxuICAgICAgdGhpcy5fc3VwZXIuaW50ZWxsaWdlbmNlLmV2YWx1YXRlUnVsZXMoKTtcbiAgICAgIHRoaXMuZXJyb3JzLmV2YWx1YXRlUnVsZXMoKTtcbiAgICAgIC8vdHJhY2sgY2hhbmdlczpcbiAgICAgIHRoaXMuQ2hhbmdlTW9uaXRvci51cGRhdGUoKTtcblxuICAgICAgdGhpcy5fX2lzQ29tcGxldGU9IHRoaXMuZXJyb3JzLmNhbkNvbnRpbnVlO1xuICAgICAgaWYodGhpcy5oYXNPd25Qcm9wZXJ0eShcImRlbGV0ZU9uUmVuZGVyXCIpJiYgdGhpcy5kZWxldGVPblJlbmRlcikgdGhpcy5fX2lzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMuX19pc0NvbXBsZXRlO1xuICAgIH1cblxuICAgIGlzTGlua1R5cGUodHlwZSk6IGJvb2xlYW4ge1xuICAgICAgdmFyIG91dHB1dCA9IGZhbHNlO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJodHRwXCI6XG4gICAgICAgICAgaWYodGhpcy5uZXcucHJvdG9jb2w9PVwiaHR0cDpcIiB8fCB0aGlzLm5ldy5wcm90b2NvbD09XCJodHRwczpcIil7XG4gICAgICAgICAgICBvdXRwdXQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1haWx0b1wiOlxuICAgICAgICAgIGlmKHRoaXMubmV3LnByb3RvY29sPT1cIm1haWx0bzpcIil7XG4gICAgICAgICAgICBvdXRwdXQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcblxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG5cbiAgICBoYXNUcmFja2luZ0NvZGUob2JqPyk6IGJvb2xlYW4gey8vc3VzcGVjdFxuICAgICAgaWYob2JqPT09dW5kZWZpbmVkKSBvYmogPSB0aGlzLm5ldy51cmw7XG4gICAgICAvLyBpZih0aGlzLndoaXRlTGlzdGVkVXJsPT10aGlzLm5ldykgcmV0dXJuIHRydWU7XG4gICAgICB2YXIgYSA9IC9bYS16XXsxLDR9PSguKj86KXszLDl9L2lnO1xuICAgICAgcmV0dXJuIGEudGVzdChvYmopO1xuICAgIH1cbiAgICByZXF1aXJlc1RyYWNraW5nQ29kZShvYmo/KTogYm9vbGVhbiB7XG4gICAgICB2YXIgb3V0cHV0OiBib29sZWFuID0gZmFsc2U7XG4gICAgICBpZihHbG9iYWxWYXJzLlJlcXVpcmVzVHJhY2tpbmdDb2RlUmVnZXgudGVzdCh0aGlzLm5ldy51cmwpKSB7XG4gICAgICAgIG91dHB1dCA9IHRydWU7XG4gICAgICAgIC8vIGl0ZXJhdGUgb2ZlciB3aGl0ZWxpc3RcbiAgICAgICAgZm9yKHZhciBpID0wOyBpIDwgR2xvYmFsVmFycy5SZXF1aXJlZFRyYWNraW5nQ29kZVdoaXRlbGlzdC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgaWYoIEdsb2JhbFZhcnMuUmVxdWlyZWRUcmFja2luZ0NvZGVXaGl0ZWxpc3RbaV0gaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgIGlmKEdsb2JhbFZhcnMuUmVxdWlyZWRUcmFja2luZ0NvZGVXaGl0ZWxpc3RbaV1bXCJ0ZXN0XCJdKHRoaXMubmV3LnVybCkpIHsgb3V0cHV0ID0gZmFsc2U7IH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYodGhpcy5uZXcudXJsLmluZGV4T2YoR2xvYmFsVmFycy5SZXF1aXJlZFRyYWNraW5nQ29kZVdoaXRlbGlzdFtpXSk+LTEpIHsgb3V0cHV0ID0gZmFsc2U7IH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIHJlcXVpcmVzU0NvZGUoKTogYm9vbGVhbiB7XG4gICAgICBpZihHbG9iYWxWYXJzLlJlcXVpcmVzU0NvZGVSZWdleC50ZXN0KHRoaXMubmV3LnVybCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgbmVlZHNUcmFja2luZ0NvZGUoKTogYm9vbGVhbiB7XG4gICAgICB2YXIgb3V0cHV0OiBib29sZWFuID0gdGhpcy5yZXF1aXJlc1RyYWNraW5nQ29kZSgpO1xuICAgICAgaWYodGhpcy53aGl0ZUxpc3RlZFVybD09dGhpcy5uZXcudXJsKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBkZXRlcm1pbmUgbGlua3MgdGhhdCBuZWVkIHNwZWNpYWwgdHJhY2tpbmdcbiAgICAgIGlmKHRoaXMuaGFzVHJhY2tpbmdDb2RlKCkgKXtcbiAgICAgICAgb3V0cHV0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICB1cGRhdGVJbnB1dCgpe1xuICAgICAgaWYodGhpcy5pc0xpbmtUeXBlKCdtYWlsdG8nKSl7XG4gICAgICAgIHRoaXMubWFpbHRvLnVwZGF0ZU1haWx0b09iaigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5uZXcuc2VhcmNoUGFyYW1zLnVwZGF0ZUVudHJpZXMoKVxuICAgICAgfVxuICAgICAgdGhpcy5pc0xpbmtDb21wbGV0ZSgpO1xuICAgIH1cblxuICB9XG5cblxuXG5cbiAgZXhwb3J0IGNsYXNzIENoYW5nZU1vbml0b3J7XG4gICAgX3N1cGVyOiBMaW5rT2JqZWN0O1xuICAgIG1lc3NhZ2VzOiBDaGFuZ2VNb25pdG9yTXNnW107XG4gICAgdmlzaWJsZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKF9zdXBlcil7XG4gICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3N1cGVyID0gX3N1cGVyO1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIH1cbiAgICBjb21wYXJlT2xkQW5kTmV3KCk6IHN0cmluZ1tde1xuICAgICAgbGV0IHVybFBhcmFtcyA9IFtcInByb3RvY29sXCIsXCJvcmlnaW5cIixcInNlYXJjaFwiLFwiaGFzaFwiXTtcbiAgICAgIHZhciBjaGFuZ2VkID0gW107XG4gICAgICB2YXIgX3N1cGVyID0gdGhpcy5fc3VwZXI7XG4gICAgICB1cmxQYXJhbXMuZm9yRWFjaChmdW5jdGlvbihwYXJhbSl7XG4gICAgICAgIGlmKF9zdXBlci5vbGQuaGFzT3duUHJvcGVydHkocGFyYW0pICYmIF9zdXBlci5vbGRbcGFyYW1dIT09IF9zdXBlci5uZXdbcGFyYW1dKXtcbiAgICAgICAgICBjaGFuZ2VkLnB1c2gocGFyYW0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmKF9zdXBlci5MaW5rZWRJbWFnZSAmJiBfc3VwZXIuTGlua2VkSW1hZ2UuYWx0IT09X3N1cGVyLkxpbmtlZEltYWdlT2xkLmFsdCl7XG4gICAgICAgIGNoYW5nZWQucHVzaChcImFsdFwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cbiAgICBiZWZvcmVEaWRSZXR1cm5DaGFuZ2VzKCl7IH1cbiAgICBhZnRlckRpZFJldHVybkNoYW5nZXMoKXsgfVxuICAgIHVwZGF0ZSgpe1xuICAgICAgaWYodGhpcy5fc3VwZXIucmVhZE9ubHkgPT0gZmFsc2Upe1xuICAgICAgICB2YXIgb3V0cHV0ID0gW107XG4gICAgICAgIGxldCBjaGFuZ2VzID0gdGhpcy5jb21wYXJlT2xkQW5kTmV3KCk7XG4gICAgICAgIHZhciBDTSA9IHRoaXM7XG4gICAgICAgIGNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbihzY29wZSl7XG4gICAgICAgICAgb3V0cHV0LnB1c2goQ00uYXJ0aWN1bGF0ZUNoYW5nZXMoc2NvcGUsIHt9KSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gb3V0cHV0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBhcmVTZWFyY2hTdHJpbmdzKG9sZFAsIG5ld1ApOiBTZWFyY2hTdHJpbmdQYXlsb2FkIHtcbiAgICAgIHZhciBwYXlsb2FkOiBTZWFyY2hTdHJpbmdQYXlsb2FkID0ge1xuICAgICAgICBhZGRlZDogW10sXG4gICAgICAgIHVwZGF0ZWQ6IFtdLFxuICAgICAgICByZW1vdmVkOltdXG4gICAgICB9O1xuICAgICAgZm9yKHZhciBpIGluIG9sZFApe1xuICAgICAgICBpZihuZXdQLmluZGV4T2Yob2xkUFtpXSk9PT0tMSl7IHBheWxvYWQucmVtb3ZlZC5wdXNoKG9sZFBbaV0pIH1cbiAgICAgIH1cbiAgICAgIGZvcihpIGluIG5ld1Ape1xuICAgICAgICBpZihvbGRQLmluZGV4T2YobmV3UFtpXSk9PT0tMSl7IHBheWxvYWQuYWRkZWQucHVzaChuZXdQW2ldKSB9XG4gICAgICB9XG4gICAgICBsZXQgZmluZF9wYXR0ZXJuX2luQXJyYXkgPSBmdW5jdGlvbihwYXR0ZXJuOlJlZ0V4cCwgYXJyOiBzdHJpbmdbXSl7XG4gICAgICAgIHZhciBvdXRwdXQ6IG51bWJlciA9IC0xO1xuICAgICAgICAgZm9yKHZhciB5PTA7eTxhcnIubGVuZ3RoO3krKyl7XG4gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidXVwZGF0cmVkP1wiLHkpO1xuICAgICAgICAgICBpZihwYXR0ZXJuLnRlc3QoYXJyW3ldKSl7XG4gICAgICAgICAgICAgb3V0cHV0ID0geTtcbiAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgfTtcbiAgICAgIGZvcihpIGluIG9sZFApe1xuICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKG9sZFBbaV0uc3BsaXQoXCI9XCIpWzBdK1wiPVwiKTtcbiAgICAgICAgdmFyIGZvdW5kID0gZmluZF9wYXR0ZXJuX2luQXJyYXkocmUsIHBheWxvYWQuYWRkZWQpO1xuICAgICAgICBpZihmb3VuZD4tMSl7XG4gICAgICAgICAgcGF5bG9hZC51cGRhdGVkLnB1c2gocGF5bG9hZC5hZGRlZFtmb3VuZF0pO1xuICAgICAgICAgIHZhciBvdGhlciA9IGZpbmRfcGF0dGVybl9pbkFycmF5KHJlLCBwYXlsb2FkLnJlbW92ZWQpO1xuICAgICAgICAgIHBheWxvYWQucmVtb3ZlZC5zcGxpY2Uob3RoZXIsMSk7XG4gICAgICAgICAgcGF5bG9hZC5hZGRlZC5zcGxpY2UoZm91bmQsMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH1cbiAgICBhcnRpY3VsYXRlQ2hhbmdlcyhzY29wZSwgYXJncyk6IHttZXNzYWdlOiBzdHJpbmcsIGRhdGE6IGFueX0ge1xuICAgICAgaWYoc2NvcGU9PVwicHJvdG9jb2xcIil7XG4gICAgICAgIGlmKHRoaXMuX3N1cGVyLm5ldy5wcm90b2NvbCA9PSBcIm1haWx0bzpcIil7XG4gICAgICAgICAgcmV0dXJuIHttZXNzYWdlOiBcIkNoYW5nZWQgdG8gbWFpbHRvIGxpbmsuXCIsIGRhdGE6IFtdfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogKHRoaXMuX3N1cGVyLm9sZC5wcm90b2NvbD09XCJcIiA/IFwiVXBkYXRlZFwiIDogXCJDaGFuZ2VkXCIpK1wiIHByb3RvY29sIHRvIFwiICsgdGhpcy5fc3VwZXIubmV3LnByb3RvY29sLFxuICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYoc2NvcGU9PVwib3JpZ2luXCIpe1xuICAgICAgICBpZih0aGlzLl9zdXBlci5uZXcucHJvdG9jb2wgPT0gXCJtYWlsdG86XCIpe1xuICAgICAgICAgIHJldHVybiB7bWVzc2FnZTogXCJDaGFuZ2VkIG1haWx0byBsaW5rIHRvIFwiICsgdGhpcy5fc3VwZXIubmV3Lm9yaWdpbiwgZGF0YTogW119O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7bWVzc2FnZTogXCJDaGFuZ2VkIGxpbmsgVVJMIHRvIFwiICsgdGhpcy5fc3VwZXIubmV3Lm9yaWdpbiwgZGF0YTogW119O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYoc2NvcGU9PVwiYWx0XCIpIHtcbiAgICAgICAgaWYodGhpcy5fc3VwZXIuTGlua2VkSW1hZ2UuYWx0ID09IFwiXCIpe1xuICAgICAgICAgIHJldHVybiB7bWVzc2FnZTogXCJSZW1vdmVkIGxpbmtlZCBpbWFnZSBBTFQgdGV4dFwiLCBkYXRhOiBbXX07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHttZXNzYWdlOiBcIlVwZGF0ZWQgbGlua2VkIGltYWdlIEFMVCB0ZXh0IHRvIDxiPlwiICsgdGhpcy5fc3VwZXIuTGlua2VkSW1hZ2UuYWx0ICsgXCI8L2I+XCIsIGRhdGE6IFtdfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmKHNjb3BlPT1cInNlYXJjaFwiKSB7XG5cbiAgICAgICAgbGV0IG9sZFBhcmFtcyA9IHRoaXMuX3N1cGVyLm9sZC5zZWFyY2hQYXJhbXMuX2VudHJpZXM7XG4gICAgICAgIGxldCBuZXdQYXJhbXMgPSB0aGlzLl9zdXBlci5uZXcuc2VhcmNoUGFyYW1zLl9lbnRyaWVzO1xuXG4gICAgICAgIGxldCBzZWFyY2hDaGFuZ2VzID0gdGhpcy5jb21wYXJlU2VhcmNoU3RyaW5ncyhvbGRQYXJhbXMsIG5ld1BhcmFtcyk7XG5cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlwiO1xuICAgICAgICB2YXIgX3N1cGVyID0gdGhpcy5fc3VwZXI7XG4gICAgICAgIFtcInVwZGF0ZWRcIixcImFkZGVkXCIsXCJyZW1vdmVkXCJdLmZvckVhY2goZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICBpZihzZWFyY2hDaGFuZ2VzW2tleV0ubGVuZ3RoPjApe1xuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyBrZXlbMF0udG9VcHBlckNhc2UoKStrZXkuc3Vic3RyKDEsa2V5Lmxlbmd0aCkgKyBcIiBcIisoX3N1cGVyLm5ldy5wcm90b2NvbD09XCJtYWlsdG86XCIgPyBcInBhcmFtZXRlclwiIDogXCJxdWVyeSBzdHJpbmdcIikrKHNlYXJjaENoYW5nZXNba2V5XS5sZW5ndGg+MSA/IFwic1wiOiBcIlwiKSArIFwiOiA8Yj5cIiArIHNlYXJjaENoYW5nZXNba2V5XS5qb2luKFwiLCBcIikgKyBcIjwvYj48YnI+XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlLCBkYXRhOiBbXSB9O1xuXG5cbiAgICAgIH0gZWxzZSBpZihzY29wZT09XCJoYXNoXCIpIHtcbiAgICAgICAgaWYodGhpcy5fc3VwZXIub2xkLmhhc2ggPT1cIlwiKSB7XG4gICAgICAgICAgcmV0dXJuIHttZXNzYWdlOiBcIllvdSBhZGRlZCB0aGUgaGFzaCBcIiArIHRoaXMuX3N1cGVyLm5ldy5oYXNoLCBkYXRhOltdfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZih0aGlzLl9zdXBlci5uZXcuaGFzaCA9PVwiXCIpe1xuICAgICAgICAgICAgcmV0dXJuIHttZXNzYWdlOiBcIllvdSByZW1vdmVkIHRoZSBoYXNoIFwiICsgdGhpcy5fc3VwZXIub2xkLmhhc2gsIGRhdGE6W119O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge21lc3NhZ2U6IFwiWW91IGNoYW5nZWQgdGhlIGhhc2ggZnJvbSBcIiArIHRoaXMuX3N1cGVyLm9sZC5oYXNoICsgXCIgdG8gXCIgKyB0aGlzLl9zdXBlci5uZXcuaGFzaCwgZGF0YTpbXX07XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfVxuICBleHBvcnQgY2xhc3MgRU1MV29ya3NwYWNlIHtcblxuICAgIHNjb3BlOiBhbnk7XG4gICAgYnVmZmVyOiBhbnk7XG4gICAgbGlua3NWaWV3OiBzdHJpbmc7XG4gICAgc291cmNlQ29kZTogc3RyaW5nO1xuICAgIHdvcmtpbmdDb2RlOiBzdHJpbmc7XG4gICAgb3V0cHV0Q29kZTogc3RyaW5nO1xuICAgIGludGVsbGlnZW5jZTogYW55O1xuICAgIG92ZXJyaWRkZW5JZHM6c3RyaW5nW107XG4gICAga2V5Qm9hcmRTaG9ydGN1dHM6IGFueVtdO1xuICAgIG1lc3NhZ2VzOiBhbnlbXTtcbiAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgIGxpbmtEYXRhOiBMaW5rT2JqZWN0W107XG4gICAgcHJldmlld1RleHQ6IFByZXZpZXdUZXh0T2JqZWN0O1xuICAgIF9kZWZhdWx0U0NvZGU6IHN0cmluZztcbiAgICBoZWFkZXI6IGFueTtcbiAgICBlcnJvcnM6IGFueTtcbiAgICBleHBvcnRGb3JFbG9xdWE6IHN0cmluZztcbiAgICBfX2VtbEhlYWRlcnM6IHN0cmluZztcbiAgICBfX2FsbG93YWJsZUhlYWRlckZpZWxkczogYW55O1xuICAgIGhlYWRlcnM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoaHRtbDogc3RyaW5nLCAkc2NvcGU6IGFueSl7XG4gICAgICB0aGlzLm92ZXJyaWRkZW5JZHMgPSBbXTtcbiAgICAgIGlmKCBodG1sID09PSB1bmRlZmluZWQpIGh0bWwgPSBcIlwiO1xuICAgICAgaWYoICRzY29wZSA9PT0gdW5kZWZpbmVkKSAkc2NvcGUgPSBcIlwiO1xuICAgICAgdmFyIFdvcmtzcGFjZSA9IHRoaXM7XG5cbiAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgIHRoaXMuc2NvcGUgPSAkc2NvcGU7XG4gICAgICB0aGlzLmxpbmtzVmlldyA9ICdleHBlcmltZW50YWwnOyAvL2FkdmFuY2VkIHNob3dzIGFsbFxuICAgICAgdGhpcy5zb3VyY2VDb2RlID0gaHRtbDsgLy9pbml0YWxcbiAgICAgIHRoaXMud29ya2luZ0NvZGUgPSBcIlwiO1xuICAgICAgdGhpcy5maWxlTmFtZSA9IFwiZW1sLW1ha2VyLXVudGl0bGVkXCI7XG4gICAgICB0aGlzLmxpbmtEYXRhID0gW107XG4gICAgICB0aGlzLl9kZWZhdWx0U0NvZGUgPSBcInM9ZW1haWxcIjtcbiAgICAgIHRoaXMuaGVhZGVyID0ge1wic3ViamVjdFwiOlwiXCJ9O1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgICAgdGhpcy5leHBvcnRGb3JFbG9xdWEgID0gXCJZZXNcIjtcblxuICAgICAgdGhpcy5fX2VtbEhlYWRlcnMgPSBcIlwiO1xuICAgICAgdGhpcy5rZXlCb2FyZFNob3J0Y3V0cyA9IFtdO1xuICAgICAgdGhpcy5fX2FsbG93YWJsZUhlYWRlckZpZWxkcyA9IHtcbiAgICAgICAgXCJ0b1wiOiB7c3ludGF4OlwiVG86IFwiLCBsYWJlbDpcIlRvXCIsIGluc3RydWN0aW9uczogXCJBIGxpc3Qgb2YgZW1haWwgYWRkcmVzc2VzIHNlcGFyYXRlZCBieSBjb21tYXMuXCJ9LFxuICAgICAgICBcInN1YmplY3RcIjoge3N5bnRheDogXCJTdWJqZWN0OiBcIiwgbGFiZWw6XCJTdWJqZWN0XCIsIGluc3RydWN0aW9uczogXCJcIn0sXG4gICAgICAgIFwiY2NcIiA6IHtzeW50YXg6XCJDYzogXCIsIGxhYmVsOlwiQ0NcIiwgaW5zdHJ1Y3Rpb25zOiBcIkEgbGlzdCBvZiBlbWFpbCBhZGRyZXNzZXMgc2VwYXJhdGVkIGJ5IGNvbW1hcy5cIn0sXG4gICAgICAgIFwicmVwbHl0b1wiOiB7IHN5bnRheDpcIlJlcGx5LXRvOiBcIiwgbGFiZWw6XCJSZXBseSB0b1wiLCBpbnN0cnVjdGlvbnM6IFwiQSBsaXN0IG9mIGVtYWlsIGFkZHJlc3NlcyBzZXBhcmF0ZWQgYnkgY29tbWFzLlwifVxuICAgICAgfTtcbiAgICAgIHRoaXMuaGVhZGVycyA9IFtcbiAgICAgICAgXCJYLVVuc2VudDogMVwiLFxuICAgICAgICBcIk1pbWUtVmVyc2lvbjogMS4wIChNYWMgT1MgWCBNYWlsIDEwLjEgXFwoMzI1MVxcKSlcIixcbiAgICAgICAgXCJYLVVuaWZvcm0tVHlwZS1JZGVudGlmaWVyOiBjb20uYXBwbGUubWFpbC1kcmFmdFwiLFxuICAgICAgICBcIkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IDdiaXRcIlxuICAgICAgXTtcbiAgICAgIHRoaXMuaW50ZWxsaWdlbmNlID0gRU1MTWFrZXIuaW50ZWxsaWdlbmNlLm1vZHVsZShcImVtYWlsXCIpLm1vbml0b3IoKTtcbiAgICAgIHRoaXMuaW50ZWxsaWdlbmNlLmluamVjdChcIkVNTFdvcmtzcGFjZVwiLCB0aGlzKTtcbiAgICB9XG4gICAgbWFwTGlua09iamVjdHMoY2FsbGJhY2spe1xuICAgICAgaWYodGhpcy5saW5rRGF0YS5sZW5ndGg+MCl7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMubGlua0RhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIGNhbGxiYWNrKHRoaXMubGlua0RhdGFbaV0pO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29tcG9zZUVNTCgpOnZvaWR7XG4gICAgICBsb2NhdGlvbi5ocmVmPSBcIiMvZXhwb3J0LWNvbXBvc2UtZW1sXCI7XG4gICAgfVxuXG4gICAgZG93bmxvYWRFbWwoKTp2b2lke1xuXG4gICAgICB2YXIgYmVmb3JlRGlkRG93bmxvYWRFbWwgPSBFTUxNYWtlci5maWx0ZXIubW9kdWxlKFwiYmVmb3JlRGlkRG93bmxvYWRFbWxcIik7XG4gICAgICBiZWZvcmVEaWREb3dubG9hZEVtbC5pbmplY3QoXCJFTUxXb3Jrc3BhY2VcIiwgdGhpcyk7XG5cbiAgICAgIHZhciBvdXRwdXQgPSBiZWZvcmVEaWREb3dubG9hZEVtbC5hcHBseUZpbHRlcih0aGlzLmdlbmVyYXRlT3V0cHV0Q29kZShcIm9mdFwiKSk7XG4gICAgICBvdXRwdXQgPSB0aGlzLl9fZW1sSGVhZGVycyArIFwiXFxuXFxuXCIgKyB0aGlzLl9fcmVtb3ZlV2hpdGVTcGFjZSh0aGlzLl9fcmVwbGFjZUVsb3F1YU1lcmdlRmllbGRzKG91dHB1dCkpO1xuICAgICAgdGhpcy5maWxlTmFtZSA9IHRoaXMuX19mb3JtYXRGaWxlTmFtZSh0aGlzLmZpbGVOYW1lKTtcblxuICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgICAgTGlua09iamVjdC5DaGFuZ2VNb25pdG9yLnVwZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgICB3aW5kb3cuc2F2ZUFzKG5ldyBCbG9iKFtvdXRwdXRdLCB7dHlwZTpcInRleHQvaHRtbFwifSksIHRoaXMuZmlsZU5hbWUrXCIuZW1sXCIpO1xuICAgICAgdGhpcy5hZnRlckRpZERvd25sb2FkRW1sKCk7XG4gICAgfVxuXG4gICAgYWZ0ZXJEaWREb3dubG9hZEVtbCgpe1xuICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJFTUxcIiwgXCJkb3dubG9hZFwiLCBcIkVNTCBFeHBvcnRcIik7XG4gICAgICBsb2NhdGlvbi5ocmVmPSBcIiMvZXhwb3J0LWVtbFwiO1xuICAgIH1cblxuICAgIGRvd25sb2FkQ3N2KCk6dm9pZHtcbiAgICAgIHZhciBvdXRwdXQgPSBcIkNvbnRleHQsT3JpZ2luYWwgVVJMLE1vZGlmaWVkIFVSTFxcblwiO1xuICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KSB7XG4gICAgICAgIG91dHB1dCArPSBMaW5rT2JqZWN0LmNvbnRleHQucmVwbGFjZSgvLC9nLCBcIihjb21tYSlcIikgKyBcIixcIiArIExpbmtPYmplY3Qub2xkLnVybCArIFwiLFwiICtMaW5rT2JqZWN0Lm5ldy51cmwgKyBcIlxcblwiO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmZpbGVOYW1lID0gdGhpcy5fX2Zvcm1hdEZpbGVOYW1lKHRoaXMuZmlsZU5hbWUpO1xuICAgICAgd2luZG93LnNhdmVBcyhuZXcgQmxvYihbb3V0cHV0XSwge3R5cGU6XCJ0ZXh0L2NzdlwifSksIHRoaXMuZmlsZU5hbWUrXCJfbGlua3MuY3N2XCIpO1xuICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJDU1ZcIiwgXCJkb3dubG9hZFwiLCBcIkNTViBFeHBvcnRcIik7XG4gICAgfVxuXG4gICAgZG93bmxvYWRIdG1sKCk6dm9pZHtcbiAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmJlZm9yZURpZERvd25sb2FkSHRtbCh0aGlzLmdlbmVyYXRlT3V0cHV0Q29kZShcImVtYWlsXCIpKTtcbiAgICAgIHRoaXMuZmlsZU5hbWUgPSB0aGlzLl9fZm9ybWF0RmlsZU5hbWUodGhpcy5maWxlTmFtZSk7XG4gICAgICB3aW5kb3cuc2F2ZUFzKG5ldyBCbG9iKFtvdXRwdXRdLCB7dHlwZTpcInRleHQvaHRtbFwifSksIHRoaXMuZmlsZU5hbWUrXCIuaHRtbFwiKTtcbiAgICAgIHRoaXMuYWZ0ZXJEaWREb3dubG9hZEh0bWwoKTtcbiAgICB9XG4gICAgYmVmb3JlRGlkRG93bmxvYWRIdG1sKGNvZGUpe1xuICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuICAgIGFmdGVyRGlkRG93bmxvYWRIdG1sKCl7XG4gICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIkhUTUxcIiwgXCJkb3dubG9hZFwiLCBcIkhUTUwgRXhwb3J0XCIpO1xuICAgIH1cblxuXG4gICAgZXhwb3J0Q29kZVRvSFRNTCgpOnZvaWR7XG4gICAgICB0aGlzLmJlZm9yZURpZEV4cG9ydENvZGVUb0hUTUwoKTtcbiAgICAgIHRoaXMub3V0cHV0Q29kZSA9IHRoaXMuZ2VuZXJhdGVPdXRwdXRDb2RlKFwiZW1haWxcIik7XG4gICAgICB0aGlzLmFmdGVyRGlkRXhwb3J0Q29kZVRvSFRNTCgpO1xuICAgIH1cbiAgICBiZWZvcmVEaWRFeHBvcnRDb2RlVG9IVE1MKCl7XG5cblxuICAgICAgaWYodGhpcy5leHBvcnRGb3JFbG9xdWEgJiYgdGhpcy5leHBvcnRGb3JFbG9xdWEgPT0gXCJZZXNcIikge1xuICAgICAgICB3aW5kb3cuZ2EoJ3NlbmQnLCAnZXZlbnQnLCBcIkhUTUxcIiwgXCJBZGQgRWxvcXVhIFRyYWNraW5nXCIsIFwiQWRkIEVsb3F1YSBUcmFja2luZ1wiKTtcbiAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgICAgICB0cmFja2luZ09wdE91dCA9IExpbmtPYmplY3Qud2hpdGVMaXN0ZWRVcmwgPT0gTGlua09iamVjdC5uZXcudXJsO1xuICAgICAgICAgIGlmKCFMaW5rT2JqZWN0LmlzTGlua1R5cGUoXCJtYWlsdG9cIilcbiAgICAgICAgICAmJiAhTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmhhcyhcImVscVRyYWNrXCIpXG4gICAgICAgICAgJiYgIS9hcHBcXC5pbmZvXFwub3B0dW1cXC5jb20vZ2kudGVzdChMaW5rT2JqZWN0Lm5ldy51cmwpKXtcbiAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJlbHFUcmFjaz10cnVlXCIpO1xuXG4gICAgICAgICAgICBpZih0cmFja2luZ09wdE91dCkge1xuICAgICAgICAgICAgICBMaW5rT2JqZWN0LndoaXRlTGlzdGVkVXJsID0gTGlua09iamVjdC5uZXcudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgICAgICBpZihMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKFwiZWxxVHJhY2tcIikpe1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXMuaW5kZXhPZihcImVscVRyYWNrPXRydWVcIik7XG4gICAgICAgICAgICBpZihpbmRleD4tMSl7XG4gICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBdEluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgTGlua09iamVjdC5DaGFuZ2VNb25pdG9yLnVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgICAgaWYoIUxpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5oYXMoXCJzXCIpICYmIExpbmtPYmplY3QucmVxdWlyZXNTQ29kZSgpKXtcbiAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicz1lbWFpbFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZihMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuaGFzKFwic1wiKSAmJiBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZ2V0KFwic1wiKT09XCJvZnRcIil7XG4gICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuc2V0KFwic1wiLFwiZW1haWxcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIExpbmtPYmplY3QuQ2hhbmdlTW9uaXRvci51cGRhdGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgICBMaW5rT2JqZWN0LkNoYW5nZU1vbml0b3IudXBkYXRlKCk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgICBhZnRlckRpZEV4cG9ydENvZGVUb0hUTUwoKXtcbiAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24oTGlua09iamVjdCl7XG4gICAgICAgIGlmKExpbmtPYmplY3Qud2hpdGVMaXN0ZWRVcmw9PUxpbmtPYmplY3QubmV3LnVybCl7XG4gICAgICAgICAgLy9yZXBvcnQgdGhlIG5vbiB0cmFja2VkIGxpbms7XG4gICAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJUcmFja2luZy1PcHRvdXRcIiwgXCJvdmVycmlkZVwiLCBMaW5rT2JqZWN0Lm5ldy51cmwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5nYSgnc2VuZCcsICdldmVudCcsIFwiSFRNTFwiLCBcInZpZXcgc291cmNlY29kZVwiLCBcIkV4cG9ydC9WaWV3IEhUTUxcIik7XG4gICAgICBsb2NhdGlvbi5ocmVmPSBcIiMvZXhwb3J0LWh0bWxcIjtcbiAgICB9XG4gICAgcmVtb3ZlQWxsU2VhcmNoU3RyaW5ncygpOnZvaWR7XG4gICAgICB2YXIgX3RoaXM9IHRoaXM7XG4gICAgICAvLyB0aGlzLnNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgICAgIGlmKExpbmtPYmplY3QucmVhZE9ubHkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJvXCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJvaW5cIik7XG4gICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInZcIik7XG4gICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm9pZXhcIik7XG4gICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVscV9taWRcIik7XG4gICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVscV9saWRcIik7XG4gICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVscVRyYWNrXCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFUcmFja0lkXCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJzXCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJzM1wiKTtcblxuICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgICBfdGhpcy5hcmVMaW5rc0NvbXBsZXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRWxvcXVhU2VhcmNoU3RyaW5ncygpOnZvaWR7XG4gICAgICB2YXIgX3RoaXM9IHRoaXM7XG4gICAgICAvLyB0aGlzLnNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgICAgIGlmKExpbmtPYmplY3QucmVhZE9ubHkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJ2XCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFfbWlkXCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFfbGlkXCIpO1xuICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbHFUcmFja1wiKTtcbiAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxVHJhY2tJZFwiKTtcblxuICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgICBfdGhpcy5hcmVMaW5rc0NvbXBsZXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyB9KTtcbiAgICB9XG5cbiAgICBzZXRVcFNob3J0Y3V0S2V5cygpOnZvaWR7XG4gICAgICAvLyB2YXIgX3RoaXM9IHRoaXM7XG4gICAgICAvLyB0aGlzLmtleUJvYXJkU2hvcnRjdXRzID0gW107XG4gICAgICAvL1xuICAgICAgLy8gX3RoaXMua2V5Qm9hcmRTaG9ydGN1dHMucHVzaChcbiAgICAgIC8vICAgbmV3IEtleWJvYXJkU2hvcnRjdXQoXG4gICAgICAvLyAgICAgZnVuY3Rpb24oZSl7IHJldHVybiAoZS5jdHJsS2V5fHxlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS53aGljaCA9PSA1MjsgfSxcbiAgICAgIC8vICAgICBmdW5jdGlvbigpe1xuICAgICAgLy8gICAgICAgLy9kb3RoaXM7XG4gICAgICAvLyAgICAgICBfdGhpcy5zY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ2Rvd25sb2FkaW5nIGZpbGUnKTtcbiAgICAgIC8vICAgICAgICAgX3RoaXMuZG93bmxvYWRIdG1sKCk7XG4gICAgICAvL1xuICAgICAgLy8gICAgICAgfSk7XG4gICAgICAvLyAgICAgfSxcbiAgICAgIC8vICAgICBcIkNUUkwgKyBTSElGVCArIDRcIixcbiAgICAgIC8vICAgICBcIkRvd25sb2FkIEhUTUxcIlxuICAgICAgLy8gICApXG4gICAgICAvLyApO1xuICAgICAgLy9cbiAgICAgIC8vIF90aGlzLmtleUJvYXJkU2hvcnRjdXRzLnB1c2goXG4gICAgICAvLyAgIG5ldyBLZXlib2FyZFNob3J0Y3V0KFxuICAgICAgLy8gICAgIGZ1bmN0aW9uKGUpeyByZXR1cm4gKGUuY3RybEtleXx8ZS5tZXRhS2V5KSAmJiBlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT0gNTE7IH0sXG4gICAgICAvLyAgICAgZnVuY3Rpb24oKXtcbiAgICAgIC8vICAgICAgIC8vZG90aGlzO1xuICAgICAgLy8gICAgICAgX3RoaXMuc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAvLyAgICAgICAgIF90aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgLy8gICAgICAgICAgIGlmKExpbmtPYmplY3QuZXJyb3JzLm1lc3NhZ2VzLmxlbmd0aD4wKXtcbiAgICAgIC8vICAgICAgICAgICAgIExpbmtPYmplY3QuZXJyb3JzLm1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24oTWVzc2FnZU9iamVjdCl7XG4gICAgICAvLyAgICAgICAgICAgICAgIGlmKE1lc3NhZ2VPYmplY3QudHlwZSA9PSBFcnJvclR5cGUuU3VnZ2VzdGlvbil7XG4gICAgICAvLyAgICAgICAgICAgICAgICAgTWVzc2FnZU9iamVjdC5jdGFIYW5kbGVyKCk7XG4gICAgICAvLyAgICAgICAgICAgICAgIH1cbiAgICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgICAgLy8gICAgICAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgLy8gICAgICAgICAgIH1cbiAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAvLyAgICAgICB9KTtcbiAgICAgIC8vICAgICB9LFxuICAgICAgLy8gICAgIFwiQ1RSTCArIFNISUZUICsgM1wiLFxuICAgICAgLy8gICAgIFwiQXBwbHkgYWxsIHN1Z2dlc3Rpb25zXCJcbiAgICAgIC8vICAgKVxuICAgICAgLy8gKTtcbiAgICAgIC8vXG4gICAgICAvLyBfdGhpcy5rZXlCb2FyZFNob3J0Y3V0cy5wdXNoKFxuICAgICAgLy8gICBuZXcgS2V5Ym9hcmRTaG9ydGN1dChcbiAgICAgIC8vICAgICBmdW5jdGlvbihlKXsgcmV0dXJuIChlLmN0cmxLZXl8fGUubWV0YUtleSkgJiYgZS5zaGlmdEtleSAmJiBlLndoaWNoID09IDUwOyB9LFxuICAgICAgLy8gICAgIGZ1bmN0aW9uKCl7XG4gICAgICAvLyAgICAgICAvL2RvdGhpcztcbiAgICAgIC8vICAgICAgIF90aGlzLnNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgLy8gICAgICAgICBfdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgIC8vICAgICAgICAgICBpZighTGlua09iamVjdC5yZWFkT25seVxuICAgICAgLy8gICAgICAgICAgICAgJiYgTGlua09iamVjdC5yZXF1aXJlc1NDb2RlKClcbiAgICAgIC8vICAgICAgICAgICAmJiAhTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmhhcygncycpKXtcbiAgICAgIC8vICAgICAgICAgICAgIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3M9ZW1haWwnKTtcbiAgICAgIC8vICAgICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgIC8vICAgICAgICAgICB9XG4gICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgLy8gICAgICAgfSk7XG4gICAgICAvLyAgICAgfSxcbiAgICAgIC8vICAgICBcIkNUUkwgKyBTSElGVCArIDJcIixcbiAgICAgIC8vICAgICBcIkFkZCBzPWVtYWlsIHRvIGFsbCBsaW5rc1wiXG4gICAgICAvLyAgIClcbiAgICAgIC8vICk7XG4gICAgICAvL1xuICAgICAgLy8gX3RoaXMua2V5Qm9hcmRTaG9ydGN1dHMucHVzaChcbiAgICAgIC8vICAgbmV3IEtleWJvYXJkU2hvcnRjdXQoXG4gICAgICAvLyAgICAgZnVuY3Rpb24oZSl7IHJldHVybiAoZS5jdHJsS2V5fHxlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS53aGljaCA9PSA0OTsgfSxcbiAgICAgIC8vICAgICBmdW5jdGlvbigpe1xuICAgICAgLy8gICAgICAgLy9kb3RoaXM7XG4gICAgICAvLyAgICAgICBfdGhpcy5zY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgIC8vICAgICAgICAgX3RoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24oTGlua09iamVjdCl7XG4gICAgICAvLyAgICAgICAgICAgaWYoTGlua09iamVjdC5yZWFkT25seSkgcmV0dXJuIHRydWU7XG4gICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm9cIik7XG4gICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm9pblwiKTtcbiAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidlwiKTtcbiAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwib2lleFwiKTtcbiAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxX21pZFwiKTtcbiAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxX2xpZFwiKTtcbiAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0Lm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZWxxVHJhY2tcIik7XG4gICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImVscVRyYWNrSWRcIik7XG4gICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInNcIik7XG4gICAgICAvLyAgICAgICAgICAgTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZShcInMzXCIpO1xuICAgICAgLy9cbiAgICAgIC8vICAgICAgICAgICBMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICAvLyAgICAgICAgICAgX3RoaXMuYXJlTGlua3NDb21wbGV0ZSgpO1xuICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgIC8vXG4gICAgICAvLyAgICAgICB9KTtcbiAgICAgIC8vICAgICB9LFxuICAgICAgLy8gICAgIFwiQ1RSTCArIFNISUZUICsgMVwiLFxuICAgICAgLy8gICAgIFwiUmVtb3ZlIGFsbCBxdWVyeSBzdHJpbmdzIGZyb20gZW1haWxcIlxuICAgICAgLy8gICApXG4gICAgICAvLyApO1xuICAgICAgLy9cbiAgICAgIC8vXG4gICAgICAvL1xuICAgICAgLy8gZG9jdW1lbnQub25rZXl1cCA9IGZ1bmN0aW9uKGUpe1xuICAgICAgLy8gICBmb3IobGV0IHNob3J0Y3V0IG9mIF90aGlzLmtleUJvYXJkU2hvcnRjdXRzKXtcbiAgICAgIC8vICAgICBpZihzaG9ydGN1dC53aGVuICYmIHNob3J0Y3V0LndoZW4oZSkpe1xuICAgICAgLy8gICAgICAgc2hvcnRjdXQuZG9UaGlzKCk7XG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9O1xuICAgIH1cbiAgICByZXBsYWNlU3BlY2lhbENoYXJhY3RlcnModGV4dCk6c3RyaW5ne1xuICAgICAgdmFyIHJlcGxhY2UgPSB7XG4gICAgICAgIDE3NDogW1wiJnJlZztcIl0sXG4gICAgICAgIDE2OTogW1wiJmNvcHk7XCJdLFxuICAgICAgICA4MjExIDogW1wiJm5kYXNoO1wiXSxcbiAgICAgICAgODIxMiA6IFtcIiZtZGFzaDtcIl0sXG4gICAgICAgIDgyMjAgOiBbXCImbGRxdW87XCJdLFxuICAgICAgICA4MjIxIDogW1wiJnJkcXVvO1wiXSxcbiAgICAgICAgODIxNiA6IFtcIiZsc3F1bztcIl0sXG4gICAgICAgIDgyMTcgOiBbXCImcnNxdW87XCJdLFxuICAgICAgICA4NDgyIDogW1wiJnRyYWRlO1wiXVxuICAgICAgfTtcbiAgICAgIGZvcihsZXQgaSBpbiByZXBsYWNlKXtcbiAgICAgICAgaWYocmVwbGFjZS5oYXNPd25Qcm9wZXJ0eShpKSl7XG4gICAgICAgICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChpKSksXCJnXCIpO1xuICAgICAgICAgIGlmKHJlZ2V4cC50ZXN0KHRleHQpKXtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZm91bmQgY2hhcmFjdGVyXCIgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGkpKSk7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZVtpXVswXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgcHJvY2Vzc0h0bWwoKTp2b2lke1xuICAgICAgLy9jcmVhdGVzIGEgbmV3IHdvcmtzcGFjZSBmcm9tIGh0bWxcbiAgICAgIHRoaXMuc2V0VXBTaG9ydGN1dEtleXMoKTtcbiAgICAgIHRoaXMubGlua0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuaW50ZWxsaWdlbmNlLm92ZXJyaWRkZW4gPSBbXTtcbiAgICAgIHRoaXMuaW50ZWxsaWdlbmNlLmV2YWx1YXRlUnVsZXMoKTtcblxuICAgICAgd2luZG93LnNjcm9sbFRvKDAsMCk7XG4gICAgICAvLyAucmVwbGFjZShuZXcgUmVnRXhwKFwiPC9hPlwiLFwiaWdcIiksIFwiPC9hPlxcblwiKVxuICAgICAgdGhpcy53b3JraW5nQ29kZSA9IHRoaXMucmVwbGFjZVNwZWNpYWxDaGFyYWN0ZXJzKHRoaXMuc291cmNlQ29kZSk7XG4gICAgICAvL2RldGVybWluZSBlbWFpbCBoZWFkZXJzXG4gICAgICB0aGlzLl9fZW1sSGVhZGVycyA9IHRoaXMuX19idWlsZEhlYWRlcnMoKTtcbiAgICAgIC8vICAgJHNjb3BlLmRhdGEuaGVhZGVyLFxuICAgICAgLy8gICAkc2NvcGUuZGF0YS5hbGxvd2FibGVIZWFkZXJGaWVsZHMpO1xuXG4gICAgICAvL3JlcGxhY2UgbWVyZ2UgZmllbGRzXG4gICAgICBpZih0aGlzLmZpbGVOYW1lPT1cInVudGl0bGVkXCIpe1xuICAgICAgICB2YXIgdGl0bGVSZWcgPSAvPHRpdGxlPihbXjxdLio/KTxcXC90aXRsZT4vZ2k7XG4gICAgICAgIGlmKHRpdGxlUmVnLnRlc3QodGhpcy53b3JraW5nQ29kZSkpe1xuICAgICAgICAgIHZhciB0aXRsZVRhZyA9IHRoaXMud29ya2luZ0NvZGUubWF0Y2godGl0bGVSZWcpO1xuICAgICAgICAgIGlmKHRpdGxlVGFnLmxlbmd0aD4wKXtcbiAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSB0aGlzLl9fZm9ybWF0RmlsZU5hbWUodGl0bGVUYWdbMF0ucmVwbGFjZSh0aXRsZVJlZywgXCIkMVwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vcHJldmlldyBTdHVmZlxuICAgICAgdGhpcy5wcmV2aWV3VGV4dCA9IG5ldyBQcmV2aWV3VGV4dE9iamVjdCh0aGlzKTtcbiAgICAgIHRoaXMucHJldmlld1RleHQuaW5pdCgpO1xuICAgICAgY29uc29sZS5sb2coJ3ByZXZpZXcgdGV4dCcsIHRoaXMucHJldmlld1RleHQpO1xuXG4gICAgICB2YXIgX3N1cGVyID0gdGhpcztcbiAgICAgIHZhciByZTEgPSAvPGFcXGJbXj5dKj8+KFtcXHJcXG5dfC4pKj88XFwvYT4vZ20sIG4gPSAwO1xuICAgICAgdGhpcy53b3JraW5nQ29kZSA9IHRoaXMud29ya2luZ0NvZGUucmVwbGFjZShyZTEsIGZ1bmN0aW9uKGZvdW5kKXtcbiAgICAgICAgbisrOyByZXR1cm4gZm91bmQucmVwbGFjZShcIjxhXCIsIFwiPGEgZW1sLWlkPVxcXCJcIituK1wiXFxcIlwiKTtcbiAgICAgIH0pO1xuXG4gICAgICBuID0gMDtcbiAgICAgIHRoaXMud29ya2luZ0NvZGUgPSB0aGlzLndvcmtpbmdDb2RlLnJlcGxhY2UocmUxLCBmdW5jdGlvbihjb250ZXh0KXtcbiAgICAgICAgbisrO1xuICAgICAgICAvL2dldCBsaW5lXG4gICAgICAgIHZhciBsaW5lID0gX3N1cGVyLndvcmtpbmdDb2RlLnN1YnN0cigwLCBfc3VwZXIud29ya2luZ0NvZGUuaW5kZXhPZihjb250ZXh0KSkuc3BsaXQoXCJcXG5cIikubGVuZ3RoLTE7XG5cbiAgICAgICAgaWYoLyhocmVmXFw9XFxcIihbXlxcXCJcXD5dKilcXFwiPykvZy50ZXN0KGNvbnRleHQpKXtcbiAgICAgICAgICBuKys7XG4gICAgICAgICAgdmFyIGEgPSBuZXcgTGlua09iamVjdChsaW5lLCBjb250ZXh0LCBfc3VwZXIpO1xuICAgICAgICAgIGEuaWQgPSBuO1xuICAgICAgICAgIGEucmVhZE9ubHkgPSAoYS5uZXcuY29udGFpbnMoXCIuY29tL2UvZXMuYXNweFwiKSAmJiBhLm5ldy5jb250YWlucyhcIn5+ZWxvcXVhXCIpKTtcbiAgICAgICAgICBfc3VwZXIubGlua0RhdGEucHVzaChhKTtcbiAgICAgICAgICByZXR1cm4gXCJ7e0VNTE1ha2VyX0xpbms6XCIrbitcIn19XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgfSk7XG5cblxuICAgICAgdGhpcy5tYXBMaW5rT2JqZWN0cyhmdW5jdGlvbihMaW5rT2JqZWN0KXtcbiAgICAgICAgTGlua09iamVjdC5pc0xpbmtDb21wbGV0ZSgpO1xuICAgICAgfSk7XG5cblxuICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbnRlbGxpZ2VuY2UpO1xuICAgICAgLy9yZWRpcmVjdFxuXG4gICAgICBsb2NhdGlvbi5ocmVmPVwiIy9saW5rc1wiO1xuICAgIH1cbiAgICBhZGROZXdIZWFkZXJGaWVsZCh2YWx1ZSl7XG4gICAgICB0aGlzLmhlYWRlclt2YWx1ZV0gPSBcIlwiO1xuICAgIH1cbiAgICByZW1vdmVIZWFkZXJGaWVsZCh2YWx1ZSl7XG4gICAgICBkZWxldGUgdGhpcy5oZWFkZXJbdmFsdWVdO1xuICAgIH1cbiAgICBpc0hlYWRlclNlbGVjdGVkKGhlYWRlcik6Ym9vbGVhbntcbiAgICAgIGlmKCF0aGlzLmhlYWRlci5oYXNPd25Qcm9wZXJ0eShoZWFkZXIpIHx8IHRoaXMuaGVhZGVyPT1cIlwiICApIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgIGVsc2UgeyByZXR1cm4gZmFsc2U7IH1cbiAgICB9XG4gICAgdmVyaWZ5TGlua1NlY3Rpb25Db21wbGV0ZSgpOmJvb2xlYW57XG4gICAgICB2YXIgb3V0cHV0ID0gZmFsc2U7XG5cbiAgICAgIGlmKHRoaXMuaW50ZWxsaWdlbmNlICYmICF0aGlzLmludGVsbGlnZW5jZS5jYW5Db250aW51ZSl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAvLyBhcmUgdGhlcmUgbGluayBpc3N1ZXM/XG4gICAgICBpZiAodGhpcy5saW5rRGF0YSAmJiB0aGlzLmxpbmtEYXRhLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIG91dHB1dCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuYXJlTGlua3NDb21wbGV0ZSgpKSB7XG4gICAgICAgICAgb3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG5cblxuICAgIGdlbmVyYXRlT3V0cHV0Q29kZSh0eXBlPywgY2xvbmU/KTpzdHJpbmd7XG4gICAgICBpZih0eXBlID09PSB1bmRlZmluZWQpIHR5cGUgPSBcImVtYWlsXCI7XG4gICAgICBpZihjbG9uZSA9PT0gdW5kZWZpbmVkKSBjbG9uZSA9IHRydWU7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdmFyIG91dHB1dDpzdHJpbmcgPSB0aGlzLndvcmtpbmdDb2RlO1xuXG4gICAgICAvL3Bvc3QgcHJvY2Vzc2luZy5cbiAgICAgIC8vZG8gcG9zdCBwcm9jZXNzaW5nLlxuICAgICAgLy9leHBvcnQgY29kZT9cbiAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24oTGlua09iamVjdCl7XG5cbiAgICAgICAgLy8gaWYoTGlua09iamVjdC5yZXF1aXJlc1NDb2RlKCkmJiAhTGlua09iamVjdC5uZXcuc2VhcmNoUGFyYW1zLmhhcyhcInNcIikpIExpbmtPYmplY3QubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJzPWVtYWlsXCIpO1xuXG4gICAgICAgIGlmKExpbmtPYmplY3QuaGFzT3duUHJvcGVydHkoXCJkZWxldGVPblJlbmRlclwiKSYmTGlua09iamVjdC5kZWxldGVPblJlbmRlcil7XG4gICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UobmV3IFJlZ0V4cChcInt7RU1MTWFrZXJfTGluazpcIitMaW5rT2JqZWN0LmlkK1wifX1cIiwgXCJnaVwiKSwgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZihMaW5rT2JqZWN0LnJlYWRPbmx5KSB7XG4gICAgICAgICAgbGV0IHJlYWRPbmx5VXJsID0gTGlua09iamVjdC5jb250ZXh0LnJlcGxhY2UoL2VtbFxcLWlkXFw9XFxcIlswLTldezEsfVxcXCJcXHMvZyxcIlwiKTtcbiAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShuZXcgUmVnRXhwKFwie3tFTUxNYWtlcl9MaW5rOlwiK0xpbmtPYmplY3QuaWQrXCJ9fVwiLCBcImdpXCIpLCByZWFkT25seVVybCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgc3RhcnQgPSBMaW5rT2JqZWN0LmNvbnRleHQuaW5kZXhPZihcImhyZWY9XFxcIlwiICsgTGlua09iamVjdC5vbGQudXJsKTtcbiAgICAgICAgICB2YXIgbmV3Q29udGV4dCA9IExpbmtPYmplY3QuY29udGV4dDtcbiAgICAgICAgICBuZXdDb250ZXh0ID0gbmV3Q29udGV4dC5zdWJzdHIoMCxzdGFydCkgKyBcImhyZWY9XFxcIlwiICsgTGlua09iamVjdC5uZXcudXJsICsgbmV3Q29udGV4dC5zdWJzdHIoc3RhcnQrNitMaW5rT2JqZWN0Lm9sZC51cmwubGVuZ3RoLCBuZXdDb250ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgaWYoTGlua09iamVjdC5MaW5rZWRJbWFnZSl7XG4gICAgICAgICAgICBuZXdDb250ZXh0ID0gTGlua09iamVjdC5MaW5rZWRJbWFnZS5nZW5lcmF0ZU91dHB1dChuZXdDb250ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3Q29udGV4dCA9IG5ld0NvbnRleHQucmVwbGFjZSgvXFxzP2VtbFxcLWlkXFw9XFxcIlswLTldKlxcXCIvZyxcIlwiKTtcbiAgICAgICAgICAvL3RoZW4gdXBkYXRlIHRoZSB3b3JraW5nIGNvZGUgd2l0aCB0aGUgbmV3IGNvbnRleHQ7XG4gICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UobmV3IFJlZ0V4cChcInt7RU1MTWFrZXJfTGluazpcIitMaW5rT2JqZWN0LmlkK1wifX1cIiwgXCJnaVwiKSwgbmV3Q29udGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgfSk7XG5cbiAgICAgIC8vZmluZCBhbGwgaW1hZ2VzIHdpdGhvdXQgYWx0IGF0dHJpYnV0ZSBhbmQgYWRkIGFsdD1cIlwiO1xuICAgICAgLy8gZmlsdGVyIG91dHB1dCB3aXRoIGhvb2tzIHRvIDtcbiAgICAgIEVNTE1ha2VyLmZpbHRlci5tb2R1bGUoXCJiZWZvcmVEaWRHZW5lcmF0ZUNvZGVcIikuaW5qZWN0KFwiRU1MV29ya3NwYWNlXCIsdGhpcyk7XG4gICAgICBvdXRwdXQgPSBFTUxNYWtlci5maWx0ZXIubW9kdWxlKFwiYmVmb3JlRGlkR2VuZXJhdGVDb2RlXCIpLmFwcGx5RmlsdGVyKG91dHB1dCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC88XFwvYT5cXG57MCw1fShcXC58LHxcXD98IXw6fDt8XFx8KS9nLCBcIjwvYT4kMVwiKTtcbiAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgbWVyZ2luZyBsaW5lcyB3aXRoIGxpbmtzIHRoYXQgcHJldmlvdXNseSBoYWQgcHVuY3R1YXRpb24uXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgdXBkYXRlTGlua3NBbmRFeHBvcnQoKTpib29sZWFue1xuICAgICAgaWYoIXRoaXMuYXJlTGlua3NDb21wbGV0ZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuXG4gICAgICBsb2NhdGlvbi5ocmVmPVwiIy9leHBvcnRcIjtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLDApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFyZUxpbmtzQ29tcGxldGUoKTpib29sZWFue1xuICAgICAgdmFyIG91dHB1dCA9IHRydWU7XG5cbiAgICAgIHRoaXMubWFwTGlua09iamVjdHMoZnVuY3Rpb24oTGlua09iamVjdCl7XG5cbiAgICAgICAgaWYoIUxpbmtPYmplY3QuX19pc0NvbXBsZXRlKXtcbiAgICAgICAgICBvdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZihMaW5rT2JqZWN0Lm5lZWRzVHJhY2tpbmdDb2RlKCkpe1xuICAgICAgICAgIG91dHB1dCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgZ2V0TGlua3NTdW1tYXJ5KCk6YW55e1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5lZWRzVHJhY2tpbmc6IDAsXG4gICAgICAgIGludmFsaWRVcmw6IDBcbiAgICAgIH07XG4gICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgICBpZihMaW5rT2JqZWN0Lm5lZWRzVHJhY2tpbmdDb2RlKCkpIGRhdGEubmVlZHNUcmFja2luZysrO1xuICAgICAgICBpZihMaW5rT2JqZWN0LmlzTGlua0NvbXBsZXRlKCkpIGRhdGEuaW52YWxpZFVybCsrO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaW1wb3J0SHRtbEZyb21GaWxlRHJvcChldnQpOnZvaWR7XG4gICAgICBpZih0aGlzLnNvdXJjZUNvZGUubGVuZ3RoPjApIHsgdGhpcy5zb3VyY2VDb2RlID0gXCJcIjsgfVxuICAgICAgdmFyIGZpbGVzID0gZXZ0LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICAgIGlmKGV2dC5kYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoPjEpe1xuICAgICAgICBhbGVydCgneW91IGNhbiBvbmx5IGltcG9ydCBvbmUgZmlsZSBhdCBhdCB0aW1lLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHZhciBXUyA9IHRoaXM7XG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldnQpe1xuICAgICAgICAgIHZhciBkcm9wVGV4dCA9IGV2dC50YXJnZXQucmVzdWx0O1xuXG4gICAgICAgICAgdmFyIG5hbWVQYXJ0cyA9IGZpbGVzWzBdLm5hbWUuc3BsaXQoXCIuXCIpO1xuICAgICAgICAgIHZhciBleHQgPSBuYW1lUGFydHMucG9wKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBXUy5maWxlTmFtZSA9IFdTLl9fZm9ybWF0RmlsZU5hbWUobmFtZVBhcnRzLmpvaW4oXCIuXCIpKTtcblxuICAgICAgICAgIGlmKGV4dD09J2VtbCcpe1xuICAgICAgICAgICAgV1Muc291cmNlQ29kZSA9IFdTLl9fc3RyaXBIdG1sQW5kU3ViamVjdEZyb21FTUwoZHJvcFRleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBXUy5zb3VyY2VDb2RlID0gZHJvcFRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIFdTLnByb2Nlc3NIdG1sKCk7XG5cbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL2xpbmtzXCI7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGVzWzBdKTtcbiAgICAgICAgd2luZG93LmdhKCdzZW5kJywgJ2V2ZW50JywgXCJIVE1MXCIsIFwiaW1wb3J0XCIsIFwiSFRNTCBJbXBvcnQgRmlsZSBEcm9wXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldCBkZWZhdWx0U0NvZGUobmV3VmFsdWUpe1xuICAgICAgbGV0IG9sZCA9dGhpcy5fZGVmYXVsdFNDb2RlO1xuXG4gICAgICBpZihvbGQhPT1uZXdWYWx1ZSl7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRTQ29kZSA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLm1hcExpbmtPYmplY3RzKGZ1bmN0aW9uKExpbmtPYmplY3Qpe1xuICAgICAgICAgIExpbmtPYmplY3QuaXNMaW5rQ29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICB9XG5cblxuICAgIF9fZm9ybWF0RmlsZU5hbWUobmFtZSk6c3RyaW5nIHtcbiAgICAgIGxldCBfc2x1Z2lmeV9zdHJpcF9yZSA9IC9bXlxcd1xccy1dL2c7XG4gICAgICBsZXQgX3NsdWdpZnlfaHlwaGVuYXRlX3JlID0gL1stXFxzXSsvZztcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoX3NsdWdpZnlfc3RyaXBfcmUsICcnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoX3NsdWdpZnlfaHlwaGVuYXRlX3JlLCAnLScpO1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICAgIF9fcmVwbGFjZUVsb3F1YU1lcmdlRmllbGRzKGNvbnRlbnQpOnN0cmluZ3tcbiAgICAgIHZhciByZTQgPSAvPHNwYW4oJTIwfFxccyljbGFzcz1cIj9lbG9xdWFlbWFpbFwiP1xccz8+KC4qPyk8XFwvc3Bhbj4vaWc7XG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlNCwgXCIjJDIjXCIpO1xuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICAgIF9fc3RyaXBIdG1sQW5kU3ViamVjdEZyb21FTUwoY29kZSk6c3RyaW5ne1xuICAgICAgdmFyIG91dHB1dCA9IGNvZGUuc3BsaXQoXCJcXG5cIik7XG4gICAgICB2YXIgaHRtbCA9IG91dHB1dC5wb3AoKTtcblxuICAgICAgZm9yKHZhciBpID0wOyBpPCBvdXRwdXQubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgIGlmKG91dHB1dFtpXS5pbmRleE9mKFwiU3ViamVjdDpcIik+LTEpe1xuICAgICAgICAgIGlmKHRoaXMuaGVhZGVyID09PSB1bmRlZmluZWQpIHRoaXMuaGVhZGVyID0ge307XG5cbiAgICAgICAgICAvLyAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8gICAgIHRoaXMuaGVhZGVyW1wic3ViamVjdFwiXSA9ICBvdXRwdXRbaV0uc3Vic3RyKDgsb3V0cHV0W2ldLmxlbmd0aCkudHJpbSgpO1xuICAgICAgICAgIC8vIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgX19yZW1vdmVXaGl0ZVNwYWNlKGNvZGUpOnN0cmluZyB7XG4gICAgICB2YXIgb3V0cHV0ID0gY29kZTtcbiAgICAgIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXG5cIiwgXCJnXCIpLCBcIiBcIik7XG4gICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShuZXcgUmVnRXhwKFwiXFx0XCIsIFwiZ1wiKSwgXCIgXCIpO1xuICAgICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoL1xcc3syLDk5OTk5fS9nLCBcIiBcIik7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBfX2J1aWxkSGVhZGVycygpOnN0cmluZ3tcbiAgICAgIHZhciBoZWFkZXJzOnN0cmluZ1tdID0gW107XG4gICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmhlYWRlcnMubGVuZ3RoOyBpKyspeyBoZWFkZXJzLnB1c2godGhpcy5oZWFkZXJzW2ldKTsgfVxuICAgICAgdmFyIGNoYXJzZXQgPSB0aGlzLl9fZ2V0Q2hhcnNldEZyb21IVE1MKHRoaXMuc291cmNlQ29kZSk7XG4gICAgICBpZihjaGFyc2V0ID09IFwiXCIpIGNoYXJzZXQgPSBcImNoYXJzZXQ9VVRGLThcIjtcbiAgICAgIGhlYWRlcnMucHVzaChcIkNvbnRlbnQtVHlwZTogdGV4dC9odG1sO1xcblxcdFwiICsgY2hhcnNldCk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKGhlYWRlcnMsIGFsbG93YWJsZUhlYWRlckZpZWxkcyk7XG4gICAgICBmb3IobGV0IGkgaW4gdGhpcy5oZWFkZXIpe1xuICAgICAgICBpZih0aGlzLmhlYWRlci5oYXNPd25Qcm9wZXJ0eShpKSl7XG4gICAgICAgICAgaWYodGhpcy5fX2FsbG93YWJsZUhlYWRlckZpZWxkcy5oYXNPd25Qcm9wZXJ0eShpKSl7XG4gICAgICAgICAgICBoZWFkZXJzLnB1c2goXG4gICAgICAgICAgICAgIHRoaXMuX19hbGxvd2FibGVIZWFkZXJGaWVsZHNbaV0uc3ludGF4ICsgXCIgXCIgKyB0aGlzLmhlYWRlcltpXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX19lbWxIZWFkZXJzID0gaGVhZGVycy5qb2luKFwiXFxuXCIpO1xuICAgICAgcmV0dXJuIGhlYWRlcnMuam9pbihcIlxcblwiKTtcbiAgICB9XG4gICAgX19nZXRDaGFyc2V0RnJvbUhUTUwoY29udGVudCk6c3RyaW5ne1xuICAgICAgdmFyIHJlNSA9IC88bWV0YS4qP2NoYXJzZXQ9KFteXFxzXCJdKikvaWcsIGNoYXJzZXQgPVwiXCI7XG5cbiAgICAgIHZhciBtZXRhVGFncyA9IGNvbnRlbnQubWF0Y2gocmU1KTtcbiAgICAgIGlmKG1ldGFUYWdzKXtcbiAgICAgICAgbWV0YVRhZ3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICB2YXIgY2hhcnNldFZhbHMgPSBpdGVtLm1hdGNoKC9jaGFyc2V0PShbXlxcc1wiXSopL2lnKTtcbiAgICAgICAgICBpZihjaGFyc2V0VmFscyl7XG4gICAgICAgICAgICBjaGFyc2V0ID0gY2hhcnNldFZhbHNbMF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYXJzZXQgPSBcImNoYXJzZXQ9VVRGLThcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hhcnNldDtcbiAgICB9XG5cbiAgfVxuXG5cblxuICAvLyBleHBvcnQgY2xhc3MgS2V5Ym9hcmRTaG9ydGN1dCB7XG4gIC8vXG4gIC8vICAgd2hlbiA6ICgpPT5ib29sZWFuO1xuICAvLyAgIGRvVGhpcyA6ICgpPT52b2lkO1xuICAvLyAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIC8vICAga2V5czogc3RyaW5nO1xuICAvL1xuICAvLyAgIGNvbnN0cnVjdG9yKHdoZW4sIGRvVGhpcywga2V5cywgZGVzY3JpcHRpb24pe1xuICAvL1xuICAvLyAgICAgdGhpcy53aGVuID0gd2hlbjtcbiAgLy8gICAgIHRoaXMuZG9UaGlzID0gZG9UaGlzO1xuICAvLyAgICAgdGhpcy5rZXlzID0ga2V5cztcbiAgLy8gICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgLy8gICB9XG4gIC8vIH1cblxuXG59XG4iLCJcbmludGVyZmFjZSBJbnRlbGxpZ2VuY2VBbGVydEFyZ3Mge1xuICBoYW5kbGVyOiAoKT0+dm9pZCxcbiAgY3RhTGFiZWw6IHN0cmluZyxcbiAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHksXG4gIGlucHV0TW9kZWw6IHN0cmluZyxcbiAgaW5wdXRMYWJlbDogc3RyaW5nXG59XG5pbnRlcmZhY2UgSW50ZWxsaWdlbmNlU2NvcGV7XG4gIHNjb3BlOiBzdHJpbmc7XG4gIHJ1bGU6IGFueVxufVxuaW50ZXJmYWNlIEludGVsbGlnZW5jZVN1YntcbiAgd2hlbjogKCk9PmJvb2xlYW4sXG4gIGlkOiBzdHJpbmcsXG4gIHR5cGU6IEVycm9yVHlwZSxcbiAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHksXG4gIHRpdGxlOiBzdHJpbmcsXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIHJlc291cmNlOiBzdHJpbmcsXG4gIHJlc291cmNlVGV4dDogc3RyaW5nLFxuICBzdWdnZXN0aW9uOiBzdHJpbmcsXG4gIGN0YToge1xuICAgIGxhYmVsOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogKCk9PnZvaWRcbiAgfVxuICBjYW5Db250aW51ZTogYm9vbGVhblxuXG59XG5jbGFzcyBJbnRlbGxpZ2VuY2VBbGVydCB7XG4gIGlkOiBzdHJpbmc7XG4gIF90eXBlOiBFcnJvclR5cGU7XG4gIG92ZXJyaWRlOiBib29sZWFuO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICByZXNvdXJjZTogc3RyaW5nO1xuICByZXNvdXJjZVRleHQ6IHN0cmluZztcbiAgY3RhTGFiZWw6IHN0cmluZztcbiAgY3RhSGFuZGxlcjogYW55O1xuICBjYW5Db250aW51ZTogYm9vbGVhbjtcbiAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XG4gIGNsZWFuVHlwZTogc3RyaW5nO1xuICBzdWdnZXN0aW9uOiBzdHJpbmc7XG4gIGFyZ3M6IEludGVsbGlnZW5jZUFsZXJ0QXJncztcblxuICBnZW5lcmF0ZUd1aWQoKSB7XG4gICAgZnVuY3Rpb24gczQoKSB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcbiAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG4gIH1cbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLm92ZXJyaWRlID0gZmFsc2U7XG4gIH1cbiAgZ2V0IHR5cGUoKXtcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgfVxuICBzZXQgdHlwZShuZXdWYWwpe1xuICAgIHRoaXMuX3R5cGUgPSBuZXdWYWw7XG4gICAgdGhpcy5jbGVhblR5cGUgPSBFcnJvclR5cGVbbmV3VmFsXTtcbiAgfVxuICBzZXRPdmVycmlkZVN0YXR1cyh2YWwpe1xuICAgIHRoaXMub3ZlcnJpZGUgPSB2YWw7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5pZCArIFwiIC0gb3ZlcnJpZGRlblwiKTtcbiAgfVxufVxuaW50ZXJmYWNlIEludGVsbGlnZW5jZUNlbnRlckZpbHRlciB7XG4gIHR5cGU6IHN0cmluZztcbn1cbm1vZHVsZSBFTUxNYWtlckludGVsbGlnZW5jZSB7XG5cbiAgZXhwb3J0IGNsYXNzIEludGVsbGlnZW5jZUNlbnRlciB7XG4gICAgX3NlYXJjaDogYW55O1xuICAgIF9tb25pdG9yOiBJbnRlbGxpZ2VuY2VNb25pdG9yO1xuICAgIF9zY29wZTogYW55O1xuICAgIHNlYXJjaFR5cGU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKCRtb25pdG9yLCAkc2NvcGUpe1xuICAgICAgdGhpcy5fc2NvcGUgPSAkc2NvcGU7XG4gICAgICB0aGlzLl9tb25pdG9yID0gJG1vbml0b3I7XG4gICAgICB0aGlzLnNlYXJjaFR5cGUgPSB0aGlzLmRlZmF1bHRTZWFyY2hUeXBlKCk7XG4gICAgfVxuICAgIHNldFR5cGUodmFsKXtcbiAgICAgIHRoaXMuc2VhcmNoVHlwZSA9IHZhbDtcbiAgICB9XG4gICAgZGVmYXVsdFNlYXJjaFR5cGUoKXtcbiAgICAgIHZhciB0eXBlcyA9IHRoaXMuX21vbml0b3IudHlwZXM7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fbW9uaXRvci50YWJzKS5sZW5ndGg+MVxuICAgICAgPyBcIlwiXG4gICAgICA6ICh0aGlzLl9tb25pdG9yLnRhYnMpWyhPYmplY3Qua2V5cyh0aGlzLl9tb25pdG9yLnRhYnMpWzBdKV07XG4gICAgfVxuICAgIGNhblZpZXdBbGwoKXtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9tb25pdG9yLnRhYnMpLmxlbmd0aD4xO1xuICAgIH1cbiAgICBnZXQgc2VhcmNoKCk6SW50ZWxsaWdlbmNlQ2VudGVyRmlsdGVyIHtcblxuICAgICAgdmFyIHR5cGVzID0gdGhpcy5fbW9uaXRvci50eXBlcztcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwic2VhcmNoVHlwZVwiLHRoaXMuc2VhcmNoVHlwZSk7XG4gICAgICBpZiggdHlwZXMgJiYgdGhpcy5zZWFyY2hUeXBlIGluIHR5cGVzKXtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiB0aGlzLnNlYXJjaFR5cGUgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogdGhpcy5kZWZhdWx0U2VhcmNoVHlwZSgpIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICBleHBvcnQgY2xhc3MgSW50ZWxsaWdlbmNlRW5naW5lIHtcbiAgICBtZXNzYWdlczogSW50ZWxsaWdlbmNlQWxlcnRbXTtcbiAgICBjYW5Db250aW51ZTogYm9vbGVhbjtcbiAgICBjYWNoZWRSZXN1bHRzOiBJbnRlbGxpZ2VuY2VBbGVydFtdO1xuICAgIG92ZXJyaWRkZW46IHN0cmluZ1tdO1xuICAgIHNjb3BlczogSW50ZWxsaWdlbmNlTW9kdWxlW107XG5cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgICAgdGhpcy5jYW5Db250aW51ZSA9IHRydWU7XG4gICAgICB0aGlzLmNhY2hlZFJlc3VsdHMgPSBbXTtcbiAgICAgIHRoaXMuc2NvcGVzID0gW107XG5cbiAgICB9XG4gICAgX19sb2NhdGVTY29wZShzY29wZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2NvcGVzLmZpbHRlcihmdW5jdGlvbihvYmo6SW50ZWxsaWdlbmNlTW9kdWxlKXtcbiAgICAgICAgcmV0dXJuIG9iai5zY29wZSA9PSBzY29wZTtcbiAgICAgICB9KTtcblxuICAgICAgaWYocmVzdWx0Lmxlbmd0aCA9PSAwKXtcbiAgICAgICAgbGV0IGEgPSBuZXcgSW50ZWxsaWdlbmNlTW9kdWxlKHNjb3BlKTtcbiAgICAgICAgbGV0IGIgPSB0aGlzLnNjb3Blcy5wdXNoKGEpO1xuICAgICAgICByZXR1cm4gYTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgfVxuICAgIHJlYWRPdXRSdWxlcygpe1xuICAgICAgLy8gdGhpcy5zY29wZXM7XG5cbiAgICAgIHRoaXMuc2NvcGVzLmZvckVhY2goKGl0ZW06SW50ZWxsaWdlbmNlTW9kdWxlKT0+e1xuICAgICAgICAvL2xldCB0cmFzaE1vbml0b3IgPSBuZXcgSW50ZWxsaWdlbmNlTW9uaXRvcihpdGVtLnNjb3BlKTtcblxuICAgICAgICB2YXIgcnVsZXMgPSBPYmplY3Qua2V5cyhpdGVtLnJ1bGVzKTtcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8cnVsZXMubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgLy8gaWYoaXRlbS5ydWxlcy5oYXNPd25Qcm9wZXJ0eShydWxlKSl7XG4gICAgICAgICAgLy8gICBjb25zb2xlLmxvZyh0cmFzaE1vbml0b3IuZXZhbHVhdGVSdWxlKGl0ZW0ucnVsZXNbcnVsZV0pKTtcbiAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdHJhc2hNb25pdG9yID0gbnVsbDtcbiAgICAgIH0pO1xuXG5cblxuICAgICAgLy9ydW4gZWFjaCBvZiB0aGUgZnVuY3Rpb25zIGFuZCByZXR1cm4gdGhlIHN1YnJ0LlxuICAgIH1cbiAgICBtb2R1bGUoc2NvcGUpe1xuICAgICAgbGV0IG1vZHVsZSA9IHRoaXMuX19sb2NhdGVTY29wZShzY29wZSk7XG4gICAgICByZXR1cm4gbW9kdWxlO1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBJbnRlbGxpZ2VuY2VNb2R1bGUge1xuICAgIHNjb3BlOiBzdHJpbmc7XG4gICAgcnVsZXM6IHtzdHJpbmc/OiBhbnlbXX07XG4gICAgb3ZlcnJpZGRlbjogc3RyaW5nW107XG4gICAgY2FuQ29udGludWU6IGJvb2xlYW47XG4gICAgbWVzc2FnZXM6IEludGVsbGlnZW5jZUFsZXJ0W107XG5cbiAgICBjb25zdHJ1Y3RvcihzY29wZSl7XG4gICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICB0aGlzLnJ1bGVzID0ge307XG4gICAgfVxuXG5cbiAgICBtb25pdG9yKCl7XG4gICAgICByZXR1cm4gbmV3IEludGVsbGlnZW5jZU1vbml0b3IodGhpcyk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGlkLCBydWxlKTpJbnRlbGxpZ2VuY2VNb2R1bGV7XG4gICAgICB0aGlzLnJ1bGVzW2lkXSA9IHJ1bGU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbiAgZXhwb3J0IGNsYXNzIEludGVsbGlnZW5jZU1vbml0b3IgZXh0ZW5kcyBJbmplY3Rvck1vZHVsZSB7XG4gICAgc2NvcGU6IHN0cmluZztcbiAgICBydWxlczogYW55W107XG4gICAgb3ZlcnJpZGRlbjogc3RyaW5nW107XG4gICAgY2FuQ29udGludWU6IGJvb2xlYW47XG4gICAgbWVzc2FnZXM6IEludGVsbGlnZW5jZUFsZXJ0W107XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTY29wZSl7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5ydWxlcyA9IHBhcmVudFNjb3BlLnJ1bGVzO1xuICAgICAgdGhpcy5vdmVycmlkZGVuID0gW107XG4gICAgICB0aGlzLmluamVjdChcIkludGVsbGlnZW5jZU1vbml0b3JcIiwgdGhpcyk7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIHJlc2V0KCl7XG4gICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICB0aGlzLmNhbkNvbnRpbnVlID0gdHJ1ZTtcbiAgICB9XG4gICAgYXNzb2NpYXRlVmFyaWFibGUoYWNjZXNzb3IsIHZhbHVlKXtcbiAgICAgIHRoaXMuaW5qZWN0KGFjY2Vzc29yLCB2YWx1ZSk7XG4gICAgICBjb25zb2xlLndhcm4oXCJhc3NvY2lhdGVWYXJpYWJsZSBpcyBkZXByZWNpYXRlZCwgdXNlIGluamVjdCBtZXRob2QuXCIpO1xuICAgICAgLy8gdGhpcy52YXJpYWJsZXNbYWNjZXNzb3JdID0gdmFsdWU7XG4gICAgfVxuICAgIGV2YWx1YXRlUnVsZShydWxlKTpJbnRlbGxpZ2VuY2VTdWJ7XG4gICAgICAvL2xvb2sgZm9yIGluamVjdGlvbiBwYXJhbWV0ZXJzXG4gICAgICB2YXIgcmVzdWx0O1xuXG5cbiAgICAgICAgLy9sYXN0IHBhcmFtZXRlciBpcyB0aGUgZnV1bmN0aW9uO1xuICAgICAgICB2YXIgZnVuYztcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnZhcmlhYmxlcyk7XG4gICAgICAgIGlmKHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICBsZXQgaW5qZWN0b3IgPSB0aGlzLl9fZ2V0SW5qZWN0b3IocnVsZSk7XG4gICAgICAgICAgcmVzdWx0ID0gaW5qZWN0b3IuZm4uYXBwbHkobnVsbCwgaW5qZWN0b3IuYXJncyk7XG5cblxuXG4gICAgICAgIC8vIHZhciBmdW5jID0gcnVsZVtydWxlLmxlbmd0aC0xXTtcbiAgICAgICAgLy8gdmFyIHBhcmFtZXRlcnMgPSBydWxlLnNsaWNlKDAsIHJ1bGUubGVuZ3RoLTEpO1xuICAgICAgICAvLyBsZXQgSU0gPSB0aGlzO1xuICAgICAgICAvL1xuICAgICAgICAvLyB2YXIgYXJncyA9IHBhcmFtZXRlcnMubWFwKGZ1bmN0aW9uKGtleTpzdHJpbmcpe3JldHVybiBJTS52YXJpYWJsZXNba2V5XTsgfSk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIC8vICAgcmVzdWx0ID0gZnVuYy5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgLy8gfSBjYXRjaChlKXtcbiAgICAgICAgLy8gICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAvLyB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IHJ1bGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGV2YWx1YXRlUnVsZXMoKXtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIHZhciBydWxlcyA9IE9iamVjdC5rZXlzKHRoaXMucnVsZXMpO1xuICAgICAgZm9yKHZhciBydWxlICBvZiBydWxlcyl7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmV2YWx1YXRlUnVsZSh0aGlzLnJ1bGVzW3J1bGVdKTtcblxuICAgICAgICB2YXIgcHJvY2VlZCA9IHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcIndoZW5cIikgPyByZXN1bHQud2hlbi5hcHBseShudWxsKSA6IGZhbHNlO1xuXG4gICAgICAgIGlmKHByb2NlZWQpe1xuICAgICAgICAgIC8vIFBVU0ggQUxFUlQgTUVTU0FHRS5cbiAgICAgICAgICBsZXQgSUEgPSBuZXcgSW50ZWxsaWdlbmNlQWxlcnQoKTtcbiAgICAgICAgICBJQS5pZCA9IHJlc3VsdC5pZD09PXVuZGVmaW5lZCB8fCByZXN1bHQuaWQ9PVwiXCIgPyBJQS5nZW5lcmF0ZUd1aWQoKSA6IHJlc3VsdC5pZDtcbiAgICAgICAgICBJQS50eXBlID0gcmVzdWx0LnR5cGUgPT09IHVuZGVmaW5lZCA/IEVycm9yVHlwZS5XYXJuIDogcmVzdWx0LnR5cGU7XG4gICAgICAgICAgSUEuc2V2ZXJpdHkgPSByZXN1bHQuc2V2ZXJpdHkgPT09IHVuZGVmaW5lZCA/IEVycm9yU2V2ZXJpdHkuWmVybyA6IHJlc3VsdC5zZXZlcml0eTtcbiAgICAgICAgICBJQS50aXRsZSA9IHJlc3VsdC50aXRsZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHJlc3VsdC50aXRsZTtcbiAgICAgICAgICBJQS5kZXNjcmlwdGlvbiA9IHJlc3VsdC5kZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHJlc3VsdC5kZXNjcmlwdGlvbjtcbiAgICAgICAgICBJQS5yZXNvdXJjZSA9IHJlc3VsdC5yZXNvdXJjZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHJlc3VsdC5yZXNvdXJjZTtcbiAgICAgICAgICBJQS5zdWdnZXN0aW9uID0gcmVzdWx0LnN1Z2dlc3Rpb24gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiByZXN1bHQuc3VnZ2VzdGlvbjtcbiAgICAgICAgICBJQS5yZXNvdXJjZVRleHQgPSByZXN1bHQucmVzb3VyY2VUZXh0ID09PSB1bmRlZmluZWQgPyBcIlJlYWQgbW9yZVwiIDogcmVzdWx0LnJlc291cmNlVGV4dDtcblxuICAgICAgICAgIElBLmN0YUhhbmRsZXIgPSByZXN1bHQuY3RhICYmIHJlc3VsdC5jdGEuaGFuZGxlciA/IHJlc3VsdC5jdGEuaGFuZGxlciA6IGZ1bmN0aW9uKCl7fTtcbiAgICAgICAgICBJQS5jdGFMYWJlbCA9IHJlc3VsdC5jdGEgJiYgcmVzdWx0LmN0YS5sYWJlbCA/IHJlc3VsdC5jdGEubGFiZWwgOiBcIlwiO1xuICAgICAgICAgIElBLmNhbkNvbnRpbnVlID0gcmVzdWx0Lmhhc093blByb3BlcnR5KFwiY2FuQ29udGludWVcIikgPyByZXN1bHQuY2FuQ29udGludWUgOiB0cnVlO1xuICAgICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChJQSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yKHZhciBpPTA7IGkgPCB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKHRoaXMub3ZlcnJpZGRlbi5pbmRleE9mKCB0aGlzLm1lc3NhZ2VzW2ldLmlkICk+LTEpe1xuICAgICAgICAgIHRoaXMubWVzc2FnZXNbaV0ub3ZlcnJpZGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXRoaXMubWVzc2FnZXNbaV0uY2FuQ29udGludWUpIHtcbiAgICAgICAgICBpZighdGhpcy5tZXNzYWdlc1tpXS5vdmVycmlkZSkge1xuICAgICAgICAgICAgdGhpcy5jYW5Db250aW51ZSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIHRoaXMubWVzc2FnZXMuc29ydCgoYTpJbnRlbGxpZ2VuY2VBbGVydCwgYjpJbnRlbGxpZ2VuY2VBbGVydCk6bnVtYmVyID0+IHtcbiAgICAgICAgICBpZihhLl90eXBlPmIuX3R5cGUpIHJldHVybiAxO1xuICAgICAgICAgIGlmKGEuX3R5cGU8Yi5fdHlwZSkgcmV0dXJuIC0xO1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IHRhYnMoKXtcbiAgICAgIGxldCBvdXRwdXQgPSB7fTtcbiAgICAgIGZvcihsZXQgaSA9IDA7IGk8dGhpcy5tZXNzYWdlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIG91dHB1dFt0aGlzLm1lc3NhZ2VzW2ldLmNsZWFuVHlwZV0gPSB0aGlzLm1lc3NhZ2VzW2ldLnR5cGU7XG4gICAgICAgIC8vIG91dHB1dFt0aGlzLm1lc3NhZ2VzW2ldLnR5cGVdID0gRXJyb3JUeXBlW3RoaXMubWVzc2FnZXNbaV0udHlwZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBnZXQgdHlwZXMoKXtcbiAgICAgIGxldCBvdXRwdXQgPSB7fTtcbiAgICAgIGZvcihsZXQgaSA9IDA7IGk8dGhpcy5tZXNzYWdlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIG91dHB1dFt0aGlzLm1lc3NhZ2VzW2ldLnR5cGVdID0gRXJyb3JUeXBlW3RoaXMubWVzc2FnZXNbaV0udHlwZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBnZXQgY291bnQoKXtcbiAgICAgIGxldCBvdXRwdXQgPSB7fTtcbiAgICAgIGZvcih2YXIgaSA9MDsgaSA8IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYob3V0cHV0W0Vycm9yVHlwZVt0aGlzLm1lc3NhZ2VzW2ldLnR5cGVdXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgb3V0cHV0W0Vycm9yVHlwZVt0aGlzLm1lc3NhZ2VzW2ldLnR5cGVdXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0W0Vycm9yVHlwZVt0aGlzLm1lc3NhZ2VzW2ldLnR5cGVdXSsrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gIH1cblxufVxuXG52YXIgRU1MTWFrZXI7XG4oZnVuY3Rpb24gKEVNTE1ha2VyKSB7XG4gICAgRU1MTWFrZXIuaW50ZWxsaWdlbmNlID0gIG5ldyBFTUxNYWtlckludGVsbGlnZW5jZS5JbnRlbGxpZ2VuY2VFbmdpbmUoKTtcbn0pKEVNTE1ha2VyIHx8IChFTUxNYWtlciA9IHt9KSk7XG4iLCJpbnRlcmZhY2UgV2luZG93IHtcbiAgICBnYShvcHRpb24xLCBvcHRpb24yLCBvcHRpb24zLCBvcHRpb240Pywgb3B0aW9uNT8pOiB2b2lkO1xuICAgIFBlcnNpc3Q6IGFueTtcbiAgICBDcnlwdG9KUzogYW55O1xuICAgIGpRdWVyeShvcHRpb24pOmFueTtcbiAgICBkZWNvZGVVUklDb21wb25lbnQob3B0aW9uKTogc3RyaW5nO1xuICAgIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb24pOiBzdHJpbmc7XG59XG5cbmNsYXNzIFNlY3VyZUdhdGV3YXl7XG4gIGxvZ2luQ2FsbGJhY2s6ICgpPT57fTtcbiAgbG9naW5UaW1lcjogYW55O1xuICBlcnJvck1lc3NhZ2U6IHN0cmluZztcbiAgc2Vzc2lvbklkOnN0cmluZztcbiAgc2Vzc2lvbklkTG9jYWxTdG9yYWdlS2V5OiBzdHJpbmc7XG4gIHNlc3Npb25Vc2VyRW1haWw6c3RyaW5nO1xuICB0aW1lckRlbGF5OiBudW1iZXI7XG4gIHNhbHQ6IHN0cmluZztcbiAgZW1haWxSZWdleDogUmVnRXhwO1xuICBjYW5Mb2dpbjogYm9vbGVhbjtcbiAgQU9WOiBBY2Nlc3NPbmxpbmVWZXJzaW9uO1xuXG5cbiAgY29uc3RydWN0b3IobG9naW5DYWxsYmFjaywgJHNjb3BlKXtcbiAgICB0aGlzLmNhbkxvZ2luID0gZmFsc2U7XG4gICAgdGhpcy5sb2dpbkNhbGxiYWNrID0gbG9naW5DYWxsYmFjaztcbiAgICB0aGlzLmxvZ2luVGltZXIgPSBudWxsO1xuICAgIHRoaXMuc2Vzc2lvblVzZXJFbWFpbCA9IFwiXCI7XG4gICAgdGhpcy50aW1lckRlbGF5ID0gNTAwO1xuICAgIHRoaXMuc2FsdCA9IFwiNDdkYWZlYTlhYWUzYjI4YWI1YzM5ZWI3ZjdkMmM5MjRcIjtcbiAgICB0aGlzLmVtYWlsUmVnZXggPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgICB0aGlzLnNlc3Npb25JZExvY2FsU3RvcmFnZUtleSA9IFwiRU1MTWFrZXIuZW1sU2Vzc2lvblVJRFwiO1xuXG4gICAgaWYoIXdpbmRvdy5wZXJzaXN0X3N0b3JlKVxuICAgIHt3aW5kb3cucGVyc2lzdF9zdG9yZSA9IG5ldyB3aW5kb3cuUGVyc2lzdC5TdG9yZSgnRU1MTWFrZXInKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgZnVuY3Rpb24oKXtcbiAgICAgIHdpbmRvdy5wZXJzaXN0X3N0b3JlLnNhdmUoKTtcbiAgICB9KTt9XG4gICAgbGV0IFNHID0gdGhpcztcbiAgICBsb2NhdGlvbi5ocmVmPVwiIy9sb2dpblwiO1xuICB9XG4gIGluaXQoKXtcblxuICAgIGlmKHRoaXMuaGFzU2F2ZWRTZXNzaW9uSWQoKSl7XG4gICAgICBpZih0aGlzLmlzVmFsaWRFbWFpbEFkZHJlc3ModGhpcy5zZXNzaW9uSWQpKXtcbiAgICAgICAgdGhpcy5zZXNzaW9uVXNlckVtYWlsID0gdGhpcy5zZXNzaW9uSWQ7XG4gICAgICAgIC8vIGxvZ2luQ2FsbGJhY2soKTtcbiAgICAgICAgbG9jYXRpb24uaHJlZj1cIiMvbG9naW5cIjtcblxuICAgICAgICAvL2F1dG8gbG9ncyBpbjtcbiAgICAgICAgLy9pcyBvZmZsaW5lIC0+Z2V0IG9ubGluZSB2ZXJzaW9uLlxuICAgICAgICB0aGlzLmxvZ2luVGltZXIgPSBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgbG9jYXRpb24uaHJlZj1cIiMvbWFpblwiO1xuICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFVzZXIodGhpcy5zZXNzaW9uVXNlckVtYWlsKTtcbiAgICAgICAgfSwgdGhpcy50aW1lckRlbGF5KTtcblxuXG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2F0aW9uLmhyZWY9XCIjL2xvZ2luXCI7XG4gICAgICAgIHRoaXMuc2Vzc2lvblVzZXJFbWFpbCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb24uaHJlZj1cIiMvbG9naW5cIjtcbiAgICAgIHRoaXMuc2Vzc2lvblVzZXJFbWFpbCA9IFwiXCI7XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCk9PntcbiAgICAgIGlmKCB0aGlzLnNlc3Npb25Vc2VyRW1haWwgPT0gXCJcIiB8fCAhdGhpcy5oYXNTYXZlZFNlc3Npb25JZCgpKSB7XG4gICAgICAgIGxvY2F0aW9uLmhyZWY9XCIjL2xvZ2luXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgbG9nT3V0KCk6dm9pZCB7XG4gICAgdGhpcy5sb2dpbkFzT3RoZXIoKTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IFwiXCI7XG4gICAgdGhpcy5zZXNzaW9uVXNlckVtYWlsID0gXCJcIjtcbiAgICB3aW5kb3cucGVyc2lzdF9zdG9yZS5yZW1vdmUodGhpcy5zZXNzaW9uSWRMb2NhbFN0b3JhZ2VLZXkpO1xuICAgIGlmKFwicmVsb2FkXCIgaW4gbG9jYXRpb24pe1xuICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmO1xuICAgIH1cbiAgfVxuICBsb2dpbkFzT3RoZXIoKTp2b2lkIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2dpblRpbWVyKTtcbiAgICBkZWxldGUgdGhpcy5sb2dpblRpbWVyO1xuICB9XG4gIHNlc3Npb25VcGRhdGVVc2VyRW1haWwoKTp2b2lkIHtcbiAgICB0aGlzLmVycm9yTWVzc2FnZSA9IFwiXCI7XG5cbiAgICBpZih0aGlzLmlzVmFsaWRFbWFpbEFkZHJlc3ModGhpcy5zZXNzaW9uVXNlckVtYWlsKSkge1xuICAgICAgdGhpcy5zZXRDdXJyZW50VXNlcih0aGlzLnNlc3Npb25Vc2VyRW1haWwpO1xuICAgICAgdGhpcy5sb2dpbkNhbGxiYWNrKCk7XG4gICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL21haW5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRXJyb3IgbWVzc2FnZVxuICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBcIlNvcnJ5ISBZb3UgaGF2ZSB0byBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuXCI7XG4gICAgfVxuICB9XG4gIGhhc1NhdmVkU2Vzc2lvbklkKCk6Ym9vbGVhbiB7XG4gICAgdmFyIHNhdmVkRW1haWxJZCA9IHdpbmRvdy5wZXJzaXN0X3N0b3JlLmdldCh0aGlzLnNlc3Npb25JZExvY2FsU3RvcmFnZUtleSk7XG4gICAgLy8gY29uc29sZS5sb2coc2F2ZWRFbWFpbElkKTtcbiAgICBpZihzYXZlZEVtYWlsSWQpe1xuICAgICAgdGhpcy5zZXNzaW9uSWQgPSB0aGlzLmRlY3J5cHQoc2F2ZWRFbWFpbElkKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlc3Npb25JZCA9IFwiXCI7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGVuY3J5cHQodGV4dCl7XG4gICAgdmFyIG91dHB1dD10ZXh0K1wiXCI7XG4gICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoLy4vZ2ksZnVuY3Rpb24oY2gpe1xuICAgIC8vY29uc29sZS5sb2coY2guY2hhckNvZGVBdCgwKSsxKTtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCkrMSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG91dHB1dDtcblxuICB9XG4gIGRlY3J5cHQodGV4dCl7XG4gICAgdmFyIG91dHB1dD10ZXh0K1wiXCI7XG4gICAgb3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoLy4vZ2ksZnVuY3Rpb24oY2gpe1xuICAgIC8vY29uc29sZS5sb2coY2guY2hhckNvZGVBdCgwKSsxKTtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCktMSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG91dHB1dDtcblxuICB9XG4gIHNldEN1cnJlbnRVc2VyKGVtYWlsKXtcbiAgICB2YXIgaGFzaCA9IHdpbmRvdy5DcnlwdG9KUy5NRDUoZW1haWwgKyB0aGlzLnNhbHQpLnRvU3RyaW5nKCk7XG4gICAgd2luZG93LnBlcnNpc3Rfc3RvcmUuc2V0KHRoaXMuc2Vzc2lvbklkTG9jYWxTdG9yYWdlS2V5LCB0aGlzLmVuY3J5cHQoZW1haWwpKTtcbiAgICB3aW5kb3cuZ2EoJ3NldCcsICd1c2VySWQnLCBoYXNoKTtcbiAgfVxuICBpc1ZhbGlkRW1haWxBZGRyZXNzKGVtYWlsKTpib29sZWFue1xuICAgIGlmKHRoaXMuZW1haWxSZWdleC50ZXN0KGVtYWlsKSl7XG4gICAgICBjb25zb2xlLmxvZyhlbWFpbCwgXCJpcyB2YWxpZFwiKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhlbWFpbCwgXCJpcyBub3QgdmFsaWRcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cblxufVxuIiwiXG5cbmVudW0gS2V5Ym9hcmRTaG9ydGN1dEVudW0ge1xuICBFTkFCTEVEPTAsXG4gIERJU0FCTEVEXG59XG5jbGFzcyBLZXlCb2FyZFNob3J0Y3V0cyBleHRlbmRzIEluamVjdG9yTW9kdWxlIHtcbiAgcnVsZXM6IHtzdHJpbmc/OiBhbnl9O1xuICBzdGF0dXM6IEtleWJvYXJkU2hvcnRjdXRFbnVtO1xuXG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnJ1bGVzID0ge307XG4gICAgdGhpcy5zdGF0dXMgPSBLZXlib2FyZFNob3J0Y3V0RW51bS5FTkFCTEVEO1xuICB9XG4gIHJlZ2lzdGVyKG5hbWUsIHJ1bGUpe1xuICAgIHRoaXMucnVsZXNbbmFtZV0gPSBydWxlO1xuICB9XG4gIGVuYWJsZSgpe1xuICAgIHZhciBLUyA9IHRoaXM7XG4gICAgZG9jdW1lbnQub25rZXl1cCA9IGZ1bmN0aW9uKGUpe1xuICAgICAgaWYodGhpcy5zdGF0dXMgPT0gS2V5Ym9hcmRTaG9ydGN1dEVudW0uRElTQUJMRUQpIHJldHVybiBmYWxzZTtcbiAgICAgIEtTLmV2YWx1YXRlKGUpO1xuICAgIH07XG4gIH1cbiAgZXZhbHVhdGUoZSl7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnJ1bGVzKTtcbiAgICBmb3IodmFyIGkgPTA7IGk8a2V5cy5sZW5ndGg7aSsrKXtcbiAgICAgIGxldCBpbmplY3RvciA9IHRoaXMuX19nZXRJbmplY3Rvcih0aGlzLnJ1bGVzW2tleXNbaV1dKTtcbiAgICAgIHZhciBzaG9ydGN1dCA9IGluamVjdG9yLmZuLmFwcGx5KG51bGwsIGluamVjdG9yLmFyZ3MpO1xuICAgICAgICBpZihzaG9ydGN1dC53aGVuICYmIHNob3J0Y3V0LndoZW4oZSkpe1xuICAgICAgICAgIHNob3J0Y3V0LmRvKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxudmFyIEVNTE1ha2VyO1xuKGZ1bmN0aW9uKEVNTE1ha2VyKXtcbiAgRU1MTWFrZXIua2V5Ym9hcmQgPSBuZXcgS2V5Qm9hcmRTaG9ydGN1dHMoKTtcbn0pKEVNTE1ha2VyfHwgKEVNTE1ha2VyPXt9KSk7XG4iLG51bGwsbnVsbF0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
