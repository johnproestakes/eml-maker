angular.module("EMLMaker").directive("aceEditor",["$timeout",function(e){return{restrict:"A",link:function(t,o,n){e(function(){var e=ace.edit(o.get(0).id);e.setTheme("ace/theme/eclipse"),e.getSession().setUseWrapMode(!0),e.getSession().setMode("ace/mode/xml");e.getSession().on("change",function(o){t.$apply(function(){t.workspace.sourceCode=e.getValue()})}),t.$on("$destroy",function(){e.destroy()})})}}}]);
angular.module("EMLMaker").directive("dropEnable",["$timeout",function(e){return{restrict:"A",scope:{ondropfile:"&",dataTransferEvt:"="},link:function(t,n,o){var r=n,a=null,i=function(e){clearTimeout(a),a=setTimeout(function(){r.removeClass("active"),setTimeout(function(){window.jQuery(".ui.sticky").sticky("refresh")},100),r.css({border:"",color:"",background:""})},100),e.stopPropagation(),e.preventDefault()},d=0;e(function(){r.get(0).addEventListener("drop",function(e){return"#/main"===location.hash&&(e.stopPropagation(),e.preventDefault(),d++,i(e),void((location.hash="#/main")&&t.ondropfile({evt:e})))},!1),r.get(0).addEventListener("dragend",i,!1),r.get(0).addEventListener("dragleave",i,!1),r.get(0).addEventListener("dragover",function(e){return clearTimeout(a),"#/main"===location.hash&&(e.dataTransfer.dropEffect="copy",r.addClass("active"),r.css({border:"solid 3px blue",color:"blue",background:"lightblue"}),a=setTimeout(function(){},100),void e.preventDefault())},!1)})}}}]);
angular.module("EMLMaker").directive("uiDropdown",["$timeout",function(n){return{restrict:"A",link:function(o,r,t){n(function(){$(r).dropdown()}),o.$on("$destroy",function(){$(r).dropdown("destroy")})}}}]);
angular.module("EMLMaker").directive("gaEvent",["$timeout",function(n){return{restrict:"A",scope:{gaEvent:"@"},link:function(t,e,o){n(function(){var n=function(){for(var n=["send","event"],e=t.gaEvent.split(/\,|\|/),o=0;o<e.length;o++)n.push(e[o]);window.ga.apply(null,n)};e.on("click",n)}),t.$on("$destroy",function(){e.on("off",reportEvent)})}}}]);
angular.module("EMLMaker").directive("htmlViewer",["$timeout",function(t){return{restrict:"E",template:'<div><ol start="{{item.line}}"><li ng-repeat="ln in code(item) track by $index" ng-bind-html="ln"></li></ol></div>',scope:{item:"="},link:function(e,i,n){e.code=function(t){var e=t.displayFormattedURL().split(/\<br\>|\n/g);return e},t(function(){})}}}]);
angular.module("EMLMaker").directive("messageCenter",["$timeout",function(e){return{restrict:"E",template:'<div class="message-center"><div class="ui tiny secondary menu">    <div class="item mnu-title" style="padding-left:0;">{{heading === undefined ? "MESSAGES:" : heading }}</div>    <a class="item" ng-click="IntelligenceCenter.setType(\'\')" ng-class="{active: IntelligenceCenter.search.type==\'\'}" ng-show="IntelligenceCenter.canViewAll()">All <span class="ui tiny label">{{errors.messages.length}}</span></a>    <a class="item" ng-repeat="(tab,val) in errors.tabs track by $index" ng-show="errors.count[tab]" ng-click="IntelligenceCenter.setType(val)" ng-class="{active: IntelligenceCenter.search.type==val}">{{tab | uncamelize}} <span class="ui tiny label">{{errors.count[tab]}}</span></a>    </div>    <div id="error-messages-list" class="ui middle aligned divided list">      <message-item item="item" class="item" ng-repeat="obj in errors.messages | filter: IntelligenceCenter.search" error="obj"></message-item>      </div>      <div align="center" style="margin-top: -1.5em; padding-bottom: 1.5em;" ng-show="IntelligenceCenter.search.type!==\'\' && IntelligenceCenter.canViewAll()">      <button class="ui tiny basic button" ng-click="IntelligenceCenter.setType(\'\')"><i class="minus square icon"></i> Remove filter</button></div>    </div>',scope:{errors:"=",heading:"@",item:"="},link:function(n,t,i){e(function(){n.IntelligenceCenter=new EMLMakerIntelligence.IntelligenceCenter(n.errors,n),n.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("messageItem",["$timeout",function(e){return{restrict:"E",template:'<div ng-class="messageCls">    <div class="right floated content" ng-show="error.ctaLabel!==\'\'" >    <div class="ui small compact"     ng-class="buttonCls" ng-if="buttonCls"      ng-click="error.ctaHandler(item)"      ng-bind-html="error.ctaLabel">{{error.ctaLabel ? error.ctaLabel : "Resolve"}}</div>    </div>    <div class="right floated content" ng-show="error.cleanType==\'QA\'" >    <span class="ui icon label" ng-show="error.cleanType==\'QA\'&&error.override"><i class="thumbs up icon"></i> YOU CONFIRMED</span>    <div class="ui small compact"     ng-class="buttonCls" ng-if="buttonCls" ng-hide="error.override"      ng-click="error.setOverrideStatus(true);error.ctaHandler()"><i class="check icon"></i> Confirm</div>    </div>      <div class="content" ng-show="buttonCls">         <h4 ng-bind-html="error.title | dewidow"></h4>        <div ng-bind-html="error.description"></div>{{item.ctaLabel}}</div>        <div ng-if="error.resource!==\'\'"><a ng-href="{{error.resource}}" target="_blank">Read more <i class="external alternate icon"></i></a></div>    </div>',scope:{error:"=",item:"="},link:function(r,t,i){e(function(){var e=["","red","orange","violet","teal","blue"];r.buttonCls=[e[r.error.severity],"button"].join(" "),"QA"==r.error.cleanType&&r.error.override?r.messageCls="":r.messageCls=["type-",r.error.type," level-",r.error.severity].join(""),r.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("messagesNotify",["$timeout",function(n){return{restrict:"E",template:'<div class="ui fluid labeled button" ng-click="ngClick()" ng-class="{\'animate-tada\': doAnimation}">      <div class="ui fluid button" ng-class="{\'yellow\':doAnimation, \'red\': !workspace.intelligence.canContinue}">        <i class="warning icon" alt="[!]" ng-show="!workspace.intelligence.canContinue"></i>        <i class="info icon" alt="(i)" ng-show="workspace.intelligence.canContinue"></i>        {{ count>1 ? "Messages" : "Message"}}        </div>      <div class="ui label" ng-class="{\'yellow\':doAnimation, \'red\': !workspace.intelligence.canContinue}">        {{count}}        </div>      </div>      </div>',scope:{workspace:"=",ngClick:"&",count:"="},link:function(i,o,t){i.doAnimation=!0,setTimeout(function(){i.$apply(function(){i.doAnimation=!1})},1500),i.$watch("count",function(n,i,o){n>i&&(o.doAnimation=!0,console.log("UPDATED"),setTimeout(function(){o.$apply(function(){o.doAnimation=!1})},1500))}),n(function(){setTimeout(function(){i.$apply(function(){i.doAnimation=!1})},2e3),i.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("ngChangeLazy",["$timeout",function(n){return{restrict:"A",scope:{ngModel:"=",ngChangeLazy:"&",changeLazyBuffer:"=",dataTransferEvt:"="},link:function(e,a,t){var u=null;n(function(){var n=e.ngModel.toString();a.on("keyup",function(o){clearTimeout(u),u=setTimeout(function(){n!==a[0].value&&e.$apply(function(){e.ngChangeLazy(),n=a[0].value})},void 0===t.changeLazyBuffer?500:1*t.changeLazyBuffer)}),e.$on("$destroy",function(){a.off("keyup")})})}}}]);
angular.module("EMLMaker").directive("onReturnPress",["$timeout",function(e){return{restrict:"A",scope:{onReturnPress:"&",dataTransferEvt:"="},link:function(n,r,t){e(function(){r.on("keypress",function(e){13==e.keyCode&&n.onReturnPress()}),n.$on("$destroy",function(){r.off("keypress")})})}}}]);
angular.module("EMLMaker").directive("uiPopup",["$timeout",function(p){return{restrict:"A",scope:{popupId:"@",popupBehavior:"@"},link:function(o,u,i){p(function(){var p={hoverable:!0,popup:"#"+i.popupId};!function(o,i,e){void 0!==e.popupBehavior&&(p.on="click"),void 0!==e.popupId&&(p.popup="#"+e.popupId),o(u).popup(p),void 0!==e.popupShow&&o(u).popup("show"),i.$on("$destroy",function(){o(u).popup("destroy")})}(jQuery,o,i)})}}}]);
angular.module("EMLMaker").directive("queryStringEditor",["$timeout",function(e){return{restrict:"E",template:'<div class="query-string-editor well-component" ng-hide="item.isLinkType(\'mailto\')"><div style="overflow:hidden;padding-bottom:.5em;"><strong>QUERY STRING EDITOR</strong>    <div class="ui tiny basic buttons" style="float:right;">  <button class="ui icon button" ng-click="item.new.searchParams.deleteAll();item.isLinkComplete();scrollToItem(item.id);">Remove all</button>  <button class="ui icon button" ng-click="view == 1 ? view=0 : view=1">{{view==1? "Close" : "Edit"}}</button></div></div>     <div ng-if="item.new.searchParams._entries.length==1&&item.new.searchParams._entries[0].length==0">Query strings will appear here.</div>      <div ng-show="view==1">      <div style="margin-bottom:.5em;" class="ui action input" ng-if="str.length>0" ng-repeat="str in item.new.searchParams.entries track by $index">      <input type="text" ng-keyup="item.new.searchParams.updateSearchProp();item.isLinkComplete()" ng-model="item.new.searchParams._entries[$index]"/>      <button class="ui icon button" ng-click="item.new.searchParams.deleteAtIndex($index)">      Remove</button></div>      </div>      <div ng-show="view==0">      <ul class="tags-layout">       <li ng-if="str.length>0" ng-repeat="str in item.new.searchParams.entries track by $index">       {{str}} <a href="javascript:angular.noop()" ng-click="item.new.searchParams.deleteAtIndex($index);item.isLinkComplete()">       <i class="close icon" alt="[X]"></i></a></li></ul>       </div>      </div>',scope:{item:"=",scrollTo:"&"},link:function(t,i,n){e(function(){var e=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.EDIT=1]="EDIT",e}({});window.qs_debug=t;var i=t;do i=i.$parent;while(void 0===i.scrollTo);t.scrollToItem=function(e){setTimeout(function(){t.$apply(function(){i.scrollTo(e-1)})},50)},t.view=e.DEFAULT,t.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("scrollspy",["$timeout",function(i){return{restrict:"A",link:function(n,e,o){i(function(){void 0===n.activeLinkId&&(n.activeLinkId=1),void 0===n.isScrolling&&(n.isScrolling=!1);var i=function(){if(n.isScrolling&&1==n.isScrolling)return!1;var i=jQuery(e).attr("id").split("-").pop();n.$apply(function(){n.activeLinkId=1*i})};jQuery(e).visibility({once:!1,observeChanges:!0,onTopVisible:i,onTopPassedReverse:i}),n.$on("$destroy",function(){jQuery(e).visibility("destroy")})})}}}]);
angular.module("EMLMaker").directive("simpleAccordion",["$timeout",function(n){return{restrict:"E",transclude:!0,scope:{heading:"@",show:"="},template:'<div ng-class="{expanded: show, collapsed: !show}"><div ng-click="togglePane()" class="accordion-title">    <i class="chevron right icon" ng-show="!show" alt="[+]"></i>    <i class="chevron down icon" ng-show="show" alt="[-]"></i>     <span>{{heading}}</span></div><ng-transclude ng-show="show"></ng-transclude></div>',link:function(o,e,i){o.show=!1,n(function(){o.togglePane=function(){o.show=!o.show},jQuery.extend(jQuery(e),{toggleAccordion:function(){o.$apply(function(){o.togglePane()})}}),o.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("sticky",["$timeout",function(e){return{restrict:"A",link:function(i,n,t){e(function(){jQuery(n).sticky({context:"#stickyparent"});var e=null,t=function(){e=setTimeout(function(){var e=$("#right-panel"),i=e.find(".ui.secondary.vertical.pointing.menu"),t=e.find(".message-area");e[0].style.height="",e[0].clientHeight>window.innerHeight-135?(e[0].style.height=window.innerHeight-150+"px",i[0].style.height=e[0].clientHeight-t[0].clientHeight+"px",i.addClass("scrolling")):i.removeClass("scrolling"),jQuery(n).sticky("refresh")},300)};$(window).on("resize",t),$(window).on("scroll",t),t(),i.$on("$destroy",function(){$(window).off("resize",t),$(window).off("scroll",t),jQuery(n).sticky("destroy")})})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZUVkaXRvci5qcyIsImRyb3AtZW5hYmxlLmpzIiwiZHJvcGRvd24uanMiLCJnYUV2ZW50LmpzIiwiaHRtbFZpZXdlci5qcyIsIm1lc3NhZ2VDZW50ZXIuanMiLCJtZXNzYWdlSXRlbS5qcyIsIm1lc3NhZ2VzTm90aWZ5LmpzIiwibmdDaGFuZ2VMYXp5LmpzIiwib25SZXR1cm5QcmVzcy5qcyIsInBvcHVwLmpzIiwicXVlcnlTdHJpbmdFZGl0b3IuanMiLCJzY3JvbGxzcHkuanMiLCJzaW1wbGVBY2NvcmRpb24uanMiLCJzdGlja3kuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImRpcmVjdGl2ZSIsIiR0aW1lb3V0IiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbCIsImF0dHIiLCJlZGl0b3IiLCJhY2UiLCJlZGl0IiwiZ2V0IiwiaWQiLCJzZXRUaGVtZSIsImdldFNlc3Npb24iLCJzZXRVc2VXcmFwTW9kZSIsInNldE1vZGUiLCJvbiIsImUiLCIkYXBwbHkiLCJ3b3Jrc3BhY2UiLCJzb3VyY2VDb2RlIiwiZ2V0VmFsdWUiLCIkb24iLCJkZXN0cm95Iiwib25kcm9wZmlsZSIsImRhdGFUcmFuc2ZlckV2dCIsImZpbGVEcm9wcGVyIiwidGltZXIiLCJkcm9wcGVyUmVzZXQiLCJldnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJ3aW5kb3ciLCJqUXVlcnkiLCJzdGlja3kiLCJjc3MiLCJib3JkZXIiLCJjb2xvciIsImJhY2tncm91bmQiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImNvdW50ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwibG9jYXRpb24iLCJoYXNoIiwiZGF0YVRyYW5zZmVyIiwiZHJvcEVmZmVjdCIsImFkZENsYXNzIiwiJCIsImRyb3Bkb3duIiwiZ2FFdmVudCIsInJlcG9ydEV2ZW50IiwiYXJncyIsIm5ld0FyZ3MiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJwdXNoIiwiZ2EiLCJhcHBseSIsInRlbXBsYXRlIiwiaXRlbSIsImNvZGUiLCJjIiwiYiIsImRpc3BsYXlGb3JtYXR0ZWRVUkwiLCJlcnJvcnMiLCJoZWFkaW5nIiwiSW50ZWxsaWdlbmNlQ2VudGVyIiwiRU1MTWFrZXJJbnRlbGxpZ2VuY2UiLCJlcnJvciIsImNscyIsImJ1dHRvbkNscyIsInNldmVyaXR5Iiwiam9pbiIsImNsZWFuVHlwZSIsIm92ZXJyaWRlIiwibWVzc2FnZUNscyIsInR5cGUiLCJuZ0NsaWNrIiwiY291bnQiLCJkb0FuaW1hdGlvbiIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJjb25zb2xlIiwibG9nIiwibmdNb2RlbCIsIm5nQ2hhbmdlTGF6eSIsImNoYW5nZUxhenlCdWZmZXIiLCJsYXN0VmFsdWUiLCJ0b1N0cmluZyIsInZhbHVlIiwidW5kZWZpbmVkIiwib2ZmIiwib25SZXR1cm5QcmVzcyIsImtleUNvZGUiLCJwb3B1cElkIiwicG9wdXBCZWhhdmlvciIsImhvdmVyYWJsZSIsInBvcHVwIiwicG9wdXBTaG93Iiwic2Nyb2xsVG8iLCJWaWV3IiwicXNfZGVidWciLCJwb2ludGVyIiwiJHBhcmVudCIsInNjcm9sbFRvSXRlbSIsInBhcmFtIiwidmlldyIsIkRFRkFVTFQiLCJhY3RpdmVMaW5rSWQiLCJpc1Njcm9sbGluZyIsImZ1bmMiLCJwb3AiLCJ2aXNpYmlsaXR5Iiwib25jZSIsIm9ic2VydmVDaGFuZ2VzIiwib25Ub3BWaXNpYmxlIiwib25Ub3BQYXNzZWRSZXZlcnNlIiwidHJhbnNjbHVkZSIsInNob3ciLCJ0b2dnbGVQYW5lIiwiZXh0ZW5kIiwidG9nZ2xlQWNjb3JkaW9uIiwiY29udGV4dCIsInJlc2l6ZVRpbWVyIiwiUmVzaXplU3RpY2t5IiwiYSIsImZpbmQiLCJzdHlsZSIsImhlaWdodCIsImNsaWVudEhlaWdodCIsImlubmVySGVpZ2h0Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsT0FBTyxZQUFZQyxVQUFVLGFBQWMsV0FBWSxTQUFTQyxHQUV0RSxP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QUFNYyxPQUFPLFdBQ1hkLEVBQU11SCxrQkFHVnZILEVBQU1rQixJQUFJLFdBQVk7QUNyQjlCeEIsUUFBUUMsT0FBTyxZQUFZQyxVQUFVLFVBQVcsV0FBWSxTQUFTQyxHQUVuRSxPQUNFQyxTQUFVLElBQ1ZDLEtBQU0sU0FBU0MsRUFBT0MsRUFBSUMsR0FDeEJMLEVBQVMsV0FDUGlDLE9BQU83QixHQUNaOEIsUUFDQzJGLFFBQVMsaUJBSVgsSUFBSUMsR0FBYyxLQUVkQyxFQUFlLFdBQ2pCRCxFQUFjaEcsV0FBVyxXQUN2QixHQUFJa0csR0FBSWhGLEVBQUUsZ0JBQ05nQixFQUFJZ0UsRUFBRUMsS0FBSyx3Q0FDWGxFLEVBQUlpRSxFQUFFQyxLQUFLLGdCQUNmRCxHQUFFLEdBQUdFLE1BQU1DLE9BQVMsR0FFakJILEVBQUUsR0FBR0ksYUFBZ0JwRyxPQUFPcUcsWUFBYyxLQUMzQ0wsRUFBRSxHQUFHRSxNQUFNQyxPQUFTbkcsT0FBT3FHLFlBQWMsSUFBVSxLQUNuRHJFLEVBQUUsR0FBR2tFLE1BQU1DLE9BQVNILEVBQUUsR0FBR0ksYUFBZXJFLEVBQUUsR0FBR3FFLGFBQWUsS0FDNURwRSxFQUFFakIsU0FBUyxjQUlYaUIsRUFBRWpDLFlBQVksYUFFaEJFLE9BQU83QixHQUFJOEIsT0FBTyxZQUVsQixLQUtGYyxHQUFFaEIsUUFBUWpCLEdBQUcsU0FBVWdILEdBQ3ZCL0UsRUFBRWhCLFFBQVFqQixHQUFHLFNBQVVnSCxHQUV2QkEsSUFFSTVILEVBQU1rQixJQUFJLFdBQVksV0FFcEIyQixFQUFFaEIsUUFBUThELElBQUksU0FBVWlDLEdBQ3hCL0UsRUFBRWhCLFFBQVE4RCxJQUFJLFNBQVVpQyxHQUN4QjlGLE9BQU83QixHQUFJOEIsT0FBTyIsImZpbGUiOiJkaXJlY3RpdmVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJykuZGlyZWN0aXZlKCdhY2VFZGl0b3InLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuXG5cbiAgICAgICAgICB2YXIgZWRpdG9yID0gYWNlLmVkaXQoZWwuZ2V0KDApLmlkKTtcblxuICAgICAgICAgIGVkaXRvci5zZXRUaGVtZShcImFjZS90aGVtZS9lY2xpcHNlXCIpO1xuICAgICAgICAgIC8vZGF3blxuICAgICAgICAgIC8vZWNsaXBzZVxuICAgICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV3JhcE1vZGUodHJ1ZSk7XG4gICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKFwiYWNlL21vZGUveG1sXCIpO1xuICAgICAgICAgIHZhciB0aW1lciA9IG51bGw7XG4gICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgc2NvcGUud29ya3NwYWNlLnNvdXJjZUNvZGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZWRpdG9yLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgfSk7XG4gIH1cbn1cblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnZHJvcEVuYWJsZScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiQVwiLFxuXHRcdC8vIHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG9uZHJvcGZpbGU6XCImXCIsXG5cdFx0XHRkYXRhVHJhbnNmZXJFdnQ6XCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG5cdFx0XHR2YXIgZmlsZURyb3BwZXIgPSBlbDtcblx0XHRcdHZhciB0aW1lciA9IG51bGw7XG5cdFx0XHQvL3Jlc2V0XG5cdFx0XHR2YXIgZHJvcHBlclJlc2V0ID0gZnVuY3Rpb24oZXZ0KXtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGZpbGVEcm9wcGVyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5qUXVlcnkoJy51aS5zdGlja3knKS5zdGlja3koXCJyZWZyZXNoXCIpO30sMTAwKTtcblx0XHRcdFx0ZmlsZURyb3BwZXIuY3NzKHtib3JkZXI6IFwiXCIsY29sb3I6XCJcIiwgYmFja2dyb3VuZDogXCJcIn0pO1xuXG5cdFx0XHRcdFx0Ly8gZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHZhciBjb3VudGVyID0gMDtcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cblx0XHRcdGZpbGVEcm9wcGVyLmdldCgwKS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZnVuY3Rpb24oZXZ0KXtcblx0XHRcdFx0aWYobG9jYXRpb24uaGFzaCAhPT0gXCIjL21haW5cIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0Y291bnRlcisrO1xuXHRcdFx0XHRcdGRyb3BwZXJSZXNldChldnQpO1xuXHRcdFx0XHRcdGlmKGxvY2F0aW9uLmhhc2ggPSBcIiMvbWFpblwiKXtcblx0XHRcdFx0XHRcdHNjb3BlLm9uZHJvcGZpbGUoe1wiZXZ0XCI6ZXZ0fSk7XG5cdFx0XHRcdFx0fVxuXG5cblxuXHRcdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRmaWxlRHJvcHBlci5nZXQoMCkuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIGRyb3BwZXJSZXNldCwgZmFsc2UpO1xuXHRcdFx0ZmlsZURyb3BwZXIuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyb3BwZXJSZXNldCwgZmFsc2UpO1xuXHRcdFx0ZmlsZURyb3BwZXIuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZ0KXtcblxuXHRcdFx0XHQvLyBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0aWYobG9jYXRpb24uaGFzaCAhPT0gXCIjL21haW5cIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRldnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XG5cdFx0XHRcdGZpbGVEcm9wcGVyLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdFx0XHRmaWxlRHJvcHBlci5jc3Moe2JvcmRlcjogXCJzb2xpZCAzcHggYmx1ZVwiLCBjb2xvcjpcImJsdWVcIiwgYmFja2dyb3VuZDogXCJsaWdodGJsdWVcIn0pO1xuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblxuXHRcdFx0XHRcdC8vIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9LCAxMDApO1xuXG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9LCBmYWxzZSk7XG5cblxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpLmRpcmVjdGl2ZSgndWlEcm9wZG93bicsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICQoZWwpLmRyb3Bkb3duKCk7XG4gICAgICB9KTtcbiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLGZ1bmN0aW9uKCl7XG4gICAgICAgICQoZWwpLmRyb3Bkb3duKFwiZGVzdHJveVwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnZ2FFdmVudCcsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiQVwiLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRnYUV2ZW50OlwiQFwiXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuXG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgcmVwb3J0RXZlbnQgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdHZhciBhcmdzID0gW1wic2VuZFwiLFwiZXZlbnRcIl0sIG5ld0FyZ3MgPSBzY29wZS5nYUV2ZW50LnNwbGl0KC9cXCx8XFx8Lyk7XG5cdFx0XHRcdFx0Zm9yKHZhciBpID0wOyBpPG5ld0FyZ3MubGVuZ3RoO2krKyl7XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2gobmV3QXJnc1tpXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHdpbmRvdy5nYS5hcHBseShudWxsLCBhcmdzKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZWwub24oJ2NsaWNrJywgcmVwb3J0RXZlbnQpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0c2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGVsLm9uKCdvZmYnLHJlcG9ydEV2ZW50KTtcblx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0fTtcblx0fV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ2h0bWxWaWV3ZXInLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZTogJzxkaXY+PG9sIHN0YXJ0PVwie3tpdGVtLmxpbmV9fVwiPjxsaSBuZy1yZXBlYXQ9XCJsbiBpbiBjb2RlKGl0ZW0pIHRyYWNrIGJ5ICRpbmRleFwiIG5nLWJpbmQtaHRtbD1cImxuXCI+PC9saT48L29sPjwvZGl2PicsXG4gICAgc2NvcGU6IHtpdGVtOiBcIj1cIn0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgIHNjb3BlLmNvZGUgPSBmdW5jdGlvbihjKXtcbiAgICAgICAgdmFyIGIgPSAoYy5kaXNwbGF5Rm9ybWF0dGVkVVJMKCkpLnNwbGl0KC9cXDxiclxcPnxcXG4vZyk7XG4gICAgICAgIHJldHVybiBiO1xuICAgICAgfTtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cblxuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdtZXNzYWdlQ2VudGVyJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwibWVzc2FnZS1jZW50ZXJcIj48ZGl2IGNsYXNzPVwidWkgdGlueSBzZWNvbmRhcnkgbWVudVwiPlxcXG4gICAgPGRpdiBjbGFzcz1cIml0ZW0gbW51LXRpdGxlXCIgc3R5bGU9XCJwYWRkaW5nLWxlZnQ6MDtcIj57e2hlYWRpbmcgPT09IHVuZGVmaW5lZCA/IFwiTUVTU0FHRVM6XCIgOiBoZWFkaW5nIH19PC9kaXY+XFxcbiAgICA8YSBjbGFzcz1cIml0ZW1cIiBuZy1jbGljaz1cIkludGVsbGlnZW5jZUNlbnRlci5zZXRUeXBlKFxcJ1xcJylcIiBuZy1jbGFzcz1cInthY3RpdmU6IEludGVsbGlnZW5jZUNlbnRlci5zZWFyY2gudHlwZT09XFwnXFwnfVwiIG5nLXNob3c9XCJJbnRlbGxpZ2VuY2VDZW50ZXIuY2FuVmlld0FsbCgpXCI+QWxsIDxzcGFuIGNsYXNzPVwidWkgdGlueSBsYWJlbFwiPnt7ZXJyb3JzLm1lc3NhZ2VzLmxlbmd0aH19PC9zcGFuPjwvYT5cXFxuICAgIDxhIGNsYXNzPVwiaXRlbVwiIG5nLXJlcGVhdD1cIih0YWIsdmFsKSBpbiBlcnJvcnMudGFicyB0cmFjayBieSAkaW5kZXhcIiBuZy1zaG93PVwiZXJyb3JzLmNvdW50W3RhYl1cIiBuZy1jbGljaz1cIkludGVsbGlnZW5jZUNlbnRlci5zZXRUeXBlKHZhbClcIiBuZy1jbGFzcz1cInthY3RpdmU6IEludGVsbGlnZW5jZUNlbnRlci5zZWFyY2gudHlwZT09dmFsfVwiPnt7dGFiIHwgdW5jYW1lbGl6ZX19IDxzcGFuIGNsYXNzPVwidWkgdGlueSBsYWJlbFwiPnt7ZXJyb3JzLmNvdW50W3RhYl19fTwvc3Bhbj48L2E+XFxcbiAgICA8L2Rpdj5cXFxuICAgIDxkaXYgaWQ9XCJlcnJvci1tZXNzYWdlcy1saXN0XCIgY2xhc3M9XCJ1aSBtaWRkbGUgYWxpZ25lZCBkaXZpZGVkIGxpc3RcIj5cXFxuICAgICAgPG1lc3NhZ2UtaXRlbSBpdGVtPVwiaXRlbVwiIGNsYXNzPVwiaXRlbVwiIG5nLXJlcGVhdD1cIm9iaiBpbiBlcnJvcnMubWVzc2FnZXMgfCBmaWx0ZXI6IEludGVsbGlnZW5jZUNlbnRlci5zZWFyY2hcIiBlcnJvcj1cIm9ialwiPjwvbWVzc2FnZS1pdGVtPlxcXG4gICAgICA8L2Rpdj5cXFxuICAgICAgPGRpdiBhbGlnbj1cImNlbnRlclwiIHN0eWxlPVwibWFyZ2luLXRvcDogLTEuNWVtOyBwYWRkaW5nLWJvdHRvbTogMS41ZW07XCIgbmctc2hvdz1cIkludGVsbGlnZW5jZUNlbnRlci5zZWFyY2gudHlwZSE9PVxcJ1xcJyAmJiBJbnRlbGxpZ2VuY2VDZW50ZXIuY2FuVmlld0FsbCgpXCI+XFxcbiAgICAgIDxidXR0b24gY2xhc3M9XCJ1aSB0aW55IGJhc2ljIGJ1dHRvblwiIG5nLWNsaWNrPVwiSW50ZWxsaWdlbmNlQ2VudGVyLnNldFR5cGUoXFwnXFwnKVwiPjxpIGNsYXNzPVwibWludXMgc3F1YXJlIGljb25cIj48L2k+IFJlbW92ZSBmaWx0ZXI8L2J1dHRvbj48L2Rpdj5cXFxuICAgIDwvZGl2PicsXG4gICAgc2NvcGU6IHtcbiAgICAgIGVycm9yczpcIj1cIixcbiAgICAgIGhlYWRpbmc6XCJAXCIsXG4gICAgICBpdGVtOlwiPVwiXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcblxuICAgICAgICBzY29wZS5JbnRlbGxpZ2VuY2VDZW50ZXIgPSBuZXcgRU1MTWFrZXJJbnRlbGxpZ2VuY2UuSW50ZWxsaWdlbmNlQ2VudGVyKHNjb3BlLmVycm9ycywgc2NvcGUpO1xuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vIGpRdWVyeShlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnbWVzc2FnZUl0ZW0nLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZTogJzxkaXYgbmctY2xhc3M9XCJtZXNzYWdlQ2xzXCI+XFxcbiAgICA8ZGl2IGNsYXNzPVwicmlnaHQgZmxvYXRlZCBjb250ZW50XCIgbmctc2hvdz1cImVycm9yLmN0YUxhYmVsIT09XFwnXFwnXCIgPlxcXG4gICAgPGRpdiBjbGFzcz1cInVpIHNtYWxsIGNvbXBhY3RcIiBcXFxuICAgIG5nLWNsYXNzPVwiYnV0dG9uQ2xzXCIgbmctaWY9XCJidXR0b25DbHNcIiBcXFxuICAgIFxcIG5nLWNsaWNrPVwiZXJyb3IuY3RhSGFuZGxlcihpdGVtKVwiIFxcXG4gICAgIG5nLWJpbmQtaHRtbD1cImVycm9yLmN0YUxhYmVsXCI+e3tlcnJvci5jdGFMYWJlbCA/IGVycm9yLmN0YUxhYmVsIDogXCJSZXNvbHZlXCJ9fTwvZGl2PlxcXG4gICAgPC9kaXY+XFxcbiAgICA8ZGl2IGNsYXNzPVwicmlnaHQgZmxvYXRlZCBjb250ZW50XCIgbmctc2hvdz1cImVycm9yLmNsZWFuVHlwZT09XFwnUUFcXCdcIiA+XFxcbiAgICA8c3BhbiBjbGFzcz1cInVpIGljb24gbGFiZWxcIiBuZy1zaG93PVwiZXJyb3IuY2xlYW5UeXBlPT1cXCdRQVxcJyYmZXJyb3Iub3ZlcnJpZGVcIj48aSBjbGFzcz1cInRodW1icyB1cCBpY29uXCI+PC9pPiBZT1UgQ09ORklSTUVEPC9zcGFuPlxcXG4gICAgPGRpdiBjbGFzcz1cInVpIHNtYWxsIGNvbXBhY3RcIiBcXFxuICAgIG5nLWNsYXNzPVwiYnV0dG9uQ2xzXCIgbmctaWY9XCJidXR0b25DbHNcIiBuZy1oaWRlPVwiZXJyb3Iub3ZlcnJpZGVcIiBcXFxuICAgIFxcIG5nLWNsaWNrPVwiZXJyb3Iuc2V0T3ZlcnJpZGVTdGF0dXModHJ1ZSk7ZXJyb3IuY3RhSGFuZGxlcigpXCI+PGkgY2xhc3M9XCJjaGVjayBpY29uXCI+PC9pPiBDb25maXJtPC9kaXY+XFxcbiAgICA8L2Rpdj5cXFxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIiBuZy1zaG93PVwiYnV0dG9uQ2xzXCI+IFxcXG4gICAgICAgIDxoNCBuZy1iaW5kLWh0bWw9XCJlcnJvci50aXRsZSB8IGRld2lkb3dcIj48L2g0PlxcXG4gICAgICAgIDxkaXYgbmctYmluZC1odG1sPVwiZXJyb3IuZGVzY3JpcHRpb25cIj48L2Rpdj57e2l0ZW0uY3RhTGFiZWx9fTwvZGl2PlxcXG4gICAgICAgIDxkaXYgbmctaWY9XCJlcnJvci5yZXNvdXJjZSE9PVxcJ1xcJ1wiPjxhIG5nLWhyZWY9XCJ7e2Vycm9yLnJlc291cmNlfX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5SZWFkIG1vcmUgPGkgY2xhc3M9XCJleHRlcm5hbCBhbHRlcm5hdGUgaWNvblwiPjwvaT48L2E+PC9kaXY+XFxcbiAgICA8L2Rpdj4nLFxuICAgIHNjb3BlOiB7ZXJyb3I6IFwiPVwiLCBpdGVtOlwiPVwifSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGNscyA9IFtcIlwiLCBcInJlZFwiLCBcIm9yYW5nZVwiLCBcInZpb2xldFwiLCBcInRlYWxcIiwgXCJibHVlXCJdO1xuXG5cbiAgICAgICAgLy8gZW51bSBFcnJvclR5cGUge1xuICAgICAgICAvLyAgIEZpeD0xLFxuICAgICAgICAvLyAgIFdhcm4sXG4gICAgICAgIC8vICAgU3VnZ2VzdGlvbixcbiAgICAgICAgLy8gICBRQSxcbiAgICAgICAgLy8gICBCZXN0UHJhY3RpY2VcbiAgICAgICAgLy8gfVxuXG5cbiAgICAgICAgLy8gXCJcIixcbiAgICAgICAgLy8gXCJyZWRcIixcbiAgICAgICAgLy8gXCJvcmFuZ2VcIixcbiAgICAgICAgLy8gXCJ2aW9sZXRcIixcbiAgICAgICAgLy8gXCJ5ZWxsb3dcIixcbiAgICAgICAgLy8gXCJcIlxuXG4gICAgICAgIHNjb3BlLmJ1dHRvbkNscyA9IFtjbHNbc2NvcGUuZXJyb3Iuc2V2ZXJpdHldLFwiYnV0dG9uXCJdLmpvaW4oXCIgXCIpO1xuXG4gICAgICAgIGlmKHNjb3BlLmVycm9yLmNsZWFuVHlwZT09XCJRQVwiICYmIHNjb3BlLmVycm9yLm92ZXJyaWRlKSB7XG4gICAgICAgICAgc2NvcGUubWVzc2FnZUNscyA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NvcGUubWVzc2FnZUNscyA9IFtcInR5cGUtXCIsc2NvcGUuZXJyb3IudHlwZSxcIiBsZXZlbC1cIixzY29wZS5lcnJvci5zZXZlcml0eV0uam9pbihcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vIGpRdWVyeShlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnbWVzc2FnZXNOb3RpZnknLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ1aSBmbHVpZCBsYWJlbGVkIGJ1dHRvblwiIG5nLWNsaWNrPVwibmdDbGljaygpXCIgbmctY2xhc3M9XCJ7XFwnYW5pbWF0ZS10YWRhXFwnOiBkb0FuaW1hdGlvbn1cIj5cXFxuICAgICAgPGRpdiBjbGFzcz1cInVpIGZsdWlkIGJ1dHRvblwiIG5nLWNsYXNzPVwie1xcJ3llbGxvd1xcJzpkb0FuaW1hdGlvbiwgXFwncmVkXFwnOiAhd29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZX1cIj5cXFxuICAgICAgICA8aSBjbGFzcz1cIndhcm5pbmcgaWNvblwiIGFsdD1cIlshXVwiIG5nLXNob3c9XCIhd29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZVwiPjwvaT5cXFxuICAgICAgICA8aSBjbGFzcz1cImluZm8gaWNvblwiIGFsdD1cIihpKVwiIG5nLXNob3c9XCJ3b3Jrc3BhY2UuaW50ZWxsaWdlbmNlLmNhbkNvbnRpbnVlXCI+PC9pPlxcXG4gICAgICAgIHt7IGNvdW50PjEgPyBcIk1lc3NhZ2VzXCIgOiBcIk1lc3NhZ2VcIn19XFxcbiAgICAgICAgPC9kaXY+XFxcbiAgICAgIDxkaXYgY2xhc3M9XCJ1aSBsYWJlbFwiIG5nLWNsYXNzPVwie1xcJ3llbGxvd1xcJzpkb0FuaW1hdGlvbiwgXFwncmVkXFwnOiAhd29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZX1cIj5cXFxuICAgICAgICB7e2NvdW50fX1cXFxuICAgICAgICA8L2Rpdj5cXFxuICAgICAgPC9kaXY+XFxcbiAgICAgIDwvZGl2PicsXG4gICAgc2NvcGU6IHtcbiAgICAgIHdvcmtzcGFjZTogXCI9XCIsXG4gICAgICBuZ0NsaWNrOiBcIiZcIixcbiAgICAgIGNvdW50OiBcIj1cIlxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgIHNjb3BlLmRvQW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2NvcGUuZG9BbmltYXRpb24gPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LCAxNTAwKTtcbiAgICAgIHNjb3BlLiR3YXRjaChcImNvdW50XCIsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSwgc2NvcGUpe1xuICAgICAgICBpZihuZXdWYWx1ZSA+IG9sZFZhbHVlKSB7XG5cbiAgICAgICAgICAgIHNjb3BlLmRvQW5pbWF0aW9uID0gdHJ1ZTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVVBEQVRFRFwiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgc2NvcGUuZG9BbmltYXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSwxNTAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzY29wZS5kb0FuaW1hdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAyMDAwKTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ25nQ2hhbmdlTGF6eScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiQVwiLFxuXHRcdC8vIHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG5nTW9kZWw6XCI9XCIsXG5cdFx0XHRuZ0NoYW5nZUxhenk6XCImXCIsXG5cdFx0XHRjaGFuZ2VMYXp5QnVmZmVyOlwiPVwiLFxuXHRcdFx0ZGF0YVRyYW5zZmVyRXZ0OlwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuXHRcdFx0dmFyIHRpbWVyID0gbnVsbDtcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBsYXN0VmFsdWUgPSBzY29wZS5uZ01vZGVsLnRvU3RyaW5nKCk7XG5cdFx0XHRcdGVsLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lcik7XG5cdFx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRpZihsYXN0VmFsdWUgIT09IGVsWzBdLnZhbHVlKXtcblx0XHRcdFx0XHRcdHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdHNjb3BlLm5nQ2hhbmdlTGF6eSgpO1xuXHRcdFx0XHRcdFx0XHRcdGxhc3RWYWx1ZSA9IGVsWzBdLnZhbHVlO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgYXR0ci5jaGFuZ2VMYXp5QnVmZmVyPT09IHVuZGVmaW5lZCA/IDUwMCA6IGF0dHIuY2hhbmdlTGF6eUJ1ZmZlcioxKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGVsLm9mZigna2V5dXAnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdvblJldHVyblByZXNzJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJBXCIsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG9uUmV0dXJuUHJlc3M6XCImXCIsXG5cdFx0XHRkYXRhVHJhbnNmZXJFdnQ6XCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG5cblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGVsLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdGlmKGUua2V5Q29kZT09MTMpe1xuXHRcdFx0XHRcdFx0c2NvcGUub25SZXR1cm5QcmVzcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0c2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0ZWwub2ZmKCdrZXlwcmVzcycpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0fTtcblx0fV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJykuZGlyZWN0aXZlKCd1aVBvcHVwJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBzY29wZToge3BvcHVwSWQ6XCJAXCIscG9wdXBCZWhhdmlvcjpcIkBcIn0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgIGhvdmVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBwb3B1cDogXCIjXCIgKyBhdHRyLnBvcHVwSWRcbiAgICAgICAgfTtcbiAgICAgICAgKGZ1bmN0aW9uKCQsIHNjb3BlLCBhdHRyKXtcbiAgICAgICAgICBpZihhdHRyLnBvcHVwQmVoYXZpb3IgIT09IHVuZGVmaW5lZCApIGFyZ3Mub24gPSBcImNsaWNrXCI7XG4gICAgICAgICAgaWYoYXR0ci5wb3B1cElkICE9PSB1bmRlZmluZWQgKSBhcmdzLnBvcHVwID0gXCIjXCIgKyBhdHRyLnBvcHVwSWQ7XG4gICAgICAgICAgJChlbCkucG9wdXAoYXJncyk7XG4gICAgICAgICAgaWYoYXR0ci5wb3B1cFNob3cgIT09IHVuZGVmaW5lZCApICQoZWwpLnBvcHVwKFwic2hvd1wiKTtcbiAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9KShqUXVlcnksIHNjb3BlLCBhdHRyKVxuXG4gICAgfSk7XG4gIH1cbn07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ3F1ZXJ5U3RyaW5nRWRpdG9yJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicXVlcnktc3RyaW5nLWVkaXRvciB3ZWxsLWNvbXBvbmVudFwiIG5nLWhpZGU9XCJpdGVtLmlzTGlua1R5cGUoXFwnbWFpbHRvXFwnKVwiPjxkaXYgc3R5bGU9XCJvdmVyZmxvdzpoaWRkZW47cGFkZGluZy1ib3R0b206LjVlbTtcIj48c3Ryb25nPlFVRVJZIFNUUklORyBFRElUT1I8L3N0cm9uZz5cXFxuICAgIDxkaXYgY2xhc3M9XCJ1aSB0aW55IGJhc2ljIGJ1dHRvbnNcIiBzdHlsZT1cImZsb2F0OnJpZ2h0O1wiPlxcXG4gIDxidXR0b24gY2xhc3M9XCJ1aSBpY29uIGJ1dHRvblwiIG5nLWNsaWNrPVwiaXRlbS5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZUFsbCgpO2l0ZW0uaXNMaW5rQ29tcGxldGUoKTtzY3JvbGxUb0l0ZW0oaXRlbS5pZCk7XCI+UmVtb3ZlIGFsbDwvYnV0dG9uPlxcXG4gIDxidXR0b24gY2xhc3M9XCJ1aSBpY29uIGJ1dHRvblwiIG5nLWNsaWNrPVwidmlldyA9PSAxID8gdmlldz0wIDogdmlldz0xXCI+e3t2aWV3PT0xPyBcIkNsb3NlXCIgOiBcIkVkaXRcIn19PC9idXR0b24+XFxcbjwvZGl2PjwvZGl2PlxcXG4gICAgIDxkaXYgbmctaWY9XCJpdGVtLm5ldy5zZWFyY2hQYXJhbXMuX2VudHJpZXMubGVuZ3RoPT0xJiZpdGVtLm5ldy5zZWFyY2hQYXJhbXMuX2VudHJpZXNbMF0ubGVuZ3RoPT0wXCI+UXVlcnkgc3RyaW5ncyB3aWxsIGFwcGVhciBoZXJlLjwvZGl2PlxcXG4gICAgICA8ZGl2IG5nLXNob3c9XCJ2aWV3PT0xXCI+XFxcbiAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOi41ZW07XCIgY2xhc3M9XCJ1aSBhY3Rpb24gaW5wdXRcIiBuZy1pZj1cInN0ci5sZW5ndGg+MFwiIG5nLXJlcGVhdD1cInN0ciBpbiBpdGVtLm5ldy5zZWFyY2hQYXJhbXMuZW50cmllcyB0cmFjayBieSAkaW5kZXhcIj5cXFxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmcta2V5dXA9XCJpdGVtLm5ldy5zZWFyY2hQYXJhbXMudXBkYXRlU2VhcmNoUHJvcCgpO2l0ZW0uaXNMaW5rQ29tcGxldGUoKVwiIG5nLW1vZGVsPVwiaXRlbS5uZXcuc2VhcmNoUGFyYW1zLl9lbnRyaWVzWyRpbmRleF1cIi8+XFxcbiAgICAgIDxidXR0b24gY2xhc3M9XCJ1aSBpY29uIGJ1dHRvblwiIG5nLWNsaWNrPVwiaXRlbS5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZUF0SW5kZXgoJGluZGV4KVwiPlxcXG4gICAgICBSZW1vdmU8L2J1dHRvbj48L2Rpdj5cXFxuICAgICAgPC9kaXY+XFxcbiAgICAgIDxkaXYgbmctc2hvdz1cInZpZXc9PTBcIj5cXFxuICAgICAgPHVsIGNsYXNzPVwidGFncy1sYXlvdXRcIj5cXFxuICAgICAgIDxsaSBuZy1pZj1cInN0ci5sZW5ndGg+MFwiIG5nLXJlcGVhdD1cInN0ciBpbiBpdGVtLm5ldy5zZWFyY2hQYXJhbXMuZW50cmllcyB0cmFjayBieSAkaW5kZXhcIj5cXFxuICAgICAgIHt7c3RyfX0gPGEgaHJlZj1cImphdmFzY3JpcHQ6YW5ndWxhci5ub29wKClcIiBuZy1jbGljaz1cIml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBdEluZGV4KCRpbmRleCk7aXRlbS5pc0xpbmtDb21wbGV0ZSgpXCI+XFxcbiAgICAgICA8aSBjbGFzcz1cImNsb3NlIGljb25cIiBhbHQ9XCJbWF1cIj48L2k+PC9hPjwvbGk+PC91bD5cXFxuICAgICAgIDwvZGl2PlxcXG4gICAgICA8L2Rpdj4nLFxuICAgIHNjb3BlOiB7aXRlbTpcIj1cIiwgc2Nyb2xsVG86XCImXCJ9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgVmlldyA9IChmdW5jdGlvbihWaWV3KXtcbiAgICAgICAgICBWaWV3W1ZpZXdbXCJERUZBVUxUXCJdPTBdID0gXCJERUZBVUxUXCI7XG4gICAgICAgICAgVmlld1tWaWV3W1wiRURJVFwiXT0xXSA9IFwiRURJVFwiO1xuICAgICAgICAgIHJldHVybiBWaWV3O1xuICAgICAgICB9KSh7fSk7XG4gICAgICAgIHdpbmRvdy5xc19kZWJ1ZyA9IHNjb3BlO1xuICAgICAgICB2YXIgcG9pbnRlciA9IHNjb3BlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgcG9pbnRlciA9IHBvaW50ZXIuJHBhcmVudDtcbiAgICAgICAgfSB3aGlsZSAocG9pbnRlci5zY3JvbGxUbyA9PT0gdW5kZWZpbmVkKTtcblxuICAgICAgICBzY29wZS5zY3JvbGxUb0l0ZW0gPSBmdW5jdGlvbihwYXJhbSl7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHBvaW50ZXIuc2Nyb2xsVG8ocGFyYW0tMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LDUwKTtcblxuXG4gICAgICAgIH1cbiAgICAgICAgc2NvcGUudmlldyA9IFZpZXcuREVGQVVMVDtcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8galF1ZXJ5KGVsKS5wb3B1cChcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpLmRpcmVjdGl2ZSgnc2Nyb2xsc3B5JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoc2NvcGUuYWN0aXZlTGlua0lkID09PSB1bmRlZmluZWQpIHNjb3BlLmFjdGl2ZUxpbmtJZCA9IDE7XG4gICAgICAgIGlmKHNjb3BlLmlzU2Nyb2xsaW5nID09PSB1bmRlZmluZWQpIHNjb3BlLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG5cblxuICAgICAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaWYoc2NvcGUuaXNTY3JvbGxpbmcgJiYgc2NvcGUuaXNTY3JvbGxpbmcgPT0xKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgdmFyIGlkID0galF1ZXJ5KGVsKS5hdHRyKFwiaWRcIikuc3BsaXQoXCItXCIpLnBvcCgpO1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2NvcGUuYWN0aXZlTGlua0lkID1pZCoxO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG4gICAgICAgIGpRdWVyeShlbCkudmlzaWJpbGl0eSh7XG4gICAgICAgICAgICBvbmNlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzaXplIHdoZW4gbmV3IGNvbnRlbnQgbG9hZHNcbiAgICAgICAgICAgIG9ic2VydmVDaGFuZ2VzOiB0cnVlLFxuICAgICAgICAgICAgLy8gbG9hZCBjb250ZW50IG9uIGJvdHRvbSBlZGdlIHZpc2libGVcbiAgICAgICAgICAgIG9uVG9wVmlzaWJsZTogZnVuYyxcbiAgICAgICAgICAgIG9uVG9wUGFzc2VkUmV2ZXJzZTogZnVuY1xuXG5cbiAgICAgICAgICB9KTtcblxuXG5cblxuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vJChlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICAgIGpRdWVyeShlbCkudmlzaWJpbGl0eShcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdzaW1wbGVBY2NvcmRpb24nLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHNjb3BlOntoZWFkaW5nOlwiQFwiLHNob3c6IFwiPVwifSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgbmctY2xhc3M9XCJ7ZXhwYW5kZWQ6IHNob3csIGNvbGxhcHNlZDogIXNob3d9XCI+PGRpdiBuZy1jbGljaz1cInRvZ2dsZVBhbmUoKVwiIGNsYXNzPVwiYWNjb3JkaW9uLXRpdGxlXCI+XFxcbiAgICA8aSBjbGFzcz1cImNoZXZyb24gcmlnaHQgaWNvblwiIG5nLXNob3c9XCIhc2hvd1wiIGFsdD1cIlsrXVwiPjwvaT5cXFxuICAgIDxpIGNsYXNzPVwiY2hldnJvbiBkb3duIGljb25cIiBuZy1zaG93PVwic2hvd1wiIGFsdD1cIlstXVwiPjwvaT5cXFxuICAgICA8c3Bhbj57e2hlYWRpbmd9fTwvc3Bhbj48L2Rpdj48bmctdHJhbnNjbHVkZSBuZy1zaG93PVwic2hvd1wiPjwvbmctdHJhbnNjbHVkZT48L2Rpdj4nLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICBzY29wZS5zaG93ID0gZmFsc2U7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBzY29wZS50b2dnbGVQYW5lID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICBzY29wZS5zaG93ID0gIXNjb3BlLnNob3c7XG4gICAgICAgIH07XG4gICAgICAgIGpRdWVyeS5leHRlbmQoalF1ZXJ5KGVsKSx7XCJ0b2dnbGVBY2NvcmRpb25cIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNjb3BlLnRvZ2dsZVBhbmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfX0pO1xuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKS5kaXJlY3RpdmUoJ3N0aWNreScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGpRdWVyeShlbClcbiAgLnN0aWNreSh7XG4gICAgY29udGV4dDogJyNzdGlja3lwYXJlbnQnXG4gIH0pXG47XG5cbiAgdmFyIHJlc2l6ZVRpbWVyID0gbnVsbDtcblxuICB2YXIgUmVzaXplU3RpY2t5ID0gZnVuY3Rpb24oKXtcbiAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHZhciBhID0gJCgnI3JpZ2h0LXBhbmVsJyk7XG4gICAgICB2YXIgYiA9IGEuZmluZCgnLnVpLnNlY29uZGFyeS52ZXJ0aWNhbC5wb2ludGluZy5tZW51Jyk7XG4gICAgICB2YXIgYyA9IGEuZmluZCgnLm1lc3NhZ2UtYXJlYScpO1xuICAgICAgYVswXS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgLy8gY29uc29sZS5sb2coYS5oZWlnaHQoKSx3aW5kb3cuaW5uZXJIZWlnaHQsMjAwKTtcbiAgICAgIGlmKGFbMF0uY2xpZW50SGVpZ2h0ID4gKHdpbmRvdy5pbm5lckhlaWdodCAtICg3NSs2MCkpICl7XG4gICAgICAgIGFbMF0uc3R5bGUuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gKDc1Kzc1KSArIFwicHhcIjtcbiAgICAgICAgYlswXS5zdHlsZS5oZWlnaHQgPSBhWzBdLmNsaWVudEhlaWdodCAtIGNbMF0uY2xpZW50SGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICBiLmFkZENsYXNzKCdzY3JvbGxpbmcnKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvbyBiaWcnKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYi5yZW1vdmVDbGFzcygnc2Nyb2xsaW5nJyk7XG4gICAgICB9XG4gICAgICBqUXVlcnkoZWwpLnN0aWNreShcInJlZnJlc2hcIik7XG5cbiAgICB9LDMwMCk7XG5cbiAgfTtcblxuXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBSZXNpemVTdGlja3kpO1xuICAgICQod2luZG93KS5vbignc2Nyb2xsJywgUmVzaXplU3RpY2t5KTtcblxuICAgIFJlc2l6ZVN0aWNreSgpO1xuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vJChlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZScsIFJlc2l6ZVN0aWNreSk7XG4gICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsJywgUmVzaXplU3RpY2t5KTtcbiAgICAgICAgICBqUXVlcnkoZWwpLnN0aWNreShcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
