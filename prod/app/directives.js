angular.module("EMLMaker").directive("aceEditor",["$timeout",function(e){return{restrict:"A",link:function(t,o,n){e(function(){var e=ace.edit(o.get(0).id);e.setTheme("ace/theme/eclipse"),e.getSession().setUseWrapMode(!0),e.getSession().setMode("ace/mode/xml");e.getSession().on("change",function(o){t.$apply(function(){t.workspace.sourceCode=e.getValue()})}),t.$on("$destroy",function(){e.destroy()})})}}}]);
angular.module("EMLMaker").directive("dropEnable",["$timeout",function(e){return{restrict:"A",scope:{ondropfile:"&",dataTransferEvt:"="},link:function(t,n,o){var r=n,a=null,i=function(e){clearTimeout(a),a=setTimeout(function(){r.removeClass("active"),setTimeout(function(){window.jQuery(".ui.sticky").sticky("refresh")},100),r.css({border:"",color:"",background:""})},100),e.stopPropagation(),e.preventDefault()},d=0;e(function(){r.get(0).addEventListener("drop",function(e){return"#/main"===location.hash&&(e.stopPropagation(),e.preventDefault(),d++,i(e),void((location.hash="#/main")&&t.ondropfile({evt:e})))},!1),r.get(0).addEventListener("dragend",i,!1),r.get(0).addEventListener("dragleave",i,!1),r.get(0).addEventListener("dragover",function(e){return clearTimeout(a),"#/main"===location.hash&&(e.dataTransfer.dropEffect="copy",r.addClass("active"),r.css({border:"solid 3px blue",color:"blue",background:"lightblue"}),a=setTimeout(function(){},100),void e.preventDefault())},!1)})}}}]);
angular.module("EMLMaker").directive("uiDropdown",["$timeout",function(o){return{restrict:"A",scope:{dropdownAction:"@"},link:function(n,t,d){o(function(){var o={action:"hide"};n.dropdownAction&&(o.action=n.dropdownAction),$(t).dropdown(o)}),n.$on("$destroy",function(){$(t).dropdown("destroy")})}}}]);
angular.module("EMLMaker").directive("gaEvent",["$timeout",function(n){return{restrict:"A",scope:{gaEvent:"@"},link:function(t,e,o){n(function(){var n=function(){for(var n=["send","event"],e=t.gaEvent.split(/\,|\|/),o=0;o<e.length;o++)n.push(e[o]);window.ga.apply(null,n)};e.on("click",n)}),t.$on("$destroy",function(){e.on("off",reportEvent)})}}}]);
angular.module("EMLMaker").directive("htmlViewer",["$timeout",function(t){return{restrict:"E",template:'<div><ol start="{{item.line}}"><li ng-repeat="ln in code(item) track by $index" ng-bind-html="ln"></li></ol></div>',scope:{item:"="},link:function(e,i,n){e.code=function(t){var e=t.displayFormattedURL().split(/\<br\>|\n/g);return e},t(function(){})}}}]);
angular.module("EMLMaker").directive("messageCenter",["$timeout",function(e){return{restrict:"E",template:'<div class="message-center"><div class="ui tiny secondary menu">    <div class="item mnu-title" style="padding-left:0;">{{heading === undefined ? "MESSAGES:" : heading }}</div>    <a class="item" ng-click="IntelligenceCenter.setType(\'\')" ng-class="{active: IntelligenceCenter.search.type==\'\'}" ng-show="IntelligenceCenter.canViewAll()">All <span class="ui tiny label">{{errors.messages.length}}</span></a>    <a class="item" ng-repeat="(tab,val) in errors.tabs track by $index" ng-show="errors.count[tab]" ng-click="IntelligenceCenter.setType(val)" ng-class="{active: IntelligenceCenter.search.type==val}">{{tab | uncamelize}} <span class="ui tiny label">{{errors.count[tab]}}</span></a>    </div>    <div id="error-messages-list" class="ui middle aligned divided list">      <message-item item="item" class="item" ng-repeat="obj in errors.messages | filter: IntelligenceCenter.search" error="obj"></message-item>      </div>      <div align="center" style="margin-top: -1.5em; padding-bottom: 1.5em;" ng-show="IntelligenceCenter.search.type!==\'\' && IntelligenceCenter.canViewAll()">      <button class="ui tiny basic button" ng-click="IntelligenceCenter.setType(\'\')"><i class="minus square icon"></i> Remove filter</button></div>    </div>',scope:{errors:"=",heading:"@",item:"="},link:function(n,t,i){e(function(){n.IntelligenceCenter=new EMLMakerIntelligence.IntelligenceCenter(n.errors,n),n.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("messageItem",["$timeout",function(e){return{restrict:"E",template:'<div ng-class="messageCls" class="intel-msg">    <div class="right floated content" ng-if="error.ctaLabel!==\'\'" >    <div class="ui small compact"     ng-class="buttonCls" ng-if="buttonCls"      ng-click="error.ctaHandler(item)"      ng-bind-html="error.ctaLabel">{{error.ctaLabel ? error.ctaLabel : "Resolve"}}</div>    </div>    <div class="right floated content" ng-if="error.cleanType==\'QA\'" >    <span class="ui icon label" ng-show="error.cleanType==\'QA\'&&error.override"><i class="thumbs up icon"></i> YOU CONFIRMED</span>    <div class="ui small compact"     ng-class="buttonCls" ng-if="buttonCls" ng-hide="error.override"      ng-click="error.setOverrideStatus(true);error.ctaHandler()"><i class="check icon"></i> Confirm</div>    </div>      <div class="content" ng-show="buttonCls">         <h4 ng-bind-html="error.title | dewidow"></h4>        <div ng-bind-html="error.description"></div></div>        <div ng-if="error.suggestion.length>0" ng-hide="error.override" class="suggestion">SUGGESTION: <div ng-bind-html="error.suggestion"></div></div>        <div ng-if="error.resource!==\'\'"><a ng-href="{{error.resource}}" target="_blank">{{error.resourceText}} <i class="external alternate icon"></i></a></div>    </div>',scope:{error:"=",item:"="},link:function(r,i,t){e(function(){var e=["","red","orange","violet","teal","blue"];r.buttonCls=[e[r.error.severity],"button"].join(" "),"QA"==r.error.cleanType&&r.error.override?r.messageCls="":r.messageCls=["type-",r.error.type," level-",r.error.severity].join(""),r.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("messagesNotify",["$timeout",function(n){return{restrict:"E",template:'<div class="ui fluid labeled button" ng-click="ngClick()" ng-class="{\'animate-tada\': doAnimation}">      <div class="ui fluid button" ng-class="{\'yellow\':doAnimation, \'red\': !workspace.intelligence.canContinue}">        <i class="warning icon" alt="[!]" ng-show="!workspace.intelligence.canContinue"></i>        <i class="info icon" alt="(i)" ng-show="workspace.intelligence.canContinue"></i>        {{ count>1 ? "Messages" : "Message"}}        </div>      <div class="ui label" ng-class="{\'yellow\':doAnimation, \'red\': !workspace.intelligence.canContinue}">        {{count}}        </div>      </div>      </div>',scope:{workspace:"=",ngClick:"&",count:"="},link:function(i,o,t){i.doAnimation=!0,setTimeout(function(){i.$apply(function(){i.doAnimation=!1})},1500),i.$watch("count",function(n,i,o){n>i&&(o.doAnimation=!0,console.log("UPDATED"),setTimeout(function(){o.$apply(function(){o.doAnimation=!1})},1500))}),n(function(){setTimeout(function(){i.$apply(function(){i.doAnimation=!1})},2e3),i.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("ngChangeLazy",["$timeout",function(n){return{restrict:"A",scope:{ngModel:"=",ngChangeLazy:"&",changeLazyBuffer:"=",dataTransferEvt:"="},link:function(e,a,t){var u=null;n(function(){var n=e.ngModel.toString();a.on("keyup",function(o){clearTimeout(u),u=setTimeout(function(){n!==a[0].value&&e.$apply(function(){e.ngChangeLazy(),n=a[0].value})},void 0===t.changeLazyBuffer?500:1*t.changeLazyBuffer)}),e.$on("$destroy",function(){a.off("keyup")})})}}}]);
angular.module("EMLMaker").directive("onReturnPress",["$timeout",function(e){return{restrict:"A",scope:{onReturnPress:"&",dataTransferEvt:"="},link:function(n,r,t){e(function(){r.on("keypress",function(e){13==e.keyCode&&n.onReturnPress()}),n.$on("$destroy",function(){r.off("keypress")})})}}}]);
angular.module("EMLMaker").directive("uiPopup",["$timeout",function(p){return{restrict:"A",scope:{popupId:"@",popupBehavior:"@"},link:function(o,u,i){p(function(){var p={hoverable:!0,popup:"#"+i.popupId};!function(o,i,e){void 0!==e.popupBehavior&&(p.on="click"),void 0!==e.popupId&&(p.popup="#"+e.popupId),o(u).popup(p),void 0!==e.popupShow&&o(u).popup("show"),i.$on("$destroy",function(){o(u).popup("destroy")})}(jQuery,o,i)})}}}]);
angular.module("EMLMaker").directive("queryStringEditor",["$timeout",function(e){return{restrict:"E",template:'<div class="query-string-editor well-component" ng-hide="item.isLinkType(\'mailto\')"><div style="overflow:hidden;padding-bottom:.5em;"><strong>QUERY STRING EDITOR</strong>    <div class="ui tiny basic buttons" style="float:right;">  <button class="ui icon button" ng-click="item.new.searchParams.deleteAll();item.isLinkComplete();scrollToItem(item.id);">Remove all</button>  <button class="ui icon button" ng-click="view == 1 ? view=0 : view=1">{{view==1? "Close" : "Edit"}}</button></div></div>     <div ng-if="item.new.searchParams._entries.length==1&&item.new.searchParams._entries[0].length==0">Query strings will appear here.</div>      <div ng-show="view==1">      <div style="margin-bottom:.5em;" class="ui action input" ng-if="str.length>0" ng-repeat="str in item.new.searchParams.entries track by $index">      <input type="text" ng-keyup="item.new.searchParams.updateSearchProp();item.isLinkComplete()" ng-model="item.new.searchParams._entries[$index]"/>      <button class="ui icon button" ng-click="item.new.searchParams.deleteAtIndex($index)">      Remove</button></div>      </div>      <div ng-show="view==0">      <ul class="tags-layout">       <li ng-if="str.length>0" ng-repeat="str in item.new.searchParams.entries track by $index">       {{str}} <a href="javascript:angular.noop()" ng-click="item.new.searchParams.deleteAtIndex($index);item.isLinkComplete()">       <i class="close icon" alt="[X]"></i></a></li></ul>       </div>      </div>',scope:{item:"=",scrollTo:"&"},link:function(t,i,n){e(function(){var e=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.EDIT=1]="EDIT",e}({});window.qs_debug=t;var i=t;do i=i.$parent;while(void 0===i.scrollTo);t.scrollToItem=function(e){setTimeout(function(){t.$apply(function(){i.scrollTo(e-1)})},50)},t.view=e.DEFAULT,t.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("scrollspy",["$timeout",function(i){return{restrict:"A",link:function(n,e,o){i(function(){void 0===n.activeLinkId&&(n.activeLinkId=1),void 0===n.isScrolling&&(n.isScrolling=!1);var i=function(){if(n.isScrolling&&1==n.isScrolling)return!1;var i=jQuery(e).attr("id").split("-").pop();n.$apply(function(){n.activeLinkId=1*i})};jQuery(e).visibility({once:!1,observeChanges:!0,onTopVisible:i,onTopPassedReverse:i}),n.$on("$destroy",function(){jQuery(e).visibility("destroy")})})}}}]);
angular.module("EMLMaker").directive("simpleAccordion",["$timeout",function(n){return{restrict:"E",transclude:!0,scope:{heading:"@",show:"="},template:'<div ng-class="{expanded: show, collapsed: !show}"><div ng-click="togglePane()" class="accordion-title">    <i class="chevron right icon" ng-show="!show" alt="[+]"></i>    <i class="chevron down icon" ng-show="show" alt="[-]"></i>     <span>{{heading}}</span></div><ng-transclude ng-show="show"></ng-transclude></div>',link:function(o,e,i){o.show=!1,n(function(){o.togglePane=function(){o.show=!o.show},jQuery.extend(jQuery(e),{toggleAccordion:function(){o.$apply(function(){o.togglePane()})}}),o.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("sticky",["$timeout",function(e){return{restrict:"A",link:function(i,n,t){e(function(){jQuery(n).sticky({context:"#stickyparent"});var e=null,t=function(){e=setTimeout(function(){var e=$("#right-panel"),i=e.find(".ui.secondary.vertical.pointing.menu"),t=e.find(".message-area");e[0].style.height="",e[0].clientHeight>window.innerHeight-135?(e[0].style.height=window.innerHeight-150+"px",i[0].style.height=e[0].clientHeight-t[0].clientHeight+"px",i.addClass("scrolling")):i.removeClass("scrolling"),jQuery(n).sticky("refresh")},300)};$(window).on("resize",t),$(window).on("scroll",t),t(),i.$on("$destroy",function(){$(window).off("resize",t),$(window).off("scroll",t),jQuery(n).sticky("destroy")})})}}}]);
angular.module("EMLMaker").directive("textareaExpand",["$timeout",function(t){return{restrict:"A",link:function(e,n,r){var o=function(t){t.style.height="inherit";var e=window.getComputedStyle(t),n=parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("padding-top"),10)+t.scrollHeight+parseInt(e.getPropertyValue("padding-bottom"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10);t.style.height=n+"px"};t(function(){$(n).css("min-height","25px"),o($(n).get(0)),$(n).on("input change",function(t){o($(n).get(0))})}),e.$on("$destroy",function(){})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZUVkaXRvci5qcyIsImRyb3AtZW5hYmxlLmpzIiwiZHJvcGRvd24uanMiLCJnYUV2ZW50LmpzIiwiaHRtbFZpZXdlci5qcyIsIm1lc3NhZ2VDZW50ZXIuanMiLCJtZXNzYWdlSXRlbS5qcyIsIm1lc3NhZ2VzTm90aWZ5LmpzIiwibmdDaGFuZ2VMYXp5LmpzIiwib25SZXR1cm5QcmVzcy5qcyIsInBvcHVwLmpzIiwicXVlcnlTdHJpbmdFZGl0b3IuanMiLCJzY3JvbGxzcHkuanMiLCJzaW1wbGVBY2NvcmRpb24uanMiLCJzdGlja3kuanMiLCJ0ZXh0YXJlYUV4cGFuZC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwiJHRpbWVvdXQiLCJyZXN0cmljdCIsImxpbmsiLCJzY29wZSIsImVsIiwiYXR0ciIsImVkaXRvciIsImFjZSIsImVkaXQiLCJnZXQiLCJpZCIsInNldFRoZW1lIiwiZ2V0U2Vzc2lvbiIsInNldFVzZVdyYXBNb2RlIiwic2V0TW9kZSIsIm9uIiwiZSIsIiRhcHBseSIsIndvcmtzcGFjZSIsInNvdXJjZUNvZGUiLCJnZXRWYWx1ZSIsIiRvbiIsImRlc3Ryb3kiLCJvbmRyb3BmaWxlIiwiZGF0YVRyYW5zZmVyRXZ0IiwiZmlsZURyb3BwZXIiLCJ0aW1lciIsImRyb3BwZXJSZXNldCIsImV2dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsIndpbmRvdyIsImpRdWVyeSIsInN0aWNreSIsImNzcyIsImJvcmRlciIsImNvbG9yIiwiYmFja2dyb3VuZCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiY291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJsb2NhdGlvbiIsImhhc2giLCJkYXRhVHJhbnNmZXIiLCJkcm9wRWZmZWN0IiwiYWRkQ2xhc3MiLCJkcm9wZG93bkFjdGlvbiIsImFjdGlvbiIsIiQiLCJkcm9wZG93biIsImdhRXZlbnQiLCJyZXBvcnRFdmVudCIsImFyZ3MiLCJuZXdBcmdzIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwicHVzaCIsImdhIiwiYXBwbHkiLCJ0ZW1wbGF0ZSIsIml0ZW0iLCJjb2RlIiwiYyIsImIiLCJkaXNwbGF5Rm9ybWF0dGVkVVJMIiwiZXJyb3JzIiwiaGVhZGluZyIsIkludGVsbGlnZW5jZUNlbnRlciIsIkVNTE1ha2VySW50ZWxsaWdlbmNlIiwiZXJyb3IiLCJjbHMiLCJidXR0b25DbHMiLCJzZXZlcml0eSIsImpvaW4iLCJjbGVhblR5cGUiLCJvdmVycmlkZSIsIm1lc3NhZ2VDbHMiLCJ0eXBlIiwibmdDbGljayIsImNvdW50IiwiZG9BbmltYXRpb24iLCIkd2F0Y2giLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiY29uc29sZSIsImxvZyIsIm5nTW9kZWwiLCJuZ0NoYW5nZUxhenkiLCJjaGFuZ2VMYXp5QnVmZmVyIiwibGFzdFZhbHVlIiwidG9TdHJpbmciLCJ2YWx1ZSIsInVuZGVmaW5lZCIsIm9mZiIsIm9uUmV0dXJuUHJlc3MiLCJrZXlDb2RlIiwicG9wdXBJZCIsInBvcHVwQmVoYXZpb3IiLCJob3ZlcmFibGUiLCJwb3B1cCIsInBvcHVwU2hvdyIsInNjcm9sbFRvIiwiVmlldyIsInFzX2RlYnVnIiwicG9pbnRlciIsIiRwYXJlbnQiLCJzY3JvbGxUb0l0ZW0iLCJwYXJhbSIsInZpZXciLCJERUZBVUxUIiwiYWN0aXZlTGlua0lkIiwiaXNTY3JvbGxpbmciLCJmdW5jIiwicG9wIiwidmlzaWJpbGl0eSIsIm9uY2UiLCJvYnNlcnZlQ2hhbmdlcyIsIm9uVG9wVmlzaWJsZSIsIm9uVG9wUGFzc2VkUmV2ZXJzZSIsInRyYW5zY2x1ZGUiLCJzaG93IiwidG9nZ2xlUGFuZSIsImV4dGVuZCIsInRvZ2dsZUFjY29yZGlvbiIsImNvbnRleHQiLCJyZXNpemVUaW1lciIsIlJlc2l6ZVN0aWNreSIsImEiLCJmaW5kIiwic3R5bGUiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJpbm5lckhlaWdodCIsImF1dG9FeHBhbmQiLCJmaWVsZCIsImNvbXB1dGVkIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcnNlSW50IiwiZ2V0UHJvcGVydHlWYWx1ZSIsInNjcm9sbEhlaWdodCIsImV2ZW50Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsT0FBTyxZQUFZQyxVQUFVLGFBQWMsV0FBWSxTQUFTQyxHQUV0RSxPQUNFQyxTQUFVLElBQ1ZDLEtBQU0sU0FBU0MsRUFBT0MsRUFBSUMsR0FDeEJMLEVBQVMsV0FHTCxHQUFJTSxHQUFTQyxJQUFJQyxLQUFLSixFQUFHSyxJQUFJLEdBQUdDLEdBRWhDSixHQUFPSyxTQUFTLHFCQUdoQkwsRUFBT00sYUFBYUMsZ0JBQWUsR0FDbkNQLEVBQU9NLGFBQWFFLFFBQVEsZUFFNUJSLEdBQU9NLGFBQWFHLEdBQUcsU0FBVSxTQUFTQyxHQUN4Q2IsRUFBTWMsT0FBTyxXQUNYZCxFQUFNZSxVQUFVQyxXQUFhYixFQUFPYyxlQUsxQ2pCLEVBQU1rQixJQUFJLFdBQVksV0FDcEJmLEVBQU9nQjtBQ3hCakJ6QixRQUFRQyxPQUFPLFlBQ2RDLFVBQVUsY0FBZSxXQUFZLFNBQVNDLEdBQzlDLE9BQ0NDLFNBQVUsSUFFVkUsT0FDQ29CLFdBQVcsSUFDWEMsZ0JBQWdCLEtBRWpCdEIsS0FBTSxTQUFTQyxFQUFPQyxFQUFJQyxHQUN6QixHQUFJb0IsR0FBY3JCLEVBQ2RzQixFQUFRLEtBRVJDLEVBQWUsU0FBU0MsR0FDM0JDLGFBQWFILEdBQ2JBLEVBQVFJLFdBQVcsV0FDbkJMLEVBQVlNLFlBQVksVUFDeEJELFdBQVcsV0FBV0UsT0FBT0MsT0FBTyxjQUFjQyxPQUFPLFlBQWEsS0FDdEVULEVBQVlVLEtBQUtDLE9BQVEsR0FBR0MsTUFBTSxHQUFJQyxXQUFZLE1BRy9DLEtBQ0hWLEVBQUlXLGtCQUNEWCxFQUFJWSxrQkFJSEMsRUFBVSxDQUNmekMsR0FBUyxXQUVUeUIsRUFBWWhCLElBQUksR0FBR2lDLGlCQUFpQixPQUFRLFNBQVNkLEdBQ3BELE1BQXFCLFdBQWxCZSxTQUFTQyxPQUNaaEIsRUFBSVcsa0JBQ0RYLEVBQUlZ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QUksV0FBWSxXQUVwQjZCLEVBQUVsQixRQUFRZ0UsSUFBSSxTQUFVaUMsR0FDeEIvRSxFQUFFbEIsUUFBUWdFLElBQUksU0FBVWlDLEdBQ3hCaEcsT0FBTzdCLEdBQUk4QixPQUFPO0FDOUM1QnJDLFFBQVFDLE9BQU8sWUFBWUMsVUFBVSxrQkFBbUIsV0FBWSxTQUFTQyxHQUUzRSxPQUNFQyxTQUFVLElBQ1ZDLEtBQU0sU0FBU0MsRUFBT0MsRUFBSUMsR0FDeEIsR0FBSW1JLEdBQWEsU0FBVUMsR0FHMUJBLEVBQU1MLE1BQU1DLE9BQVMsU0FHckIsSUFBSUssR0FBVzFHLE9BQU8yRyxpQkFBaUJGLEdBR25DSixFQUFTTyxTQUFTRixFQUFTRyxpQkFBaUIsb0JBQXFCLElBQ3RERCxTQUFTRixFQUFTRyxpQkFBaUIsZUFBZ0IsSUFDbkRKLEVBQU1LLGFBQ05GLFNBQVNGLEVBQVNHLGlCQUFpQixrQkFBbUIsSUFDdERELFNBQVNGLEVBQVNHLGlCQUFpQix1QkFBd0IsR0FFMUVKLEdBQU1MLE1BQU1DLE9BQVNBLEVBQVMsS0FJL0JySSxHQUFTLFdBQ1BrRCxFQUFFOUMsR0FBSStCLElBQUksYUFBYyxRQUN4QnFHLEVBQVd0RixFQUFFOUMsR0FBSUssSUFBSSxJQUNyQnlDLEVBQUU5QyxHQUFJVyxHQUFHLGVBQWdCLFNBQVVnSSxHQUNsQ1AsRUFBV3RGLEVBQUU5QyxHQUFJSyxJQUFJLFFBTXhCTixFQUFNa0IsSUFBSSxXQUFXIiwiZmlsZSI6ImRpcmVjdGl2ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKS5kaXJlY3RpdmUoJ2FjZUVkaXRvcicsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cblxuICAgICAgICAgIHZhciBlZGl0b3IgPSBhY2UuZWRpdChlbC5nZXQoMCkuaWQpO1xuXG4gICAgICAgICAgZWRpdG9yLnNldFRoZW1lKFwiYWNlL3RoZW1lL2VjbGlwc2VcIik7XG4gICAgICAgICAgLy9kYXduXG4gICAgICAgICAgLy9lY2xpcHNlXG4gICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXcmFwTW9kZSh0cnVlKTtcbiAgICAgICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoXCJhY2UvbW9kZS94bWxcIik7XG4gICAgICAgICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICAgICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBzY29wZS53b3Jrc3BhY2Uuc291cmNlQ29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9KTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBlZGl0b3IuZGVzdHJveSgpO1xuICAgICAgICB9KTtcblxuXG5cbiAgICB9KTtcbiAgfVxufVxuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdkcm9wRW5hYmxlJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJBXCIsXG5cdFx0Ly8gdHJhbnNjbHVkZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0b25kcm9wZmlsZTpcIiZcIixcblx0XHRcdGRhdGFUcmFuc2ZlckV2dDpcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcblx0XHRcdHZhciBmaWxlRHJvcHBlciA9IGVsO1xuXHRcdFx0dmFyIHRpbWVyID0gbnVsbDtcblx0XHRcdC8vcmVzZXRcblx0XHRcdHZhciBkcm9wcGVyUmVzZXQgPSBmdW5jdGlvbihldnQpe1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0ZmlsZURyb3BwZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7d2luZG93LmpRdWVyeSgnLnVpLnN0aWNreScpLnN0aWNreShcInJlZnJlc2hcIik7fSwxMDApO1xuXHRcdFx0XHRmaWxlRHJvcHBlci5jc3Moe2JvcmRlcjogXCJcIixjb2xvcjpcIlwiLCBiYWNrZ3JvdW5kOiBcIlwifSk7XG5cblx0XHRcdFx0XHQvLyBldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fSwgMTAwKTtcblx0XHRcdFx0ZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblxuXHRcdFx0ZmlsZURyb3BwZXIuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBmdW5jdGlvbihldnQpe1xuXHRcdFx0XHRpZihsb2NhdGlvbi5oYXNoICE9PSBcIiMvbWFpblwiKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHRcdFx0ZHJvcHBlclJlc2V0KGV2dCk7XG5cdFx0XHRcdFx0aWYobG9jYXRpb24uaGFzaCA9IFwiIy9tYWluXCIpe1xuXHRcdFx0XHRcdFx0c2NvcGUub25kcm9wZmlsZSh7XCJldnRcIjpldnR9KTtcblx0XHRcdFx0XHR9XG5cblxuXG5cdFx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdGZpbGVEcm9wcGVyLmdldCgwKS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgZHJvcHBlclJlc2V0LCBmYWxzZSk7XG5cdFx0XHRmaWxlRHJvcHBlci5nZXQoMCkuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZHJvcHBlclJlc2V0LCBmYWxzZSk7XG5cdFx0XHRmaWxlRHJvcHBlci5nZXQoMCkuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBmdW5jdGlvbihldnQpe1xuXG5cdFx0XHRcdC8vIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdFx0XHRpZihsb2NhdGlvbi5oYXNoICE9PSBcIiMvbWFpblwiKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGV2dC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5Jztcblx0XHRcdFx0ZmlsZURyb3BwZXIuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0XHRcdGZpbGVEcm9wcGVyLmNzcyh7Ym9yZGVyOiBcInNvbGlkIDNweCBibHVlXCIsIGNvbG9yOlwiYmx1ZVwiLCBiYWNrZ3JvdW5kOiBcImxpZ2h0Ymx1ZVwifSk7XG5cdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXG5cdFx0XHRcdFx0Ly8gZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0sIDEwMCk7XG5cblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0sIGZhbHNlKTtcblxuXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0fTtcblx0fV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJykuZGlyZWN0aXZlKCd1aURyb3Bkb3duJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBzY29wZToge2Ryb3Bkb3duQWN0aW9uOiBcIkBcIn0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBhdHRyID0geyBhY3Rpb246IFwiaGlkZVwifTtcbiAgICAgICAgaWYoc2NvcGUuZHJvcGRvd25BY3Rpb24pIGF0dHIuYWN0aW9uID0gc2NvcGUuZHJvcGRvd25BY3Rpb247XG4gICAgICAgICQoZWwpLmRyb3Bkb3duKGF0dHIpO1xuICAgICAgfSk7XG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JyxmdW5jdGlvbigpe1xuICAgICAgICAkKGVsKS5kcm9wZG93bihcImRlc3Ryb3lcIik7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ2dhRXZlbnQnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkFcIixcblx0XHRzY29wZToge1xuXHRcdFx0Z2FFdmVudDpcIkBcIlxuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcblxuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIHJlcG9ydEV2ZW50ID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHR2YXIgYXJncyA9IFtcInNlbmRcIixcImV2ZW50XCJdLCBuZXdBcmdzID0gc2NvcGUuZ2FFdmVudC5zcGxpdCgvXFwsfFxcfC8pO1xuXHRcdFx0XHRcdGZvcih2YXIgaSA9MDsgaTxuZXdBcmdzLmxlbmd0aDtpKyspe1xuXHRcdFx0XHRcdFx0YXJncy5wdXNoKG5ld0FyZ3NbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aW5kb3cuZ2EuYXBwbHkobnVsbCwgYXJncyk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsLm9uKCdjbGljaycsIHJlcG9ydEV2ZW50KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRlbC5vbignb2ZmJyxyZXBvcnRFdmVudCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdodG1sVmlld2VyJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGU6ICc8ZGl2PjxvbCBzdGFydD1cInt7aXRlbS5saW5lfX1cIj48bGkgbmctcmVwZWF0PVwibG4gaW4gY29kZShpdGVtKSB0cmFjayBieSAkaW5kZXhcIiBuZy1iaW5kLWh0bWw9XCJsblwiPjwvbGk+PC9vbD48L2Rpdj4nLFxuICAgIHNjb3BlOiB7aXRlbTogXCI9XCJ9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICBzY29wZS5jb2RlID0gZnVuY3Rpb24oYyl7XG4gICAgICAgIHZhciBiID0gKGMuZGlzcGxheUZvcm1hdHRlZFVSTCgpKS5zcGxpdCgvXFw8YnJcXD58XFxuL2cpO1xuICAgICAgICByZXR1cm4gYjtcbiAgICAgIH07XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuXG5cbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnbWVzc2FnZUNlbnRlcicsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY2VudGVyXCI+PGRpdiBjbGFzcz1cInVpIHRpbnkgc2Vjb25kYXJ5IG1lbnVcIj5cXFxuICAgIDxkaXYgY2xhc3M9XCJpdGVtIG1udS10aXRsZVwiIHN0eWxlPVwicGFkZGluZy1sZWZ0OjA7XCI+e3toZWFkaW5nID09PSB1bmRlZmluZWQgPyBcIk1FU1NBR0VTOlwiIDogaGVhZGluZyB9fTwvZGl2PlxcXG4gICAgPGEgY2xhc3M9XCJpdGVtXCIgbmctY2xpY2s9XCJJbnRlbGxpZ2VuY2VDZW50ZXIuc2V0VHlwZShcXCdcXCcpXCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBJbnRlbGxpZ2VuY2VDZW50ZXIuc2VhcmNoLnR5cGU9PVxcJ1xcJ31cIiBuZy1zaG93PVwiSW50ZWxsaWdlbmNlQ2VudGVyLmNhblZpZXdBbGwoKVwiPkFsbCA8c3BhbiBjbGFzcz1cInVpIHRpbnkgbGFiZWxcIj57e2Vycm9ycy5tZXNzYWdlcy5sZW5ndGh9fTwvc3Bhbj48L2E+XFxcbiAgICA8YSBjbGFzcz1cIml0ZW1cIiBuZy1yZXBlYXQ9XCIodGFiLHZhbCkgaW4gZXJyb3JzLnRhYnMgdHJhY2sgYnkgJGluZGV4XCIgbmctc2hvdz1cImVycm9ycy5jb3VudFt0YWJdXCIgbmctY2xpY2s9XCJJbnRlbGxpZ2VuY2VDZW50ZXIuc2V0VHlwZSh2YWwpXCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBJbnRlbGxpZ2VuY2VDZW50ZXIuc2VhcmNoLnR5cGU9PXZhbH1cIj57e3RhYiB8IHVuY2FtZWxpemV9fSA8c3BhbiBjbGFzcz1cInVpIHRpbnkgbGFiZWxcIj57e2Vycm9ycy5jb3VudFt0YWJdfX08L3NwYW4+PC9hPlxcXG4gICAgPC9kaXY+XFxcbiAgICA8ZGl2IGlkPVwiZXJyb3ItbWVzc2FnZXMtbGlzdFwiIGNsYXNzPVwidWkgbWlkZGxlIGFsaWduZWQgZGl2aWRlZCBsaXN0XCI+XFxcbiAgICAgIDxtZXNzYWdlLWl0ZW0gaXRlbT1cIml0ZW1cIiBjbGFzcz1cIml0ZW1cIiBuZy1yZXBlYXQ9XCJvYmogaW4gZXJyb3JzLm1lc3NhZ2VzIHwgZmlsdGVyOiBJbnRlbGxpZ2VuY2VDZW50ZXIuc2VhcmNoXCIgZXJyb3I9XCJvYmpcIj48L21lc3NhZ2UtaXRlbT5cXFxuICAgICAgPC9kaXY+XFxcbiAgICAgIDxkaXYgYWxpZ249XCJjZW50ZXJcIiBzdHlsZT1cIm1hcmdpbi10b3A6IC0xLjVlbTsgcGFkZGluZy1ib3R0b206IDEuNWVtO1wiIG5nLXNob3c9XCJJbnRlbGxpZ2VuY2VDZW50ZXIuc2VhcmNoLnR5cGUhPT1cXCdcXCcgJiYgSW50ZWxsaWdlbmNlQ2VudGVyLmNhblZpZXdBbGwoKVwiPlxcXG4gICAgICA8YnV0dG9uIGNsYXNzPVwidWkgdGlueSBiYXNpYyBidXR0b25cIiBuZy1jbGljaz1cIkludGVsbGlnZW5jZUNlbnRlci5zZXRUeXBlKFxcJ1xcJylcIj48aSBjbGFzcz1cIm1pbnVzIHNxdWFyZSBpY29uXCI+PC9pPiBSZW1vdmUgZmlsdGVyPC9idXR0b24+PC9kaXY+XFxcbiAgICA8L2Rpdj4nLFxuICAgIHNjb3BlOiB7XG4gICAgICBlcnJvcnM6XCI9XCIsXG4gICAgICBoZWFkaW5nOlwiQFwiLFxuICAgICAgaXRlbTpcIj1cIlxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgc2NvcGUuSW50ZWxsaWdlbmNlQ2VudGVyID0gbmV3IEVNTE1ha2VySW50ZWxsaWdlbmNlLkludGVsbGlnZW5jZUNlbnRlcihzY29wZS5lcnJvcnMsIHNjb3BlKTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ21lc3NhZ2VJdGVtJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IG5nLWNsYXNzPVwibWVzc2FnZUNsc1wiIGNsYXNzPVwiaW50ZWwtbXNnXCI+XFxcbiAgICA8ZGl2IGNsYXNzPVwicmlnaHQgZmxvYXRlZCBjb250ZW50XCIgbmctaWY9XCJlcnJvci5jdGFMYWJlbCE9PVxcJ1xcJ1wiID5cXFxuICAgIDxkaXYgY2xhc3M9XCJ1aSBzbWFsbCBjb21wYWN0XCIgXFxcbiAgICBuZy1jbGFzcz1cImJ1dHRvbkNsc1wiIG5nLWlmPVwiYnV0dG9uQ2xzXCIgXFxcbiAgICBcXCBuZy1jbGljaz1cImVycm9yLmN0YUhhbmRsZXIoaXRlbSlcIiBcXFxuICAgICBuZy1iaW5kLWh0bWw9XCJlcnJvci5jdGFMYWJlbFwiPnt7ZXJyb3IuY3RhTGFiZWwgPyBlcnJvci5jdGFMYWJlbCA6IFwiUmVzb2x2ZVwifX08L2Rpdj5cXFxuICAgIDwvZGl2PlxcXG4gICAgPGRpdiBjbGFzcz1cInJpZ2h0IGZsb2F0ZWQgY29udGVudFwiIG5nLWlmPVwiZXJyb3IuY2xlYW5UeXBlPT1cXCdRQVxcJ1wiID5cXFxuICAgIDxzcGFuIGNsYXNzPVwidWkgaWNvbiBsYWJlbFwiIG5nLXNob3c9XCJlcnJvci5jbGVhblR5cGU9PVxcJ1FBXFwnJiZlcnJvci5vdmVycmlkZVwiPjxpIGNsYXNzPVwidGh1bWJzIHVwIGljb25cIj48L2k+IFlPVSBDT05GSVJNRUQ8L3NwYW4+XFxcbiAgICA8ZGl2IGNsYXNzPVwidWkgc21hbGwgY29tcGFjdFwiIFxcXG4gICAgbmctY2xhc3M9XCJidXR0b25DbHNcIiBuZy1pZj1cImJ1dHRvbkNsc1wiIG5nLWhpZGU9XCJlcnJvci5vdmVycmlkZVwiIFxcXG4gICAgXFwgbmctY2xpY2s9XCJlcnJvci5zZXRPdmVycmlkZVN0YXR1cyh0cnVlKTtlcnJvci5jdGFIYW5kbGVyKClcIj48aSBjbGFzcz1cImNoZWNrIGljb25cIj48L2k+IENvbmZpcm08L2Rpdj5cXFxuICAgIDwvZGl2PlxcXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiIG5nLXNob3c9XCJidXR0b25DbHNcIj4gXFxcbiAgICAgICAgPGg0IG5nLWJpbmQtaHRtbD1cImVycm9yLnRpdGxlIHwgZGV3aWRvd1wiPjwvaDQ+XFxcbiAgICAgICAgPGRpdiBuZy1iaW5kLWh0bWw9XCJlcnJvci5kZXNjcmlwdGlvblwiPjwvZGl2PjwvZGl2PlxcXG4gICAgICAgIDxkaXYgbmctaWY9XCJlcnJvci5zdWdnZXN0aW9uLmxlbmd0aD4wXCIgbmctaGlkZT1cImVycm9yLm92ZXJyaWRlXCIgY2xhc3M9XCJzdWdnZXN0aW9uXCI+U1VHR0VTVElPTjogPGRpdiBuZy1iaW5kLWh0bWw9XCJlcnJvci5zdWdnZXN0aW9uXCI+PC9kaXY+PC9kaXY+XFxcbiAgICAgICAgPGRpdiBuZy1pZj1cImVycm9yLnJlc291cmNlIT09XFwnXFwnXCI+PGEgbmctaHJlZj1cInt7ZXJyb3IucmVzb3VyY2V9fVwiIHRhcmdldD1cIl9ibGFua1wiPnt7ZXJyb3IucmVzb3VyY2VUZXh0fX0gPGkgY2xhc3M9XCJleHRlcm5hbCBhbHRlcm5hdGUgaWNvblwiPjwvaT48L2E+PC9kaXY+XFxcbiAgICA8L2Rpdj4nLFxuICAgIHNjb3BlOiB7ZXJyb3I6IFwiPVwiLCBpdGVtOlwiPVwifSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGNscyA9IFtcIlwiLCBcInJlZFwiLCBcIm9yYW5nZVwiLCBcInZpb2xldFwiLCBcInRlYWxcIiwgXCJibHVlXCJdO1xuXG5cbiAgICAgICAgLy8gZW51bSBFcnJvclR5cGUge1xuICAgICAgICAvLyAgIEZpeD0xLFxuICAgICAgICAvLyAgIFdhcm4sXG4gICAgICAgIC8vICAgU3VnZ2VzdGlvbixcbiAgICAgICAgLy8gICBRQSxcbiAgICAgICAgLy8gICBCZXN0UHJhY3RpY2VcbiAgICAgICAgLy8gfVxuXG5cbiAgICAgICAgLy8gXCJcIixcbiAgICAgICAgLy8gXCJyZWRcIixcbiAgICAgICAgLy8gXCJvcmFuZ2VcIixcbiAgICAgICAgLy8gXCJ2aW9sZXRcIixcbiAgICAgICAgLy8gXCJ5ZWxsb3dcIixcbiAgICAgICAgLy8gXCJcIlxuXG4gICAgICAgIHNjb3BlLmJ1dHRvbkNscyA9IFtjbHNbc2NvcGUuZXJyb3Iuc2V2ZXJpdHldLFwiYnV0dG9uXCJdLmpvaW4oXCIgXCIpO1xuICAgICAgICBpZihzY29wZS5lcnJvci5jbGVhblR5cGU9PVwiUUFcIiAmJiBzY29wZS5lcnJvci5vdmVycmlkZSkge1xuICAgICAgICAgIHNjb3BlLm1lc3NhZ2VDbHMgPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjb3BlLm1lc3NhZ2VDbHMgPSBbXCJ0eXBlLVwiLHNjb3BlLmVycm9yLnR5cGUsXCIgbGV2ZWwtXCIsc2NvcGUuZXJyb3Iuc2V2ZXJpdHldLmpvaW4oXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ21lc3NhZ2VzTm90aWZ5JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwidWkgZmx1aWQgbGFiZWxlZCBidXR0b25cIiBuZy1jbGljaz1cIm5nQ2xpY2soKVwiIG5nLWNsYXNzPVwie1xcJ2FuaW1hdGUtdGFkYVxcJzogZG9BbmltYXRpb259XCI+XFxcbiAgICAgIDxkaXYgY2xhc3M9XCJ1aSBmbHVpZCBidXR0b25cIiBuZy1jbGFzcz1cIntcXCd5ZWxsb3dcXCc6ZG9BbmltYXRpb24sIFxcJ3JlZFxcJzogIXdvcmtzcGFjZS5pbnRlbGxpZ2VuY2UuY2FuQ29udGludWV9XCI+XFxcbiAgICAgICAgPGkgY2xhc3M9XCJ3YXJuaW5nIGljb25cIiBhbHQ9XCJbIV1cIiBuZy1zaG93PVwiIXdvcmtzcGFjZS5pbnRlbGxpZ2VuY2UuY2FuQ29udGludWVcIj48L2k+XFxcbiAgICAgICAgPGkgY2xhc3M9XCJpbmZvIGljb25cIiBhbHQ9XCIoaSlcIiBuZy1zaG93PVwid29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZVwiPjwvaT5cXFxuICAgICAgICB7eyBjb3VudD4xID8gXCJNZXNzYWdlc1wiIDogXCJNZXNzYWdlXCJ9fVxcXG4gICAgICAgIDwvZGl2PlxcXG4gICAgICA8ZGl2IGNsYXNzPVwidWkgbGFiZWxcIiBuZy1jbGFzcz1cIntcXCd5ZWxsb3dcXCc6ZG9BbmltYXRpb24sIFxcJ3JlZFxcJzogIXdvcmtzcGFjZS5pbnRlbGxpZ2VuY2UuY2FuQ29udGludWV9XCI+XFxcbiAgICAgICAge3tjb3VudH19XFxcbiAgICAgICAgPC9kaXY+XFxcbiAgICAgIDwvZGl2PlxcXG4gICAgICA8L2Rpdj4nLFxuICAgIHNjb3BlOiB7XG4gICAgICB3b3Jrc3BhY2U6IFwiPVwiLFxuICAgICAgbmdDbGljazogXCImXCIsXG4gICAgICBjb3VudDogXCI9XCJcbiAgICB9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICBzY29wZS5kb0FuaW1hdGlvbiA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgIHNjb3BlLmRvQW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMTUwMCk7XG4gICAgICBzY29wZS4kd2F0Y2goXCJjb3VudFwiLCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUsIHNjb3BlKXtcbiAgICAgICAgaWYobmV3VmFsdWUgPiBvbGRWYWx1ZSkge1xuXG4gICAgICAgICAgICBzY29wZS5kb0FuaW1hdGlvbiA9IHRydWU7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVQREFURURcIik7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHNjb3BlLmRvQW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIH0sMTUwMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2NvcGUuZG9BbmltYXRpb24gPSBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMjAwMCk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8galF1ZXJ5KGVsKS5wb3B1cChcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCduZ0NoYW5nZUxhenknLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkFcIixcblx0XHQvLyB0cmFuc2NsdWRlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRuZ01vZGVsOlwiPVwiLFxuXHRcdFx0bmdDaGFuZ2VMYXp5OlwiJlwiLFxuXHRcdFx0Y2hhbmdlTGF6eUJ1ZmZlcjpcIj1cIixcblx0XHRcdGRhdGFUcmFuc2ZlckV2dDpcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcblx0XHRcdHZhciB0aW1lciA9IG51bGw7XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgbGFzdFZhbHVlID0gc2NvcGUubmdNb2RlbC50b1N0cmluZygpO1xuXHRcdFx0XHRlbC5vbigna2V5dXAnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0aWYobGFzdFZhbHVlICE9PSBlbFswXS52YWx1ZSl7XG5cdFx0XHRcdFx0XHRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHRzY29wZS5uZ0NoYW5nZUxhenkoKTtcblx0XHRcdFx0XHRcdFx0XHRsYXN0VmFsdWUgPSBlbFswXS52YWx1ZTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGF0dHIuY2hhbmdlTGF6eUJ1ZmZlcj09PSB1bmRlZmluZWQgPyA1MDAgOiBhdHRyLmNoYW5nZUxhenlCdWZmZXIqMSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRlbC5vZmYoJ2tleXVwJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdH1cblx0XHR9O1xuXHR9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnb25SZXR1cm5QcmVzcycsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiQVwiLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRvblJldHVyblByZXNzOlwiJlwiLFxuXHRcdFx0ZGF0YVRyYW5zZmVyRXZ0OlwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuXG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRlbC5vbigna2V5cHJlc3MnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0XHRpZihlLmtleUNvZGU9PTEzKXtcblx0XHRcdFx0XHRcdHNjb3BlLm9uUmV0dXJuUHJlc3MoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGVsLm9mZigna2V5cHJlc3MnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpLmRpcmVjdGl2ZSgndWlQb3B1cCcsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgc2NvcGU6IHtwb3B1cElkOlwiQFwiLHBvcHVwQmVoYXZpb3I6XCJAXCJ9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICBob3ZlcmFibGU6IHRydWUsXG4gICAgICAgICAgcG9wdXA6IFwiI1wiICsgYXR0ci5wb3B1cElkXG4gICAgICAgIH07XG4gICAgICAgIChmdW5jdGlvbigkLCBzY29wZSwgYXR0cil7XG4gICAgICAgICAgaWYoYXR0ci5wb3B1cEJlaGF2aW9yICE9PSB1bmRlZmluZWQgKSBhcmdzLm9uID0gXCJjbGlja1wiO1xuICAgICAgICAgIGlmKGF0dHIucG9wdXBJZCAhPT0gdW5kZWZpbmVkICkgYXJncy5wb3B1cCA9IFwiI1wiICsgYXR0ci5wb3B1cElkO1xuICAgICAgICAgICQoZWwpLnBvcHVwKGFyZ3MpO1xuICAgICAgICAgIGlmKGF0dHIucG9wdXBTaG93ICE9PSB1bmRlZmluZWQgKSAkKGVsKS5wb3B1cChcInNob3dcIik7XG4gICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKGVsKS5wb3B1cChcImRlc3Ryb3lcIik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSkoalF1ZXJ5LCBzY29wZSwgYXR0cilcblxuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdxdWVyeVN0cmluZ0VkaXRvcicsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInF1ZXJ5LXN0cmluZy1lZGl0b3Igd2VsbC1jb21wb25lbnRcIiBuZy1oaWRlPVwiaXRlbS5pc0xpbmtUeXBlKFxcJ21haWx0b1xcJylcIj48ZGl2IHN0eWxlPVwib3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmctYm90dG9tOi41ZW07XCI+PHN0cm9uZz5RVUVSWSBTVFJJTkcgRURJVE9SPC9zdHJvbmc+XFxcbiAgICA8ZGl2IGNsYXNzPVwidWkgdGlueSBiYXNpYyBidXR0b25zXCIgc3R5bGU9XCJmbG9hdDpyaWdodDtcIj5cXFxuICA8YnV0dG9uIGNsYXNzPVwidWkgaWNvbiBidXR0b25cIiBuZy1jbGljaz1cIml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBbGwoKTtpdGVtLmlzTGlua0NvbXBsZXRlKCk7c2Nyb2xsVG9JdGVtKGl0ZW0uaWQpO1wiPlJlbW92ZSBhbGw8L2J1dHRvbj5cXFxuICA8YnV0dG9uIGNsYXNzPVwidWkgaWNvbiBidXR0b25cIiBuZy1jbGljaz1cInZpZXcgPT0gMSA/IHZpZXc9MCA6IHZpZXc9MVwiPnt7dmlldz09MT8gXCJDbG9zZVwiIDogXCJFZGl0XCJ9fTwvYnV0dG9uPlxcXG48L2Rpdj48L2Rpdj5cXFxuICAgICA8ZGl2IG5nLWlmPVwiaXRlbS5uZXcuc2VhcmNoUGFyYW1zLl9lbnRyaWVzLmxlbmd0aD09MSYmaXRlbS5uZXcuc2VhcmNoUGFyYW1zLl9lbnRyaWVzWzBdLmxlbmd0aD09MFwiPlF1ZXJ5IHN0cmluZ3Mgd2lsbCBhcHBlYXIgaGVyZS48L2Rpdj5cXFxuICAgICAgPGRpdiBuZy1zaG93PVwidmlldz09MVwiPlxcXG4gICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTouNWVtO1wiIGNsYXNzPVwidWkgYWN0aW9uIGlucHV0XCIgbmctaWY9XCJzdHIubGVuZ3RoPjBcIiBuZy1yZXBlYXQ9XCJzdHIgaW4gaXRlbS5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXMgdHJhY2sgYnkgJGluZGV4XCI+XFxcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLWtleXVwPVwiaXRlbS5uZXcuc2VhcmNoUGFyYW1zLnVwZGF0ZVNlYXJjaFByb3AoKTtpdGVtLmlzTGlua0NvbXBsZXRlKClcIiBuZy1tb2RlbD1cIml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5fZW50cmllc1skaW5kZXhdXCIvPlxcXG4gICAgICA8YnV0dG9uIGNsYXNzPVwidWkgaWNvbiBidXR0b25cIiBuZy1jbGljaz1cIml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5kZWxldGVBdEluZGV4KCRpbmRleClcIj5cXFxuICAgICAgUmVtb3ZlPC9idXR0b24+PC9kaXY+XFxcbiAgICAgIDwvZGl2PlxcXG4gICAgICA8ZGl2IG5nLXNob3c9XCJ2aWV3PT0wXCI+XFxcbiAgICAgIDx1bCBjbGFzcz1cInRhZ3MtbGF5b3V0XCI+XFxcbiAgICAgICA8bGkgbmctaWY9XCJzdHIubGVuZ3RoPjBcIiBuZy1yZXBlYXQ9XCJzdHIgaW4gaXRlbS5uZXcuc2VhcmNoUGFyYW1zLmVudHJpZXMgdHJhY2sgYnkgJGluZGV4XCI+XFxcbiAgICAgICB7e3N0cn19IDxhIGhyZWY9XCJqYXZhc2NyaXB0OmFuZ3VsYXIubm9vcCgpXCIgbmctY2xpY2s9XCJpdGVtLm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlQXRJbmRleCgkaW5kZXgpO2l0ZW0uaXNMaW5rQ29tcGxldGUoKVwiPlxcXG4gICAgICAgPGkgY2xhc3M9XCJjbG9zZSBpY29uXCIgYWx0PVwiW1hdXCI+PC9pPjwvYT48L2xpPjwvdWw+XFxcbiAgICAgICA8L2Rpdj5cXFxuICAgICAgPC9kaXY+JyxcbiAgICBzY29wZToge2l0ZW06XCI9XCIsIHNjcm9sbFRvOlwiJlwifSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIFZpZXcgPSAoZnVuY3Rpb24oVmlldyl7XG4gICAgICAgICAgVmlld1tWaWV3W1wiREVGQVVMVFwiXT0wXSA9IFwiREVGQVVMVFwiO1xuICAgICAgICAgIFZpZXdbVmlld1tcIkVESVRcIl09MV0gPSBcIkVESVRcIjtcbiAgICAgICAgICByZXR1cm4gVmlldztcbiAgICAgICAgfSkoe30pO1xuICAgICAgICB3aW5kb3cucXNfZGVidWcgPSBzY29wZTtcbiAgICAgICAgdmFyIHBvaW50ZXIgPSBzY29wZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHBvaW50ZXIgPSBwb2ludGVyLiRwYXJlbnQ7XG4gICAgICAgIH0gd2hpbGUgKHBvaW50ZXIuc2Nyb2xsVG8gPT09IHVuZGVmaW5lZCk7XG5cbiAgICAgICAgc2NvcGUuc2Nyb2xsVG9JdGVtID0gZnVuY3Rpb24ocGFyYW0pe1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBwb2ludGVyLnNjcm9sbFRvKHBhcmFtLTEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSw1MCk7XG5cblxuICAgICAgICB9XG4gICAgICAgIHNjb3BlLnZpZXcgPSBWaWV3LkRFRkFVTFQ7XG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vIGpRdWVyeShlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKS5kaXJlY3RpdmUoJ3Njcm9sbHNweScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHNjb3BlLmFjdGl2ZUxpbmtJZCA9PT0gdW5kZWZpbmVkKSBzY29wZS5hY3RpdmVMaW5rSWQgPSAxO1xuICAgICAgICBpZihzY29wZS5pc1Njcm9sbGluZyA9PT0gdW5kZWZpbmVkKSBzY29wZS5pc1Njcm9sbGluZyA9IGZhbHNlO1xuXG5cbiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgIGlmKHNjb3BlLmlzU2Nyb2xsaW5nICYmIHNjb3BlLmlzU2Nyb2xsaW5nID09MSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIHZhciBpZCA9IGpRdWVyeShlbCkuYXR0cihcImlkXCIpLnNwbGl0KFwiLVwiKS5wb3AoKTtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNjb3BlLmFjdGl2ZUxpbmtJZCA9aWQqMTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuICAgICAgICBqUXVlcnkoZWwpLnZpc2liaWxpdHkoe1xuICAgICAgICAgICAgb25jZTogZmFsc2UsXG4gICAgICAgICAgICAvLyB1cGRhdGUgc2l6ZSB3aGVuIG5ldyBjb250ZW50IGxvYWRzXG4gICAgICAgICAgICBvYnNlcnZlQ2hhbmdlczogdHJ1ZSxcbiAgICAgICAgICAgIC8vIGxvYWQgY29udGVudCBvbiBib3R0b20gZWRnZSB2aXNpYmxlXG4gICAgICAgICAgICBvblRvcFZpc2libGU6IGZ1bmMsXG4gICAgICAgICAgICBvblRvcFBhc3NlZFJldmVyc2U6IGZ1bmNcblxuXG4gICAgICAgICAgfSk7XG5cblxuXG5cblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyQoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICBqUXVlcnkoZWwpLnZpc2liaWxpdHkoXCJkZXN0cm95XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnc2ltcGxlQWNjb3JkaW9uJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJFXCIsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICBzY29wZTp7aGVhZGluZzpcIkBcIixzaG93OiBcIj1cIn0sXG4gICAgdGVtcGxhdGU6ICc8ZGl2IG5nLWNsYXNzPVwie2V4cGFuZGVkOiBzaG93LCBjb2xsYXBzZWQ6ICFzaG93fVwiPjxkaXYgbmctY2xpY2s9XCJ0b2dnbGVQYW5lKClcIiBjbGFzcz1cImFjY29yZGlvbi10aXRsZVwiPlxcXG4gICAgPGkgY2xhc3M9XCJjaGV2cm9uIHJpZ2h0IGljb25cIiBuZy1zaG93PVwiIXNob3dcIiBhbHQ9XCJbK11cIj48L2k+XFxcbiAgICA8aSBjbGFzcz1cImNoZXZyb24gZG93biBpY29uXCIgbmctc2hvdz1cInNob3dcIiBhbHQ9XCJbLV1cIj48L2k+XFxcbiAgICAgPHNwYW4+e3toZWFkaW5nfX08L3NwYW4+PC9kaXY+PG5nLXRyYW5zY2x1ZGUgbmctc2hvdz1cInNob3dcIj48L25nLXRyYW5zY2x1ZGU+PC9kaXY+JyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgc2NvcGUuc2hvdyA9IGZhbHNlO1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgc2NvcGUudG9nZ2xlUGFuZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2NvcGUuc2hvdyA9ICFzY29wZS5zaG93O1xuICAgICAgICB9O1xuICAgICAgICBqUXVlcnkuZXh0ZW5kKGpRdWVyeShlbCkse1widG9nZ2xlQWNjb3JkaW9uXCI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzY29wZS50b2dnbGVQYW5lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH19KTtcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8galF1ZXJ5KGVsKS5wb3B1cChcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJykuZGlyZWN0aXZlKCdzdGlja3knLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBqUXVlcnkoZWwpXG4gIC5zdGlja3koe1xuICAgIGNvbnRleHQ6ICcjc3RpY2t5cGFyZW50J1xuICB9KVxuO1xuXG4gIHZhciByZXNpemVUaW1lciA9IG51bGw7XG5cbiAgdmFyIFJlc2l6ZVN0aWNreSA9IGZ1bmN0aW9uKCl7XG4gICAgcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgYSA9ICQoJyNyaWdodC1wYW5lbCcpO1xuICAgICAgdmFyIGIgPSBhLmZpbmQoJy51aS5zZWNvbmRhcnkudmVydGljYWwucG9pbnRpbmcubWVudScpO1xuICAgICAgdmFyIGMgPSBhLmZpbmQoJy5tZXNzYWdlLWFyZWEnKTtcbiAgICAgIGFbMF0uc3R5bGUuaGVpZ2h0ID0gXCJcIjtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGEuaGVpZ2h0KCksd2luZG93LmlubmVySGVpZ2h0LDIwMCk7XG4gICAgICBpZihhWzBdLmNsaWVudEhlaWdodCA+ICh3aW5kb3cuaW5uZXJIZWlnaHQgLSAoNzUrNjApKSApe1xuICAgICAgICBhWzBdLnN0eWxlLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtICg3NSs3NSkgKyBcInB4XCI7XG4gICAgICAgIGJbMF0uc3R5bGUuaGVpZ2h0ID0gYVswXS5jbGllbnRIZWlnaHQgLSBjWzBdLmNsaWVudEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgYi5hZGRDbGFzcygnc2Nyb2xsaW5nJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0b28gYmlnJyk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGIucmVtb3ZlQ2xhc3MoJ3Njcm9sbGluZycpO1xuICAgICAgfVxuICAgICAgalF1ZXJ5KGVsKS5zdGlja3koXCJyZWZyZXNoXCIpO1xuXG4gICAgfSwzMDApO1xuXG4gIH07XG5cblxuICAgICQod2luZG93KS5vbigncmVzaXplJywgUmVzaXplU3RpY2t5KTtcbiAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIFJlc2l6ZVN0aWNreSk7XG5cbiAgICBSZXNpemVTdGlja3koKTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyQoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUnLCBSZXNpemVTdGlja3kpO1xuICAgICAgICAgICQod2luZG93KS5vZmYoJ3Njcm9sbCcsIFJlc2l6ZVN0aWNreSk7XG4gICAgICAgICAgalF1ZXJ5KGVsKS5zdGlja3koXCJkZXN0cm95XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKS5kaXJlY3RpdmUoJ3RleHRhcmVhRXhwYW5kJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgdmFyIGF1dG9FeHBhbmQgPSBmdW5jdGlvbiAoZmllbGQpIHtcblxuICAgICAgXHQvLyBSZXNldCBmaWVsZCBoZWlnaHRcbiAgICAgIFx0ZmllbGQuc3R5bGUuaGVpZ2h0ID0gJ2luaGVyaXQnO1xuXG4gICAgICBcdC8vIEdldCB0aGUgY29tcHV0ZWQgc3R5bGVzIGZvciB0aGUgZWxlbWVudFxuICAgICAgXHR2YXIgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShmaWVsZCk7XG5cbiAgICAgIFx0Ly8gQ2FsY3VsYXRlIHRoZSBoZWlnaHRcbiAgICAgIFx0dmFyIGhlaWdodCA9IHBhcnNlSW50KGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci10b3Atd2lkdGgnKSwgMTApXG4gICAgICBcdCAgICAgICAgICAgICArIHBhcnNlSW50KGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJyksIDEwKVxuICAgICAgXHQgICAgICAgICAgICAgKyBmaWVsZC5zY3JvbGxIZWlnaHRcbiAgICAgIFx0ICAgICAgICAgICAgICsgcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1ib3R0b20nKSwgMTApXG4gICAgICBcdCAgICAgICAgICAgICArIHBhcnNlSW50KGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1ib3R0b20td2lkdGgnKSwgMTApO1xuXG4gICAgICBcdGZpZWxkLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG5cbiAgICAgIH07XG5cbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICQoZWwpLmNzcyhcIm1pbi1oZWlnaHRcIiwgXCIyNXB4XCIpO1xuICAgICAgICBhdXRvRXhwYW5kKCQoZWwpLmdldCgwKSk7XG4gICAgICAgICQoZWwpLm9uKCdpbnB1dCBjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgXHRhdXRvRXhwYW5kKCQoZWwpLmdldCgwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cblxuXG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JyxmdW5jdGlvbigpe1xuICAgICAgICAvLyAkKGVsKS5kcm9wZG93bihcImRlc3Ryb3lcIik7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
