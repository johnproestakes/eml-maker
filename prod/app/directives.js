angular.module("EMLMaker").directive("aceEditor",["$timeout",function(e){return{restrict:"A",link:function(t,o,n){e(function(){var e=ace.edit(o.get(0).id);e.setTheme("ace/theme/eclipse"),e.getSession().setUseWrapMode(!0),e.getSession().setMode("ace/mode/xml");e.getSession().on("change",function(o){t.$apply(function(){t.workspace.sourceCode=e.getValue()})}),t.$on("$destroy",function(){e.destroy()})})}}}]);
angular.module("EMLMaker").directive("dropEnable",["$timeout",function(e){return{restrict:"A",scope:{ondropfile:"&",dataTransferEvt:"="},link:function(t,n,o){var r=n,a=null,i=function(e){clearTimeout(a),a=setTimeout(function(){r.removeClass("active"),setTimeout(function(){window.jQuery(".ui.sticky").sticky("refresh")},100),r.css({border:"",color:"",background:""})},100),e.stopPropagation(),e.preventDefault()},d=0;e(function(){r.get(0).addEventListener("drop",function(e){return"#/main"===location.hash&&(e.stopPropagation(),e.preventDefault(),d++,i(e),void((location.hash="#/main")&&t.ondropfile({evt:e})))},!1),r.get(0).addEventListener("dragend",i,!1),r.get(0).addEventListener("dragleave",i,!1),r.get(0).addEventListener("dragover",function(e){return clearTimeout(a),"#/main"===location.hash&&(e.dataTransfer.dropEffect="copy",r.addClass("active"),r.css({border:"solid 3px blue",color:"blue",background:"lightblue"}),a=setTimeout(function(){},100),void e.preventDefault())},!1)})}}}]);
angular.module("EMLMaker").directive("uiDropdown",["$timeout",function(o){return{restrict:"A",scope:{dropdownAction:"@"},link:function(n,t,d){o(function(){var o={action:"hide"};n.dropdownAction&&(o.action=n.dropdownAction),$(t).dropdown(o)}),n.$on("$destroy",function(){$(t).dropdown("destroy")})}}}]);
angular.module("EMLMaker").directive("gaEvent",["$timeout",function(n){return{restrict:"A",scope:{gaEvent:"@"},link:function(t,e,o){n(function(){var n=function(){for(var n=["send","event"],e=t.gaEvent.split(/\,|\|/),o=0;o<e.length;o++)n.push(e[o]);window.ga.apply(null,n)};e.on("click",n)}),t.$on("$destroy",function(){e.on("off",reportEvent)})}}}]);
angular.module("EMLMaker").directive("htmlViewer",["$timeout",function(t){return{restrict:"E",template:'<div><ol start="{{item.line}}"><li ng-repeat="ln in code(item) track by $index" ng-bind-html="ln"></li></ol></div>',scope:{item:"="},link:function(e,i,n){e.code=function(t){var e=t.displayFormattedURL().split(/\<br\>|\n/g);return e},t(function(){})}}}]);
angular.module("EMLMaker").directive("messageCenter",["$timeout",function(e){return{restrict:"E",template:'<div class="message-center"><div class="ui tiny secondary menu">    <div class="item mnu-title" style="padding-left:0;">{{heading === undefined ? "MESSAGES:" : heading }}</div>    <a class="item" ng-click="IntelligenceCenter.setType(\'\')" ng-class="{active: IntelligenceCenter.search.type==\'\'}" ng-show="IntelligenceCenter.canViewAll()">All <span class="ui tiny label">{{errors.messages.length}}</span></a>    <a class="item" ng-repeat="(tab,val) in errors.tabs track by $index" ng-show="errors.count[tab]" ng-click="IntelligenceCenter.setType(val)" ng-class="{active: IntelligenceCenter.search.type==val}">{{tab | uncamelize}} <span class="ui tiny label">{{errors.count[tab]}}</span></a>    </div>    <div id="error-messages-list" class="ui middle aligned divided list">      <message-item item="item" class="item" ng-repeat="obj in errors.messages | filter: IntelligenceCenter.search" error="obj"></message-item>      </div>      <div align="center" style="margin-top: -1.5em; padding-bottom: 1.5em;" ng-show="IntelligenceCenter.search.type!==\'\' && IntelligenceCenter.canViewAll()">      <button class="ui tiny basic button" ng-click="IntelligenceCenter.setType(\'\')"><i class="minus square icon"></i> Remove filter</button></div>    </div>',scope:{errors:"=",heading:"@",item:"="},link:function(n,t,i){e(function(){n.IntelligenceCenter=new EMLMakerIntelligence.IntelligenceCenter(n.errors,n),n.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("messageItem",["$timeout",function(e){return{restrict:"E",template:'<div ng-class="messageCls" class="intel-msg">    <div class="right floated content" ng-if="error.ctaLabel!==\'\'" >    <div class="ui small compact"     ng-class="buttonCls" ng-if="buttonCls"      ng-click="executeAction(item)"      ng-bind-html="error.ctaLabel">{{error.ctaLabel ? error.ctaLabel : "Resolve"}}</div>    </div>    <div class="right floated content" ng-if="error.cleanType==\'QA\'" >    <span class="ui icon label" ng-show="error.cleanType==\'QA\'&&error.override"><i class="thumbs up icon"></i> YOU CONFIRMED</span>    <div class="ui small compact"     ng-class="buttonCls" ng-if="buttonCls" ng-hide="error.override"      ng-click="error.setOverrideStatus(true);executeAction(item)"><i class="check icon"></i> Confirm</div>    </div>      <div class="content" ng-show="buttonCls">         <h4 ng-bind-html="error.title | dewidow"></h4>        <div ng-bind-html="error.description"></div></div>        <div ng-if="error.suggestion.length>0" ng-hide="error.override" class="suggestion">SUGGESTION: <div ng-bind-html="error.suggestion"></div></div>        <div ng-if="error.resource!==\'\'"><a ng-href="{{error.resource}}" target="_blank">{{error.resourceText}} <i class="external alternate icon"></i></a></div>    </div>',scope:{error:"=",item:"="},link:function(r,t,i){e(function(){var e=["","red","orange","violet","teal","blue"];r.executeAction=function(e){setTimeout(function(){r.$apply(function(){r.error.ctaHandler(e)})},100)},r.buttonCls=[e[r.error.severity],"button"].join(" "),"QA"==r.error.cleanType&&r.error.override?r.messageCls="":r.messageCls=["type-",r.error.type," level-",r.error.severity].join(""),r.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("messagesNotify",["$timeout",function(n){return{restrict:"E",template:'<div class="ui fluid labeled button" ng-click="ngClick()" ng-class="{\'animate-tada\': doAnimation}">      <div class="ui fluid button" ng-class="{\'yellow\':doAnimation, \'red\': !workspace.intelligence.canContinue}">        <i class="warning icon" alt="[!]" ng-show="!workspace.intelligence.canContinue"></i>        <i class="info icon" alt="(i)" ng-show="workspace.intelligence.canContinue"></i>        {{ count>1 ? "Messages" : "Message"}}        </div>      <div class="ui label" ng-class="{\'yellow\':doAnimation, \'red\': !workspace.intelligence.canContinue}">        {{count}}        </div>      </div>      </div>',scope:{workspace:"=",ngClick:"&",count:"="},link:function(i,o,t){i.doAnimation=!0,setTimeout(function(){i.$apply(function(){i.doAnimation=!1})},1500),i.$watch("count",function(n,i,o){n>i&&(o.doAnimation=!0,console.log("UPDATED"),setTimeout(function(){o.$apply(function(){o.doAnimation=!1})},1500))}),n(function(){setTimeout(function(){i.$apply(function(){i.doAnimation=!1})},2e3),i.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("ngChangeLazy",["$timeout",function(n){return{restrict:"A",scope:{ngModel:"=",ngChangeLazy:"&",changeLazyBuffer:"=",dataTransferEvt:"="},link:function(e,a,t){var o=null;n(function(){e.ngModel.toString();a.on("keyup",function(n){clearTimeout(o),o=setTimeout(function(){e.__lastValue!==a[0].value&&e.$apply(function(){e.ngChangeLazy(),e.__lastValue=e.ngModel.toString()})},void 0===t.changeLazyBuffer?500:1*t.changeLazyBuffer)}),e.$on("$destroy",function(){a.off("keyup")}),e.__lastValue=e.ngModel.toString()})}}}]);
angular.module("EMLMaker").directive("onReturnPress",["$timeout",function(e){return{restrict:"A",scope:{onReturnPress:"&",dataTransferEvt:"="},link:function(n,r,t){e(function(){r.on("keypress",function(e){13==e.keyCode&&n.onReturnPress()}),n.$on("$destroy",function(){r.off("keypress")})})}}}]);
angular.module("EMLMaker").directive("uiPopup",["$timeout",function(p){return{restrict:"A",scope:{popupId:"@",popupBehavior:"@"},link:function(o,u,i){p(function(){var p={hoverable:!0,popup:"#"+i.popupId};!function(o,i,e){void 0!==e.popupBehavior&&(p.on="click"),void 0!==e.popupId&&(p.popup="#"+e.popupId),o(u).popup(p),void 0!==e.popupShow&&o(u).popup("show"),i.$on("$destroy",function(){o(u).popup("destroy")})}(jQuery,o,i)})}}}]);
angular.module("EMLMaker").directive("queryStringEditor",["$timeout",function(e){return{restrict:"E",template:'<div class="query-string-editor well-component" ng-hide="item.isLinkType(\'mailto\')"><div style="overflow:hidden;padding-bottom:.5em;"><strong>QUERY STRING EDITOR</strong>    <div class="ui tiny basic buttons" style="float:right;">  <button class="ui icon button" ng-click="item.new.searchParams.deleteAll();item.isLinkComplete();scrollToItem(item.id);">Remove all</button>  <button class="ui icon button" ng-click="view == 1 ? view=0 : view=1">{{view==1? "Close" : "Edit"}}</button></div></div>     <div ng-if="item.new.searchParams._entries.length==1&&item.new.searchParams._entries[0].length==0">Query strings will appear here.</div>      <div ng-show="view==1">      <div style="margin-bottom:.5em;" class="ui action input" ng-if="str.length>0" ng-repeat="str in item.new.searchParams.entries track by $index">      <input type="text" ng-keyup="item.new.searchParams.updateSearchProp();item.isLinkComplete()" ng-model="item.new.searchParams._entries[$index]"/>      <button class="ui icon button" ng-click="item.new.searchParams.deleteAtIndex($index)">      Remove</button></div>      </div>      <div ng-show="view==0">      <ul class="tags-layout">       <li ng-if="str.length>0" ng-repeat="str in item.new.searchParams.entries track by $index">       {{str}} <a href="javascript:angular.noop()" ng-click="item.new.searchParams.deleteAtIndex($index);item.isLinkComplete()">       <i class="close icon" alt="[X]"></i></a></li><li><div class="ui transparent input"><input ng-keyup="createNewKeyup()" ng-blur="editState=false" ng-focus="editState=true" type="text" ng-model="newQueryString"></div></li></ul>       <div>{{editState ? "Press return or enter to add query string." : "Click to add query strings."}}</div>       </div>      </div>',scope:{item:"=",scrollTo:"&"},link:function(t,i,n){e(function(){var e=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.EDIT=1]="EDIT",e}({});t.editState=!1,window.qs_debug=t;var n=t;do n=n.$parent;while(void 0===n.scrollTo);t.scrollToItem=function(e){setTimeout(function(){t.$apply(function(){n.scrollTo(e-1)})},50)},t.view=e.DEFAULT,t.createNewKeyup=function(){/\?|\&/.test(t.newQueryString[0])&&(t.newQueryString=t.newQueryString.substr(1))},jQuery(i).find(".tags-layout input").on("keypress",function(e){t.$apply(function(){if(13==e.keyCode&&t.newQueryString.length>0){if(t.newQueryString.indexOf("&")>-1)for(var i=t.newQueryString.split("&"),n=0;n<i.length;n++)i[n].length>0&&t.item["new"].searchParams._entries.indexOf(i[n])==-1&&t.item["new"].searchParams.append(i[n]);else t.item["new"].searchParams._entries.indexOf(t.newQueryString.toString())==-1&&t.item["new"].searchParams.append(t.newQueryString.toString());t.item["new"].searchParams.updateSearchProp(),t.item.isLinkComplete(),t.newQueryString=""}})}),jQuery(i).on("click",function(){jQuery(i).find(".tags-layout input").focus()}),t.$on("$destroy",function(){jQuery(i).find(".tags-layout input").off("keypress"),jQuery(i).find(".tags-layout input").off("keyup"),jQuery(i).off("click")})})}}}]);
angular.module("EMLMaker").directive("scrollspy",["$timeout",function(i){return{restrict:"A",link:function(n,e,o){i(function(){void 0===n.activeLinkId&&(n.activeLinkId=1),void 0===n.isScrolling&&(n.isScrolling=!1);var i=function(){if(n.isScrolling&&1==n.isScrolling)return!1;var i=jQuery(e).attr("id").split("-").pop();n.$apply(function(){n.activeLinkId=1*i})};jQuery(e).visibility({once:!1,observeChanges:!0,onTopVisible:i,onTopPassedReverse:i}),n.$on("$destroy",function(){jQuery(e).visibility("destroy")})})}}}]);
angular.module("EMLMaker").directive("simpleAccordion",["$timeout",function(n){return{restrict:"E",transclude:!0,scope:{heading:"@",show:"="},template:'<div ng-class="{expanded: show, collapsed: !show}"><div ng-click="togglePane()" class="accordion-title">    <i class="chevron right icon" ng-show="!show" alt="[+]"></i>    <i class="chevron down icon" ng-show="show" alt="[-]"></i>     <span>{{heading}}</span></div><ng-transclude ng-show="show"></ng-transclude></div>',link:function(o,e,i){o.show=!1,n(function(){o.togglePane=function(){o.show=!o.show},jQuery.extend(jQuery(e),{toggleAccordion:function(){o.$apply(function(){o.togglePane()})}}),o.$on("$destroy",function(){})})}}}]);
angular.module("EMLMaker").directive("sticky",["$timeout",function(e){return{restrict:"A",link:function(i,n,t){e(function(){jQuery(n).sticky({context:"#stickyparent"});var e=null,t=function(){e=setTimeout(function(){var e=$("#right-panel"),i=e.find(".ui.secondary.vertical.pointing.menu"),t=e.find(".message-area");e[0].style.height="",e[0].clientHeight>window.innerHeight-135?(e[0].style.height=window.innerHeight-150+"px",i[0].style.height=e[0].clientHeight-t[0].clientHeight+"px",i.addClass("scrolling")):i.removeClass("scrolling"),jQuery(n).sticky("refresh")},300)};$(window).on("resize",t),$(window).on("scroll",t),t(),i.$on("$destroy",function(){$(window).off("resize",t),$(window).off("scroll",t),jQuery(n).sticky("destroy")})})}}}]);
angular.module("EMLMaker").directive("textareaExpand",["$timeout",function(t){return{restrict:"A",link:function(e,n,r){var o=function(t){t.style.height="inherit";var e=window.getComputedStyle(t),n=parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("padding-top"),10)+t.scrollHeight+parseInt(e.getPropertyValue("padding-bottom"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10);t.style.height=n+"px"};t(function(){$(n).css("min-height","25px"),o($(n).get(0)),$(n).on("input change",function(t){o($(n).get(0))})}),e.$on("$destroy",function(){})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZUVkaXRvci5qcyIsImRyb3AtZW5hYmxlLmpzIiwiZHJvcGRvd24uanMiLCJnYUV2ZW50LmpzIiwiaHRtbFZpZXdlci5qcyIsIm1lc3NhZ2VDZW50ZXIuanMiLCJtZXNzYWdlSXRlbS5qcyIsIm1lc3NhZ2VzTm90aWZ5LmpzIiwibmdDaGFuZ2VMYXp5LmpzIiwib25SZXR1cm5QcmVzcy5qcyIsInBvcHVwLmpzIiwicXVlcnlTdHJpbmdFZGl0b3IuanMiLCJzY3JvbGxzcHkuanMiLCJzaW1wbGVBY2NvcmRpb24uanMiLCJzdGlja3kuanMiLCJ0ZXh0YXJlYUV4cGFuZC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwiJHRpbWVvdXQiLCJyZXN0cmljdCIsImxpbmsiLCJzY29wZSIsImVsIiwiYXR0ciIsImVkaXRvciIsImFjZSIsImVkaXQiLCJnZXQiLCJpZCIsInNldFRoZW1lIiwiZ2V0U2Vzc2lvbiIsInNldFVzZVdyYXBNb2RlIiwic2V0TW9kZSIsIm9uIiwiZSIsIiRhcHBseSIsIndvcmtzcGFjZSIsInNvdXJjZUNvZGUiLCJnZXRWYWx1ZSIsIiRvbiIsImRlc3Ryb3kiLCJvbmRyb3BmaWxlIiwiZGF0YVRyYW5zZmVyRXZ0IiwiZmlsZURyb3BwZXIiLCJ0aW1lciIsImRyb3BwZXJSZXNldCIsImV2dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsIndpbmRvdyIsImpRdWVyeSIsInN0aWNreSIsImNzcyIsImJvcmRlciIsImNvbG9yIiwiYmFja2dyb3VuZCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiY291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJsb2NhdGlvbiIsImhhc2giLCJkYXRhVHJhbnNmZXIiLCJkcm9wRWZmZWN0IiwiYWRkQ2xhc3MiLCJkcm9wZG93bkFjdGlvbiIsImFjdGlvbiIsIiQiLCJkcm9wZG93biIsImdhRXZlbnQiLCJyZXBvcnRFdmVudCIsImFyZ3MiLCJuZXdBcmdzIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwicHVzaCIsImdhIiwiYXBwbHkiLCJ0ZW1wbGF0ZSIsIml0ZW0iLCJjb2RlIiwiYyIsImIiLCJkaXNwbGF5Rm9ybWF0dGVkVVJMIiwiZXJyb3JzIiwiaGVhZGluZyIsIkludGVsbGlnZW5jZUNlbnRlciIsIkVNTE1ha2VySW50ZWxsaWdlbmNlIiwiZXJyb3IiLCJjbHMiLCJleGVjdXRlQWN0aW9uIiwiY3RhSGFuZGxlciIsImJ1dHRvbkNscyIsInNldmVyaXR5Iiwiam9pbiIsImNsZWFuVHlwZSIsIm92ZXJyaWRlIiwibWVzc2FnZUNscyIsInR5cGUiLCJuZ0NsaWNrIiwiY291bnQiLCJkb0FuaW1hdGlvbiIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJjb25zb2xlIiwibG9nIiwibmdNb2RlbCIsIm5nQ2hhbmdlTGF6eSIsImNoYW5nZUxhenlCdWZmZXIiLCJ0b1N0cmluZyIsIl9fbGFzdFZhbHVlIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJvZmYiLCJvblJldHVyblByZXNzIiwia2V5Q29kZSIsInBvcHVwSWQiLCJwb3B1cEJlaGF2aW9yIiwiaG92ZXJhYmxlIiwicG9wdXAiLCJwb3B1cFNob3ciLCJzY3JvbGxUbyIsIlZpZXciLCJlZGl0U3RhdGUiLCJxc19kZWJ1ZyIsInBvaW50ZXIiLCIkcGFyZW50Iiwic2Nyb2xsVG9JdGVtIiwicGFyYW0iLCJ2aWV3IiwiREVGQVVMVCIsImNyZWF0ZU5ld0tleXVwIiwidGVzdCIsIm5ld1F1ZXJ5U3RyaW5nIiwic3Vic3RyIiwiZmluZCIsImluZGV4T2YiLCJzdWJJdGVtcyIsInNlYXJjaFBhcmFtcyIsIl9lbnRyaWVzIiwiYXBwZW5kIiwidXBkYXRlU2VhcmNoUHJvcCIsImlzTGlua0NvbXBsZXRlIiwiZm9jdXMiLCJhY3RpdmVMaW5rSWQiLCJpc1Njcm9sbGluZyIsImZ1bmMiLCJwb3AiLCJ2aXNpYmlsaXR5Iiwib25jZSIsIm9ic2VydmVDaGFuZ2VzIiwib25Ub3BWaXNpYmxlIiwib25Ub3BQYXNzZWRSZXZlcnNlIiwidHJhbnNjbHVkZSIsInNob3ciLCJ0b2dnbGVQYW5lIiwiZXh0ZW5kIiwidG9nZ2xlQWNjb3JkaW9uIiwiY29udGV4dCIsInJlc2l6ZVRpbWVyIiwiUmVzaXplU3RpY2t5IiwiYSIsInN0eWxlIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJhdXRvRXhwYW5kIiwiZmllbGQiLCJjb21wdXRlZCIsImdldENvbXB1dGVkU3R5bGUiLCJwYXJzZUludCIsImdldFByb3BlcnR5VmFsdWUiLCJzY3JvbGxIZWlnaHQiLCJldmVudCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLE9BQU8sWUFBWUMsVUFBVSxhQUFjLFdBQVksU0FBU0MsR0FFdEUsT0FDRUMsU0FBVSxJQUNWQyxLQUFNLFNBQVNDLEVBQU9DLEVBQUlDLEdBQ3hCTCxFQUFTLFdBR0wsR0FBSU0sR0FBU0MsSUFBSUMsS0FBS0osRUFBR0ssSUFBSSxHQUFHQyxHQUVoQ0osR0FBT0ssU0FBUyxxQkFHaEJMLEVBQU9NLGFBQWFDLGdCQUFlLEdBQ25DUCxFQUFPTSxhQUFhRSxRQUFRLGVBRTVCUixHQUFPTSxhQUFhRyxHQUFHLFNBQVUsU0FBU0MsR0FDeENiLEVBQU1jLE9BQU8sV0FDWGQsRUFBTWUsVUFBVUMsV0FBYWIsRUFBT2MsZUFLMUNqQixFQUFNa0IsSUFBSSxXQUFZLFdBQ3BCZixFQUFPZ0I7QUN4QmpCekIsUUFBUUMsT0FBTyxZQUNkQyxVQUFVLGNBQWUsV0FBWSxTQUFTQyxHQUM5QyxPQUNDQyxTQUFVLElBRVZFLE9BQ0NvQixXQUFXLElBQ1hDLGdCQUFnQixLQUVqQnRCLEtBQU0sU0FBU0MsRUFBT0MsRUFBSUMsR0FDekIsR0FBSW9CLEdBQWNyQixFQUNkc0IsRUFBUSxLQUVSQyxFQUFlLFNBQVNDLEdBQzNCQyxhQUFhSCxHQUNiQSxFQUFRSSxXQUFXLFdBQ25CTCxFQUFZTSxZQUFZLFVBQ3hCRCxXQUFXLFdBQVdFLE9BQU9DLE9BQU8sY0FBY0MsT0FBTyxZQUFhLEtB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V0FBVyIsImZpbGUiOiJkaXJlY3RpdmVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJykuZGlyZWN0aXZlKCdhY2VFZGl0b3InLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuXG5cbiAgICAgICAgICB2YXIgZWRpdG9yID0gYWNlLmVkaXQoZWwuZ2V0KDApLmlkKTtcblxuICAgICAgICAgIGVkaXRvci5zZXRUaGVtZShcImFjZS90aGVtZS9lY2xpcHNlXCIpO1xuICAgICAgICAgIC8vZGF3blxuICAgICAgICAgIC8vZWNsaXBzZVxuICAgICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV3JhcE1vZGUodHJ1ZSk7XG4gICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKFwiYWNlL21vZGUveG1sXCIpO1xuICAgICAgICAgIHZhciB0aW1lciA9IG51bGw7XG4gICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgc2NvcGUud29ya3NwYWNlLnNvdXJjZUNvZGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZWRpdG9yLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgfSk7XG4gIH1cbn1cblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnZHJvcEVuYWJsZScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiQVwiLFxuXHRcdC8vIHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG9uZHJvcGZpbGU6XCImXCIsXG5cdFx0XHRkYXRhVHJhbnNmZXJFdnQ6XCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG5cdFx0XHR2YXIgZmlsZURyb3BwZXIgPSBlbDtcblx0XHRcdHZhciB0aW1lciA9IG51bGw7XG5cdFx0XHQvL3Jlc2V0XG5cdFx0XHR2YXIgZHJvcHBlclJlc2V0ID0gZnVuY3Rpb24oZXZ0KXtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGZpbGVEcm9wcGVyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5qUXVlcnkoJy51aS5zdGlja3knKS5zdGlja3koXCJyZWZyZXNoXCIpO30sMTAwKTtcblx0XHRcdFx0ZmlsZURyb3BwZXIuY3NzKHtib3JkZXI6IFwiXCIsY29sb3I6XCJcIiwgYmFja2dyb3VuZDogXCJcIn0pO1xuXG5cdFx0XHRcdFx0Ly8gZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHZhciBjb3VudGVyID0gMDtcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cblx0XHRcdGZpbGVEcm9wcGVyLmdldCgwKS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZnVuY3Rpb24oZXZ0KXtcblx0XHRcdFx0aWYobG9jYXRpb24uaGFzaCAhPT0gXCIjL21haW5cIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0Y291bnRlcisrO1xuXHRcdFx0XHRcdGRyb3BwZXJSZXNldChldnQpO1xuXHRcdFx0XHRcdGlmKGxvY2F0aW9uLmhhc2ggPSBcIiMvbWFpblwiKXtcblx0XHRcdFx0XHRcdHNjb3BlLm9uZHJvcGZpbGUoe1wiZXZ0XCI6ZXZ0fSk7XG5cdFx0XHRcdFx0fVxuXG5cblxuXHRcdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRmaWxlRHJvcHBlci5nZXQoMCkuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIGRyb3BwZXJSZXNldCwgZmFsc2UpO1xuXHRcdFx0ZmlsZURyb3BwZXIuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyb3BwZXJSZXNldCwgZmFsc2UpO1xuXHRcdFx0ZmlsZURyb3BwZXIuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZ0KXtcblxuXHRcdFx0XHQvLyBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0aWYobG9jYXRpb24uaGFzaCAhPT0gXCIjL21haW5cIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRldnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XG5cdFx0XHRcdGZpbGVEcm9wcGVyLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdFx0XHRmaWxlRHJvcHBlci5jc3Moe2JvcmRlcjogXCJzb2xpZCAzcHggYmx1ZVwiLCBjb2xvcjpcImJsdWVcIiwgYmFja2dyb3VuZDogXCJsaWdodGJsdWVcIn0pO1xuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblxuXHRcdFx0XHRcdC8vIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9LCAxMDApO1xuXG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9LCBmYWxzZSk7XG5cblxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpLmRpcmVjdGl2ZSgndWlEcm9wZG93bicsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgc2NvcGU6IHtkcm9wZG93bkFjdGlvbjogXCJAXCJ9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYXR0ciA9IHsgYWN0aW9uOiBcImhpZGVcIn07XG4gICAgICAgIGlmKHNjb3BlLmRyb3Bkb3duQWN0aW9uKSBhdHRyLmFjdGlvbiA9IHNjb3BlLmRyb3Bkb3duQWN0aW9uO1xuICAgICAgICAkKGVsKS5kcm9wZG93bihhdHRyKTtcbiAgICAgIH0pO1xuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsZnVuY3Rpb24oKXtcbiAgICAgICAgJChlbCkuZHJvcGRvd24oXCJkZXN0cm95XCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdnYUV2ZW50JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJBXCIsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGdhRXZlbnQ6XCJAXCJcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG5cblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciByZXBvcnRFdmVudCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBbXCJzZW5kXCIsXCJldmVudFwiXSwgbmV3QXJncyA9IHNjb3BlLmdhRXZlbnQuc3BsaXQoL1xcLHxcXHwvKTtcblx0XHRcdFx0XHRmb3IodmFyIGkgPTA7IGk8bmV3QXJncy5sZW5ndGg7aSsrKXtcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChuZXdBcmdzW2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d2luZG93LmdhLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRlbC5vbignY2xpY2snLCByZXBvcnRFdmVudCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0ZWwub24oJ29mZicscmVwb3J0RXZlbnQpO1xuXHRcdFx0fSk7XG5cblx0XHRcdH1cblx0XHR9O1xuXHR9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnaHRtbFZpZXdlcicsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlOiAnPGRpdj48b2wgc3RhcnQ9XCJ7e2l0ZW0ubGluZX19XCI+PGxpIG5nLXJlcGVhdD1cImxuIGluIGNvZGUoaXRlbSkgdHJhY2sgYnkgJGluZGV4XCIgbmctYmluZC1odG1sPVwibG5cIj48L2xpPjwvb2w+PC9kaXY+JyxcbiAgICBzY29wZToge2l0ZW06IFwiPVwifSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgc2NvcGUuY29kZSA9IGZ1bmN0aW9uKGMpe1xuICAgICAgICB2YXIgYiA9IChjLmRpc3BsYXlGb3JtYXR0ZWRVUkwoKSkuc3BsaXQoL1xcPGJyXFw+fFxcbi9nKTtcbiAgICAgICAgcmV0dXJuIGI7XG4gICAgICB9O1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcblxuXG4gICAgfSk7XG4gIH1cbn07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ21lc3NhZ2VDZW50ZXInLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJtZXNzYWdlLWNlbnRlclwiPjxkaXYgY2xhc3M9XCJ1aSB0aW55IHNlY29uZGFyeSBtZW51XCI+XFxcbiAgICA8ZGl2IGNsYXNzPVwiaXRlbSBtbnUtdGl0bGVcIiBzdHlsZT1cInBhZGRpbmctbGVmdDowO1wiPnt7aGVhZGluZyA9PT0gdW5kZWZpbmVkID8gXCJNRVNTQUdFUzpcIiA6IGhlYWRpbmcgfX08L2Rpdj5cXFxuICAgIDxhIGNsYXNzPVwiaXRlbVwiIG5nLWNsaWNrPVwiSW50ZWxsaWdlbmNlQ2VudGVyLnNldFR5cGUoXFwnXFwnKVwiIG5nLWNsYXNzPVwie2FjdGl2ZTogSW50ZWxsaWdlbmNlQ2VudGVyLnNlYXJjaC50eXBlPT1cXCdcXCd9XCIgbmctc2hvdz1cIkludGVsbGlnZW5jZUNlbnRlci5jYW5WaWV3QWxsKClcIj5BbGwgPHNwYW4gY2xhc3M9XCJ1aSB0aW55IGxhYmVsXCI+e3tlcnJvcnMubWVzc2FnZXMubGVuZ3RofX08L3NwYW4+PC9hPlxcXG4gICAgPGEgY2xhc3M9XCJpdGVtXCIgbmctcmVwZWF0PVwiKHRhYix2YWwpIGluIGVycm9ycy50YWJzIHRyYWNrIGJ5ICRpbmRleFwiIG5nLXNob3c9XCJlcnJvcnMuY291bnRbdGFiXVwiIG5nLWNsaWNrPVwiSW50ZWxsaWdlbmNlQ2VudGVyLnNldFR5cGUodmFsKVwiIG5nLWNsYXNzPVwie2FjdGl2ZTogSW50ZWxsaWdlbmNlQ2VudGVyLnNlYXJjaC50eXBlPT12YWx9XCI+e3t0YWIgfCB1bmNhbWVsaXplfX0gPHNwYW4gY2xhc3M9XCJ1aSB0aW55IGxhYmVsXCI+e3tlcnJvcnMuY291bnRbdGFiXX19PC9zcGFuPjwvYT5cXFxuICAgIDwvZGl2PlxcXG4gICAgPGRpdiBpZD1cImVycm9yLW1lc3NhZ2VzLWxpc3RcIiBjbGFzcz1cInVpIG1pZGRsZSBhbGlnbmVkIGRpdmlkZWQgbGlzdFwiPlxcXG4gICAgICA8bWVzc2FnZS1pdGVtIGl0ZW09XCJpdGVtXCIgY2xhc3M9XCJpdGVtXCIgbmctcmVwZWF0PVwib2JqIGluIGVycm9ycy5tZXNzYWdlcyB8IGZpbHRlcjogSW50ZWxsaWdlbmNlQ2VudGVyLnNlYXJjaFwiIGVycm9yPVwib2JqXCI+PC9tZXNzYWdlLWl0ZW0+XFxcbiAgICAgIDwvZGl2PlxcXG4gICAgICA8ZGl2IGFsaWduPVwiY2VudGVyXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAtMS41ZW07IHBhZGRpbmctYm90dG9tOiAxLjVlbTtcIiBuZy1zaG93PVwiSW50ZWxsaWdlbmNlQ2VudGVyLnNlYXJjaC50eXBlIT09XFwnXFwnICYmIEludGVsbGlnZW5jZUNlbnRlci5jYW5WaWV3QWxsKClcIj5cXFxuICAgICAgPGJ1dHRvbiBjbGFzcz1cInVpIHRpbnkgYmFzaWMgYnV0dG9uXCIgbmctY2xpY2s9XCJJbnRlbGxpZ2VuY2VDZW50ZXIuc2V0VHlwZShcXCdcXCcpXCI+PGkgY2xhc3M9XCJtaW51cyBzcXVhcmUgaWNvblwiPjwvaT4gUmVtb3ZlIGZpbHRlcjwvYnV0dG9uPjwvZGl2PlxcXG4gICAgPC9kaXY+JyxcbiAgICBzY29wZToge1xuICAgICAgZXJyb3JzOlwiPVwiLFxuICAgICAgaGVhZGluZzpcIkBcIixcbiAgICAgIGl0ZW06XCI9XCJcbiAgICB9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuXG4gICAgICAgIHNjb3BlLkludGVsbGlnZW5jZUNlbnRlciA9IG5ldyBFTUxNYWtlckludGVsbGlnZW5jZS5JbnRlbGxpZ2VuY2VDZW50ZXIoc2NvcGUuZXJyb3JzLCBzY29wZSk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8galF1ZXJ5KGVsKS5wb3B1cChcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdtZXNzYWdlSXRlbScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBuZy1jbGFzcz1cIm1lc3NhZ2VDbHNcIiBjbGFzcz1cImludGVsLW1zZ1wiPlxcXG4gICAgPGRpdiBjbGFzcz1cInJpZ2h0IGZsb2F0ZWQgY29udGVudFwiIG5nLWlmPVwiZXJyb3IuY3RhTGFiZWwhPT1cXCdcXCdcIiA+XFxcbiAgICA8ZGl2IGNsYXNzPVwidWkgc21hbGwgY29tcGFjdFwiIFxcXG4gICAgbmctY2xhc3M9XCJidXR0b25DbHNcIiBuZy1pZj1cImJ1dHRvbkNsc1wiIFxcXG4gICAgXFwgbmctY2xpY2s9XCJleGVjdXRlQWN0aW9uKGl0ZW0pXCIgXFxcbiAgICAgbmctYmluZC1odG1sPVwiZXJyb3IuY3RhTGFiZWxcIj57e2Vycm9yLmN0YUxhYmVsID8gZXJyb3IuY3RhTGFiZWwgOiBcIlJlc29sdmVcIn19PC9kaXY+XFxcbiAgICA8L2Rpdj5cXFxuICAgIDxkaXYgY2xhc3M9XCJyaWdodCBmbG9hdGVkIGNvbnRlbnRcIiBuZy1pZj1cImVycm9yLmNsZWFuVHlwZT09XFwnUUFcXCdcIiA+XFxcbiAgICA8c3BhbiBjbGFzcz1cInVpIGljb24gbGFiZWxcIiBuZy1zaG93PVwiZXJyb3IuY2xlYW5UeXBlPT1cXCdRQVxcJyYmZXJyb3Iub3ZlcnJpZGVcIj48aSBjbGFzcz1cInRodW1icyB1cCBpY29uXCI+PC9pPiBZT1UgQ09ORklSTUVEPC9zcGFuPlxcXG4gICAgPGRpdiBjbGFzcz1cInVpIHNtYWxsIGNvbXBhY3RcIiBcXFxuICAgIG5nLWNsYXNzPVwiYnV0dG9uQ2xzXCIgbmctaWY9XCJidXR0b25DbHNcIiBuZy1oaWRlPVwiZXJyb3Iub3ZlcnJpZGVcIiBcXFxuICAgIFxcIG5nLWNsaWNrPVwiZXJyb3Iuc2V0T3ZlcnJpZGVTdGF0dXModHJ1ZSk7ZXhlY3V0ZUFjdGlvbihpdGVtKVwiPjxpIGNsYXNzPVwiY2hlY2sgaWNvblwiPjwvaT4gQ29uZmlybTwvZGl2PlxcXG4gICAgPC9kaXY+XFxcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCIgbmctc2hvdz1cImJ1dHRvbkNsc1wiPiBcXFxuICAgICAgICA8aDQgbmctYmluZC1odG1sPVwiZXJyb3IudGl0bGUgfCBkZXdpZG93XCI+PC9oND5cXFxuICAgICAgICA8ZGl2IG5nLWJpbmQtaHRtbD1cImVycm9yLmRlc2NyaXB0aW9uXCI+PC9kaXY+PC9kaXY+XFxcbiAgICAgICAgPGRpdiBuZy1pZj1cImVycm9yLnN1Z2dlc3Rpb24ubGVuZ3RoPjBcIiBuZy1oaWRlPVwiZXJyb3Iub3ZlcnJpZGVcIiBjbGFzcz1cInN1Z2dlc3Rpb25cIj5TVUdHRVNUSU9OOiA8ZGl2IG5nLWJpbmQtaHRtbD1cImVycm9yLnN1Z2dlc3Rpb25cIj48L2Rpdj48L2Rpdj5cXFxuICAgICAgICA8ZGl2IG5nLWlmPVwiZXJyb3IucmVzb3VyY2UhPT1cXCdcXCdcIj48YSBuZy1ocmVmPVwie3tlcnJvci5yZXNvdXJjZX19XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3tlcnJvci5yZXNvdXJjZVRleHR9fSA8aSBjbGFzcz1cImV4dGVybmFsIGFsdGVybmF0ZSBpY29uXCI+PC9pPjwvYT48L2Rpdj5cXFxuICAgIDwvZGl2PicsXG4gICAgc2NvcGU6IHtlcnJvcjogXCI9XCIsIGl0ZW06XCI9XCJ9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgY2xzID0gW1wiXCIsIFwicmVkXCIsIFwib3JhbmdlXCIsIFwidmlvbGV0XCIsIFwidGVhbFwiLCBcImJsdWVcIl07XG5cblxuICAgICAgICAvLyBlbnVtIEVycm9yVHlwZSB7XG4gICAgICAgIC8vICAgRml4PTEsXG4gICAgICAgIC8vICAgV2FybixcbiAgICAgICAgLy8gICBTdWdnZXN0aW9uLFxuICAgICAgICAvLyAgIFFBLFxuICAgICAgICAvLyAgIEJlc3RQcmFjdGljZVxuICAgICAgICAvLyB9XG5cblxuICAgICAgICAvLyBcIlwiLFxuICAgICAgICAvLyBcInJlZFwiLFxuICAgICAgICAvLyBcIm9yYW5nZVwiLFxuICAgICAgICAvLyBcInZpb2xldFwiLFxuICAgICAgICAvLyBcInllbGxvd1wiLFxuICAgICAgICAvLyBcIlwiXG4gICAgICAgIHNjb3BlLmV4ZWN1dGVBY3Rpb24gPSBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgc2NvcGUuZXJyb3IuY3RhSGFuZGxlcihpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sMTAwKTtcblxuXG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuYnV0dG9uQ2xzID0gW2Nsc1tzY29wZS5lcnJvci5zZXZlcml0eV0sXCJidXR0b25cIl0uam9pbihcIiBcIik7XG4gICAgICAgIGlmKHNjb3BlLmVycm9yLmNsZWFuVHlwZT09XCJRQVwiICYmIHNjb3BlLmVycm9yLm92ZXJyaWRlKSB7XG4gICAgICAgICAgc2NvcGUubWVzc2FnZUNscyA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NvcGUubWVzc2FnZUNscyA9IFtcInR5cGUtXCIsc2NvcGUuZXJyb3IudHlwZSxcIiBsZXZlbC1cIixzY29wZS5lcnJvci5zZXZlcml0eV0uam9pbihcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vIGpRdWVyeShlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgnbWVzc2FnZXNOb3RpZnknLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ1aSBmbHVpZCBsYWJlbGVkIGJ1dHRvblwiIG5nLWNsaWNrPVwibmdDbGljaygpXCIgbmctY2xhc3M9XCJ7XFwnYW5pbWF0ZS10YWRhXFwnOiBkb0FuaW1hdGlvbn1cIj5cXFxuICAgICAgPGRpdiBjbGFzcz1cInVpIGZsdWlkIGJ1dHRvblwiIG5nLWNsYXNzPVwie1xcJ3llbGxvd1xcJzpkb0FuaW1hdGlvbiwgXFwncmVkXFwnOiAhd29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZX1cIj5cXFxuICAgICAgICA8aSBjbGFzcz1cIndhcm5pbmcgaWNvblwiIGFsdD1cIlshXVwiIG5nLXNob3c9XCIhd29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZVwiPjwvaT5cXFxuICAgICAgICA8aSBjbGFzcz1cImluZm8gaWNvblwiIGFsdD1cIihpKVwiIG5nLXNob3c9XCJ3b3Jrc3BhY2UuaW50ZWxsaWdlbmNlLmNhbkNvbnRpbnVlXCI+PC9pPlxcXG4gICAgICAgIHt7IGNvdW50PjEgPyBcIk1lc3NhZ2VzXCIgOiBcIk1lc3NhZ2VcIn19XFxcbiAgICAgICAgPC9kaXY+XFxcbiAgICAgIDxkaXYgY2xhc3M9XCJ1aSBsYWJlbFwiIG5nLWNsYXNzPVwie1xcJ3llbGxvd1xcJzpkb0FuaW1hdGlvbiwgXFwncmVkXFwnOiAhd29ya3NwYWNlLmludGVsbGlnZW5jZS5jYW5Db250aW51ZX1cIj5cXFxuICAgICAgICB7e2NvdW50fX1cXFxuICAgICAgICA8L2Rpdj5cXFxuICAgICAgPC9kaXY+XFxcbiAgICAgIDwvZGl2PicsXG4gICAgc2NvcGU6IHtcbiAgICAgIHdvcmtzcGFjZTogXCI9XCIsXG4gICAgICBuZ0NsaWNrOiBcIiZcIixcbiAgICAgIGNvdW50OiBcIj1cIlxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgIHNjb3BlLmRvQW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2NvcGUuZG9BbmltYXRpb24gPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LCAxNTAwKTtcbiAgICAgIHNjb3BlLiR3YXRjaChcImNvdW50XCIsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSwgc2NvcGUpe1xuICAgICAgICBpZihuZXdWYWx1ZSA+IG9sZFZhbHVlKSB7XG5cbiAgICAgICAgICAgIHNjb3BlLmRvQW5pbWF0aW9uID0gdHJ1ZTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVVBEQVRFRFwiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgc2NvcGUuZG9BbmltYXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSwxNTAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzY29wZS5kb0FuaW1hdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAyMDAwKTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ25nQ2hhbmdlTGF6eScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiQVwiLFxuXHRcdC8vIHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG5nTW9kZWw6XCI9XCIsXG5cdFx0XHRuZ0NoYW5nZUxhenk6XCImXCIsXG5cdFx0XHRjaGFuZ2VMYXp5QnVmZmVyOlwiPVwiLFxuXHRcdFx0ZGF0YVRyYW5zZmVyRXZ0OlwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuXG5cdFx0XHR2YXIgdGltZXIgPSBudWxsO1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIGxhc3RWYWx1ZSA9IHNjb3BlLm5nTW9kZWwudG9TdHJpbmcoKTtcblx0XHRcdFx0ZWwub24oJ2tleXVwJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdGlmKHNjb3BlLl9fbGFzdFZhbHVlICE9PSBlbFswXS52YWx1ZSl7XG5cdFx0XHRcdFx0XHRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHRzY29wZS5uZ0NoYW5nZUxhenkoKTtcblx0XHRcdFx0XHRcdFx0XHRzY29wZS5fX2xhc3RWYWx1ZSA9IHNjb3BlLm5nTW9kZWwudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGF0dHIuY2hhbmdlTGF6eUJ1ZmZlcj09PSB1bmRlZmluZWQgPyA1MDAgOiBhdHRyLmNoYW5nZUxhenlCdWZmZXIqMSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRlbC5vZmYoJ2tleXVwJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzY29wZS5fX2xhc3RWYWx1ZSA9IHNjb3BlLm5nTW9kZWwudG9TdHJpbmcoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0fTtcblx0fV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0VNTE1ha2VyJylcbi5kaXJlY3RpdmUoJ29uUmV0dXJuUHJlc3MnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkFcIixcblx0XHRzY29wZToge1xuXHRcdFx0b25SZXR1cm5QcmVzczpcIiZcIixcblx0XHRcdGRhdGFUcmFuc2ZlckV2dDpcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcblxuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0ZWwub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdFx0aWYoZS5rZXlDb2RlPT0xMyl7XG5cdFx0XHRcdFx0XHRzY29wZS5vblJldHVyblByZXNzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRlbC5vZmYoJ2tleXByZXNzJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdH1cblx0XHR9O1xuXHR9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKS5kaXJlY3RpdmUoJ3VpUG9wdXAnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIHNjb3BlOiB7cG9wdXBJZDpcIkBcIixwb3B1cEJlaGF2aW9yOlwiQFwifSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgaG92ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHBvcHVwOiBcIiNcIiArIGF0dHIucG9wdXBJZFxuICAgICAgICB9O1xuICAgICAgICAoZnVuY3Rpb24oJCwgc2NvcGUsIGF0dHIpe1xuICAgICAgICAgIGlmKGF0dHIucG9wdXBCZWhhdmlvciAhPT0gdW5kZWZpbmVkICkgYXJncy5vbiA9IFwiY2xpY2tcIjtcbiAgICAgICAgICBpZihhdHRyLnBvcHVwSWQgIT09IHVuZGVmaW5lZCApIGFyZ3MucG9wdXAgPSBcIiNcIiArIGF0dHIucG9wdXBJZDtcbiAgICAgICAgICAkKGVsKS5wb3B1cChhcmdzKTtcbiAgICAgICAgICBpZihhdHRyLnBvcHVwU2hvdyAhPT0gdW5kZWZpbmVkICkgJChlbCkucG9wdXAoXCJzaG93XCIpO1xuICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJChlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pKGpRdWVyeSwgc2NvcGUsIGF0dHIpXG5cbiAgICB9KTtcbiAgfVxufTtcblxuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKVxuLmRpcmVjdGl2ZSgncXVlcnlTdHJpbmdFZGl0b3InLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJxdWVyeS1zdHJpbmctZWRpdG9yIHdlbGwtY29tcG9uZW50XCIgbmctaGlkZT1cIml0ZW0uaXNMaW5rVHlwZShcXCdtYWlsdG9cXCcpXCI+PGRpdiBzdHlsZT1cIm92ZXJmbG93OmhpZGRlbjtwYWRkaW5nLWJvdHRvbTouNWVtO1wiPjxzdHJvbmc+UVVFUlkgU1RSSU5HIEVESVRPUjwvc3Ryb25nPlxcXG4gICAgPGRpdiBjbGFzcz1cInVpIHRpbnkgYmFzaWMgYnV0dG9uc1wiIHN0eWxlPVwiZmxvYXQ6cmlnaHQ7XCI+XFxcbiAgPGJ1dHRvbiBjbGFzcz1cInVpIGljb24gYnV0dG9uXCIgbmctY2xpY2s9XCJpdGVtLm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlQWxsKCk7aXRlbS5pc0xpbmtDb21wbGV0ZSgpO3Njcm9sbFRvSXRlbShpdGVtLmlkKTtcIj5SZW1vdmUgYWxsPC9idXR0b24+XFxcbiAgPGJ1dHRvbiBjbGFzcz1cInVpIGljb24gYnV0dG9uXCIgbmctY2xpY2s9XCJ2aWV3ID09IDEgPyB2aWV3PTAgOiB2aWV3PTFcIj57e3ZpZXc9PTE/IFwiQ2xvc2VcIiA6IFwiRWRpdFwifX08L2J1dHRvbj5cXFxuPC9kaXY+PC9kaXY+XFxcbiAgICAgPGRpdiBuZy1pZj1cIml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5fZW50cmllcy5sZW5ndGg9PTEmJml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5fZW50cmllc1swXS5sZW5ndGg9PTBcIj5RdWVyeSBzdHJpbmdzIHdpbGwgYXBwZWFyIGhlcmUuPC9kaXY+XFxcbiAgICAgIDxkaXYgbmctc2hvdz1cInZpZXc9PTFcIj5cXFxuICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206LjVlbTtcIiBjbGFzcz1cInVpIGFjdGlvbiBpbnB1dFwiIG5nLWlmPVwic3RyLmxlbmd0aD4wXCIgbmctcmVwZWF0PVwic3RyIGluIGl0ZW0ubmV3LnNlYXJjaFBhcmFtcy5lbnRyaWVzIHRyYWNrIGJ5ICRpbmRleFwiPlxcXG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1rZXl1cD1cIml0ZW0ubmV3LnNlYXJjaFBhcmFtcy51cGRhdGVTZWFyY2hQcm9wKCk7aXRlbS5pc0xpbmtDb21wbGV0ZSgpXCIgbmctbW9kZWw9XCJpdGVtLm5ldy5zZWFyY2hQYXJhbXMuX2VudHJpZXNbJGluZGV4XVwiLz5cXFxuICAgICAgPGJ1dHRvbiBjbGFzcz1cInVpIGljb24gYnV0dG9uXCIgbmctY2xpY2s9XCJpdGVtLm5ldy5zZWFyY2hQYXJhbXMuZGVsZXRlQXRJbmRleCgkaW5kZXgpXCI+XFxcbiAgICAgIFJlbW92ZTwvYnV0dG9uPjwvZGl2PlxcXG4gICAgICA8L2Rpdj5cXFxuICAgICAgPGRpdiBuZy1zaG93PVwidmlldz09MFwiPlxcXG4gICAgICA8dWwgY2xhc3M9XCJ0YWdzLWxheW91dFwiPlxcXG4gICAgICAgPGxpIG5nLWlmPVwic3RyLmxlbmd0aD4wXCIgbmctcmVwZWF0PVwic3RyIGluIGl0ZW0ubmV3LnNlYXJjaFBhcmFtcy5lbnRyaWVzIHRyYWNrIGJ5ICRpbmRleFwiPlxcXG4gICAgICAge3tzdHJ9fSA8YSBocmVmPVwiamF2YXNjcmlwdDphbmd1bGFyLm5vb3AoKVwiIG5nLWNsaWNrPVwiaXRlbS5uZXcuc2VhcmNoUGFyYW1zLmRlbGV0ZUF0SW5kZXgoJGluZGV4KTtpdGVtLmlzTGlua0NvbXBsZXRlKClcIj5cXFxuICAgICAgIDxpIGNsYXNzPVwiY2xvc2UgaWNvblwiIGFsdD1cIltYXVwiPjwvaT48L2E+PC9saT48bGk+PGRpdiBjbGFzcz1cInVpIHRyYW5zcGFyZW50IGlucHV0XCI+PGlucHV0IG5nLWtleXVwPVwiY3JlYXRlTmV3S2V5dXAoKVwiIG5nLWJsdXI9XCJlZGl0U3RhdGU9ZmFsc2VcIiBuZy1mb2N1cz1cImVkaXRTdGF0ZT10cnVlXCIgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5ld1F1ZXJ5U3RyaW5nXCI+PC9kaXY+PC9saT48L3VsPlxcXG4gICAgICAgPGRpdj57e2VkaXRTdGF0ZSA/IFwiUHJlc3MgcmV0dXJuIG9yIGVudGVyIHRvIGFkZCBxdWVyeSBzdHJpbmcuXCIgOiBcIkNsaWNrIHRvIGFkZCBxdWVyeSBzdHJpbmdzLlwifX08L2Rpdj5cXFxuICAgICAgIDwvZGl2PlxcXG4gICAgICA8L2Rpdj4nLFxuICAgIHNjb3BlOiB7aXRlbTpcIj1cIiwgc2Nyb2xsVG86XCImXCJ9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgVmlldyA9IChmdW5jdGlvbihWaWV3KXtcbiAgICAgICAgICBWaWV3W1ZpZXdbXCJERUZBVUxUXCJdPTBdID0gXCJERUZBVUxUXCI7XG4gICAgICAgICAgVmlld1tWaWV3W1wiRURJVFwiXT0xXSA9IFwiRURJVFwiO1xuICAgICAgICAgIHJldHVybiBWaWV3O1xuICAgICAgICB9KSh7fSk7XG4gICAgICAgIHNjb3BlLmVkaXRTdGF0ZSA9IGZhbHNlO1xuICAgICAgICB3aW5kb3cucXNfZGVidWcgPSBzY29wZTtcbiAgICAgICAgdmFyIHBvaW50ZXIgPSBzY29wZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHBvaW50ZXIgPSBwb2ludGVyLiRwYXJlbnQ7XG4gICAgICAgIH0gd2hpbGUgKHBvaW50ZXIuc2Nyb2xsVG8gPT09IHVuZGVmaW5lZCk7XG5cbiAgICAgICAgc2NvcGUuc2Nyb2xsVG9JdGVtID0gZnVuY3Rpb24ocGFyYW0pe1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBwb2ludGVyLnNjcm9sbFRvKHBhcmFtLTEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSw1MCk7XG5cblxuICAgICAgICB9XG4gICAgICAgIHNjb3BlLnZpZXcgPSBWaWV3LkRFRkFVTFQ7XG5cblxuICAgICAgICBzY29wZS5jcmVhdGVOZXdLZXl1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaWYoL1xcP3xcXCYvLnRlc3Qoc2NvcGUubmV3UXVlcnlTdHJpbmdbMF0pKSB7XG4gICAgICAgICAgICBzY29wZS5uZXdRdWVyeVN0cmluZyA9IHNjb3BlLm5ld1F1ZXJ5U3RyaW5nLnN1YnN0cigxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgalF1ZXJ5KGVsKS5maW5kKFwiLnRhZ3MtbGF5b3V0IGlucHV0XCIpLm9uKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24oZXZ0KXtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKGV2dC5rZXlDb2RlID09IDEzICYmIHNjb3BlLm5ld1F1ZXJ5U3RyaW5nLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgaWYoc2NvcGUubmV3UXVlcnlTdHJpbmcuaW5kZXhPZihcIiZcIik+LTEpe1xuICAgICAgICAgICAgICAgIHZhciBzdWJJdGVtcyA9IHNjb3BlLm5ld1F1ZXJ5U3RyaW5nLnNwbGl0KFwiJlwiKTtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPTA7IGk8c3ViSXRlbXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgaWYoc3ViSXRlbXNbaV0ubGVuZ3RoPjAgJiYgc2NvcGUuaXRlbS5uZXcuc2VhcmNoUGFyYW1zLl9lbnRyaWVzLmluZGV4T2Yoc3ViSXRlbXNbaV0pPT0tMSl7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoc3ViSXRlbXNbaV0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZihzY29wZS5pdGVtLm5ldy5zZWFyY2hQYXJhbXMuX2VudHJpZXMuaW5kZXhPZihzY29wZS5uZXdRdWVyeVN0cmluZy50b1N0cmluZygpKT09LTEpIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0ubmV3LnNlYXJjaFBhcmFtcy5hcHBlbmQoc2NvcGUubmV3UXVlcnlTdHJpbmcudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzY29wZS5pdGVtLm5ldy5zZWFyY2hQYXJhbXMudXBkYXRlU2VhcmNoUHJvcCgpO1xuICAgICAgICAgICAgICBzY29wZS5pdGVtLmlzTGlua0NvbXBsZXRlKCk7XG4gICAgICAgICAgICAgIHNjb3BlLm5ld1F1ZXJ5U3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgLy8gc2NvcGUuZWRpdFN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cblxuICAgICAgICBqUXVlcnkoZWwpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICBqUXVlcnkoZWwpLmZpbmQoXCIudGFncy1sYXlvdXQgaW5wdXRcIikuZm9jdXMoKTtcblxuXG4gICAgICAgIH0pO1xuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICBqUXVlcnkoZWwpLmZpbmQoXCIudGFncy1sYXlvdXQgaW5wdXRcIikub2ZmKFwia2V5cHJlc3NcIik7XG4gICAgICAgICAgalF1ZXJ5KGVsKS5maW5kKFwiLnRhZ3MtbGF5b3V0IGlucHV0XCIpLm9mZihcImtleXVwXCIpO1xuICAgICAgICAgIGpRdWVyeShlbCkub2ZmKFwiY2xpY2tcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpLmRpcmVjdGl2ZSgnc2Nyb2xsc3B5JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkFcIixcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHIpe1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoc2NvcGUuYWN0aXZlTGlua0lkID09PSB1bmRlZmluZWQpIHNjb3BlLmFjdGl2ZUxpbmtJZCA9IDE7XG4gICAgICAgIGlmKHNjb3BlLmlzU2Nyb2xsaW5nID09PSB1bmRlZmluZWQpIHNjb3BlLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG5cblxuICAgICAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaWYoc2NvcGUuaXNTY3JvbGxpbmcgJiYgc2NvcGUuaXNTY3JvbGxpbmcgPT0xKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgdmFyIGlkID0galF1ZXJ5KGVsKS5hdHRyKFwiaWRcIikuc3BsaXQoXCItXCIpLnBvcCgpO1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2NvcGUuYWN0aXZlTGlua0lkID1pZCoxO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG4gICAgICAgIGpRdWVyeShlbCkudmlzaWJpbGl0eSh7XG4gICAgICAgICAgICBvbmNlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzaXplIHdoZW4gbmV3IGNvbnRlbnQgbG9hZHNcbiAgICAgICAgICAgIG9ic2VydmVDaGFuZ2VzOiB0cnVlLFxuICAgICAgICAgICAgLy8gbG9hZCBjb250ZW50IG9uIGJvdHRvbSBlZGdlIHZpc2libGVcbiAgICAgICAgICAgIG9uVG9wVmlzaWJsZTogZnVuYyxcbiAgICAgICAgICAgIG9uVG9wUGFzc2VkUmV2ZXJzZTogZnVuY1xuXG5cbiAgICAgICAgICB9KTtcblxuXG5cblxuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vJChlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICAgIGpRdWVyeShlbCkudmlzaWJpbGl0eShcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpXG4uZGlyZWN0aXZlKCdzaW1wbGVBY2NvcmRpb24nLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHNjb3BlOntoZWFkaW5nOlwiQFwiLHNob3c6IFwiPVwifSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgbmctY2xhc3M9XCJ7ZXhwYW5kZWQ6IHNob3csIGNvbGxhcHNlZDogIXNob3d9XCI+PGRpdiBuZy1jbGljaz1cInRvZ2dsZVBhbmUoKVwiIGNsYXNzPVwiYWNjb3JkaW9uLXRpdGxlXCI+XFxcbiAgICA8aSBjbGFzcz1cImNoZXZyb24gcmlnaHQgaWNvblwiIG5nLXNob3c9XCIhc2hvd1wiIGFsdD1cIlsrXVwiPjwvaT5cXFxuICAgIDxpIGNsYXNzPVwiY2hldnJvbiBkb3duIGljb25cIiBuZy1zaG93PVwic2hvd1wiIGFsdD1cIlstXVwiPjwvaT5cXFxuICAgICA8c3Bhbj57e2hlYWRpbmd9fTwvc3Bhbj48L2Rpdj48bmctdHJhbnNjbHVkZSBuZy1zaG93PVwic2hvd1wiPjwvbmctdHJhbnNjbHVkZT48L2Rpdj4nLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICBzY29wZS5zaG93ID0gZmFsc2U7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBzY29wZS50b2dnbGVQYW5lID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICBzY29wZS5zaG93ID0gIXNjb3BlLnNob3c7XG4gICAgICAgIH07XG4gICAgICAgIGpRdWVyeS5leHRlbmQoalF1ZXJ5KGVsKSx7XCJ0b2dnbGVBY2NvcmRpb25cIjogZnVuY3Rpb24oKXtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNjb3BlLnRvZ2dsZVBhbmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfX0pO1xuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBqUXVlcnkoZWwpLnBvcHVwKFwiZGVzdHJveVwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnRU1MTWFrZXInKS5kaXJlY3RpdmUoJ3N0aWNreScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCl7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogXCJBXCIsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKXtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGpRdWVyeShlbClcbiAgLnN0aWNreSh7XG4gICAgY29udGV4dDogJyNzdGlja3lwYXJlbnQnXG4gIH0pXG47XG5cbiAgdmFyIHJlc2l6ZVRpbWVyID0gbnVsbDtcblxuICB2YXIgUmVzaXplU3RpY2t5ID0gZnVuY3Rpb24oKXtcbiAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHZhciBhID0gJCgnI3JpZ2h0LXBhbmVsJyk7XG4gICAgICB2YXIgYiA9IGEuZmluZCgnLnVpLnNlY29uZGFyeS52ZXJ0aWNhbC5wb2ludGluZy5tZW51Jyk7XG4gICAgICB2YXIgYyA9IGEuZmluZCgnLm1lc3NhZ2UtYXJlYScpO1xuICAgICAgYVswXS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgLy8gY29uc29sZS5sb2coYS5oZWlnaHQoKSx3aW5kb3cuaW5uZXJIZWlnaHQsMjAwKTtcbiAgICAgIGlmKGFbMF0uY2xpZW50SGVpZ2h0ID4gKHdpbmRvdy5pbm5lckhlaWdodCAtICg3NSs2MCkpICl7XG4gICAgICAgIGFbMF0uc3R5bGUuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gKDc1Kzc1KSArIFwicHhcIjtcbiAgICAgICAgYlswXS5zdHlsZS5oZWlnaHQgPSBhWzBdLmNsaWVudEhlaWdodCAtIGNbMF0uY2xpZW50SGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICBiLmFkZENsYXNzKCdzY3JvbGxpbmcnKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvbyBiaWcnKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYi5yZW1vdmVDbGFzcygnc2Nyb2xsaW5nJyk7XG4gICAgICB9XG4gICAgICBqUXVlcnkoZWwpLnN0aWNreShcInJlZnJlc2hcIik7XG5cbiAgICB9LDMwMCk7XG5cbiAgfTtcblxuXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBSZXNpemVTdGlja3kpO1xuICAgICQod2luZG93KS5vbignc2Nyb2xsJywgUmVzaXplU3RpY2t5KTtcblxuICAgIFJlc2l6ZVN0aWNreSgpO1xuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vJChlbCkucG9wdXAoXCJkZXN0cm95XCIpO1xuICAgICAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZScsIFJlc2l6ZVN0aWNreSk7XG4gICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsJywgUmVzaXplU3RpY2t5KTtcbiAgICAgICAgICBqUXVlcnkoZWwpLnN0aWNreShcImRlc3Ryb3lcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdFTUxNYWtlcicpLmRpcmVjdGl2ZSgndGV4dGFyZWFFeHBhbmQnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpe1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6IFwiQVwiLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cil7XG4gICAgICB2YXIgYXV0b0V4cGFuZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuXG4gICAgICBcdC8vIFJlc2V0IGZpZWxkIGhlaWdodFxuICAgICAgXHRmaWVsZC5zdHlsZS5oZWlnaHQgPSAnaW5oZXJpdCc7XG5cbiAgICAgIFx0Ly8gR2V0IHRoZSBjb21wdXRlZCBzdHlsZXMgZm9yIHRoZSBlbGVtZW50XG4gICAgICBcdHZhciBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZpZWxkKTtcblxuICAgICAgXHQvLyBDYWxjdWxhdGUgdGhlIGhlaWdodFxuICAgICAgXHR2YXIgaGVpZ2h0ID0gcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLXRvcC13aWR0aCcpLCAxMClcbiAgICAgIFx0ICAgICAgICAgICAgICsgcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSwgMTApXG4gICAgICBcdCAgICAgICAgICAgICArIGZpZWxkLnNjcm9sbEhlaWdodFxuICAgICAgXHQgICAgICAgICAgICAgKyBwYXJzZUludChjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpLCAxMClcbiAgICAgIFx0ICAgICAgICAgICAgICsgcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLWJvdHRvbS13aWR0aCcpLCAxMCk7XG5cbiAgICAgIFx0ZmllbGQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcblxuICAgICAgfTtcblxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgJChlbCkuY3NzKFwibWluLWhlaWdodFwiLCBcIjI1cHhcIik7XG4gICAgICAgIGF1dG9FeHBhbmQoJChlbCkuZ2V0KDApKTtcbiAgICAgICAgJChlbCkub24oJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBcdGF1dG9FeHBhbmQoJChlbCkuZ2V0KDApKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuXG5cbiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICQoZWwpLmRyb3Bkb3duKFwiZGVzdHJveVwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuXG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
