angular.module("EMLMaker").controller("MainController",["$scope","saveAs","$routeParams",function(e,n,o){e.UpdateModule=new window.UpdateModule,e.sessionUserEmail="",e.versionNumber=window.CURRENT_VERSION,e.navigateTo=function(e){var n={main:0,links:1,"export":2,"export-html":2,"export-eml":2},o=location.hash.substr(2,location.hash.length);o&&n[e]<=n[o]&&(location.href="#/"+e)},e.blankSlate=function(){e.workspace=new EMLModule.EMLWorkspace("",e)},e.blankSlate(),e.SecureGateway=new SecureGateway(function(){e.blankSlate()},e),e.connectToLive=new AccessOnlineVersion({success:function(){e.$apply(function(){e.connectToLive.headline="Opening online version",e.connectToLive.message="One moment please."})},onerror:function(){e.$apply(function(){e.connectToLive.animate=!1,e.connectToLive.headline="Using offline version",e.connectToLive.message="You are using the offline version of EML Maker."}),setTimeout(function(){e.$apply(function(){e.connectToLive.status="failed",e.SecureGateway.init()})},1e3)}}),e.connectToLive.isLocalMachine()?(e.connectToLive.headline="Checking availability of online version",e.connectToLive.message="If we're able to access the online version, you will be redirected."):e.SecureGateway.init(),e.showNavBar=function(){return"#/login"!=location.hash},e.createNewEML=function(){e.blankSlate(),"#/main"==location.hash?"reload"in location?location.reload():document.location.href=location.href.split("#").shift():location.href="#/main"},e.focusOnMessageCenter=!1,e.scrollTo=function(n){e.isScrolling=1,jQuery("html,body").animate({scrollTop:jQuery("#link-"+(parseInt(n)+1)).offset().top-75},300),setTimeout(function(){e.$apply(function(){e.activeLinkId=parseInt(n)+1,e.isScrolling=-1,n==-1&&(e.focusOnMessageCenter=!0,setTimeout(function(){e.$apply(function(){e.focusOnMessageCenter=!1})},2e3))})},400)}}]);