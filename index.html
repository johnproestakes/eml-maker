<html>
<head>
  <title>EML Maker</title>
  <!-- <link rel="icon" type="image/x-icon" href="http://example.com/favicon.ico" /> -->

  <script src="scripts/js/libs/ace-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/js/libs/md5.js" type="text/javascript"></script>
  <script src="scripts/js/libs/persistjs-min.js" type="text/javascript"></script>

<link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon">
<link rel="icon" href="assets/favicon.ico" type="image/x-icon">
<link rel="icon" type="image/png" href="assets/logo.png" />

<!-- <link rel="icon" type="image/gif" href="http://example.com/favicon.gif" />	 -->
  <link rel="stylesheet" href="scripts/css/libs/semantic.min.css"/>
  <link rel="stylesheet" href="scripts/css/libs/codemirror.css"/>
  <link rel="stylesheet" href="scripts/css/main.css"/>

  <script src="scripts/js/libs/jquery.min.js" type="text/javascript"></script>
  <script src="scripts/js/libs/semantic.min.js" type="text/javascript"></script>
  <script src="scripts/js/libs/angular.min.js" type="text/javascript"></script>
  <script src="scripts/js/libs/angular-route.min.js" type="text/javascript"></script>
  <script src="scripts/js/libs/angular-sanitize.min.js" type="text/javascript"></script>

  <script src="prod/app/app.js" type="text/javascript"></script>
  <script src="prod/app/services.js" type="text/javascript"></script>
  <script src="prod/app/controllers.js" type="text/javascript"></script>
  <script src="prod/app/directives.js" type="text/javascript"></script>
  <script src="prod/app/routes.js" type="text/javascript"></script>


</head>

<body ng-app="EMLMaker" ng-controller="MainController">

  <div class="ui fixed inverted menu" ng-if="showNavBar()">
    <div class="ui container">
      <div class="item"><img src="assets/logo.png"/></div>
      <a href="javascript:angular.noop()" class="item" ng-click="createNewEML()">Start Fresh</a>
      <div class="right menu">
        <div class="narrow-view ui pointing dropdown item" ui-dropdown>
            <i class="content icon"></i>
            <div class="menu">
            <div class="item" ng-click="navigateTo('main')">HTML</div>
            <div class="item" ng-click="navigateTo('links')">Links</div>
            <div class="item" ng-click="navigateTo('export')">Export</div>
            </div>
          </div>
          <div class="item wide-view" style="padding:.5em .5em">
            <div >
              <div class="ui inverted ordered steps" >
                <div class="step" id="step1" ng-click="navigateTo('main')" ng-class="{  completed: data.sourceCode.length>0}">
                  <div class="content">
                    <div class="title">HTML</div>
                    <!-- <div class="description">Choose your shipping options</div> -->
                  </div>
                </div>
                <div class=" step" ng-click="navigateTo('links')" ng-class="{ disabled: data.sourceCode=='', completed: verifyLinkSectionComplete() }">
                  <div class="content">
                    <div class="title">Links</div>
                    <!-- <div class="description">Enter billing information</div> -->
                  </div>
                </div>
                <div class="step" ng-click="navigateTo('export')" ng-class="{ disabled: data.sourceCode=='' && ((data.linkData>1&&!areLinksComplete()) || data.linkData.length==0)}">
                  <div class="content">
                    <div class="title">Review</div>
                    <!-- <div class="description">Verify order details</div> -->
                  </div>
                </div>

              </div>

              </div>
          </div>


          <div class="ui pointing dropdown item" ui-dropdown>
            <span class="truncate" style="width:8em;">{{sessionUserEmail}}</span>
            <i class="dropdown icon"></i>
            <div class="menu">
              <div class="item" ng-click="logOut()">Log off</div>
              </div>
            </div>
        </div>

  </div>
  </div>
  <div style="height: 75px;" ng-if="showNavBar()"></div>

  <section  id="content" class="ui container"  style="padding-top: 1.5em;">



    <div ng-view></div>











    </section>

  </body>
  <script>

  //let this snippet run before your hashchange event binding code
if(!window.HashChangeEvent)(function(){
	var lastURL=document.URL;
	window.addEventListener("hashchange",function(event){
		Object.defineProperty(event,"oldURL",{enumerable:true,configurable:true,value:lastURL});
		Object.defineProperty(event,"newURL",{enumerable:true,configurable:true,value:document.URL});
		lastURL=document.URL;
	});
}());



function locationHashChanged() {
  console.log(location.hash);
  ga('send', 'pageview', {
 'page': location.pathname + location.search  + location.hash
});
}

if ("onhashchange" in window) {
    //alert("The browser supports the hashchange event!");
    window.onhashchange = locationHashChanged;
}


  if(location.href.indexOf("localhost")>-1  || location.href.indexOf('file:') >-1 || location.href.indexOf('johnproestakes.github.io') ==-1){
      window.ga = function(args){
        var output = [];
        for (var i = 0; i < arguments.length; i++) {

          if(typeof arguments[i] === "object"){
            var joiner = [];
            for(var a in arguments[i]){
              if(arguments[i].hasOwnProperty(a)){
                joiner.push(a + ":" + arguments[i][a]);
              }
            }
            arguments[i] = joiner.join(",");
          }

          output.push(arguments[i]);
        }
        console.log("%c GOOGLE ANALYTICS [DEBUG]: "+ output.join(", "), "background-color:"+(arguments[1]=="event" ? "yellow" : "lime"));
      };
    } else {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    }


  ga('create', 'UA-99875123-1', 'auto');
  ga('send', 'pageview');





</script>
</html>
