<html>
<head>
  <title>EML Maker</title>
  <script type="text/javascript">var Dependency;!function(e){var t=function(){function e(e,t,i){void 0===e&&(e=""),void 0===i&&(i=[]),this.id=e,this.href=t.href,this.requires=i,this.if=void 0===t.if||t.if}return e}();e.script=t}(Dependency||(Dependency={}));var DependencyJS=function(){function e(e,t){void 0===t&&(t=function(){}),this.pointer=0,this.manifest=e,this.loaded=[],this.watchers={},this.callback=t,this.mode=location.href.indexOf("localhost")>-1,this.progress=0}return e.prototype.loadedRequired=function(e,t){var i=!0;if(0==t.requires.length);else for(var o in t.requires)e.loaded.indexOf(t.requires[o])==-1&&(i=!1);return i},e.prototype.didComplete=function(){this.callback()},e.prototype.startImport=function(e){var t,i=this,o=e.href,n=o.split("?").shift().split(".").pop();switch(!i.mode||console.time(e.id),n){case"css":t=document.createElement("link"),t.setAttribute("type","text/css"),t.setAttribute("href",o+(location.href.indexOf("localhost")>-1?"?v="+(new Date).getTime():"")),t.setAttribute("rel","stylesheet");break;case"js":t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",o+(location.href.indexOf("localhost")>-1?"?v="+(new Date).getTime():""))}!this.beforeDidLoad||this.beforeDidLoad(e),t.addEventListener("load",function(){!i.afterDidLoad||i.afterDidLoad(e),i.progress=Math.round(i.loaded.length/i.manifest.length*100),i.loaded.push(e.id),!i.mode||console.timeEnd(e.id),i.loaded.length==i.manifest.length&&setTimeout(function(){i.didComplete()},200)}),document.head.appendChild(t)},e.prototype.import=function(){var e=this;this.manifest.forEach(function(t){t.if?e.watchers[t.id]=setInterval(function(){e.loadedRequired(e,t)&&(!e.mode||console.time(t.id),clearInterval(e.watchers[t.id]),e.startImport(t))},5+Math.floor(100*Math.random())):e.loaded.push(t.id)})},e}();</script>
<style id="loadingStyle">
body {
  margin:0;
  background-color: #DADADA !important;
  background-image: url(assets/bg.png) !important;
  background-repeat:no-repeat; background-position: top right !important;
  }
  #loading-text{font-family:arial,helvetica;line-height: 1.5; font-size: 12px;padding:1em 0; text-align:center;}</style>

<script type="text/javascript">
var DJS = new DependencyJS([
    new Dependency.script("aceEditor", {href:"scripts/js/libs/ace-noconflict/ace.js"}, []),
    new Dependency.script("md5", {href:"scripts/js/libs/md5.js"}, []),
    new Dependency.script("persistJs", {href:"scripts/js/libs/persistjs-min.js"}, []),
    new Dependency.script("semanticCss", {href:"scripts/css/libs/semantic.min.css"}, []),
    new Dependency.script("codeMirrorCss", {href:"scripts/css/libs/codemirror.css"}, ["directivesJs"]),
    new Dependency.script("mainCss", {href:"scripts/css/main.css"}, ["semanticCss"]),
    new Dependency.script("jqueryJs", {href:"scripts/js/libs/jquery.min.js"}, []),
    new Dependency.script("semanticJs", {href:"scripts/js/libs/semantic.min.js"}, ["jqueryJs"]),
    new Dependency.script("EMLLinkAIEngine", {href:"scripts/js/EMLLinkAIEngine.js"}, []),
    new Dependency.script("EMLEmailAIEngine", {href:"scripts/js/EMLEmailAIEngine.js"}, []),
    new Dependency.script("EMLMakerModule", {href:"scripts/js/EMLModule.js"}, ["EMLLinkAIEngine", "EMLEmailAIEngine"]),
    new Dependency.script("angularJs", {href:"scripts/js/libs/angular.min.js"}, ["EMLMakerModule","aceEditor","md5","persistJs","semanticJs"]),
    new Dependency.script("angularRouteJs", {href:"scripts/js/libs/angular-route.min.js"}, ["angularJs"]),
    new Dependency.script("angularSanitize", {href:"scripts/js/libs/angular-sanitize.min.js"}, ["angularJs"]),
    new Dependency.script("appJs", {href:"prod/app/app.js"}, ["angularSanitize","angularRouteJs"]),
    new Dependency.script("servicesJs", {href:"prod/app/services.js"}, ["appJs"]),
    new Dependency.script("controllersJs", {href:"prod/app/controllers.js"}, ["servicesJs"]),
    new Dependency.script("directivesJs", {href:"prod/app/directives.js"}, ["controllersJs"]),
    new Dependency.script("routesJs", {href:"prod/app/routes.js"}, ["directivesJs"]),
    // new Dependency.script("", {href:""}, []),

  ], function(){
    document.getElementById('loading-text').innerHTML = "Loading 100% ";
    setTimeout(function(){

      angular.element(function() {

        angular.bootstrap(document, ['EMLMaker']);
      });
      document.getElementById('hide-while-loading').style.visibility = "visible";
      document.getElementById('loading-text').style.display= "none";
      var s = document.getElementById('loadingStyle');
      s.parentNode.removeChild(s);
      //remove loader;
      console.log('end');

    },100);

  });
  DJS.beforeDidLoad = function(item){ };
  DJS.afterDidLoad = function(item){
    // document.getElementById('loading-text').innerHTML = "Loaded "+item.href + " ...";
    document.getElementById('loading-text').innerHTML = "Loading "+Math.round(DJS.progress)+ "% ";
  };
  DJS.import();
  </script>

  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" href="assets/logo.png" />

</head>

<body ng-controller="MainController">
  <div id="loading-text">

    </div>
  <div style="visibility:hidden" id="hide-while-loading">
  <div class="ui fixed inverted menu" ng-if="showNavBar()">
    <div class="ui container">
      <div class="item"><img src="assets/logo.png"/></div>
      <a href="javascript:angular.noop()" class="item" ng-click="createNewEML()">Start Fresh</a>
      <div class="right menu">
        <div class="narrow-view ui pointing dropdown item" ui-dropdown>
            <i class="content icon"></i>
            <div class="menu">
            <div class="item" ng-click="navigateTo('main')">HTML</div>
            <div class="item" ng-click="navigateTo('links')">Review</div>
            <div class="item" ng-click="navigateTo('export')">Export</div>
            </div>
          </div>
          <div class="item wide-view" style="padding:.5em .5em">
            <div >
              <div class="ui inverted ordered steps" >
                <div class="step" id="step1" ng-click="navigateTo('main')" ng-class="{  completed: workspace.sourceCode.length>0}">
                  <div class="content">
                    <div class="title">HTML</div>
                    <!-- <div class="description">Choose your shipping options</div> -->
                  </div>
                </div>
                <div class=" step" ng-click="navigateTo('links')" ng-class="{ disabled: workspace.sourceCode=='', completed: workspace.verifyLinkSectionComplete() }">
                  <div class="content">
                    <div class="title">Review</div>
                    <!-- <div class="description">Enter billing information</div> -->
                  </div>
                </div>
                <div class="step" ng-click="navigateTo('export')" ng-class="{ disabled: workspace.sourceCode=='' && ((workspace.linkData>1&&!workspace.areLinksComplete()) || workspace.linkData.length==0)}">
                  <div class="content">
                    <div class="title">Export</div>
                    <!-- <div class="description">Verify order details</div> -->
                  </div>
                </div>

              </div>

              </div>
          </div>


          <div class="ui pointing dropdown item" ui-dropdown>
            <span class="truncate" style="width:8em;">{{SecureGateway.sessionUserEmail}}</span>
            <i class="dropdown icon"></i>
            <div class="menu">
              <div class="item" ng-click="SecureGateway.logOut()">Log off</div>
              </div>
            </div>
        </div>

  </div>
  </div>
  <div style="height: 75px;" ng-if="showNavBar()"></div>

  <section  id="content" class="ui container"  style="padding-top: 1.5em;">



    <div ng-view></div>











    </section>

  </body>
  <script>

  //let this snippet run before your hashchange event binding code
if(!window.HashChangeEvent)(function(){
	var lastURL=document.URL;
	window.addEventListener("hashchange",function(event){
		Object.defineProperty(event,"oldURL",{enumerable:true,configurable:true,value:lastURL});
		Object.defineProperty(event,"newURL",{enumerable:true,configurable:true,value:document.URL});
		lastURL=document.URL;
	});
}());


function locationHashChanged() {
  console.log(location.hash);
  ga('send', 'pageview', {
 'page': location.pathname + location.search  + location.hash
});
}

if ("onhashchange" in window) {
    //alert("The browser supports the hashchange event!");
    window.onhashchange = locationHashChanged;
}


  if(location.href.indexOf("localhost")>-1  || location.href.indexOf('file:') >-1 || location.href.indexOf('johnproestakes.github.io') ==-1){
      window.ga = function(args){
        var output = [];
        for (var i = 0; i < arguments.length; i++) {

          if(typeof arguments[i] === "object"){
            var joiner = [];
            for(var a in arguments[i]){
              if(arguments[i].hasOwnProperty(a)){
                joiner.push(a + ":" + arguments[i][a]);
              }
            }
            arguments[i] = joiner.join(",");
          }

          output.push(arguments[i]);
        }
        console.log("%c GOOGLE ANALYTICS [DEBUG]: "+ output.join(", "), "background-color:"+(arguments[1]=="event" ? "yellow" : "lime"));
      };
    } else {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    }


  ga('create', 'UA-99875123-1', 'auto');
  ga('send', 'pageview');





</script>
</html>
